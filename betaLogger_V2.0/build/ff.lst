ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"ff.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.mem_cpy,"ax",%progbits
  16              		.align	1
  17              		.syntax unified
  18              		.thumb
  19              		.thumb_func
  20              		.fpu softvfp
  22              	mem_cpy:
  23              	.LFB66:
  24              		.file 1 "Middlewares/Third_Party/FatFs/Src/ff.c"
   1:Middlewares/Third_Party/FatFs/Src/ff.c **** /*----------------------------------------------------------------------------/
   2:Middlewares/Third_Party/FatFs/Src/ff.c **** /  FatFs - FAT file system module  R0.11                 (C)ChaN, 2015
   3:Middlewares/Third_Party/FatFs/Src/ff.c **** /-----------------------------------------------------------------------------/
   4:Middlewares/Third_Party/FatFs/Src/ff.c **** / FatFs module is a free software that opened under license policy of
   5:Middlewares/Third_Party/FatFs/Src/ff.c **** / following conditions.
   6:Middlewares/Third_Party/FatFs/Src/ff.c **** /
   7:Middlewares/Third_Party/FatFs/Src/ff.c **** / Copyright (C) 2015, ChaN, all right reserved.
   8:Middlewares/Third_Party/FatFs/Src/ff.c **** /
   9:Middlewares/Third_Party/FatFs/Src/ff.c **** / 1. Redistributions of source code must retain the above copyright notice,
  10:Middlewares/Third_Party/FatFs/Src/ff.c **** /    this condition and the following disclaimer.
  11:Middlewares/Third_Party/FatFs/Src/ff.c **** /
  12:Middlewares/Third_Party/FatFs/Src/ff.c **** / This software is provided by the copyright holder and contributors "AS IS"
  13:Middlewares/Third_Party/FatFs/Src/ff.c **** / and any warranties related to this software are DISCLAIMED.
  14:Middlewares/Third_Party/FatFs/Src/ff.c **** / The copyright owner or contributors be NOT LIABLE for any damages caused
  15:Middlewares/Third_Party/FatFs/Src/ff.c **** / by use of this software.
  16:Middlewares/Third_Party/FatFs/Src/ff.c **** /-----------------------------------------------------------------------------/
  17:Middlewares/Third_Party/FatFs/Src/ff.c **** / Feb 26,'06 R0.00  Prototype.
  18:Middlewares/Third_Party/FatFs/Src/ff.c **** /
  19:Middlewares/Third_Party/FatFs/Src/ff.c **** / Apr 29,'06 R0.01  First stable version.
  20:Middlewares/Third_Party/FatFs/Src/ff.c **** /
  21:Middlewares/Third_Party/FatFs/Src/ff.c **** / Jun 01,'06 R0.02  Added FAT12 support.
  22:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Removed unbuffered mode.
  23:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed a problem on small (<32M) partition.
  24:Middlewares/Third_Party/FatFs/Src/ff.c **** / Jun 10,'06 R0.02a Added a configuration option (_FS_MINIMUM).
  25:Middlewares/Third_Party/FatFs/Src/ff.c **** /
  26:Middlewares/Third_Party/FatFs/Src/ff.c **** / Sep 22,'06 R0.03  Added f_rename().
  27:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Changed option _FS_MINIMUM to _FS_MINIMIZE.
  28:Middlewares/Third_Party/FatFs/Src/ff.c **** / Dec 11,'06 R0.03a Improved cluster scan algorithm to write files fast.
  29:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed f_mkdir() creates incorrect directory on FAT32.
  30:Middlewares/Third_Party/FatFs/Src/ff.c **** /
  31:Middlewares/Third_Party/FatFs/Src/ff.c **** / Feb 04,'07 R0.04  Supported multiple drive system.
  32:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Changed some interfaces for multiple drive system.
  33:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Changed f_mountdrv() to f_mount().
  34:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Added f_mkfs().
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 2


  35:Middlewares/Third_Party/FatFs/Src/ff.c **** / Apr 01,'07 R0.04a Supported multiple partitions on a physical drive.
  36:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Added a capability of extending file size to f_lseek().
  37:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Added minimization level 3.
  38:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed an endian sensitive code in f_mkfs().
  39:Middlewares/Third_Party/FatFs/Src/ff.c **** / May 05,'07 R0.04b Added a configuration option _USE_NTFLAG.
  40:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Added FSINFO support.
  41:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed DBCS name can result FR_INVALID_NAME.
  42:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed short seek (<= csize) collapses the file object.
  43:Middlewares/Third_Party/FatFs/Src/ff.c **** /
  44:Middlewares/Third_Party/FatFs/Src/ff.c **** / Aug 25,'07 R0.05  Changed arguments of f_read(), f_write() and f_mkfs().
  45:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed f_mkfs() on FAT32 creates incorrect FSINFO.
  46:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed f_mkdir() on FAT32 creates incorrect directory.
  47:Middlewares/Third_Party/FatFs/Src/ff.c **** / Feb 03,'08 R0.05a Added f_truncate() and f_utime().
  48:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed off by one error at FAT sub-type determination.
  49:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed btr in f_read() can be mistruncated.
  50:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed cached sector is not flushed when create and close without write.
  51:Middlewares/Third_Party/FatFs/Src/ff.c **** /
  52:Middlewares/Third_Party/FatFs/Src/ff.c **** / Apr 01,'08 R0.06  Added fputc(), fputs(), fprintf() and fgets().
  53:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Improved performance of f_lseek() on moving to the same or following cluster.
  54:Middlewares/Third_Party/FatFs/Src/ff.c **** /
  55:Middlewares/Third_Party/FatFs/Src/ff.c **** / Apr 01,'09 R0.07  Merged Tiny-FatFs as a configuration option. (_FS_TINY)
  56:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Added long file name feature.
  57:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Added multiple code page feature.
  58:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Added re-entrancy for multitask operation.
  59:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Added auto cluster size selection to f_mkfs().
  60:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Added rewind option to f_readdir().
  61:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Changed result code of critical errors.
  62:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Renamed string functions to avoid name collision.
  63:Middlewares/Third_Party/FatFs/Src/ff.c **** / Apr 14,'09 R0.07a Separated out OS dependent code on reentrant cfg.
  64:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Added multiple sector size feature.
  65:Middlewares/Third_Party/FatFs/Src/ff.c **** / Jun 21,'09 R0.07c Fixed f_unlink() can return FR_OK on error.
  66:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed wrong cache control in f_lseek().
  67:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Added relative path feature.
  68:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Added f_chdir() and f_chdrive().
  69:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Added proper case conversion to extended character.
  70:Middlewares/Third_Party/FatFs/Src/ff.c **** / Nov 03,'09 R0.07e Separated out configuration options from ff.h to ffconf.h.
  71:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed f_unlink() fails to remove a sub-directory on _FS_RPATH.
  72:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed name matching error on the 13 character boundary.
  73:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Added a configuration option, _LFN_UNICODE.
  74:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Changed f_readdir() to return the SFN with always upper case on non-LFN cfg.
  75:Middlewares/Third_Party/FatFs/Src/ff.c **** /
  76:Middlewares/Third_Party/FatFs/Src/ff.c **** / May 15,'10 R0.08  Added a memory configuration option. (_USE_LFN = 3)
  77:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Added file lock feature. (_FS_SHARE)
  78:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Added fast seek feature. (_USE_FASTSEEK)
  79:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Changed some types on the API, XCHAR->TCHAR.
  80:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Changed .fname in the FILINFO structure on Unicode cfg.
  81:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   String functions support UTF-8 encoding files on Unicode cfg.
  82:Middlewares/Third_Party/FatFs/Src/ff.c **** / Aug 16,'10 R0.08a Added f_getcwd().
  83:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Added sector erase feature. (_USE_ERASE)
  84:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Moved file lock semaphore table from fs object to the bss.
  85:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed a wrong directory entry is created on non-LFN cfg when the given name con
  86:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed f_mkfs() creates wrong FAT32 volume.
  87:Middlewares/Third_Party/FatFs/Src/ff.c **** / Jan 15,'11 R0.08b Fast seek feature is also applied to f_read() and f_write().
  88:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   f_lseek() reports required table size on creating CLMP.
  89:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Extended format syntax of f_printf().
  90:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Ignores duplicated directory separators in given path name.
  91:Middlewares/Third_Party/FatFs/Src/ff.c **** /
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 3


  92:Middlewares/Third_Party/FatFs/Src/ff.c **** / Sep 06,'11 R0.09  f_mkfs() supports multiple partition to complete the multiple partition feature
  93:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Added f_fdisk().
  94:Middlewares/Third_Party/FatFs/Src/ff.c **** / Aug 27,'12 R0.09a Changed f_open() and f_opendir() reject null object pointer to avoid crash.
  95:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Changed option name _FS_SHARE to _FS_LOCK.
  96:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed assertion failure due to OS/2 EA on FAT12/16 volume.
  97:Middlewares/Third_Party/FatFs/Src/ff.c **** / Jan 24,'13 R0.09b Added f_setlabel() and f_getlabel().
  98:Middlewares/Third_Party/FatFs/Src/ff.c **** /
  99:Middlewares/Third_Party/FatFs/Src/ff.c **** / Oct 02,'13 R0.10  Added selection of character encoding on the file. (_STRF_ENCODE)
 100:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Added f_closedir().
 101:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Added forced full FAT scan for f_getfree(). (_FS_NOFSINFO)
 102:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Added forced mount feature with changes of f_mount().
 103:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Improved behavior of volume auto detection.
 104:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Improved write throughput of f_puts() and f_printf().
 105:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Changed argument of f_chdrive(), f_mkfs(), disk_read() and disk_write().
 106:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed f_write() can be truncated when the file size is close to 4GB.
 107:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed f_open(), f_mkdir() and f_setlabel() can return incorrect error code.
 108:Middlewares/Third_Party/FatFs/Src/ff.c **** / Jan 15,'14 R0.10a Added arbitrary strings as drive number in the path name. (_STR_VOLUME_ID)
 109:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Added a configuration option of minimum sector size. (_MIN_SS)
 110:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   2nd argument of f_rename() can have a drive number and it will be ignored.
 111:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed f_mount() with forced mount fails when drive number is >= 1.
 112:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed f_close() invalidates the file object without volume lock.
 113:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed f_closedir() returns but the volume lock is left acquired.
 114:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed creation of an entry with LFN fails on too many SFN collisions.
 115:Middlewares/Third_Party/FatFs/Src/ff.c **** / May 19,'14 R0.10b Fixed a hard error in the disk I/O layer can collapse the directory entry.
 116:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed LFN entry is not deleted on delete/rename an object with lossy converted 
 117:Middlewares/Third_Party/FatFs/Src/ff.c **** / Nov  9,'14 R0.10c Added a configuration option for the platforms without RTC. (_FS_NORTC)
 118:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed volume label created by Mac OS X cannot be retrieved with f_getlabel(). (
 119:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed a potential problem of FAT access that can appear on disk error.
 120:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed null pointer dereference on attempting to delete the root direcotry. (app
 121:Middlewares/Third_Party/FatFs/Src/ff.c **** / Feb 02,'15 R0.11  Added f_findfirst() and f_findnext(). (_USE_FIND)
 122:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed f_unlink() does not remove cluster chain of the file. (appeared at R0.10c
 123:Middlewares/Third_Party/FatFs/Src/ff.c **** /                   Fixed _FS_NORTC option does not work properly. (appeared at R0.10c)
 124:Middlewares/Third_Party/FatFs/Src/ff.c **** /---------------------------------------------------------------------------*/
 125:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 126:Middlewares/Third_Party/FatFs/Src/ff.c **** #include "ff.h"			/* Declarations of FatFs API */
 127:Middlewares/Third_Party/FatFs/Src/ff.c **** #include "diskio.h"		/* Declarations of disk I/O functions */
 128:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 129:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 130:Middlewares/Third_Party/FatFs/Src/ff.c **** /*--------------------------------------------------------------------------
 131:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 132:Middlewares/Third_Party/FatFs/Src/ff.c ****    Module Private Definitions
 133:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 134:Middlewares/Third_Party/FatFs/Src/ff.c **** ---------------------------------------------------------------------------*/
 135:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 136:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FATFS != 32020	/* Revision ID */
 137:Middlewares/Third_Party/FatFs/Src/ff.c **** #error Wrong include file (ff.h).
 138:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 139:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 140:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 141:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Reentrancy related */
 142:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_REENTRANT
 143:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN == 1
 144:Middlewares/Third_Party/FatFs/Src/ff.c **** #error Static LFN work area cannot be used at thread-safe configuration
 145:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 146:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	ENTER_FF(fs)		{ if (!lock_fs(fs)) return FR_TIMEOUT; }
 147:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	LEAVE_FF(fs, res)	{ unlock_fs(fs, res); return res; }
 148:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 4


 149:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	ENTER_FF(fs)
 150:Middlewares/Third_Party/FatFs/Src/ff.c **** #define LEAVE_FF(fs, res)	return res
 151:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 152:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 153:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	ABORT(fs, res)		{ fp->err = (BYTE)(res); LEAVE_FF(fs, res); }
 154:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 155:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 156:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Definitions of sector size */
 157:Middlewares/Third_Party/FatFs/Src/ff.c **** #if (_MAX_SS < _MIN_SS) || (_MAX_SS != 512 && _MAX_SS != 1024 && _MAX_SS != 2048 && _MAX_SS != 4096
 158:Middlewares/Third_Party/FatFs/Src/ff.c **** #error Wrong sector size configuration
 159:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 160:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _MAX_SS == _MIN_SS
 161:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	SS(fs)	((UINT)_MAX_SS)	/* Fixed sector size */
 162:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
 163:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	SS(fs)	((fs)->ssize)	/* Variable sector size */
 164:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 165:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 166:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 167:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Timestamp feature */
 168:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_NORTC == 1
 169:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _NORTC_YEAR < 1980 || _NORTC_YEAR > 2107 || _NORTC_MON < 1 || _NORTC_MON > 12 || _NORTC_MDAY < 
 170:Middlewares/Third_Party/FatFs/Src/ff.c **** #error Invalid _FS_NORTC settings
 171:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 172:Middlewares/Third_Party/FatFs/Src/ff.c **** #define GET_FATTIME()	((DWORD)(_NORTC_YEAR - 1980) << 25 | (DWORD)_NORTC_MON << 21 | (DWORD)_NORTC_
 173:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
 174:Middlewares/Third_Party/FatFs/Src/ff.c **** #define GET_FATTIME()	get_fattime()
 175:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 176:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 177:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 178:Middlewares/Third_Party/FatFs/Src/ff.c **** /* File access control feature */
 179:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_LOCK
 180:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_READONLY
 181:Middlewares/Third_Party/FatFs/Src/ff.c **** #error _FS_LOCK must be 0 at read-only configuration
 182:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 183:Middlewares/Third_Party/FatFs/Src/ff.c **** typedef struct {
 184:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FATFS *fs;		/* Object ID 1, volume (NULL:blank entry) */
 185:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD clu;		/* Object ID 2, directory (0:root) */
 186:Middlewares/Third_Party/FatFs/Src/ff.c **** 	WORD idx;		/* Object ID 3, directory index */
 187:Middlewares/Third_Party/FatFs/Src/ff.c **** 	WORD ctr;		/* Object open counter, 0:none, 0x01..0xFF:read mode open count, 0x100:write mode */
 188:Middlewares/Third_Party/FatFs/Src/ff.c **** } FILESEM;
 189:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 190:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 191:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 192:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 193:Middlewares/Third_Party/FatFs/Src/ff.c **** /* DBCS code ranges and SBCS extend character conversion table */
 194:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 195:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _CODE_PAGE == 932	/* Japanese Shift-JIS */
 196:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0x81	/* DBC 1st byte range 1 start */
 197:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1E	0x9F	/* DBC 1st byte range 1 end */
 198:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF2S	0xE0	/* DBC 1st byte range 2 start */
 199:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF2E	0xFC	/* DBC 1st byte range 2 end */
 200:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DS1S	0x40	/* DBC 2nd byte range 1 start */
 201:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DS1E	0x7E	/* DBC 2nd byte range 1 end */
 202:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DS2S	0x80	/* DBC 2nd byte range 2 start */
 203:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DS2E	0xFC	/* DBC 2nd byte range 2 end */
 204:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 205:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 936	/* Simplified Chinese GBK */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 5


 206:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0x81
 207:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1E	0xFE
 208:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DS1S	0x40
 209:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DS1E	0x7E
 210:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DS2S	0x80
 211:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DS2E	0xFE
 212:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 213:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 949	/* Korean */
 214:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0x81
 215:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1E	0xFE
 216:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DS1S	0x41
 217:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DS1E	0x5A
 218:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DS2S	0x61
 219:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DS2E	0x7A
 220:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DS3S	0x81
 221:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DS3E	0xFE
 222:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 223:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 950	/* Traditional Chinese Big5 */
 224:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0x81
 225:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1E	0xFE
 226:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DS1S	0x40
 227:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DS1E	0x7E
 228:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DS2S	0xA1
 229:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DS2E	0xFE
 230:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 231:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 437	/* U.S. (OEM) */
 232:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0
 233:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F,0x9
 234:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 235:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 236:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 237:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 238:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 720	/* Arabic (OEM) */
 239:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0
 240:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _EXCVT {0x80,0x81,0x45,0x41,0x84,0x41,0x86,0x43,0x45,0x45,0x45,0x49,0x49,0x8D,0x8E,0x8F,0x9
 241:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 242:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 243:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 244:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 245:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 737	/* Greek (OEM) */
 246:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0
 247:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 248:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0xAA,0x92,0x93,0x94,0x95,0x96,0xB0,0xB1,0xB2,
 249:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 250:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0x97,0xEA,0xEB,0xEC,0xE4,0xED,0xEE,0xE7,0xE8,0xF1,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 251:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 252:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 775	/* Baltic (OEM) */
 253:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0
 254:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _EXCVT {0x80,0x9A,0x91,0xA0,0x8E,0x95,0x8F,0x80,0xAD,0xED,0x8A,0x8A,0xA1,0x8D,0x8E,0x8F,0x9
 255:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xA0,0xA1,0xE0,0xA3,0xA3,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 256:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xB5,0xB6,0xB7,
 257:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE3,0xE8,0xE8,0xEA,0xEA,0xEE,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 258:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 259:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 850	/* Multilingual Latin 1 (OEM) */
 260:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0
 261:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0xDE,0x8E,0x8F,0x9
 262:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 6


 263:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 264:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE7,0xE9,0xEA,0xEB,0xED,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 265:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 266:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 852	/* Latin 2 (OEM) */
 267:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0
 268:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xDE,0x8F,0x80,0x9D,0xD3,0x8A,0x8A,0xD7,0x8D,0x8E,0x8F,0x9
 269:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA4,0xA4,0xA6,0xA6,0xA8,0xA8,0xAA,0x8D,0xAC,0xB8,0xAE,0xAF,0xB0,0xB1,0xB2,
 270:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC6,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD2,
 271:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE3,0xD5,0xE6,0xE6,0xE8,0xE9,0xE8,0xEB,0xED,0xED,0xDD,0xEF,0xF0,0xF1,0xF2,
 272:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 273:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 855	/* Cyrillic (OEM) */
 274:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0
 275:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _EXCVT {0x81,0x81,0x83,0x83,0x85,0x85,0x87,0x87,0x89,0x89,0x8B,0x8B,0x8D,0x8D,0x8F,0x8F,0x9
 276:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xA1,0xA1,0xA3,0xA3,0xA5,0xA5,0xA7,0xA7,0xA9,0xA9,0xAB,0xAB,0xAD,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 277:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD3,
 278:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xE0,0xE2,0xE2,0xE4,0xE4,0xE6,0xE6,0xE8,0xE8,0xEA,0xEA,0xEC,0xEC,0xEE,0xEE,0xEF,0xF0,0xF2,0xF2,
 279:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 280:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 857	/* Turkish (OEM) */
 281:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0
 282:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0x98,0x8E,0x8F,0x9
 283:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA6,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 284:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 285:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xDE,0x59,0xEE,0xEF,0xF0,0xF1,0xF2,
 286:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 287:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 858	/* Multilingual Latin 1 + Euro (OEM) */
 288:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0
 289:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0xDE,0x8E,0x8F,0x9
 290:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 291:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD2,
 292:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE7,0xE9,0xEA,0xEB,0xED,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 293:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 294:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 862	/* Hebrew (OEM) */
 295:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0
 296:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 297:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 298:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 299:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 300:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 301:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 866	/* Russian (OEM) */
 302:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0
 303:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 304:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0xB0,0xB1,0xB2,
 305:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 306:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0x90,0x91,0x92,0x93,0x9d,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F,0xF0,0xF0,0xF2,
 307:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 308:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 874	/* Thai (OEM, Windows) */
 309:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0
 310:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 311:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 312:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 313:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 314:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 315:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 1250 /* Central Europe (Windows) */
 316:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0
 317:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 318:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 319:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 7


 320:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 321:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 322:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 1251 /* Cyrillic (Windows) */
 323:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0
 324:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x82,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x8
 325:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xA0,0xA2,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 326:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 327:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 328:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 329:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 1252 /* Latin 1 (Windows) */
 330:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0
 331:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 332:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 333:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 334:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 335:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 336:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 1253 /* Greek (Windows) */
 337:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0
 338:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 339:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 340:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 341:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xE0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xF2,
 342:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 343:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 1254 /* Turkish (Windows) */
 344:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0
 345:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 346:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 347:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 348:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 349:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 350:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 1255 /* Hebrew (Windows) */
 351:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0
 352:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 353:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 354:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 355:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 356:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 357:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 1256 /* Arabic (Windows) */
 358:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0
 359:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 360:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 361:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 362:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0x41,0xE1,0x41,0xE3,0xE4,0xE5,0xE6,0x43,0x45,0x45,0x45,0x45,0xEC,0xED,0x49,0x49,0xF0,0xF1,0xF2,
 363:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 364:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 1257 /* Baltic (Windows) */
 365:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0
 366:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 367:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 368:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 369:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 370:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 371:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 1258 /* Vietnam (OEM, Windows) */
 372:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0
 373:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 374:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 375:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 376:Middlewares/Third_Party/FatFs/Src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xEC,0xCD,0xCE,0xCF,0xD0,0xD1,0xF2,
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 8


 377:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 378:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _CODE_PAGE == 1	/* ASCII (for only non-LFN cfg) */
 379:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN
 380:Middlewares/Third_Party/FatFs/Src/ff.c **** #error Cannot use LFN feature without valid code page.
 381:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 382:Middlewares/Third_Party/FatFs/Src/ff.c **** #define _DF1S	0
 383:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 384:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
 385:Middlewares/Third_Party/FatFs/Src/ff.c **** #error Unknown code page
 386:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 387:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 388:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 389:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 390:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Character code support macros */
 391:Middlewares/Third_Party/FatFs/Src/ff.c **** #define IsUpper(c)	(((c)>='A')&&((c)<='Z'))
 392:Middlewares/Third_Party/FatFs/Src/ff.c **** #define IsLower(c)	(((c)>='a')&&((c)<='z'))
 393:Middlewares/Third_Party/FatFs/Src/ff.c **** #define IsDigit(c)	(((c)>='0')&&((c)<='9'))
 394:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 395:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _DF1S		/* Code page is DBCS */
 396:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 397:Middlewares/Third_Party/FatFs/Src/ff.c **** #ifdef _DF2S	/* Two 1st byte areas */
 398:Middlewares/Third_Party/FatFs/Src/ff.c **** #define IsDBCS1(c)	(((BYTE)(c) >= _DF1S && (BYTE)(c) <= _DF1E) || ((BYTE)(c) >= _DF2S && (BYTE)(c) 
 399:Middlewares/Third_Party/FatFs/Src/ff.c **** #else			/* One 1st byte area */
 400:Middlewares/Third_Party/FatFs/Src/ff.c **** #define IsDBCS1(c)	((BYTE)(c) >= _DF1S && (BYTE)(c) <= _DF1E)
 401:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 402:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 403:Middlewares/Third_Party/FatFs/Src/ff.c **** #ifdef _DS3S	/* Three 2nd byte areas */
 404:Middlewares/Third_Party/FatFs/Src/ff.c **** #define IsDBCS2(c)	(((BYTE)(c) >= _DS1S && (BYTE)(c) <= _DS1E) || ((BYTE)(c) >= _DS2S && (BYTE)(c) 
 405:Middlewares/Third_Party/FatFs/Src/ff.c **** #else			/* Two 2nd byte areas */
 406:Middlewares/Third_Party/FatFs/Src/ff.c **** #define IsDBCS2(c)	(((BYTE)(c) >= _DS1S && (BYTE)(c) <= _DS1E) || ((BYTE)(c) >= _DS2S && (BYTE)(c) 
 407:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 408:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 409:Middlewares/Third_Party/FatFs/Src/ff.c **** #else			/* Code page is SBCS */
 410:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 411:Middlewares/Third_Party/FatFs/Src/ff.c **** #define IsDBCS1(c)	0
 412:Middlewares/Third_Party/FatFs/Src/ff.c **** #define IsDBCS2(c)	0
 413:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 414:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* _DF1S */
 415:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 416:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 417:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Name status flags */
 418:Middlewares/Third_Party/FatFs/Src/ff.c **** #define NSFLAG		11		/* Index of name status byte in fn[] */
 419:Middlewares/Third_Party/FatFs/Src/ff.c **** #define NS_LOSS		0x01	/* Out of 8.3 format */
 420:Middlewares/Third_Party/FatFs/Src/ff.c **** #define NS_LFN		0x02	/* Force to create LFN entry */
 421:Middlewares/Third_Party/FatFs/Src/ff.c **** #define NS_LAST		0x04	/* Last segment */
 422:Middlewares/Third_Party/FatFs/Src/ff.c **** #define NS_BODY		0x08	/* Lower case flag (body) */
 423:Middlewares/Third_Party/FatFs/Src/ff.c **** #define NS_EXT		0x10	/* Lower case flag (ext) */
 424:Middlewares/Third_Party/FatFs/Src/ff.c **** #define NS_DOT		0x20	/* Dot entry */
 425:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 426:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 427:Middlewares/Third_Party/FatFs/Src/ff.c **** /* FAT sub-type boundaries (Differ from specs but correct for real DOS/Windows) */
 428:Middlewares/Third_Party/FatFs/Src/ff.c **** #define MIN_FAT16	4086U	/* Minimum number of clusters as FAT16 */
 429:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	MIN_FAT32	65526U	/* Minimum number of clusters as FAT32 */
 430:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 431:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 432:Middlewares/Third_Party/FatFs/Src/ff.c **** /* FatFs refers the members in the FAT structures as byte array instead of
 433:Middlewares/Third_Party/FatFs/Src/ff.c **** / structure member because the structure is not binary compatible between
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 9


 434:Middlewares/Third_Party/FatFs/Src/ff.c **** / different platforms */
 435:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 436:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BS_jmpBoot			0		/* x86 jump instruction (3) */
 437:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BS_OEMName			3		/* OEM name (8) */
 438:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BPB_BytsPerSec		11		/* Sector size [byte] (2) */
 439:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BPB_SecPerClus		13		/* Cluster size [sector] (1) */
 440:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BPB_RsvdSecCnt		14		/* Size of reserved area [sector] (2) */
 441:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BPB_NumFATs			16		/* Number of FAT copies (1) */
 442:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BPB_RootEntCnt		17		/* Number of root directory entries for FAT12/16 (2) */
 443:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BPB_TotSec16		19		/* Volume size [sector] (2) */
 444:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BPB_Media			21		/* Media descriptor (1) */
 445:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BPB_FATSz16			22		/* FAT size [sector] (2) */
 446:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BPB_SecPerTrk		24		/* Track size [sector] (2) */
 447:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BPB_NumHeads		26		/* Number of heads (2) */
 448:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BPB_HiddSec			28		/* Number of special hidden sectors (4) */
 449:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BPB_TotSec32		32		/* Volume size [sector] (4) */
 450:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BS_DrvNum			36		/* Physical drive number (2) */
 451:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BS_BootSig			38		/* Extended boot signature (1) */
 452:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BS_VolID			39		/* Volume serial number (4) */
 453:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BS_VolLab			43		/* Volume label (8) */
 454:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BS_FilSysType		54		/* File system type (1) */
 455:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BPB_FATSz32			36		/* FAT size [sector] (4) */
 456:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BPB_ExtFlags		40		/* Extended flags (2) */
 457:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BPB_FSVer			42		/* File system version (2) */
 458:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BPB_RootClus		44		/* Root directory first cluster (4) */
 459:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BPB_FSInfo			48		/* Offset of FSINFO sector (2) */
 460:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BPB_BkBootSec		50		/* Offset of backup boot sector (2) */
 461:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BS_DrvNum32			64		/* Physical drive number (2) */
 462:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BS_BootSig32		66		/* Extended boot signature (1) */
 463:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BS_VolID32			67		/* Volume serial number (4) */
 464:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BS_VolLab32			71		/* Volume label (8) */
 465:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BS_FilSysType32		82		/* File system type (1) */
 466:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	FSI_LeadSig			0		/* FSI: Leading signature (4) */
 467:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	FSI_StrucSig		484		/* FSI: Structure signature (4) */
 468:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	FSI_Free_Count		488		/* FSI: Number of free clusters (4) */
 469:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	FSI_Nxt_Free		492		/* FSI: Last allocated cluster (4) */
 470:Middlewares/Third_Party/FatFs/Src/ff.c **** #define MBR_Table			446		/* MBR: Partition table offset (2) */
 471:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	SZ_PTE				16		/* MBR: Size of a partition table entry */
 472:Middlewares/Third_Party/FatFs/Src/ff.c **** #define BS_55AA				510		/* Signature word (2) */
 473:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 474:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	DIR_Name			0		/* Short file name (11) */
 475:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	DIR_Attr			11		/* Attribute (1) */
 476:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	DIR_NTres			12		/* Lower case flag (1) */
 477:Middlewares/Third_Party/FatFs/Src/ff.c **** #define DIR_CrtTimeTenth	13		/* Created time sub-second (1) */
 478:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	DIR_CrtTime			14		/* Created time (2) */
 479:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	DIR_CrtDate			16		/* Created date (2) */
 480:Middlewares/Third_Party/FatFs/Src/ff.c **** #define DIR_LstAccDate		18		/* Last accessed date (2) */
 481:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	DIR_FstClusHI		20		/* Higher 16-bit of first cluster (2) */
 482:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	DIR_WrtTime			22		/* Modified time (2) */
 483:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	DIR_WrtDate			24		/* Modified date (2) */
 484:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	DIR_FstClusLO		26		/* Lower 16-bit of first cluster (2) */
 485:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	DIR_FileSize		28		/* File size (4) */
 486:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	LDIR_Ord			0		/* LFN entry order and LLE flag (1) */
 487:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	LDIR_Attr			11		/* LFN attribute (1) */
 488:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	LDIR_Type			12		/* LFN type (1) */
 489:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	LDIR_Chksum			13		/* Sum of corresponding SFN entry */
 490:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	LDIR_FstClusLO		26		/* Must be zero (0) */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 10


 491:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	SZ_DIRE				32		/* Size of a directory entry */
 492:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	LLEF				0x40	/* Last long entry flag in LDIR_Ord */
 493:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	DDEM				0xE5	/* Deleted directory entry mark at DIR_Name[0] */
 494:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	RDDEM				0x05	/* Replacement of the character collides with DDEM */
 495:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 496:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 497:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 498:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 499:Middlewares/Third_Party/FatFs/Src/ff.c **** /*------------------------------------------------------------*/
 500:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Module private work area                                   */
 501:Middlewares/Third_Party/FatFs/Src/ff.c **** /*------------------------------------------------------------*/
 502:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Remark: Uninitialized variables with static duration are
 503:Middlewares/Third_Party/FatFs/Src/ff.c **** /  guaranteed zero/null at start-up. If not, either the linker
 504:Middlewares/Third_Party/FatFs/Src/ff.c **** /  or start-up routine being used is out of ANSI-C standard.
 505:Middlewares/Third_Party/FatFs/Src/ff.c **** */
 506:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 507:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _VOLUMES < 1 || _VOLUMES > 9
 508:Middlewares/Third_Party/FatFs/Src/ff.c **** #error Wrong _VOLUMES setting
 509:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 510:Middlewares/Third_Party/FatFs/Src/ff.c **** static FATFS *FatFs[_VOLUMES];	/* Pointer to the file system objects (logical drives) */
 511:Middlewares/Third_Party/FatFs/Src/ff.c **** static WORD Fsid;				/* File system mount ID */
 512:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 513:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_RPATH && _VOLUMES >= 2
 514:Middlewares/Third_Party/FatFs/Src/ff.c **** static BYTE CurrVol;			/* Current drive */
 515:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 516:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 517:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_LOCK
 518:Middlewares/Third_Party/FatFs/Src/ff.c **** static FILESEM Files[_FS_LOCK];	/* Open object lock semaphores */
 519:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 520:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 521:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN == 0			/* Non LFN feature */
 522:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	DEFINE_NAMEBUF		BYTE sfn[12]
 523:Middlewares/Third_Party/FatFs/Src/ff.c **** #define INIT_BUF(dobj)		(dobj).fn = sfn
 524:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	FREE_BUF()
 525:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
 526:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _MAX_LFN < 12 || _MAX_LFN > 255
 527:Middlewares/Third_Party/FatFs/Src/ff.c **** #error Wrong _MAX_LFN setting
 528:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 529:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN == 1			/* LFN feature with static working buffer */
 530:Middlewares/Third_Party/FatFs/Src/ff.c **** static WCHAR LfnBuf[_MAX_LFN + 1];
 531:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	DEFINE_NAMEBUF		BYTE sfn[12]
 532:Middlewares/Third_Party/FatFs/Src/ff.c **** #define INIT_BUF(dobj)		{ (dobj).fn = sfn; (dobj).lfn = LfnBuf; }
 533:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	FREE_BUF()
 534:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _USE_LFN == 2 		/* LFN feature with dynamic working buffer on the stack */
 535:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	DEFINE_NAMEBUF		BYTE sfn[12]; WCHAR lbuf[_MAX_LFN + 1]
 536:Middlewares/Third_Party/FatFs/Src/ff.c **** #define INIT_BUF(dobj)		{ (dobj).fn = sfn; (dobj).lfn = lbuf; }
 537:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	FREE_BUF()
 538:Middlewares/Third_Party/FatFs/Src/ff.c **** #elif _USE_LFN == 3 		/* LFN feature with dynamic working buffer on the heap */
 539:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	DEFINE_NAMEBUF		BYTE sfn[12]; WCHAR *lfn
 540:Middlewares/Third_Party/FatFs/Src/ff.c **** #define INIT_BUF(dobj)		{ lfn = ff_memalloc((_MAX_LFN + 1) * 2); if (!lfn) LEAVE_FF((dobj).fs, FR_N
 541:Middlewares/Third_Party/FatFs/Src/ff.c **** #define	FREE_BUF()			ff_memfree(lfn)
 542:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
 543:Middlewares/Third_Party/FatFs/Src/ff.c **** #error Wrong _USE_LFN setting
 544:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 545:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 546:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 547:Middlewares/Third_Party/FatFs/Src/ff.c **** #ifdef _EXCVT
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 11


 548:Middlewares/Third_Party/FatFs/Src/ff.c **** static const BYTE ExCvt[] = _EXCVT;	/* Upper conversion table for extended characters */
 549:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 550:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 551:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 552:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 553:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 554:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 555:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 556:Middlewares/Third_Party/FatFs/Src/ff.c **** /*--------------------------------------------------------------------------
 557:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 558:Middlewares/Third_Party/FatFs/Src/ff.c ****    Module Private Functions
 559:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 560:Middlewares/Third_Party/FatFs/Src/ff.c **** ---------------------------------------------------------------------------*/
 561:Middlewares/Third_Party/FatFs/Src/ff.c **** DWORD clust2sect (FATFS* fs, DWORD clst);
 562:Middlewares/Third_Party/FatFs/Src/ff.c **** DWORD get_fat (FATFS* fs,	DWORD clst);
 563:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 564:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
 565:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT put_fat (FATFS* fs,	DWORD clst,	DWORD val);
 566:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* !_FS_READONLY */
 567:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 568:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN
 569:Middlewares/Third_Party/FatFs/Src/ff.c **** static void gen_numname (BYTE* dst, const BYTE* src, const WCHAR* lfn, UINT seq);
 570:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* !_USE_LFN */
 571:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 572:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 573:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 574:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
 575:Middlewares/Third_Party/FatFs/Src/ff.c **** /* String functions                                                      */
 576:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
 577:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 578:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Copy memory to memory */
 579:Middlewares/Third_Party/FatFs/Src/ff.c **** static
 580:Middlewares/Third_Party/FatFs/Src/ff.c **** void mem_cpy (void* dst, const void* src, UINT cnt) {
  25              		.loc 1 580 0
  26              		.cfi_startproc
  27              		@ args = 0, pretend = 0, frame = 0
  28              		@ frame_needed = 0, uses_anonymous_args = 0
  29              		@ link register save eliminated.
  30              	.LVL0:
 581:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE *d = (BYTE*)dst;
 582:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const BYTE *s = (const BYTE*)src;
 583:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 584:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _WORD_ACCESS == 1
 585:Middlewares/Third_Party/FatFs/Src/ff.c **** 	while (cnt >= sizeof (int)) {
 586:Middlewares/Third_Party/FatFs/Src/ff.c **** 		*(int*)d = *(int*)s;
 587:Middlewares/Third_Party/FatFs/Src/ff.c **** 		d += sizeof (int); s += sizeof (int);
 588:Middlewares/Third_Party/FatFs/Src/ff.c **** 		cnt -= sizeof (int);
 589:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 590:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 591:Middlewares/Third_Party/FatFs/Src/ff.c **** 	while (cnt--)
  31              		.loc 1 591 0
  32 0000 04E0     		b	.L2
  33              	.LVL1:
  34              	.L3:
 592:Middlewares/Third_Party/FatFs/Src/ff.c **** 		*d++ = *s++;
  35              		.loc 1 592 0
  36 0002 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 12


  37 0004 0270     		strb	r2, [r0]
  38 0006 0131     		adds	r1, r1, #1
  39              	.LVL2:
  40 0008 0130     		adds	r0, r0, #1
  41              	.LVL3:
 591:Middlewares/Third_Party/FatFs/Src/ff.c **** 		*d++ = *s++;
  42              		.loc 1 591 0
  43 000a 1A46     		mov	r2, r3
  44              	.LVL4:
  45              	.L2:
  46 000c 531E     		subs	r3, r2, #1
  47              	.LVL5:
  48 000e 002A     		cmp	r2, #0
  49 0010 F7D1     		bne	.L3
 593:Middlewares/Third_Party/FatFs/Src/ff.c **** }
  50              		.loc 1 593 0
  51 0012 7047     		bx	lr
  52              		.cfi_endproc
  53              	.LFE66:
  55              		.section	.text.mem_set,"ax",%progbits
  56              		.align	1
  57              		.syntax unified
  58              		.thumb
  59              		.thumb_func
  60              		.fpu softvfp
  62              	mem_set:
  63              	.LFB67:
 594:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 595:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Fill memory */
 596:Middlewares/Third_Party/FatFs/Src/ff.c **** static
 597:Middlewares/Third_Party/FatFs/Src/ff.c **** void mem_set (void* dst, int val, UINT cnt) {
  64              		.loc 1 597 0
  65              		.cfi_startproc
  66              		@ args = 0, pretend = 0, frame = 0
  67              		@ frame_needed = 0, uses_anonymous_args = 0
  68              		@ link register save eliminated.
  69              	.LVL6:
 598:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE *d = (BYTE*)dst;
 599:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 600:Middlewares/Third_Party/FatFs/Src/ff.c **** 	while (cnt--)
  70              		.loc 1 600 0
  71 0000 02E0     		b	.L5
  72              	.LVL7:
  73              	.L6:
 601:Middlewares/Third_Party/FatFs/Src/ff.c **** 		*d++ = (BYTE)val;
  74              		.loc 1 601 0
  75 0002 0170     		strb	r1, [r0]
  76 0004 0130     		adds	r0, r0, #1
  77              	.LVL8:
 600:Middlewares/Third_Party/FatFs/Src/ff.c **** 		*d++ = (BYTE)val;
  78              		.loc 1 600 0
  79 0006 1A46     		mov	r2, r3
  80              	.LVL9:
  81              	.L5:
  82 0008 531E     		subs	r3, r2, #1
  83              	.LVL10:
  84 000a 002A     		cmp	r2, #0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 13


  85 000c F9D1     		bne	.L6
 602:Middlewares/Third_Party/FatFs/Src/ff.c **** }
  86              		.loc 1 602 0
  87 000e 7047     		bx	lr
  88              		.cfi_endproc
  89              	.LFE67:
  91              		.section	.text.mem_cmp,"ax",%progbits
  92              		.align	1
  93              		.syntax unified
  94              		.thumb
  95              		.thumb_func
  96              		.fpu softvfp
  98              	mem_cmp:
  99              	.LFB68:
 603:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 604:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Compare memory to memory */
 605:Middlewares/Third_Party/FatFs/Src/ff.c **** static
 606:Middlewares/Third_Party/FatFs/Src/ff.c **** int mem_cmp (const void* dst, const void* src, UINT cnt) {
 100              		.loc 1 606 0
 101              		.cfi_startproc
 102              		@ args = 0, pretend = 0, frame = 0
 103              		@ frame_needed = 0, uses_anonymous_args = 0
 104              		@ link register save eliminated.
 105              	.LVL11:
 106 0000 70B4     		push	{r4, r5, r6}
 107              	.LCFI0:
 108              		.cfi_def_cfa_offset 12
 109              		.cfi_offset 4, -12
 110              		.cfi_offset 5, -8
 111              		.cfi_offset 6, -4
 112 0002 0346     		mov	r3, r0
 113              	.LVL12:
 607:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const BYTE *d = (const BYTE *)dst, *s = (const BYTE *)src;
 608:Middlewares/Third_Party/FatFs/Src/ff.c **** 	int r = 0;
 114              		.loc 1 608 0
 115 0004 0020     		movs	r0, #0
 116              	.LVL13:
 609:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 610:Middlewares/Third_Party/FatFs/Src/ff.c **** 	while (cnt-- && (r = *d++ - *s++) == 0) ;
 117              		.loc 1 610 0
 118 0006 01E0     		b	.L9
 119              	.LVL14:
 120              	.L10:
 121 0008 2946     		mov	r1, r5
 122 000a 3346     		mov	r3, r6
 123              	.LVL15:
 124              	.L9:
 125              		.loc 1 610 0 is_stmt 0 discriminator 2
 126 000c 541E     		subs	r4, r2, #1
 127              	.LVL16:
 128 000e 32B1     		cbz	r2, .L7
 129              		.loc 1 610 0 discriminator 1
 130 0010 5E1C     		adds	r6, r3, #1
 131              	.LVL17:
 132 0012 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 133              	.LVL18:
 134 0014 4D1C     		adds	r5, r1, #1
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 14


 135              	.LVL19:
 136 0016 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 137              	.LVL20:
 138 0018 2246     		mov	r2, r4
 139 001a C01A     		subs	r0, r0, r3
 140              	.LVL21:
 141 001c F4D0     		beq	.L10
 142              	.LVL22:
 143              	.L7:
 611:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return r;
 612:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 144              		.loc 1 612 0 is_stmt 1
 145 001e 70BC     		pop	{r4, r5, r6}
 146              	.LCFI1:
 147              		.cfi_restore 6
 148              		.cfi_restore 5
 149              		.cfi_restore 4
 150              		.cfi_def_cfa_offset 0
 151              	.LVL23:
 152 0020 7047     		bx	lr
 153              		.cfi_endproc
 154              	.LFE68:
 156              		.section	.text.chk_chr,"ax",%progbits
 157              		.align	1
 158              		.syntax unified
 159              		.thumb
 160              		.thumb_func
 161              		.fpu softvfp
 163              	chk_chr:
 164              	.LFB69:
 613:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 614:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Check if chr is contained in the string */
 615:Middlewares/Third_Party/FatFs/Src/ff.c **** static
 616:Middlewares/Third_Party/FatFs/Src/ff.c **** int chk_chr (const char* str, int chr) {
 165              		.loc 1 616 0
 166              		.cfi_startproc
 167              		@ args = 0, pretend = 0, frame = 0
 168              		@ frame_needed = 0, uses_anonymous_args = 0
 169              		@ link register save eliminated.
 170              	.LVL24:
 617:Middlewares/Third_Party/FatFs/Src/ff.c **** 	while (*str && *str != chr) str++;
 171              		.loc 1 617 0
 172 0000 00E0     		b	.L13
 173              	.L15:
 174              		.loc 1 617 0 is_stmt 0 discriminator 3
 175 0002 0130     		adds	r0, r0, #1
 176              	.LVL25:
 177              	.L13:
 178              		.loc 1 617 0 discriminator 1
 179 0004 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 180 0006 0BB1     		cbz	r3, .L14
 181              		.loc 1 617 0 discriminator 2
 182 0008 8B42     		cmp	r3, r1
 183 000a FAD1     		bne	.L15
 184              	.L14:
 618:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return *str;
 619:Middlewares/Third_Party/FatFs/Src/ff.c **** }
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 15


 185              		.loc 1 619 0 is_stmt 1
 186 000c 1846     		mov	r0, r3
 187              	.LVL26:
 188 000e 7047     		bx	lr
 189              		.cfi_endproc
 190              	.LFE69:
 192              		.section	.text.ld_clust,"ax",%progbits
 193              		.align	1
 194              		.syntax unified
 195              		.thumb
 196              		.thumb_func
 197              		.fpu softvfp
 199              	ld_clust:
 200              	.LFB81:
 620:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 621:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 622:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 623:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 624:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
 625:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Request/Release grant to access the volume                            */
 626:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
 627:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_REENTRANT
 628:Middlewares/Third_Party/FatFs/Src/ff.c **** static
 629:Middlewares/Third_Party/FatFs/Src/ff.c **** int lock_fs (
 630:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FATFS* fs		/* File system object */
 631:Middlewares/Third_Party/FatFs/Src/ff.c **** )
 632:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 633:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return ff_req_grant(fs->sobj);
 634:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 635:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 636:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 637:Middlewares/Third_Party/FatFs/Src/ff.c **** static
 638:Middlewares/Third_Party/FatFs/Src/ff.c **** void unlock_fs (
 639:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FATFS* fs,		/* File system object */
 640:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res		/* Result code to be returned */
 641:Middlewares/Third_Party/FatFs/Src/ff.c **** )
 642:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 643:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fs &&
 644:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res != FR_NOT_ENABLED &&
 645:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res != FR_INVALID_DRIVE &&
 646:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res != FR_INVALID_OBJECT &&
 647:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res != FR_TIMEOUT) {
 648:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ff_rel_grant(fs->sobj);
 649:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 650:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 651:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 652:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 653:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 654:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 655:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 656:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
 657:Middlewares/Third_Party/FatFs/Src/ff.c **** /* File lock control functions                                           */
 658:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
 659:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_LOCK
 660:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 661:Middlewares/Third_Party/FatFs/Src/ff.c **** static
 662:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT chk_lock (	/* Check if the file can be accessed */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 16


 663:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR* dp,		/* Directory object pointing the file to be checked */
 664:Middlewares/Third_Party/FatFs/Src/ff.c **** 	int acc			/* Desired access type (0:Read, 1:Write, 2:Delete/Rename) */
 665:Middlewares/Third_Party/FatFs/Src/ff.c **** )
 666:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 667:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT i, be;
 668:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 669:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Search file semaphore table */
 670:Middlewares/Third_Party/FatFs/Src/ff.c **** 	for (i = be = 0; i < _FS_LOCK; i++) {
 671:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 672:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (Files[i].fs == dp->fs &&	 	/* Check if the object matched with an open object */
 673:Middlewares/Third_Party/FatFs/Src/ff.c **** 				Files[i].clu == dp->sclust &&
 674:Middlewares/Third_Party/FatFs/Src/ff.c **** 				Files[i].idx == dp->index) break;
 675:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {			/* Blank entry */
 676:Middlewares/Third_Party/FatFs/Src/ff.c **** 			be = 1;
 677:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 678:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 679:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (i == _FS_LOCK)	/* The object is not opened */
 680:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 681:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 682:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* The object has been opened. Reject any open against writing file and all write mode open */
 683:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return (acc || Files[i].ctr == 0x100) ? FR_LOCKED : FR_OK;
 684:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 685:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 686:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 687:Middlewares/Third_Party/FatFs/Src/ff.c **** static
 688:Middlewares/Third_Party/FatFs/Src/ff.c **** int enq_lock (void)	/* Check if an entry is available for a new object */
 689:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 690:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT i;
 691:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 692:Middlewares/Third_Party/FatFs/Src/ff.c **** 	for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
 693:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return (i == _FS_LOCK) ? 0 : 1;
 694:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 695:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 696:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 697:Middlewares/Third_Party/FatFs/Src/ff.c **** static
 698:Middlewares/Third_Party/FatFs/Src/ff.c **** UINT inc_lock (	/* Increment object open counter and returns its index (0:Internal error) */
 699:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR* dp,	/* Directory object pointing the file to register or increment */
 700:Middlewares/Third_Party/FatFs/Src/ff.c **** 	int acc		/* Desired access (0:Read, 1:Write, 2:Delete/Rename) */
 701:Middlewares/Third_Party/FatFs/Src/ff.c **** )
 702:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 703:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT i;
 704:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 705:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 706:Middlewares/Third_Party/FatFs/Src/ff.c **** 	for (i = 0; i < _FS_LOCK; i++) {	/* Find the object */
 707:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (Files[i].fs == dp->fs &&
 708:Middlewares/Third_Party/FatFs/Src/ff.c **** 			Files[i].clu == dp->sclust &&
 709:Middlewares/Third_Party/FatFs/Src/ff.c **** 			Files[i].idx == dp->index) break;
 710:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 711:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 712:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (i == _FS_LOCK) {				/* Not opened. Register it as new. */
 713:Middlewares/Third_Party/FatFs/Src/ff.c **** 		for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
 714:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 715:Middlewares/Third_Party/FatFs/Src/ff.c **** 		Files[i].fs = dp->fs;
 716:Middlewares/Third_Party/FatFs/Src/ff.c **** 		Files[i].clu = dp->sclust;
 717:Middlewares/Third_Party/FatFs/Src/ff.c **** 		Files[i].idx = dp->index;
 718:Middlewares/Third_Party/FatFs/Src/ff.c **** 		Files[i].ctr = 0;
 719:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 17


 720:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 721:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (acc && Files[i].ctr) return 0;	/* Access violation (int err) */
 722:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 723:Middlewares/Third_Party/FatFs/Src/ff.c **** 	Files[i].ctr = acc ? 0x100 : Files[i].ctr + 1;	/* Set semaphore value */
 724:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 725:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return i + 1;
 726:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 727:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 728:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 729:Middlewares/Third_Party/FatFs/Src/ff.c **** static
 730:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT dec_lock (	/* Decrement object open counter */
 731:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT i			/* Semaphore index (1..) */
 732:Middlewares/Third_Party/FatFs/Src/ff.c **** )
 733:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 734:Middlewares/Third_Party/FatFs/Src/ff.c **** 	WORD n;
 735:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
 736:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 737:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 738:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (--i < _FS_LOCK) {	/* Shift index number origin from 0 */
 739:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n = Files[i].ctr;
 740:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (n == 0x100) n = 0;		/* If write mode open, delete the entry */
 741:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (n) n--;					/* Decrement read mode open count */
 742:Middlewares/Third_Party/FatFs/Src/ff.c **** 		Files[i].ctr = n;
 743:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (!n) Files[i].fs = 0;	/* Delete the entry if open count gets zero */
 744:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = FR_OK;
 745:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {
 746:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = FR_INT_ERR;			/* Invalid index nunber */
 747:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 748:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return res;
 749:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 750:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 751:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 752:Middlewares/Third_Party/FatFs/Src/ff.c **** static
 753:Middlewares/Third_Party/FatFs/Src/ff.c **** void clear_lock (	/* Clear lock entries of the volume */
 754:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FATFS *fs
 755:Middlewares/Third_Party/FatFs/Src/ff.c **** )
 756:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 757:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT i;
 758:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 759:Middlewares/Third_Party/FatFs/Src/ff.c **** 	for (i = 0; i < _FS_LOCK; i++) {
 760:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 761:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 762:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 763:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 764:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 765:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 766:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 767:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 768:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
 769:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Move/Flush disk access window in the file system object               */
 770:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
 771:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
 772:Middlewares/Third_Party/FatFs/Src/ff.c **** static
 773:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT sync_window (
 774:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FATFS* fs		/* File system object */
 775:Middlewares/Third_Party/FatFs/Src/ff.c **** )
 776:Middlewares/Third_Party/FatFs/Src/ff.c **** {
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 18


 777:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD wsect;
 778:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT nf;
 779:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res = FR_OK;
 780:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 781:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 782:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fs->wflag) {	/* Write back the sector if it is dirty */
 783:Middlewares/Third_Party/FatFs/Src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 784:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (disk_write(fs->drv, fs->win.d8, wsect, 1) != RES_OK) {
 785:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = FR_DISK_ERR;
 786:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {
 787:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->wflag = 0;
 788:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (wsect - fs->fatbase < fs->fsize) {		/* Is it in the FAT area? */
 789:Middlewares/Third_Party/FatFs/Src/ff.c **** 				for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 790:Middlewares/Third_Party/FatFs/Src/ff.c **** 					wsect += fs->fsize;
 791:Middlewares/Third_Party/FatFs/Src/ff.c **** 					disk_write(fs->drv, fs->win.d8, wsect, 1);
 792:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
 793:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 794:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 795:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 796:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return res;
 797:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 798:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 799:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 800:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 801:Middlewares/Third_Party/FatFs/Src/ff.c **** static
 802:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT move_window (
 803:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FATFS* fs,		/* File system object */
 804:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD sector	/* Sector number to make appearance in the fs->win[].d8 */
 805:Middlewares/Third_Party/FatFs/Src/ff.c **** )
 806:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 807:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res = FR_OK;
 808:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 809:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 810:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (sector != fs->winsect) {	/* Window offset changed? */
 811:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
 812:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = sync_window(fs);		/* Write-back changes */
 813:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 814:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {			/* Fill sector window with new data */
 815:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (disk_read(fs->drv, fs->win.d8, sector, 1) != RES_OK) {
 816:Middlewares/Third_Party/FatFs/Src/ff.c **** 				sector = 0xFFFFFFFF;	/* Invalidate window if data is not reliable */
 817:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_DISK_ERR;
 818:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 819:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->winsect = sector;
 820:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 821:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 822:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return res;
 823:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 824:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 825:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 826:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 827:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 828:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
 829:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Synchronize file system and strage device                             */
 830:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
 831:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
 832:Middlewares/Third_Party/FatFs/Src/ff.c **** static
 833:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT sync_fs (	/* FR_OK: successful, FR_DISK_ERR: failed */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 19


 834:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FATFS* fs		/* File system object */
 835:Middlewares/Third_Party/FatFs/Src/ff.c **** )
 836:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 837:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
 838:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 839:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 840:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = sync_window(fs);
 841:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
 842:Middlewares/Third_Party/FatFs/Src/ff.c **** 		/* Update FSINFO sector if needed */
 843:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (fs->fs_type == FS_FAT32 && fs->fsi_flag == 1) {
 844:Middlewares/Third_Party/FatFs/Src/ff.c **** 			/* Create FSINFO structure */
 845:Middlewares/Third_Party/FatFs/Src/ff.c **** 			mem_set(fs->win.d8, 0, SS(fs));
 846:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_WORD(fs->win.d8 + BS_55AA, 0xAA55);
 847:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_LeadSig, 0x41615252);
 848:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_StrucSig, 0x61417272);
 849:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_Free_Count, fs->free_clust);
 850:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_Nxt_Free, fs->last_clust);
 851:Middlewares/Third_Party/FatFs/Src/ff.c **** 			/* Write it into the FSINFO sector */
 852:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->winsect = fs->volbase + 1;
 853:Middlewares/Third_Party/FatFs/Src/ff.c **** 			disk_write(fs->drv, fs->win.d8, fs->winsect, 1);
 854:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->fsi_flag = 0;
 855:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 856:Middlewares/Third_Party/FatFs/Src/ff.c **** 		/* Make sure that no pending write process in the physical drive */
 857:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (disk_ioctl(fs->drv, CTRL_SYNC, 0) != RES_OK)
 858:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = FR_DISK_ERR;
 859:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 860:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 861:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return res;
 862:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 863:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 864:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 865:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 866:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 867:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 868:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
 869:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Get sector# from cluster#                                             */
 870:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
 871:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Hidden API for hacks and disk tools */
 872:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 873:Middlewares/Third_Party/FatFs/Src/ff.c **** DWORD clust2sect (	/* !=0: Sector number, 0: Failed - invalid cluster# */
 874:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FATFS* fs,		/* File system object */
 875:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD clst		/* Cluster# to be converted */
 876:Middlewares/Third_Party/FatFs/Src/ff.c **** )
 877:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 878:Middlewares/Third_Party/FatFs/Src/ff.c **** 	clst -= 2;
 879:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Invalid cluster# */
 880:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return clst * fs->csize + fs->database;
 881:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 882:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 883:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 884:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 885:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 886:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
 887:Middlewares/Third_Party/FatFs/Src/ff.c **** /* FAT access - Read value of a FAT entry                                */
 888:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
 889:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Hidden API for hacks and disk tools */
 890:Middlewares/Third_Party/FatFs/Src/ff.c **** 
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 20


 891:Middlewares/Third_Party/FatFs/Src/ff.c **** DWORD get_fat (	/* 0xFFFFFFFF:Disk error, 1:Internal error, 2..0x0FFFFFFF:Cluster status */
 892:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FATFS* fs,	/* File system object */
 893:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD clst	/* FAT index number (cluster number) to get the value */
 894:Middlewares/Third_Party/FatFs/Src/ff.c **** )
 895:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 896:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT wc, bc;
 897:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE *p;
 898:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD val;
 899:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 900:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 901:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 902:Middlewares/Third_Party/FatFs/Src/ff.c **** 		val = 1;	/* Internal error */
 903:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 904:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {
 905:Middlewares/Third_Party/FatFs/Src/ff.c **** 		val = 0xFFFFFFFF;	/* Default value falls on disk error */
 906:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 907:Middlewares/Third_Party/FatFs/Src/ff.c **** 		switch (fs->fs_type) {
 908:Middlewares/Third_Party/FatFs/Src/ff.c **** 		case FS_FAT12 :
 909:Middlewares/Third_Party/FatFs/Src/ff.c **** 			bc = (UINT)clst; bc += bc / 2;
 910:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 911:Middlewares/Third_Party/FatFs/Src/ff.c **** 			wc = fs->win.d8[bc++ % SS(fs)];
 912:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 913:Middlewares/Third_Party/FatFs/Src/ff.c **** 			wc |= fs->win.d8[bc % SS(fs)] << 8;
 914:Middlewares/Third_Party/FatFs/Src/ff.c **** 			val = clst & 1 ? wc >> 4 : (wc & 0xFFF);
 915:Middlewares/Third_Party/FatFs/Src/ff.c **** 			break;
 916:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 917:Middlewares/Third_Party/FatFs/Src/ff.c **** 		case FS_FAT16 :
 918:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2))) != FR_OK) break;
 919:Middlewares/Third_Party/FatFs/Src/ff.c **** 			p = &fs->win.d8[clst * 2 % SS(fs)];
 920:Middlewares/Third_Party/FatFs/Src/ff.c **** 			val = LD_WORD(p);
 921:Middlewares/Third_Party/FatFs/Src/ff.c **** 			break;
 922:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 923:Middlewares/Third_Party/FatFs/Src/ff.c **** 		case FS_FAT32 :
 924:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4))) != FR_OK) break;
 925:Middlewares/Third_Party/FatFs/Src/ff.c **** 			p = &fs->win.d8[clst * 4 % SS(fs)];
 926:Middlewares/Third_Party/FatFs/Src/ff.c **** 			val = LD_DWORD(p) & 0x0FFFFFFF;
 927:Middlewares/Third_Party/FatFs/Src/ff.c **** 			break;
 928:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 929:Middlewares/Third_Party/FatFs/Src/ff.c **** 		default:
 930:Middlewares/Third_Party/FatFs/Src/ff.c **** 			val = 1;	/* Internal error */
 931:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 932:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 933:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 934:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return val;
 935:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 936:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 937:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 938:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 939:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 940:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
 941:Middlewares/Third_Party/FatFs/Src/ff.c **** /* FAT access - Change value of a FAT entry                              */
 942:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
 943:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Hidden API for hacks and disk tools */
 944:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 945:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
 946:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT put_fat (
 947:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FATFS* fs,	/* File system object */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 21


 948:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD clst,	/* FAT index number (cluster number) to be changed */
 949:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD val	/* New value to be set to the entry */
 950:Middlewares/Third_Party/FatFs/Src/ff.c **** )
 951:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 952:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT bc;
 953:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE *p;
 954:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
 955:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 956:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 957:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 958:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = FR_INT_ERR;
 959:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 960:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {
 961:Middlewares/Third_Party/FatFs/Src/ff.c **** 		switch (fs->fs_type) {
 962:Middlewares/Third_Party/FatFs/Src/ff.c **** 		case FS_FAT12 :
 963:Middlewares/Third_Party/FatFs/Src/ff.c **** 			bc = (UINT)clst; bc += bc / 2;
 964:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 965:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) break;
 966:Middlewares/Third_Party/FatFs/Src/ff.c **** 			p = &fs->win.d8[bc++ % SS(fs)];
 967:Middlewares/Third_Party/FatFs/Src/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 968:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->wflag = 1;
 969:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 970:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) break;
 971:Middlewares/Third_Party/FatFs/Src/ff.c **** 			p = &fs->win.d8[bc % SS(fs)];
 972:Middlewares/Third_Party/FatFs/Src/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
 973:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->wflag = 1;
 974:Middlewares/Third_Party/FatFs/Src/ff.c **** 			break;
 975:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 976:Middlewares/Third_Party/FatFs/Src/ff.c **** 		case FS_FAT16 :
 977:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)));
 978:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) break;
 979:Middlewares/Third_Party/FatFs/Src/ff.c **** 			p = &fs->win.d8[clst * 2 % SS(fs)];
 980:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_WORD(p, (WORD)val);
 981:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->wflag = 1;
 982:Middlewares/Third_Party/FatFs/Src/ff.c **** 			break;
 983:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 984:Middlewares/Third_Party/FatFs/Src/ff.c **** 		case FS_FAT32 :
 985:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)));
 986:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) break;
 987:Middlewares/Third_Party/FatFs/Src/ff.c **** 			p = &fs->win.d8[clst * 4 % SS(fs)];
 988:Middlewares/Third_Party/FatFs/Src/ff.c **** 			val |= LD_DWORD(p) & 0xF0000000;
 989:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(p, val);
 990:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->wflag = 1;
 991:Middlewares/Third_Party/FatFs/Src/ff.c **** 			break;
 992:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 993:Middlewares/Third_Party/FatFs/Src/ff.c **** 		default :
 994:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = FR_INT_ERR;
 995:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 996:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 997:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 998:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return res;
 999:Middlewares/Third_Party/FatFs/Src/ff.c **** }
1000:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* !_FS_READONLY */
1001:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1002:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1003:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1004:Middlewares/Third_Party/FatFs/Src/ff.c **** 
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 22


1005:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1006:Middlewares/Third_Party/FatFs/Src/ff.c **** /* FAT handling - Remove a cluster chain                                 */
1007:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1008:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
1009:Middlewares/Third_Party/FatFs/Src/ff.c **** static
1010:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT remove_chain (
1011:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FATFS* fs,			/* File system object */
1012:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD clst			/* Cluster# to remove a chain from */
1013:Middlewares/Third_Party/FatFs/Src/ff.c **** )
1014:Middlewares/Third_Party/FatFs/Src/ff.c **** {
1015:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
1016:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD nxt;
1017:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_TRIM
1018:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD scl = clst, ecl = clst, rt[2];
1019:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1020:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1021:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
1022:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = FR_INT_ERR;
1023:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1024:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {
1025:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = FR_OK;
1026:Middlewares/Third_Party/FatFs/Src/ff.c **** 		while (clst < fs->n_fatent) {			/* Not a last link? */
1027:Middlewares/Third_Party/FatFs/Src/ff.c **** 			nxt = get_fat(fs, clst);			/* Get cluster status */
1028:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (nxt == 0) break;				/* Empty cluster? */
1029:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (nxt == 1) { res = FR_INT_ERR; break; }	/* Internal error? */
1030:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (nxt == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }	/* Disk error? */
1031:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = put_fat(fs, clst, 0);			/* Mark the cluster "empty" */
1032:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) break;
1033:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (fs->free_clust != 0xFFFFFFFF) {	/* Update FSINFO */
1034:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fs->free_clust++;
1035:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fs->fsi_flag |= 1;
1036:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
1037:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_TRIM
1038:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (ecl + 1 == nxt) {	/* Is next cluster contiguous? */
1039:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ecl = nxt;
1040:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {				/* End of contiguous clusters */ 
1041:Middlewares/Third_Party/FatFs/Src/ff.c **** 				rt[0] = clust2sect(fs, scl);					/* Start sector */
1042:Middlewares/Third_Party/FatFs/Src/ff.c **** 				rt[1] = clust2sect(fs, ecl) + fs->csize - 1;	/* End sector */
1043:Middlewares/Third_Party/FatFs/Src/ff.c **** 				disk_ioctl(fs->drv, CTRL_TRIM, rt);				/* Erase the block */
1044:Middlewares/Third_Party/FatFs/Src/ff.c **** 				scl = ecl = nxt;
1045:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
1046:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1047:Middlewares/Third_Party/FatFs/Src/ff.c **** 			clst = nxt;	/* Next cluster */
1048:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
1049:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1050:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1051:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return res;
1052:Middlewares/Third_Party/FatFs/Src/ff.c **** }
1053:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1054:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1055:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1056:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1057:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1058:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1059:Middlewares/Third_Party/FatFs/Src/ff.c **** /* FAT handling - Stretch or Create a cluster chain                      */
1060:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1061:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 23


1062:Middlewares/Third_Party/FatFs/Src/ff.c **** static
1063:Middlewares/Third_Party/FatFs/Src/ff.c **** DWORD create_chain (	/* 0:No free cluster, 1:Internal error, 0xFFFFFFFF:Disk error, >=2:New cluster
1064:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FATFS* fs,			/* File system object */
1065:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD clst			/* Cluster# to stretch. 0 means create a new chain. */
1066:Middlewares/Third_Party/FatFs/Src/ff.c **** )
1067:Middlewares/Third_Party/FatFs/Src/ff.c **** {
1068:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD cs, ncl, scl;
1069:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
1070:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1071:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1072:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (clst == 0) {		/* Create a new chain */
1073:Middlewares/Third_Party/FatFs/Src/ff.c **** 		scl = fs->last_clust;			/* Get suggested start point */
1074:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
1075:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1076:Middlewares/Third_Party/FatFs/Src/ff.c **** 	else {					/* Stretch the current chain */
1077:Middlewares/Third_Party/FatFs/Src/ff.c **** 		cs = get_fat(fs, clst);			/* Check the cluster status */
1078:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (cs < 2) return 1;			/* Invalid value */
1079:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
1080:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
1081:Middlewares/Third_Party/FatFs/Src/ff.c **** 		scl = clst;
1082:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1083:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1084:Middlewares/Third_Party/FatFs/Src/ff.c **** 	ncl = scl;				/* Start cluster */
1085:Middlewares/Third_Party/FatFs/Src/ff.c **** 	for (;;) {
1086:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ncl++;							/* Next cluster */
1087:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (ncl >= fs->n_fatent) {		/* Check wrap around */
1088:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ncl = 2;
1089:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (ncl > scl) return 0;	/* No free cluster */
1090:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
1091:Middlewares/Third_Party/FatFs/Src/ff.c **** 		cs = get_fat(fs, ncl);			/* Get the cluster status */
1092:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (cs == 0) break;				/* Found a free cluster */
1093:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (cs == 0xFFFFFFFF || cs == 1)/* An error occurred */
1094:Middlewares/Third_Party/FatFs/Src/ff.c **** 			return cs;
1095:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (ncl == scl) return 0;		/* No free cluster */
1096:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1097:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1098:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = put_fat(fs, ncl, 0x0FFFFFFF);	/* Mark the new cluster "last link" */
1099:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK && clst != 0) {
1100:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = put_fat(fs, clst, ncl);	/* Link it to the previous one if needed */
1101:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1102:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
1103:Middlewares/Third_Party/FatFs/Src/ff.c **** 		fs->last_clust = ncl;			/* Update FSINFO */
1104:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
1105:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->free_clust--;
1106:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->fsi_flag |= 1;
1107:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
1108:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {
1109:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;
1110:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1111:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1112:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return ncl;		/* Return new cluster number or error code */
1113:Middlewares/Third_Party/FatFs/Src/ff.c **** }
1114:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* !_FS_READONLY */
1115:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1116:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1117:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1118:Middlewares/Third_Party/FatFs/Src/ff.c **** 
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 24


1119:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1120:Middlewares/Third_Party/FatFs/Src/ff.c **** /* FAT handling - Convert offset into cluster with link map table        */
1121:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1122:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1123:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_FASTSEEK
1124:Middlewares/Third_Party/FatFs/Src/ff.c **** static
1125:Middlewares/Third_Party/FatFs/Src/ff.c **** DWORD clmt_clust (	/* <2:Error, >=2:Cluster number */
1126:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FIL* fp,		/* Pointer to the file object */
1127:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD ofs		/* File offset to be converted to cluster# */
1128:Middlewares/Third_Party/FatFs/Src/ff.c **** )
1129:Middlewares/Third_Party/FatFs/Src/ff.c **** {
1130:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD cl, ncl, *tbl;
1131:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1132:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1133:Middlewares/Third_Party/FatFs/Src/ff.c **** 	tbl = fp->cltbl + 1;	/* Top of CLMT */
1134:Middlewares/Third_Party/FatFs/Src/ff.c **** 	cl = ofs / SS(fp->fs) / fp->fs->csize;	/* Cluster order from top of the file */
1135:Middlewares/Third_Party/FatFs/Src/ff.c **** 	for (;;) {
1136:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ncl = *tbl++;			/* Number of cluters in the fragment */
1137:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (!ncl) return 0;		/* End of table? (error) */
1138:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (cl < ncl) break;	/* In this fragment? */
1139:Middlewares/Third_Party/FatFs/Src/ff.c **** 		cl -= ncl; tbl++;		/* Next fragment */
1140:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1141:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return cl + *tbl;	/* Return the cluster number */
1142:Middlewares/Third_Party/FatFs/Src/ff.c **** }
1143:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif	/* _USE_FASTSEEK */
1144:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1145:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1146:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1147:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1148:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1149:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Directory handling - Set directory index                              */
1150:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1151:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1152:Middlewares/Third_Party/FatFs/Src/ff.c **** static
1153:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT dir_sdi (
1154:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR* dp,		/* Pointer to directory object */
1155:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT idx		/* Index of directory table */
1156:Middlewares/Third_Party/FatFs/Src/ff.c **** )
1157:Middlewares/Third_Party/FatFs/Src/ff.c **** {
1158:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD clst, sect;
1159:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT ic;
1160:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1161:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1162:Middlewares/Third_Party/FatFs/Src/ff.c **** 	dp->index = (WORD)idx;	/* Current index */
1163:Middlewares/Third_Party/FatFs/Src/ff.c **** 	clst = dp->sclust;		/* Table start cluster (0:root) */
1164:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (clst == 1 || clst >= dp->fs->n_fatent)	/* Check start cluster range */
1165:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_INT_ERR;
1166:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!clst && dp->fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
1167:Middlewares/Third_Party/FatFs/Src/ff.c **** 		clst = dp->fs->dirbase;
1168:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1169:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (clst == 0) {	/* Static table (root-directory in FAT12/16) */
1170:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (idx >= dp->fs->n_rootdir)	/* Is index out of range? */
1171:Middlewares/Third_Party/FatFs/Src/ff.c **** 			return FR_INT_ERR;
1172:Middlewares/Third_Party/FatFs/Src/ff.c **** 		sect = dp->fs->dirbase;
1173:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1174:Middlewares/Third_Party/FatFs/Src/ff.c **** 	else {				/* Dynamic table (root-directory in FAT32 or sub-directory) */
1175:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ic = SS(dp->fs) / SZ_DIRE * dp->fs->csize;	/* Entries per cluster */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 25


1176:Middlewares/Third_Party/FatFs/Src/ff.c **** 		while (idx >= ic) {	/* Follow cluster chain */
1177:Middlewares/Third_Party/FatFs/Src/ff.c **** 			clst = get_fat(dp->fs, clst);				/* Get next cluster */
1178:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
1179:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (clst < 2 || clst >= dp->fs->n_fatent)	/* Reached to end of table or internal error */
1180:Middlewares/Third_Party/FatFs/Src/ff.c **** 				return FR_INT_ERR;
1181:Middlewares/Third_Party/FatFs/Src/ff.c **** 			idx -= ic;
1182:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
1183:Middlewares/Third_Party/FatFs/Src/ff.c **** 		sect = clust2sect(dp->fs, clst);
1184:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1185:Middlewares/Third_Party/FatFs/Src/ff.c **** 	dp->clust = clst;	/* Current cluster# */
1186:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!sect) return FR_INT_ERR;
1187:Middlewares/Third_Party/FatFs/Src/ff.c **** 	dp->sect = sect + idx / (SS(dp->fs) / SZ_DIRE);					/* Sector# of the directory entry */
1188:Middlewares/Third_Party/FatFs/Src/ff.c **** 	dp->dir = dp->fs->win.d8 + (idx % (SS(dp->fs) / SZ_DIRE)) * SZ_DIRE;	/* Ptr to the entry in the se
1189:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1190:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return FR_OK;
1191:Middlewares/Third_Party/FatFs/Src/ff.c **** }
1192:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1193:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1194:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1195:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1196:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1197:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Directory handling - Move directory table index next                  */
1198:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1199:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1200:Middlewares/Third_Party/FatFs/Src/ff.c **** static
1201:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT dir_next (	/* FR_OK:Succeeded, FR_NO_FILE:End of table, FR_DENIED:Could not stretch */
1202:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR* dp,		/* Pointer to the directory object */
1203:Middlewares/Third_Party/FatFs/Src/ff.c **** 	int stretch		/* 0: Do not stretch table, 1: Stretch table if needed */
1204:Middlewares/Third_Party/FatFs/Src/ff.c **** )
1205:Middlewares/Third_Party/FatFs/Src/ff.c **** {
1206:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD clst;
1207:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT i;
1208:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
1209:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT c;
1210:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1211:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1212:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1213:Middlewares/Third_Party/FatFs/Src/ff.c **** 	i = dp->index + 1;
1214:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!(i & 0xFFFF) || !dp->sect)	/* Report EOT when index has reached 65535 */
1215:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_NO_FILE;
1216:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1217:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!(i % (SS(dp->fs) / SZ_DIRE))) {	/* Sector changed? */
1218:Middlewares/Third_Party/FatFs/Src/ff.c **** 		dp->sect++;					/* Next sector */
1219:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1220:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (!dp->clust) {		/* Static table */
1221:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (i >= dp->fs->n_rootdir)	/* Report EOT if it reached end of static table */
1222:Middlewares/Third_Party/FatFs/Src/ff.c **** 				return FR_NO_FILE;
1223:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
1224:Middlewares/Third_Party/FatFs/Src/ff.c **** 		else {					/* Dynamic table */
1225:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (((i / (SS(dp->fs) / SZ_DIRE)) & (dp->fs->csize - 1)) == 0) {	/* Cluster changed? */
1226:Middlewares/Third_Party/FatFs/Src/ff.c **** 				clst = get_fat(dp->fs, dp->clust);				/* Get next cluster */
1227:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (clst <= 1) return FR_INT_ERR;
1228:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
1229:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (clst >= dp->fs->n_fatent) {					/* If it reached end of dynamic table, */
1230:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
1231:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (!stretch) return FR_NO_FILE;			/* If do not stretch, report EOT */
1232:Middlewares/Third_Party/FatFs/Src/ff.c **** 					clst = create_chain(dp->fs, dp->clust);		/* Stretch cluster chain */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 26


1233:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
1234:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (clst == 1) return FR_INT_ERR;
1235:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
1236:Middlewares/Third_Party/FatFs/Src/ff.c **** 					/* Clean-up stretched table */
1237:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (sync_window(dp->fs)) return FR_DISK_ERR;/* Flush disk access window */
1238:Middlewares/Third_Party/FatFs/Src/ff.c **** 					mem_set(dp->fs->win.d8, 0, SS(dp->fs));		/* Clear window buffer */
1239:Middlewares/Third_Party/FatFs/Src/ff.c **** 					dp->fs->winsect = clust2sect(dp->fs, clst);	/* Cluster start sector */
1240:Middlewares/Third_Party/FatFs/Src/ff.c **** 					for (c = 0; c < dp->fs->csize; c++) {		/* Fill the new cluster with 0 */
1241:Middlewares/Third_Party/FatFs/Src/ff.c **** 						dp->fs->wflag = 1;
1242:Middlewares/Third_Party/FatFs/Src/ff.c **** 						if (sync_window(dp->fs)) return FR_DISK_ERR;
1243:Middlewares/Third_Party/FatFs/Src/ff.c **** 						dp->fs->winsect++;
1244:Middlewares/Third_Party/FatFs/Src/ff.c **** 					}
1245:Middlewares/Third_Party/FatFs/Src/ff.c **** 					dp->fs->winsect -= c;						/* Rewind window offset */
1246:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
1247:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (!stretch) return FR_NO_FILE;			/* If do not stretch, report EOT (this is to suppress warni
1248:Middlewares/Third_Party/FatFs/Src/ff.c **** 					return FR_NO_FILE;							/* Report EOT */
1249:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1250:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
1251:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dp->clust = clst;				/* Initialize data for new cluster */
1252:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dp->sect = clust2sect(dp->fs, clst);
1253:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
1254:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
1255:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1256:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1257:Middlewares/Third_Party/FatFs/Src/ff.c **** 	dp->index = (WORD)i;	/* Current index */
1258:Middlewares/Third_Party/FatFs/Src/ff.c **** 	dp->dir = dp->fs->win.d8 + (i % (SS(dp->fs) / SZ_DIRE)) * SZ_DIRE;	/* Current entry in the window 
1259:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1260:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return FR_OK;
1261:Middlewares/Third_Party/FatFs/Src/ff.c **** }
1262:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1263:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1264:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1265:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1266:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1267:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Directory handling - Reserve directory entry                          */
1268:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1269:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1270:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
1271:Middlewares/Third_Party/FatFs/Src/ff.c **** static
1272:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT dir_alloc (
1273:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR* dp,	/* Pointer to the directory object */
1274:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT nent	/* Number of contiguous entries to allocate (1-21) */
1275:Middlewares/Third_Party/FatFs/Src/ff.c **** )
1276:Middlewares/Third_Party/FatFs/Src/ff.c **** {
1277:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
1278:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT n;
1279:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1280:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1281:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = dir_sdi(dp, 0);
1282:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
1283:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n = 0;
1284:Middlewares/Third_Party/FatFs/Src/ff.c **** 		do {
1285:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = move_window(dp->fs, dp->sect);
1286:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) break;
1287:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (dp->dir[0] == DDEM || dp->dir[0] == 0) {	/* Is it a free entry? */
1288:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (++n == nent) break;	/* A block of contiguous free entries is found */
1289:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 27


1290:Middlewares/Third_Party/FatFs/Src/ff.c **** 				n = 0;					/* Not a blank entry. Restart to search */
1291:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
1292:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = dir_next(dp, 1);		/* Next entry with table stretch enabled */
1293:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} while (res == FR_OK);
1294:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1295:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_NO_FILE) res = FR_DENIED;	/* No directory entry to allocate */
1296:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return res;
1297:Middlewares/Third_Party/FatFs/Src/ff.c **** }
1298:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1299:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1300:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1301:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1302:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1303:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1304:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Directory handling - Load/Store start cluster number                  */
1305:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1306:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1307:Middlewares/Third_Party/FatFs/Src/ff.c **** static
1308:Middlewares/Third_Party/FatFs/Src/ff.c **** DWORD ld_clust (
1309:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FATFS* fs,	/* Pointer to the fs object */
1310:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE* dir	/* Pointer to the directory entry */
1311:Middlewares/Third_Party/FatFs/Src/ff.c **** )
1312:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 201              		.loc 1 1312 0
 202              		.cfi_startproc
 203              		@ args = 0, pretend = 0, frame = 0
 204              		@ frame_needed = 0, uses_anonymous_args = 0
 205              		@ link register save eliminated.
 206              	.LVL27:
1313:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD cl;
1314:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1315:Middlewares/Third_Party/FatFs/Src/ff.c **** 	cl = LD_WORD(dir + DIR_FstClusLO);
 207              		.loc 1 1315 0
 208 0000 CA7E     		ldrb	r2, [r1, #27]	@ zero_extendqisi2
 209 0002 8B7E     		ldrb	r3, [r1, #26]	@ zero_extendqisi2
 210 0004 43EA0223 		orr	r3, r3, r2, lsl #8
 211              	.LVL28:
1316:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fs->fs_type == FS_FAT32)
 212              		.loc 1 1316 0
 213 0008 90F80022 		ldrb	r2, [r0, #512]	@ zero_extendqisi2
 214 000c 032A     		cmp	r2, #3
 215 000e 01D0     		beq	.L18
 216              	.LVL29:
 217              	.L16:
1317:Middlewares/Third_Party/FatFs/Src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
1318:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1319:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return cl;
1320:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 218              		.loc 1 1320 0
 219 0010 1846     		mov	r0, r3
 220 0012 7047     		bx	lr
 221              	.LVL30:
 222              	.L18:
1317:Middlewares/Third_Party/FatFs/Src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 223              		.loc 1 1317 0
 224 0014 487D     		ldrb	r0, [r1, #21]	@ zero_extendqisi2
 225              	.LVL31:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 28


 226 0016 0A7D     		ldrb	r2, [r1, #20]	@ zero_extendqisi2
 227 0018 42EA0022 		orr	r2, r2, r0, lsl #8
 228 001c 43EA0243 		orr	r3, r3, r2, lsl #16
 229              	.LVL32:
1319:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 230              		.loc 1 1319 0
 231 0020 F6E7     		b	.L16
 232              		.cfi_endproc
 233              	.LFE81:
 235              		.section	.text.st_clust,"ax",%progbits
 236              		.align	1
 237              		.syntax unified
 238              		.thumb
 239              		.thumb_func
 240              		.fpu softvfp
 242              	st_clust:
 243              	.LFB82:
1321:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1322:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1323:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
1324:Middlewares/Third_Party/FatFs/Src/ff.c **** static
1325:Middlewares/Third_Party/FatFs/Src/ff.c **** void st_clust (
1326:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE* dir,	/* Pointer to the directory entry */
1327:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD cl	/* Value to be set */
1328:Middlewares/Third_Party/FatFs/Src/ff.c **** )
1329:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 244              		.loc 1 1329 0
 245              		.cfi_startproc
 246              		@ args = 0, pretend = 0, frame = 0
 247              		@ frame_needed = 0, uses_anonymous_args = 0
 248              		@ link register save eliminated.
 249              	.LVL33:
1330:Middlewares/Third_Party/FatFs/Src/ff.c **** 	ST_WORD(dir + DIR_FstClusLO, cl);
 250              		.loc 1 1330 0
 251 0000 8176     		strb	r1, [r0, #26]
 252 0002 C1F30723 		ubfx	r3, r1, #8, #8
 253 0006 C376     		strb	r3, [r0, #27]
1331:Middlewares/Third_Party/FatFs/Src/ff.c **** 	ST_WORD(dir + DIR_FstClusHI, cl >> 16);
 254              		.loc 1 1331 0
 255 0008 090C     		lsrs	r1, r1, #16
 256              	.LVL34:
 257 000a 0175     		strb	r1, [r0, #20]
 258 000c 090A     		lsrs	r1, r1, #8
 259 000e 4175     		strb	r1, [r0, #21]
1332:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 260              		.loc 1 1332 0
 261 0010 7047     		bx	lr
 262              		.cfi_endproc
 263              	.LFE82:
 265              		.section	.text.get_fileinfo,"ax",%progbits
 266              		.align	1
 267              		.syntax unified
 268              		.thumb
 269              		.thumb_func
 270              		.fpu softvfp
 272              	get_fileinfo:
 273              	.LFB87:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 29


1333:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1334:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1335:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1336:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1337:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1338:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1339:Middlewares/Third_Party/FatFs/Src/ff.c **** /* LFN handling - Test/Pick/Fit an LFN segment from/to directory entry   */
1340:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1341:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN
1342:Middlewares/Third_Party/FatFs/Src/ff.c **** static
1343:Middlewares/Third_Party/FatFs/Src/ff.c **** const BYTE LfnOfs[] = {1,3,5,7,9,14,16,18,20,22,24,28,30};	/* Offset of LFN characters in the direc
1344:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1345:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1346:Middlewares/Third_Party/FatFs/Src/ff.c **** static
1347:Middlewares/Third_Party/FatFs/Src/ff.c **** int cmp_lfn (			/* 1:Matched, 0:Not matched */
1348:Middlewares/Third_Party/FatFs/Src/ff.c **** 	WCHAR* lfnbuf,		/* Pointer to the LFN to be compared */
1349:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE* dir			/* Pointer to the directory entry containing a part of LFN */
1350:Middlewares/Third_Party/FatFs/Src/ff.c **** )
1351:Middlewares/Third_Party/FatFs/Src/ff.c **** {
1352:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT i, s;
1353:Middlewares/Third_Party/FatFs/Src/ff.c **** 	WCHAR wc, uc;
1354:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1355:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1356:Middlewares/Third_Party/FatFs/Src/ff.c **** 	i = ((dir[LDIR_Ord] & ~LLEF) - 1) * 13;	/* Get offset in the LFN buffer */
1357:Middlewares/Third_Party/FatFs/Src/ff.c **** 	s = 0; wc = 1;
1358:Middlewares/Third_Party/FatFs/Src/ff.c **** 	do {
1359:Middlewares/Third_Party/FatFs/Src/ff.c **** 		uc = LD_WORD(dir + LfnOfs[s]);	/* Pick an LFN character from the entry */
1360:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (wc) {	/* Last character has not been processed */
1361:Middlewares/Third_Party/FatFs/Src/ff.c **** 			wc = ff_wtoupper(uc);		/* Convert it to upper case */
1362:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (i >= _MAX_LFN || wc != ff_wtoupper(lfnbuf[i++]))	/* Compare it */
1363:Middlewares/Third_Party/FatFs/Src/ff.c **** 				return 0;				/* Not matched */
1364:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {
1365:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (uc != 0xFFFF) return 0;	/* Check filler */
1366:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
1367:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} while (++s < 13);				/* Repeat until all characters in the entry are checked */
1368:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1369:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if ((dir[LDIR_Ord] & LLEF) && wc && lfnbuf[i])	/* Last segment matched but different length */
1370:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return 0;
1371:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1372:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return 1;						/* The part of LFN matched */
1373:Middlewares/Third_Party/FatFs/Src/ff.c **** }
1374:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1375:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1376:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1377:Middlewares/Third_Party/FatFs/Src/ff.c **** static
1378:Middlewares/Third_Party/FatFs/Src/ff.c **** int pick_lfn (			/* 1:Succeeded, 0:Buffer overflow */
1379:Middlewares/Third_Party/FatFs/Src/ff.c **** 	WCHAR* lfnbuf,		/* Pointer to the Unicode-LFN buffer */
1380:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE* dir			/* Pointer to the directory entry */
1381:Middlewares/Third_Party/FatFs/Src/ff.c **** )
1382:Middlewares/Third_Party/FatFs/Src/ff.c **** {
1383:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT i, s;
1384:Middlewares/Third_Party/FatFs/Src/ff.c **** 	WCHAR wc, uc;
1385:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1386:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1387:Middlewares/Third_Party/FatFs/Src/ff.c **** 	i = ((dir[LDIR_Ord] & 0x3F) - 1) * 13;	/* Offset in the LFN buffer */
1388:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1389:Middlewares/Third_Party/FatFs/Src/ff.c **** 	s = 0; wc = 1;
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 30


1390:Middlewares/Third_Party/FatFs/Src/ff.c **** 	do {
1391:Middlewares/Third_Party/FatFs/Src/ff.c **** 		uc = LD_WORD(dir + LfnOfs[s]);		/* Pick an LFN character from the entry */
1392:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (wc) {	/* Last character has not been processed */
1393:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
1394:Middlewares/Third_Party/FatFs/Src/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
1395:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {
1396:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
1397:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
1398:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} while (++s < 13);						/* Read all character in the entry */
1399:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1400:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (dir[LDIR_Ord] & LLEF) {				/* Put terminator if it is the last LFN part */
1401:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (i >= _MAX_LFN) return 0;		/* Buffer overflow? */
1402:Middlewares/Third_Party/FatFs/Src/ff.c **** 		lfnbuf[i] = 0;
1403:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1404:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1405:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return 1;
1406:Middlewares/Third_Party/FatFs/Src/ff.c **** }
1407:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1408:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1409:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
1410:Middlewares/Third_Party/FatFs/Src/ff.c **** static
1411:Middlewares/Third_Party/FatFs/Src/ff.c **** void fit_lfn (
1412:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const WCHAR* lfnbuf,	/* Pointer to the LFN buffer */
1413:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE* dir,				/* Pointer to the directory entry */
1414:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE ord,				/* LFN order (1-20) */
1415:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE sum				/* SFN sum */
1416:Middlewares/Third_Party/FatFs/Src/ff.c **** )
1417:Middlewares/Third_Party/FatFs/Src/ff.c **** {
1418:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT i, s;
1419:Middlewares/Third_Party/FatFs/Src/ff.c **** 	WCHAR wc;
1420:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1421:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1422:Middlewares/Third_Party/FatFs/Src/ff.c **** 	dir[LDIR_Chksum] = sum;			/* Set check sum */
1423:Middlewares/Third_Party/FatFs/Src/ff.c **** 	dir[LDIR_Attr] = AM_LFN;		/* Set attribute. LFN entry */
1424:Middlewares/Third_Party/FatFs/Src/ff.c **** 	dir[LDIR_Type] = 0;
1425:Middlewares/Third_Party/FatFs/Src/ff.c **** 	ST_WORD(dir + LDIR_FstClusLO, 0);
1426:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1427:Middlewares/Third_Party/FatFs/Src/ff.c **** 	i = (ord - 1) * 13;				/* Get offset in the LFN buffer */
1428:Middlewares/Third_Party/FatFs/Src/ff.c **** 	s = wc = 0;
1429:Middlewares/Third_Party/FatFs/Src/ff.c **** 	do {
1430:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective character */
1431:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
1432:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (!wc) wc = 0xFFFF;		/* Padding characters following last character */
1433:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} while (++s < 13);
1434:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (wc == 0xFFFF || !lfnbuf[i]) ord |= LLEF;	/* Bottom LFN part is the start of LFN sequence */
1435:Middlewares/Third_Party/FatFs/Src/ff.c **** 	dir[LDIR_Ord] = ord;			/* Set the LFN order */
1436:Middlewares/Third_Party/FatFs/Src/ff.c **** }
1437:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1438:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1439:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1440:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1441:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1442:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1443:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1444:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1445:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Create numbered name                                                  */
1446:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 31


1447:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN
1448:Middlewares/Third_Party/FatFs/Src/ff.c **** static
1449:Middlewares/Third_Party/FatFs/Src/ff.c **** void gen_numname (
1450:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE* dst,			/* Pointer to the buffer to store numbered SFN */
1451:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const BYTE* src,	/* Pointer to SFN */
1452:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const WCHAR* lfn,	/* Pointer to LFN */
1453:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT seq			/* Sequence number */
1454:Middlewares/Third_Party/FatFs/Src/ff.c **** )
1455:Middlewares/Third_Party/FatFs/Src/ff.c **** {
1456:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE ns[8], c;
1457:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT i, j;
1458:Middlewares/Third_Party/FatFs/Src/ff.c **** 	WCHAR wc;
1459:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD sr;
1460:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1461:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1462:Middlewares/Third_Party/FatFs/Src/ff.c **** 	mem_cpy(dst, src, 11);
1463:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1464:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (seq > 5) {	/* On many collisions, generate a hash number instead of sequential number */
1465:Middlewares/Third_Party/FatFs/Src/ff.c **** 		sr = seq;
1466:Middlewares/Third_Party/FatFs/Src/ff.c **** 		while (*lfn) {	/* Create a CRC */
1467:Middlewares/Third_Party/FatFs/Src/ff.c **** 			wc = *lfn++;
1468:Middlewares/Third_Party/FatFs/Src/ff.c **** 			for (i = 0; i < 16; i++) {
1469:Middlewares/Third_Party/FatFs/Src/ff.c **** 				sr = (sr << 1) + (wc & 1);
1470:Middlewares/Third_Party/FatFs/Src/ff.c **** 				wc >>= 1;
1471:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (sr & 0x10000) sr ^= 0x11021;
1472:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
1473:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
1474:Middlewares/Third_Party/FatFs/Src/ff.c **** 		seq = (UINT)sr;
1475:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1476:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1477:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* itoa (hexdecimal) */
1478:Middlewares/Third_Party/FatFs/Src/ff.c **** 	i = 7;
1479:Middlewares/Third_Party/FatFs/Src/ff.c **** 	do {
1480:Middlewares/Third_Party/FatFs/Src/ff.c **** 		c = (seq % 16) + '0';
1481:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (c > '9') c += 7;
1482:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ns[i--] = c;
1483:Middlewares/Third_Party/FatFs/Src/ff.c **** 		seq /= 16;
1484:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} while (seq);
1485:Middlewares/Third_Party/FatFs/Src/ff.c **** 	ns[i] = '~';
1486:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1487:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Append the number */
1488:Middlewares/Third_Party/FatFs/Src/ff.c **** 	for (j = 0; j < i && dst[j] != ' '; j++) {
1489:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (IsDBCS1(dst[j])) {
1490:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (j == i - 1) break;
1491:Middlewares/Third_Party/FatFs/Src/ff.c **** 			j++;
1492:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
1493:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1494:Middlewares/Third_Party/FatFs/Src/ff.c **** 	do {
1495:Middlewares/Third_Party/FatFs/Src/ff.c **** 		dst[j++] = (i < 8) ? ns[i++] : ' ';
1496:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} while (j < 8);
1497:Middlewares/Third_Party/FatFs/Src/ff.c **** }
1498:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1499:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1500:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1501:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1502:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1503:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 32


1504:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Calculate sum of an SFN                                               */
1505:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1506:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN
1507:Middlewares/Third_Party/FatFs/Src/ff.c **** static
1508:Middlewares/Third_Party/FatFs/Src/ff.c **** BYTE sum_sfn (
1509:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const BYTE* dir		/* Pointer to the SFN entry */
1510:Middlewares/Third_Party/FatFs/Src/ff.c **** )
1511:Middlewares/Third_Party/FatFs/Src/ff.c **** {
1512:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE sum = 0;
1513:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT n = 11;
1514:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1515:Middlewares/Third_Party/FatFs/Src/ff.c **** 	do sum = (sum >> 1) + (sum << 7) + *dir++; while (--n);
1516:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return sum;
1517:Middlewares/Third_Party/FatFs/Src/ff.c **** }
1518:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1519:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1520:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1521:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1522:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1523:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1524:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Directory handling - Find an object in the directory                  */
1525:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1526:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1527:Middlewares/Third_Party/FatFs/Src/ff.c **** static
1528:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT dir_find (
1529:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR* dp			/* Pointer to the directory object linked to the file name */
1530:Middlewares/Third_Party/FatFs/Src/ff.c **** )
1531:Middlewares/Third_Party/FatFs/Src/ff.c **** {
1532:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
1533:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE c, *dir;
1534:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN
1535:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE a, ord, sum;
1536:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1537:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1538:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = dir_sdi(dp, 0);			/* Rewind directory object */
1539:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res != FR_OK) return res;
1540:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1541:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN
1542:Middlewares/Third_Party/FatFs/Src/ff.c **** 	ord = sum = 0xFF; dp->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
1543:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1544:Middlewares/Third_Party/FatFs/Src/ff.c **** 	do {
1545:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = move_window(dp->fs, dp->sect);
1546:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res != FR_OK) break;
1547:Middlewares/Third_Party/FatFs/Src/ff.c **** 		dir = dp->dir;					/* Ptr to the directory entry of current index */
1548:Middlewares/Third_Party/FatFs/Src/ff.c **** 		c = dir[DIR_Name];
1549:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
1550:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
1551:Middlewares/Third_Party/FatFs/Src/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
1552:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (c == DDEM || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
1553:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ord = 0xFF; dp->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
1554:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {
1555:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (a == AM_LFN) {			/* An LFN entry is found */
1556:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (dp->lfn) {
1557:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (c & LLEF) {		/* Is it start of LFN sequence? */
1558:Middlewares/Third_Party/FatFs/Src/ff.c **** 						sum = dir[LDIR_Chksum];
1559:Middlewares/Third_Party/FatFs/Src/ff.c **** 						c &= ~LLEF; ord = c;	/* LFN start order */
1560:Middlewares/Third_Party/FatFs/Src/ff.c **** 						dp->lfn_idx = dp->index;	/* Start index of LFN */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 33


1561:Middlewares/Third_Party/FatFs/Src/ff.c **** 					}
1562:Middlewares/Third_Party/FatFs/Src/ff.c **** 					/* Check validity of the LFN entry and compare it with given name */
1563:Middlewares/Third_Party/FatFs/Src/ff.c **** 					ord = (c == ord && sum == dir[LDIR_Chksum] && cmp_lfn(dp->lfn, dir)) ? ord - 1 : 0xFF;
1564:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
1565:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {					/* An SFN entry is found */
1566:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (!ord && sum == sum_sfn(dir)) break;	/* LFN matched? */
1567:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_LOSS) && !mem_cmp(dir, dp->fn, 11)) break;	/* SFN matched? */
1568:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ord = 0xFF; dp->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
1569:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
1570:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
1571:Middlewares/Third_Party/FatFs/Src/ff.c **** #else		/* Non LFN configuration */
1572:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (!(dir[DIR_Attr] & AM_VOL) && !mem_cmp(dir, dp->fn, 11)) /* Is it a valid entry? */
1573:Middlewares/Third_Party/FatFs/Src/ff.c **** 			break;
1574:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1575:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = dir_next(dp, 0);		/* Next entry */
1576:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} while (res == FR_OK);
1577:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1578:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return res;
1579:Middlewares/Third_Party/FatFs/Src/ff.c **** }
1580:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1581:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1582:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1583:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1584:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1585:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Read an object from the directory                                     */
1586:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1587:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_MINIMIZE <= 1 || _USE_LABEL || _FS_RPATH >= 2
1588:Middlewares/Third_Party/FatFs/Src/ff.c **** static
1589:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT dir_read (
1590:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR* dp,		/* Pointer to the directory object */
1591:Middlewares/Third_Party/FatFs/Src/ff.c **** 	int vol			/* Filtered by 0:file/directory or 1:volume label */
1592:Middlewares/Third_Party/FatFs/Src/ff.c **** )
1593:Middlewares/Third_Party/FatFs/Src/ff.c **** {
1594:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
1595:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE a, c, *dir;
1596:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN
1597:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE ord = 0xFF, sum = 0xFF;
1598:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1599:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1600:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = FR_NO_FILE;
1601:Middlewares/Third_Party/FatFs/Src/ff.c **** 	while (dp->sect) {
1602:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = move_window(dp->fs, dp->sect);
1603:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res != FR_OK) break;
1604:Middlewares/Third_Party/FatFs/Src/ff.c **** 		dir = dp->dir;					/* Ptr to the directory entry of current index */
1605:Middlewares/Third_Party/FatFs/Src/ff.c **** 		c = dir[DIR_Name];
1606:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
1607:Middlewares/Third_Party/FatFs/Src/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
1608:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
1609:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (c == DDEM || (!_FS_RPATH && c == '.') || (int)((a & ~AM_ARC) == AM_VOL) != vol) {	/* An entry
1610:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ord = 0xFF;
1611:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {
1612:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (a == AM_LFN) {			/* An LFN entry is found */
1613:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (c & LLEF) {			/* Is it start of LFN sequence? */
1614:Middlewares/Third_Party/FatFs/Src/ff.c **** 					sum = dir[LDIR_Chksum];
1615:Middlewares/Third_Party/FatFs/Src/ff.c **** 					c &= ~LLEF; ord = c;
1616:Middlewares/Third_Party/FatFs/Src/ff.c **** 					dp->lfn_idx = dp->index;
1617:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 34


1618:Middlewares/Third_Party/FatFs/Src/ff.c **** 				/* Check LFN validity and capture it */
1619:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ord = (c == ord && sum == dir[LDIR_Chksum] && pick_lfn(dp->lfn, dir)) ? ord - 1 : 0xFF;
1620:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {					/* An SFN entry is found */
1621:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (ord || sum != sum_sfn(dir))	/* Is there a valid LFN? */
1622:Middlewares/Third_Party/FatFs/Src/ff.c **** 					dp->lfn_idx = 0xFFFF;		/* It has no LFN. */
1623:Middlewares/Third_Party/FatFs/Src/ff.c **** 				break;
1624:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
1625:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
1626:Middlewares/Third_Party/FatFs/Src/ff.c **** #else		/* Non LFN configuration */
1627:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (c != DDEM && (_FS_RPATH || c != '.') && a != AM_LFN && (int)((a & ~AM_ARC) == AM_VOL) == vol)
1628:Middlewares/Third_Party/FatFs/Src/ff.c **** 			break;
1629:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1630:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = dir_next(dp, 0);				/* Next entry */
1631:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res != FR_OK) break;
1632:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1633:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1634:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res != FR_OK) dp->sect = 0;
1635:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1636:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return res;
1637:Middlewares/Third_Party/FatFs/Src/ff.c **** }
1638:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif	/* _FS_MINIMIZE <= 1 || _USE_LABEL || _FS_RPATH >= 2 */
1639:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1640:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1641:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1642:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1643:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1644:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Register an object to the directory                                   */
1645:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1646:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
1647:Middlewares/Third_Party/FatFs/Src/ff.c **** static
1648:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT dir_register (	/* FR_OK:Successful, FR_DENIED:No free entry or too many SFN collision, FR_D
1649:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR* dp				/* Target directory with object name to be created */
1650:Middlewares/Third_Party/FatFs/Src/ff.c **** )
1651:Middlewares/Third_Party/FatFs/Src/ff.c **** {
1652:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
1653:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
1654:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT n, nent;
1655:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE sn[12], *fn, sum;
1656:Middlewares/Third_Party/FatFs/Src/ff.c **** 	WCHAR *lfn;
1657:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1658:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1659:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fn = dp->fn; lfn = dp->lfn;
1660:Middlewares/Third_Party/FatFs/Src/ff.c **** 	mem_cpy(sn, fn, 12);
1661:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1662:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (_FS_RPATH && (sn[NSFLAG] & NS_DOT))		/* Cannot create dot entry */
1663:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_INVALID_NAME;
1664:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1665:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (sn[NSFLAG] & NS_LOSS) {			/* When LFN is out of 8.3 format, generate a numbered name */
1666:Middlewares/Third_Party/FatFs/Src/ff.c **** 		fn[NSFLAG] = 0; dp->lfn = 0;			/* Find only SFN */
1667:Middlewares/Third_Party/FatFs/Src/ff.c **** 		for (n = 1; n < 100; n++) {
1668:Middlewares/Third_Party/FatFs/Src/ff.c **** 			gen_numname(fn, sn, lfn, n);	/* Generate a numbered name */
1669:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = dir_find(dp);				/* Check if the name collides with existing SFN */
1670:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) break;
1671:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
1672:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (n == 100) return FR_DENIED;		/* Abort if too many collisions */
1673:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
1674:Middlewares/Third_Party/FatFs/Src/ff.c **** 		fn[NSFLAG] = sn[NSFLAG]; dp->lfn = lfn;
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 35


1675:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1676:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1677:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (sn[NSFLAG] & NS_LFN) {			/* When LFN is to be created, allocate entries for an SFN + LFNs. */
1678:Middlewares/Third_Party/FatFs/Src/ff.c **** 		for (n = 0; lfn[n]; n++) ;
1679:Middlewares/Third_Party/FatFs/Src/ff.c **** 		nent = (n + 25) / 13;
1680:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {						/* Otherwise allocate an entry for an SFN  */
1681:Middlewares/Third_Party/FatFs/Src/ff.c **** 		nent = 1;
1682:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1683:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = dir_alloc(dp, nent);		/* Allocate entries */
1684:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1685:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK && --nent) {	/* Set LFN entry if needed */
1686:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = dir_sdi(dp, dp->index - nent);
1687:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {
1688:Middlewares/Third_Party/FatFs/Src/ff.c **** 			sum = sum_sfn(dp->fn);	/* Sum value of the SFN tied to the LFN */
1689:Middlewares/Third_Party/FatFs/Src/ff.c **** 			do {					/* Store LFN entries in bottom first */
1690:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = move_window(dp->fs, dp->sect);
1691:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (res != FR_OK) break;
1692:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fit_lfn(dp->lfn, dp->dir, (BYTE)nent, sum);
1693:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dp->fs->wflag = 1;
1694:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = dir_next(dp, 0);	/* Next entry */
1695:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} while (res == FR_OK && --nent);
1696:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
1697:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1698:Middlewares/Third_Party/FatFs/Src/ff.c **** #else	/* Non LFN configuration */
1699:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = dir_alloc(dp, 1);		/* Allocate an entry for SFN */
1700:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1701:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1702:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {				/* Set SFN entry */
1703:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = move_window(dp->fs, dp->sect);
1704:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {
1705:Middlewares/Third_Party/FatFs/Src/ff.c **** 			mem_set(dp->dir, 0, SZ_DIRE);	/* Clean the entry */
1706:Middlewares/Third_Party/FatFs/Src/ff.c **** 			mem_cpy(dp->dir, dp->fn, 11);	/* Put SFN */
1707:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN
1708:Middlewares/Third_Party/FatFs/Src/ff.c **** 			dp->dir[DIR_NTres] = dp->fn[NSFLAG] & (NS_BODY | NS_EXT);	/* Put NT flag */
1709:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1710:Middlewares/Third_Party/FatFs/Src/ff.c **** 			dp->fs->wflag = 1;
1711:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
1712:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1713:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1714:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return res;
1715:Middlewares/Third_Party/FatFs/Src/ff.c **** }
1716:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* !_FS_READONLY */
1717:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1718:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1719:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1720:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1721:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1722:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Remove an object from the directory                                   */
1723:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1724:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY && !_FS_MINIMIZE
1725:Middlewares/Third_Party/FatFs/Src/ff.c **** static
1726:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT dir_remove (	/* FR_OK: Successful, FR_DISK_ERR: A disk error */
1727:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR* dp				/* Directory object pointing the entry to be removed */
1728:Middlewares/Third_Party/FatFs/Src/ff.c **** )
1729:Middlewares/Third_Party/FatFs/Src/ff.c **** {
1730:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
1731:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 36


1732:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT i;
1733:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1734:Middlewares/Third_Party/FatFs/Src/ff.c **** 	i = dp->index;	/* SFN index */
1735:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = dir_sdi(dp, (dp->lfn_idx == 0xFFFF) ? i : dp->lfn_idx);	/* Goto the SFN or top of the LFN en
1736:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
1737:Middlewares/Third_Party/FatFs/Src/ff.c **** 		do {
1738:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = move_window(dp->fs, dp->sect);
1739:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) break;
1740:Middlewares/Third_Party/FatFs/Src/ff.c **** 			mem_set(dp->dir, 0, SZ_DIRE);	/* Clear and mark the entry "deleted" */
1741:Middlewares/Third_Party/FatFs/Src/ff.c **** 			*dp->dir = DDEM;
1742:Middlewares/Third_Party/FatFs/Src/ff.c **** 			dp->fs->wflag = 1;
1743:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (dp->index >= i) break;	/* When reached SFN, all entries of the object has been deleted. */
1744:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = dir_next(dp, 0);		/* Next entry */
1745:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} while (res == FR_OK);
1746:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_NO_FILE) res = FR_INT_ERR;
1747:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1748:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1749:Middlewares/Third_Party/FatFs/Src/ff.c **** #else			/* Non LFN configuration */
1750:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = dir_sdi(dp, dp->index);
1751:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
1752:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = move_window(dp->fs, dp->sect);
1753:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {
1754:Middlewares/Third_Party/FatFs/Src/ff.c **** 			mem_set(dp->dir, 0, SZ_DIRE);	/* Clear and mark the entry "deleted" */
1755:Middlewares/Third_Party/FatFs/Src/ff.c **** 			*dp->dir = DDEM;
1756:Middlewares/Third_Party/FatFs/Src/ff.c **** 			dp->fs->wflag = 1;
1757:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
1758:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1759:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1760:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1761:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return res;
1762:Middlewares/Third_Party/FatFs/Src/ff.c **** }
1763:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* !_FS_READONLY */
1764:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1765:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1766:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1767:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1768:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1769:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Get file information from directory entry                             */
1770:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1771:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_MINIMIZE <= 1 || _FS_RPATH >= 2
1772:Middlewares/Third_Party/FatFs/Src/ff.c **** static
1773:Middlewares/Third_Party/FatFs/Src/ff.c **** void get_fileinfo (		/* No return code */
1774:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR* dp,			/* Pointer to the directory object */
1775:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FILINFO* fno	 	/* Pointer to the file information to be filled */
1776:Middlewares/Third_Party/FatFs/Src/ff.c **** )
1777:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 274              		.loc 1 1777 0
 275              		.cfi_startproc
 276              		@ args = 0, pretend = 0, frame = 0
 277              		@ frame_needed = 0, uses_anonymous_args = 0
 278              		@ link register save eliminated.
 279              	.LVL35:
 280 0000 30B4     		push	{r4, r5}
 281              	.LCFI2:
 282              		.cfi_def_cfa_offset 8
 283              		.cfi_offset 4, -8
 284              		.cfi_offset 5, -4
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 37


1778:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT i;
1779:Middlewares/Third_Party/FatFs/Src/ff.c **** 	TCHAR *p, c;
1780:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE *dir;
1781:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN
1782:Middlewares/Third_Party/FatFs/Src/ff.c **** 	WCHAR w, *lfn;
1783:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1784:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1785:Middlewares/Third_Party/FatFs/Src/ff.c **** 	p = fno->fname;
 285              		.loc 1 1785 0
 286 0002 01F10904 		add	r4, r1, #9
 287              	.LVL36:
1786:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (dp->sect) {		/* Get SFN */
 288              		.loc 1 1786 0
 289 0006 D0F81032 		ldr	r3, [r0, #528]
 290 000a 6BB3     		cbz	r3, .L21
1787:Middlewares/Third_Party/FatFs/Src/ff.c **** 		dir = dp->dir;
 291              		.loc 1 1787 0
 292 000c D0F81402 		ldr	r0, [r0, #532]
 293              	.LVL37:
1788:Middlewares/Third_Party/FatFs/Src/ff.c **** 		i = 0;
 294              		.loc 1 1788 0
 295 0010 0023     		movs	r3, #0
1789:Middlewares/Third_Party/FatFs/Src/ff.c **** 		while (i < 11) {		/* Copy name body and extension */
 296              		.loc 1 1789 0
 297 0012 04E0     		b	.L22
 298              	.LVL38:
 299              	.L24:
1790:Middlewares/Third_Party/FatFs/Src/ff.c **** 			c = (TCHAR)dir[i++];
1791:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (c == ' ') continue;				/* Skip padding spaces */
1792:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (c == RDDEM) c = (TCHAR)DDEM;	/* Restore replaced DDEM character */
1793:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (i == 9) *p++ = '.';				/* Insert a . if extension is exist */
 300              		.loc 1 1793 0
 301 0014 092A     		cmp	r2, #9
 302 0016 0CD0     		beq	.L29
 303              	.L25:
 304              	.LVL39:
1794:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN
1795:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (IsUpper(c) && (dir[DIR_NTres] & (i >= 9 ? NS_EXT : NS_BODY)))
1796:Middlewares/Third_Party/FatFs/Src/ff.c **** 				c += 0x20;			/* To lower */
1797:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _LFN_UNICODE
1798:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (IsDBCS1(c) && i != 8 && i != 11 && IsDBCS2(dir[i]))
1799:Middlewares/Third_Party/FatFs/Src/ff.c **** 				c = c << 8 | dir[i++];
1800:Middlewares/Third_Party/FatFs/Src/ff.c **** 			c = ff_convert(c, 1);	/* OEM -> Unicode */
1801:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!c) c = '?';
1802:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1803:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1804:Middlewares/Third_Party/FatFs/Src/ff.c **** 			*p++ = c;
 305              		.loc 1 1804 0
 306 0018 2370     		strb	r3, [r4]
 307 001a 0134     		adds	r4, r4, #1
 308              	.LVL40:
 309              	.L23:
 310 001c 1346     		mov	r3, r2
 311              	.LVL41:
 312              	.L22:
1789:Middlewares/Third_Party/FatFs/Src/ff.c **** 			c = (TCHAR)dir[i++];
 313              		.loc 1 1789 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 38


 314 001e 0A2B     		cmp	r3, #10
 315 0020 0BD8     		bhi	.L30
1790:Middlewares/Third_Party/FatFs/Src/ff.c **** 			c = (TCHAR)dir[i++];
 316              		.loc 1 1790 0
 317 0022 5A1C     		adds	r2, r3, #1
 318              	.LVL42:
 319 0024 C35C     		ldrb	r3, [r0, r3]	@ zero_extendqisi2
 320              	.LVL43:
1791:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (c == RDDEM) c = (TCHAR)DDEM;	/* Restore replaced DDEM character */
 321              		.loc 1 1791 0
 322 0026 202B     		cmp	r3, #32
 323 0028 F8D0     		beq	.L23
1792:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (i == 9) *p++ = '.';				/* Insert a . if extension is exist */
 324              		.loc 1 1792 0
 325 002a 052B     		cmp	r3, #5
 326 002c F2D1     		bne	.L24
 327 002e E523     		movs	r3, #229
 328              	.LVL44:
 329 0030 F0E7     		b	.L24
 330              	.LVL45:
 331              	.L29:
1793:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN
 332              		.loc 1 1793 0 discriminator 1
 333 0032 2E25     		movs	r5, #46
 334 0034 2570     		strb	r5, [r4]
 335 0036 0134     		adds	r4, r4, #1
 336              	.LVL46:
 337 0038 EEE7     		b	.L25
 338              	.LVL47:
 339              	.L30:
1805:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
1806:Middlewares/Third_Party/FatFs/Src/ff.c **** 		fno->fattrib = dir[DIR_Attr];				/* Attribute */
 340              		.loc 1 1806 0
 341 003a C37A     		ldrb	r3, [r0, #11]	@ zero_extendqisi2
 342              	.LVL48:
 343 003c 0B72     		strb	r3, [r1, #8]
1807:Middlewares/Third_Party/FatFs/Src/ff.c **** 		fno->fsize = LD_DWORD(dir + DIR_FileSize);	/* Size */
 344              		.loc 1 1807 0
 345 003e C27F     		ldrb	r2, [r0, #31]	@ zero_extendqisi2
 346 0040 837F     		ldrb	r3, [r0, #30]	@ zero_extendqisi2
 347 0042 1B04     		lsls	r3, r3, #16
 348 0044 43EA0263 		orr	r3, r3, r2, lsl #24
 349 0048 427F     		ldrb	r2, [r0, #29]	@ zero_extendqisi2
 350 004a 43EA0223 		orr	r3, r3, r2, lsl #8
 351 004e 027F     		ldrb	r2, [r0, #28]	@ zero_extendqisi2
 352 0050 1343     		orrs	r3, r3, r2
 353 0052 0B60     		str	r3, [r1]
1808:Middlewares/Third_Party/FatFs/Src/ff.c **** 		fno->fdate = LD_WORD(dir + DIR_WrtDate);	/* Date */
 354              		.loc 1 1808 0
 355 0054 427E     		ldrb	r2, [r0, #25]	@ zero_extendqisi2
 356 0056 037E     		ldrb	r3, [r0, #24]	@ zero_extendqisi2
 357 0058 43EA0223 		orr	r3, r3, r2, lsl #8
 358 005c 8B80     		strh	r3, [r1, #4]	@ movhi
1809:Middlewares/Third_Party/FatFs/Src/ff.c **** 		fno->ftime = LD_WORD(dir + DIR_WrtTime);	/* Time */
 359              		.loc 1 1809 0
 360 005e C27D     		ldrb	r2, [r0, #23]	@ zero_extendqisi2
 361 0060 837D     		ldrb	r3, [r0, #22]	@ zero_extendqisi2
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 39


 362 0062 43EA0223 		orr	r3, r3, r2, lsl #8
 363 0066 CB80     		strh	r3, [r1, #6]	@ movhi
 364              	.LVL49:
 365              	.L21:
1810:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1811:Middlewares/Third_Party/FatFs/Src/ff.c **** 	*p = 0;		/* Terminate SFN string by a \0 */
 366              		.loc 1 1811 0
 367 0068 0023     		movs	r3, #0
 368 006a 2370     		strb	r3, [r4]
1812:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1813:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN
1814:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fno->lfname) {
1815:Middlewares/Third_Party/FatFs/Src/ff.c **** 		i = 0; p = fno->lfname;
1816:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (dp->sect && fno->lfsize && dp->lfn_idx != 0xFFFF) {	/* Get LFN if available */
1817:Middlewares/Third_Party/FatFs/Src/ff.c **** 			lfn = dp->lfn;
1818:Middlewares/Third_Party/FatFs/Src/ff.c **** 			while ((w = *lfn++) != 0) {		/* Get an LFN character */
1819:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_LFN_UNICODE
1820:Middlewares/Third_Party/FatFs/Src/ff.c **** 				w = ff_convert(w, 0);		/* Unicode -> OEM */
1821:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (!w) { i = 0; break; }	/* No LFN if it could not be converted */
1822:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (_DF1S && w >= 0x100)	/* Put 1st byte if it is a DBC (always false on SBCS cfg) */
1823:Middlewares/Third_Party/FatFs/Src/ff.c **** 					p[i++] = (TCHAR)(w >> 8);
1824:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1825:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (i >= fno->lfsize - 1) { i = 0; break; }	/* No LFN if buffer overflow */
1826:Middlewares/Third_Party/FatFs/Src/ff.c **** 				p[i++] = (TCHAR)w;
1827:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
1828:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
1829:Middlewares/Third_Party/FatFs/Src/ff.c **** 		p[i] = 0;	/* Terminate LFN string by a \0 */
1830:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1831:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1832:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 369              		.loc 1 1832 0
 370 006c 30BC     		pop	{r4, r5}
 371              	.LCFI3:
 372              		.cfi_restore 5
 373              		.cfi_restore 4
 374              		.cfi_def_cfa_offset 0
 375              	.LVL50:
 376 006e 7047     		bx	lr
 377              		.cfi_endproc
 378              	.LFE87:
 380              		.section	.text.create_name,"ax",%progbits
 381              		.align	1
 382              		.syntax unified
 383              		.thumb
 384              		.thumb_func
 385              		.fpu softvfp
 387              	create_name:
 388              	.LFB88:
1833:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* _FS_MINIMIZE <= 1 || _FS_RPATH >= 2 */
1834:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1835:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1836:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1837:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1838:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1839:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Pattern matching                                                      */
1840:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1841:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_FIND && _FS_MINIMIZE <= 1
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 40


1842:Middlewares/Third_Party/FatFs/Src/ff.c **** static
1843:Middlewares/Third_Party/FatFs/Src/ff.c **** WCHAR get_achar (		/* Get a character and advances ptr 1 or 2 */
1844:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR** ptr	/* Pointer to pointer to the SBCS/DBCS/Unicode string */
1845:Middlewares/Third_Party/FatFs/Src/ff.c **** )
1846:Middlewares/Third_Party/FatFs/Src/ff.c **** {
1847:Middlewares/Third_Party/FatFs/Src/ff.c **** 	WCHAR chr;
1848:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1849:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_LFN_UNICODE
1850:Middlewares/Third_Party/FatFs/Src/ff.c **** 	chr = (BYTE)*(*ptr)++;					/* Get a byte */
1851:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (IsLower(chr)) chr -= 0x20;			/* To upper ASCII char */
1852:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (IsDBCS1(chr) && IsDBCS2(**ptr))		/* Get DBC 2nd byte if needed */
1853:Middlewares/Third_Party/FatFs/Src/ff.c **** 		chr = chr << 8 | (BYTE)*(*ptr)++;
1854:Middlewares/Third_Party/FatFs/Src/ff.c **** #ifdef _EXCVT
1855:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (chr >= 0x80) chr = ExCvt[chr - 0x80];	/* To upper SBCS extended char */
1856:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1857:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
1858:Middlewares/Third_Party/FatFs/Src/ff.c **** 	chr = ff_wtoupper(*(*ptr)++);			/* Get a word and to upper */
1859:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1860:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return chr;
1861:Middlewares/Third_Party/FatFs/Src/ff.c **** }
1862:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1863:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1864:Middlewares/Third_Party/FatFs/Src/ff.c **** static
1865:Middlewares/Third_Party/FatFs/Src/ff.c **** int pattern_matching (	/* Return value: 0:mismatched, 1:matched */
1866:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR* pat,	/* Matching pattern */
1867:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR* nam,	/* String to be tested */
1868:Middlewares/Third_Party/FatFs/Src/ff.c **** 	int skip,			/* Number of pre-skip chars (number of ?s) */
1869:Middlewares/Third_Party/FatFs/Src/ff.c **** 	int inf				/* Infinite search (* specified) */
1870:Middlewares/Third_Party/FatFs/Src/ff.c **** )
1871:Middlewares/Third_Party/FatFs/Src/ff.c **** {
1872:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR *pp, *np;
1873:Middlewares/Third_Party/FatFs/Src/ff.c **** 	WCHAR pc, nc;
1874:Middlewares/Third_Party/FatFs/Src/ff.c **** 	int nm, nx;
1875:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1876:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1877:Middlewares/Third_Party/FatFs/Src/ff.c **** 	while (skip--) {				/* Pre-skip name chars */
1878:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (!get_achar(&nam)) return 0;	/* Branch mismatched if less name chars */
1879:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1880:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!*pat && inf) return 1;		/* (short circuit) */
1881:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1882:Middlewares/Third_Party/FatFs/Src/ff.c **** 	do {
1883:Middlewares/Third_Party/FatFs/Src/ff.c **** 		pp = pat; np = nam;			/* Top of pattern and name to match */
1884:Middlewares/Third_Party/FatFs/Src/ff.c **** 		for (;;) {
1885:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (*pp == '?' || *pp == '*') {	/* Wildcard? */
1886:Middlewares/Third_Party/FatFs/Src/ff.c **** 				nm = nx = 0;
1887:Middlewares/Third_Party/FatFs/Src/ff.c **** 				do {				/* Analyze the wildcard chars */
1888:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (*pp++ == '?') nm++; else nx = 1;
1889:Middlewares/Third_Party/FatFs/Src/ff.c **** 				} while (*pp == '?' || *pp == '*');
1890:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (pattern_matching(pp, np, nm, nx)) return 1;	/* Test new branch (recurs upto number of wildc
1891:Middlewares/Third_Party/FatFs/Src/ff.c **** 				nc = *np; break;	/* Branch mismatched */
1892:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
1893:Middlewares/Third_Party/FatFs/Src/ff.c **** 			pc = get_achar(&pp);	/* Get a pattern char */
1894:Middlewares/Third_Party/FatFs/Src/ff.c **** 			nc = get_achar(&np);	/* Get a name char */
1895:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (pc != nc) break;	/* Branch mismatched? */
1896:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!pc) return 1;		/* Branch matched? (matched at end of both strings) */
1897:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
1898:Middlewares/Third_Party/FatFs/Src/ff.c **** 		get_achar(&nam);			/* nam++ */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 41


1899:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} while (inf && nc);			/* Retry until end of name if infinite search is specified */
1900:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1901:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return 0;
1902:Middlewares/Third_Party/FatFs/Src/ff.c **** }
1903:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* _USE_FIND && _FS_MINIMIZE <= 1 */
1904:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1905:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1906:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1907:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1908:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1909:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Pick a segment and create the object name in directory form           */
1910:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
1911:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1912:Middlewares/Third_Party/FatFs/Src/ff.c **** static
1913:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT create_name (
1914:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR* dp,			/* Pointer to the directory object */
1915:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR** path	/* Pointer to pointer to the segment in the path string */
1916:Middlewares/Third_Party/FatFs/Src/ff.c **** )
1917:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 389              		.loc 1 1917 0
 390              		.cfi_startproc
 391              		@ args = 0, pretend = 0, frame = 0
 392              		@ frame_needed = 0, uses_anonymous_args = 0
 393              	.LVL51:
 394 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 395              	.LCFI4:
 396              		.cfi_def_cfa_offset 40
 397              		.cfi_offset 3, -40
 398              		.cfi_offset 4, -36
 399              		.cfi_offset 5, -32
 400              		.cfi_offset 6, -28
 401              		.cfi_offset 7, -24
 402              		.cfi_offset 8, -20
 403              		.cfi_offset 9, -16
 404              		.cfi_offset 10, -12
 405              		.cfi_offset 11, -8
 406              		.cfi_offset 14, -4
 407 0004 8946     		mov	r9, r1
1918:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
1919:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE b, cf;
1920:Middlewares/Third_Party/FatFs/Src/ff.c **** 	WCHAR w, *lfn;
1921:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT i, ni, si, di;
1922:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR *p;
1923:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1924:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Create LFN in Unicode */
1925:Middlewares/Third_Party/FatFs/Src/ff.c **** 	for (p = *path; *p == '/' || *p == '\\'; p++) ;	/* Strip duplicated separator */
1926:Middlewares/Third_Party/FatFs/Src/ff.c **** 	lfn = dp->lfn;
1927:Middlewares/Third_Party/FatFs/Src/ff.c **** 	si = di = 0;
1928:Middlewares/Third_Party/FatFs/Src/ff.c **** 	for (;;) {
1929:Middlewares/Third_Party/FatFs/Src/ff.c **** 		w = p[si++];					/* Get a character */
1930:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (w < ' ' || w == '/' || w == '\\') break;	/* Break on end of segment */
1931:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (di >= _MAX_LFN)				/* Reject too long name */
1932:Middlewares/Third_Party/FatFs/Src/ff.c **** 			return FR_INVALID_NAME;
1933:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_LFN_UNICODE
1934:Middlewares/Third_Party/FatFs/Src/ff.c **** 		w &= 0xFF;
1935:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (IsDBCS1(w)) {				/* Check if it is a DBC 1st byte (always false on SBCS cfg) */
1936:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _DF1S
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 42


1937:Middlewares/Third_Party/FatFs/Src/ff.c **** 			b = (BYTE)p[si++];			/* Get 2nd byte */
1938:Middlewares/Third_Party/FatFs/Src/ff.c **** 			w = (w << 8) + b;			/* Create a DBC */
1939:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!IsDBCS2(b))
1940:Middlewares/Third_Party/FatFs/Src/ff.c **** 				return FR_INVALID_NAME;	/* Reject invalid sequence */
1941:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1942:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
1943:Middlewares/Third_Party/FatFs/Src/ff.c **** 		w = ff_convert(w, 1);			/* Convert ANSI/OEM to Unicode */
1944:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (!w) return FR_INVALID_NAME;	/* Reject invalid code */
1945:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1946:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (w < 0x80 && chk_chr("\"*:<>\?|\x7F", w)) /* Reject illegal characters for LFN */
1947:Middlewares/Third_Party/FatFs/Src/ff.c **** 			return FR_INVALID_NAME;
1948:Middlewares/Third_Party/FatFs/Src/ff.c **** 		lfn[di++] = w;					/* Store the Unicode character */
1949:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1950:Middlewares/Third_Party/FatFs/Src/ff.c **** 	*path = &p[si];						/* Return pointer to the next segment */
1951:Middlewares/Third_Party/FatFs/Src/ff.c **** 	cf = (w < ' ') ? NS_LAST : 0;		/* Set last segment flag if end of path */
1952:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_RPATH
1953:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if ((di == 1 && lfn[di - 1] == '.') || /* Is this a dot entry? */
1954:Middlewares/Third_Party/FatFs/Src/ff.c **** 		(di == 2 && lfn[di - 1] == '.' && lfn[di - 2] == '.')) {
1955:Middlewares/Third_Party/FatFs/Src/ff.c **** 		lfn[di] = 0;
1956:Middlewares/Third_Party/FatFs/Src/ff.c **** 		for (i = 0; i < 11; i++)
1957:Middlewares/Third_Party/FatFs/Src/ff.c **** 			dp->fn[i] = (i < di) ? '.' : ' ';
1958:Middlewares/Third_Party/FatFs/Src/ff.c **** 		dp->fn[i] = cf | NS_DOT;		/* This is a dot entry */
1959:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_OK;
1960:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1961:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
1962:Middlewares/Third_Party/FatFs/Src/ff.c **** 	while (di) {						/* Strip trailing spaces and dots */
1963:Middlewares/Third_Party/FatFs/Src/ff.c **** 		w = lfn[di - 1];
1964:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (w != ' ' && w != '.') break;
1965:Middlewares/Third_Party/FatFs/Src/ff.c **** 		di--;
1966:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
1967:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!di) return FR_INVALID_NAME;	/* Reject nul string */
1968:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1969:Middlewares/Third_Party/FatFs/Src/ff.c **** 	lfn[di] = 0;						/* LFN is created */
1970:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1971:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Create SFN in directory form */
1972:Middlewares/Third_Party/FatFs/Src/ff.c **** 	mem_set(dp->fn, ' ', 11);
1973:Middlewares/Third_Party/FatFs/Src/ff.c **** 	for (si = 0; lfn[si] == ' ' || lfn[si] == '.'; si++) ;	/* Strip leading spaces and dots */
1974:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (si) cf |= NS_LOSS | NS_LFN;
1975:Middlewares/Third_Party/FatFs/Src/ff.c **** 	while (di && lfn[di - 1] != '.') di--;	/* Find extension (di<=si: no extension) */
1976:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1977:Middlewares/Third_Party/FatFs/Src/ff.c **** 	b = i = 0; ni = 8;
1978:Middlewares/Third_Party/FatFs/Src/ff.c **** 	for (;;) {
1979:Middlewares/Third_Party/FatFs/Src/ff.c **** 		w = lfn[si++];					/* Get an LFN character */
1980:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (!w) break;					/* Break on end of the LFN */
1981:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (w == ' ' || (w == '.' && si != di)) {	/* Remove spaces and dots */
1982:Middlewares/Third_Party/FatFs/Src/ff.c **** 			cf |= NS_LOSS | NS_LFN; continue;
1983:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
1984:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1985:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (i >= ni || si == di) {		/* Extension or end of SFN */
1986:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (ni == 11) {				/* Long extension */
1987:Middlewares/Third_Party/FatFs/Src/ff.c **** 				cf |= NS_LOSS | NS_LFN; break;
1988:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
1989:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (si != di) cf |= NS_LOSS | NS_LFN;	/* Out of 8.3 format */
1990:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (si > di) break;			/* No extension */
1991:Middlewares/Third_Party/FatFs/Src/ff.c **** 			si = di; i = 8; ni = 11;	/* Enter extension section */
1992:Middlewares/Third_Party/FatFs/Src/ff.c **** 			b <<= 2; continue;
1993:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 43


1994:Middlewares/Third_Party/FatFs/Src/ff.c **** 
1995:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (w >= 0x80) {				/* Non ASCII character */
1996:Middlewares/Third_Party/FatFs/Src/ff.c **** #ifdef _EXCVT
1997:Middlewares/Third_Party/FatFs/Src/ff.c **** 			w = ff_convert(w, 0);		/* Unicode -> OEM code */
1998:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (w) w = ExCvt[w - 0x80];	/* Convert extended character to upper (SBCS) */
1999:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
2000:Middlewares/Third_Party/FatFs/Src/ff.c **** 			w = ff_convert(ff_wtoupper(w), 0);	/* Upper converted Unicode -> OEM code */
2001:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2002:Middlewares/Third_Party/FatFs/Src/ff.c **** 			cf |= NS_LFN;				/* Force create LFN entry */
2003:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
2004:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2005:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (_DF1S && w >= 0x100) {		/* DBC (always false at SBCS cfg) */
2006:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (i >= ni - 1) {
2007:Middlewares/Third_Party/FatFs/Src/ff.c **** 				cf |= NS_LOSS | NS_LFN; i = ni; continue;
2008:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
2009:Middlewares/Third_Party/FatFs/Src/ff.c **** 			dp->fn[i++] = (BYTE)(w >> 8);
2010:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {						/* SBC */
2011:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!w || chk_chr("+,;=[]", w)) {	/* Replace illegal characters for SFN */
2012:Middlewares/Third_Party/FatFs/Src/ff.c **** 				w = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
2013:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {
2014:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (IsUpper(w)) {		/* ASCII large capital */
2015:Middlewares/Third_Party/FatFs/Src/ff.c **** 					b |= 2;
2016:Middlewares/Third_Party/FatFs/Src/ff.c **** 				} else {
2017:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (IsLower(w)) {	/* ASCII small capital */
2018:Middlewares/Third_Party/FatFs/Src/ff.c **** 						b |= 1; w -= 0x20;
2019:Middlewares/Third_Party/FatFs/Src/ff.c **** 					}
2020:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
2021:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
2022:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
2023:Middlewares/Third_Party/FatFs/Src/ff.c **** 		dp->fn[i++] = (BYTE)w;
2024:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
2025:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2026:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (dp->fn[0] == DDEM) dp->fn[0] = RDDEM;	/* If the first character collides with deleted mark, re
2027:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2028:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (ni == 8) b <<= 2;
2029:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03)	/* Create LFN entry when there are composite capital
2030:Middlewares/Third_Party/FatFs/Src/ff.c **** 		cf |= NS_LFN;
2031:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!(cf & NS_LFN)) {						/* When LFN is in 8.3 format without extended character, NT flags are c
2032:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if ((b & 0x03) == 0x01) cf |= NS_EXT;	/* NT flag (Extension has only small capital) */
2033:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if ((b & 0x0C) == 0x04) cf |= NS_BODY;	/* NT flag (Filename has only small capital) */
2034:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
2035:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2036:Middlewares/Third_Party/FatFs/Src/ff.c **** 	dp->fn[NSFLAG] = cf;	/* SFN is created */
2037:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2038:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return FR_OK;
2039:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2040:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2041:Middlewares/Third_Party/FatFs/Src/ff.c **** #else	/* Non-LFN configuration */
2042:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE b, c, d, *sfn;
2043:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT ni, si, i;
2044:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const char *p;
2045:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2046:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Create file name in directory form */
2047:Middlewares/Third_Party/FatFs/Src/ff.c **** 	for (p = *path; *p == '/' || *p == '\\'; p++) ;	/* Strip duplicated separator */
 408              		.loc 1 2047 0
 409 0006 0C68     		ldr	r4, [r1]
 410              	.LVL52:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 44


 411 0008 00E0     		b	.L32
 412              	.L33:
 413              		.loc 1 2047 0 is_stmt 0 discriminator 5
 414 000a 0134     		adds	r4, r4, #1
 415              	.LVL53:
 416              	.L32:
 417              		.loc 1 2047 0 discriminator 1
 418 000c 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 419 000e 2F2B     		cmp	r3, #47
 420 0010 FBD0     		beq	.L33
 421              		.loc 1 2047 0 discriminator 4
 422 0012 5C2B     		cmp	r3, #92
 423 0014 F9D0     		beq	.L33
2048:Middlewares/Third_Party/FatFs/Src/ff.c **** 	sfn = dp->fn;
 424              		.loc 1 2048 0 is_stmt 1
 425 0016 D0F818A2 		ldr	r10, [r0, #536]
 426              	.LVL54:
2049:Middlewares/Third_Party/FatFs/Src/ff.c **** 	mem_set(sfn, ' ', 11);
 427              		.loc 1 2049 0
 428 001a 0B22     		movs	r2, #11
 429 001c 2021     		movs	r1, #32
 430              	.LVL55:
 431 001e 5046     		mov	r0, r10
 432              	.LVL56:
 433 0020 FFF7FEFF 		bl	mem_set
 434              	.LVL57:
2050:Middlewares/Third_Party/FatFs/Src/ff.c **** 	si = i = b = 0; ni = 8;
 435              		.loc 1 2050 0
 436 0024 0026     		movs	r6, #0
 437 0026 3346     		mov	r3, r6
 438 0028 4FF00808 		mov	r8, #8
 439 002c 3746     		mov	r7, r6
 440 002e 19E0     		b	.L34
 441              	.LVL58:
 442              	.L55:
2051:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_RPATH
2052:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (p[si] == '.') { /* Is this a dot entry? */
2053:Middlewares/Third_Party/FatFs/Src/ff.c **** 		for (;;) {
2054:Middlewares/Third_Party/FatFs/Src/ff.c **** 			c = (BYTE)p[si++];
2055:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (c != '.' || si >= 3) break;
2056:Middlewares/Third_Party/FatFs/Src/ff.c **** 			sfn[i++] = c;
2057:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
2058:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (c != '/' && c != '\\' && c > ' ') return FR_INVALID_NAME;
2059:Middlewares/Third_Party/FatFs/Src/ff.c **** 		*path = &p[si];									/* Return pointer to the next segment */
2060:Middlewares/Third_Party/FatFs/Src/ff.c **** 		sfn[NSFLAG] = (c <= ' ') ? NS_LAST | NS_DOT : NS_DOT;	/* Set last segment flag if end of path */
2061:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_OK;
2062:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
2063:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2064:Middlewares/Third_Party/FatFs/Src/ff.c **** 	for (;;) {
2065:Middlewares/Third_Party/FatFs/Src/ff.c **** 		c = (BYTE)p[si++];
2066:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (c <= ' ' || c == '/' || c == '\\') break;	/* Break on end of segment */
2067:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (c == '.' || i >= ni) {
2068:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (ni != 8 || c != '.') return FR_INVALID_NAME;
2069:Middlewares/Third_Party/FatFs/Src/ff.c **** 			i = 8; ni = 11;
2070:Middlewares/Third_Party/FatFs/Src/ff.c **** 			b <<= 2; continue;
 443              		.loc 1 2070 0
 444 0030 BF00     		lsls	r7, r7, #2
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 45


 445              	.LVL59:
 446 0032 FFB2     		uxtb	r7, r7
 447              	.LVL60:
2069:Middlewares/Third_Party/FatFs/Src/ff.c **** 			b <<= 2; continue;
 448              		.loc 1 2069 0
 449 0034 4646     		mov	r6, r8
 450 0036 4FF00B08 		mov	r8, #11
 451              		.loc 1 2070 0
 452 003a 12E0     		b	.L39
 453              	.LVL61:
 454              	.L37:
2071:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
2072:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (c >= 0x80) {				/* Extended character? */
 455              		.loc 1 2072 0
 456 003c 15F0800F 		tst	r5, #128
 457 0040 25D1     		bne	.L54
 458              	.L40:
2073:Middlewares/Third_Party/FatFs/Src/ff.c **** 			b |= 3;						/* Eliminate NT flag */
2074:Middlewares/Third_Party/FatFs/Src/ff.c **** #ifdef _EXCVT
2075:Middlewares/Third_Party/FatFs/Src/ff.c **** 			c = ExCvt[c - 0x80];		/* To upper extended characters (SBCS cfg) */
2076:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
2077:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_DF1S
2078:Middlewares/Third_Party/FatFs/Src/ff.c **** 			return FR_INVALID_NAME;		/* Reject extended characters (ASCII cfg) */
2079:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2080:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2081:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
2082:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (IsDBCS1(c)) {				/* Check if it is a DBC 1st byte (always false on SBCS cfg) */
2083:Middlewares/Third_Party/FatFs/Src/ff.c **** 			d = (BYTE)p[si++];			/* Get 2nd byte */
2084:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!IsDBCS2(d) || i >= ni - 1)	/* Reject invalid DBC */
2085:Middlewares/Third_Party/FatFs/Src/ff.c **** 				return FR_INVALID_NAME;
2086:Middlewares/Third_Party/FatFs/Src/ff.c **** 			sfn[i++] = c;
2087:Middlewares/Third_Party/FatFs/Src/ff.c **** 			sfn[i++] = d;
2088:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {						/* SBC */
2089:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (chk_chr("\"*+,:;<=>\?[]|\x7F", c))	/* Reject illegal chrs for SFN */
 459              		.loc 1 2089 0
 460 0042 2946     		mov	r1, r5
 461 0044 3148     		ldr	r0, .L60
 462 0046 FFF7FEFF 		bl	chk_chr
 463              	.LVL62:
 464 004a 0028     		cmp	r0, #0
 465 004c 5AD1     		bne	.L50
2090:Middlewares/Third_Party/FatFs/Src/ff.c **** 				return FR_INVALID_NAME;
2091:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (IsUpper(c)) {			/* ASCII large capital? */
 466              		.loc 1 2091 0
 467 004e A5F14103 		sub	r3, r5, #65
 468 0052 DBB2     		uxtb	r3, r3
 469 0054 192B     		cmp	r3, #25
 470 0056 20D8     		bhi	.L41
2092:Middlewares/Third_Party/FatFs/Src/ff.c **** 				b |= 2;
 471              		.loc 1 2092 0
 472 0058 47F00207 		orr	r7, r7, #2
 473              	.LVL63:
 474              	.L42:
2093:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {
2094:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (IsLower(c)) {		/* ASCII small capital? */
2095:Middlewares/Third_Party/FatFs/Src/ff.c **** 					b |= 1; c -= 0x20;
2096:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 46


2097:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
2098:Middlewares/Third_Party/FatFs/Src/ff.c **** 			sfn[i++] = c;
 475              		.loc 1 2098 0
 476 005c 0AF80650 		strb	r5, [r10, r6]
 477 0060 0136     		adds	r6, r6, #1
 478              	.LVL64:
 479              	.L39:
 480 0062 5B46     		mov	r3, fp
 481              	.LVL65:
 482              	.L34:
2065:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (c <= ' ' || c == '/' || c == '\\') break;	/* Break on end of segment */
 483              		.loc 1 2065 0
 484 0064 03F1010B 		add	fp, r3, #1
 485              	.LVL66:
 486 0068 E55C     		ldrb	r5, [r4, r3]	@ zero_extendqisi2
 487              	.LVL67:
2066:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (c == '.' || i >= ni) {
 488              		.loc 1 2066 0
 489 006a 202D     		cmp	r5, #32
 490 006c 1FD9     		bls	.L35
2066:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (c == '.' || i >= ni) {
 491              		.loc 1 2066 0 is_stmt 0 discriminator 1
 492 006e 2F2D     		cmp	r5, #47
 493 0070 1DD0     		beq	.L35
2066:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (c == '.' || i >= ni) {
 494              		.loc 1 2066 0 discriminator 2
 495 0072 5C2D     		cmp	r5, #92
 496 0074 1BD0     		beq	.L35
2067:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (ni != 8 || c != '.') return FR_INVALID_NAME;
 497              		.loc 1 2067 0 is_stmt 1
 498 0076 2E2D     		cmp	r5, #46
 499 0078 01D0     		beq	.L36
2067:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (ni != 8 || c != '.') return FR_INVALID_NAME;
 500              		.loc 1 2067 0 is_stmt 0 discriminator 1
 501 007a B045     		cmp	r8, r6
 502 007c DED8     		bhi	.L37
 503              	.L36:
2068:Middlewares/Third_Party/FatFs/Src/ff.c **** 			i = 8; ni = 11;
 504              		.loc 1 2068 0 is_stmt 1
 505 007e B8F1080F 		cmp	r8, #8
 506 0082 3DD1     		bne	.L48
2068:Middlewares/Third_Party/FatFs/Src/ff.c **** 			i = 8; ni = 11;
 507              		.loc 1 2068 0 is_stmt 0 discriminator 2
 508 0084 2E2D     		cmp	r5, #46
 509 0086 D3D0     		beq	.L55
2068:Middlewares/Third_Party/FatFs/Src/ff.c **** 			i = 8; ni = 11;
 510              		.loc 1 2068 0
 511 0088 0620     		movs	r0, #6
 512              	.LVL68:
 513              	.L38:
2099:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
2100:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
2101:Middlewares/Third_Party/FatFs/Src/ff.c **** 	*path = &p[si];						/* Return pointer to the next segment */
2102:Middlewares/Third_Party/FatFs/Src/ff.c **** 	c = (c <= ' ') ? NS_LAST : 0;		/* Set last segment flag if end of path */
2103:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2104:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!i) return FR_INVALID_NAME;		/* Reject nul string */
2105:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (sfn[0] == DDEM) sfn[0] = RDDEM;	/* When first character collides with DDEM, replace it with RD
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 47


2106:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2107:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (ni == 8) b <<= 2;
2108:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if ((b & 0x03) == 0x01) c |= NS_EXT;	/* NT flag (Name extension has only small capital) */
2109:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if ((b & 0x0C) == 0x04) c |= NS_BODY;	/* NT flag (Name body has only small capital) */
2110:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2111:Middlewares/Third_Party/FatFs/Src/ff.c **** 	sfn[NSFLAG] = c;		/* Store NT flag, File name is created */
2112:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2113:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return FR_OK;
2114:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2115:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 514              		.loc 1 2115 0 is_stmt 1
 515 008a BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 516              	.LVL69:
 517              	.L54:
2073:Middlewares/Third_Party/FatFs/Src/ff.c **** #ifdef _EXCVT
 518              		.loc 1 2073 0
 519 008e 47F00307 		orr	r7, r7, #3
 520              	.LVL70:
2075:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
 521              		.loc 1 2075 0
 522 0092 803D     		subs	r5, r5, #128
 523              	.LVL71:
 524 0094 1E4B     		ldr	r3, .L60+4
 525 0096 5D5D     		ldrb	r5, [r3, r5]	@ zero_extendqisi2
 526              	.LVL72:
 527 0098 D3E7     		b	.L40
 528              	.L41:
2094:Middlewares/Third_Party/FatFs/Src/ff.c **** 					b |= 1; c -= 0x20;
 529              		.loc 1 2094 0
 530 009a A5F16103 		sub	r3, r5, #97
 531 009e DBB2     		uxtb	r3, r3
 532 00a0 192B     		cmp	r3, #25
 533 00a2 DBD8     		bhi	.L42
2095:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
 534              		.loc 1 2095 0
 535 00a4 47F00107 		orr	r7, r7, #1
 536              	.LVL73:
 537 00a8 203D     		subs	r5, r5, #32
 538              	.LVL74:
 539 00aa EDB2     		uxtb	r5, r5
 540              	.LVL75:
 541 00ac D6E7     		b	.L42
 542              	.L35:
2101:Middlewares/Third_Party/FatFs/Src/ff.c **** 	c = (c <= ' ') ? NS_LAST : 0;		/* Set last segment flag if end of path */
 543              		.loc 1 2101 0
 544 00ae 5C44     		add	r4, r4, fp
 545              	.LVL76:
 546 00b0 C9F80040 		str	r4, [r9]
2102:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 547              		.loc 1 2102 0
 548 00b4 202D     		cmp	r5, #32
 549 00b6 14D8     		bhi	.L51
 550 00b8 0423     		movs	r3, #4
 551              	.L43:
 552              	.LVL77:
2104:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (sfn[0] == DDEM) sfn[0] = RDDEM;	/* When first character collides with DDEM, replace it with RD
 553              		.loc 1 2104 0 discriminator 4
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 48


 554 00ba 2EB3     		cbz	r6, .L52
2105:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 555              		.loc 1 2105 0
 556 00bc 9AF80020 		ldrb	r2, [r10]	@ zero_extendqisi2
 557 00c0 E52A     		cmp	r2, #229
 558 00c2 10D0     		beq	.L56
 559              	.L44:
2107:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if ((b & 0x03) == 0x01) c |= NS_EXT;	/* NT flag (Name extension has only small capital) */
 560              		.loc 1 2107 0
 561 00c4 B8F1080F 		cmp	r8, #8
 562 00c8 11D0     		beq	.L57
 563              	.L45:
2108:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if ((b & 0x0C) == 0x04) c |= NS_BODY;	/* NT flag (Name body has only small capital) */
 564              		.loc 1 2108 0
 565 00ca 07F00302 		and	r2, r7, #3
 566 00ce 012A     		cmp	r2, #1
 567 00d0 10D0     		beq	.L58
 568              	.L46:
2109:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 569              		.loc 1 2109 0
 570 00d2 07F00C07 		and	r7, r7, #12
 571              	.LVL78:
 572 00d6 042F     		cmp	r7, #4
 573 00d8 0FD0     		beq	.L59
 574              	.L47:
2111:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 575              		.loc 1 2111 0
 576 00da 8AF80B30 		strb	r3, [r10, #11]
2113:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 577              		.loc 1 2113 0
 578 00de 0020     		movs	r0, #0
 579 00e0 D3E7     		b	.L38
 580              	.LVL79:
 581              	.L51:
2102:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 582              		.loc 1 2102 0
 583 00e2 0023     		movs	r3, #0
 584 00e4 E9E7     		b	.L43
 585              	.LVL80:
 586              	.L56:
2105:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 587              		.loc 1 2105 0 discriminator 1
 588 00e6 0522     		movs	r2, #5
 589 00e8 8AF80020 		strb	r2, [r10]
 590 00ec EAE7     		b	.L44
 591              	.L57:
2107:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if ((b & 0x03) == 0x01) c |= NS_EXT;	/* NT flag (Name extension has only small capital) */
 592              		.loc 1 2107 0 discriminator 1
 593 00ee BF00     		lsls	r7, r7, #2
 594              	.LVL81:
 595 00f0 FFB2     		uxtb	r7, r7
 596              	.LVL82:
 597 00f2 EAE7     		b	.L45
 598              	.L58:
2108:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if ((b & 0x0C) == 0x04) c |= NS_BODY;	/* NT flag (Name body has only small capital) */
 599              		.loc 1 2108 0 discriminator 1
 600 00f4 43F01003 		orr	r3, r3, #16
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 49


 601              	.LVL83:
 602 00f8 EBE7     		b	.L46
 603              	.LVL84:
 604              	.L59:
2109:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 605              		.loc 1 2109 0 discriminator 1
 606 00fa 43F00803 		orr	r3, r3, #8
 607              	.LVL85:
 608 00fe ECE7     		b	.L47
 609              	.LVL86:
 610              	.L48:
2068:Middlewares/Third_Party/FatFs/Src/ff.c **** 			i = 8; ni = 11;
 611              		.loc 1 2068 0
 612 0100 0620     		movs	r0, #6
 613 0102 C2E7     		b	.L38
 614              	.L50:
2090:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (IsUpper(c)) {			/* ASCII large capital? */
 615              		.loc 1 2090 0
 616 0104 0620     		movs	r0, #6
 617 0106 C0E7     		b	.L38
 618              	.LVL87:
 619              	.L52:
2104:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (sfn[0] == DDEM) sfn[0] = RDDEM;	/* When first character collides with DDEM, replace it with RD
 620              		.loc 1 2104 0
 621 0108 0620     		movs	r0, #6
 622 010a BEE7     		b	.L38
 623              	.L61:
 624              		.align	2
 625              	.L60:
 626 010c 00000000 		.word	.LC0
 627 0110 00000000 		.word	.LANCHOR0
 628              		.cfi_endproc
 629              	.LFE88:
 631              		.section	.text.get_ldnumber,"ax",%progbits
 632              		.align	1
 633              		.syntax unified
 634              		.thumb
 635              		.thumb_func
 636              		.fpu softvfp
 638              	get_ldnumber:
 639              	.LFB90:
2116:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2117:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2118:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2119:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2120:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
2121:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Follow a file path                                                    */
2122:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
2123:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2124:Middlewares/Third_Party/FatFs/Src/ff.c **** static
2125:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT follow_path (	/* FR_OK(0): successful, !=0: error code */
2126:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR* dp,			/* Directory object to return last directory and found object */
2127:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR* path	/* Full-path string to find a file or directory */
2128:Middlewares/Third_Party/FatFs/Src/ff.c **** )
2129:Middlewares/Third_Party/FatFs/Src/ff.c **** {
2130:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
2131:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE *dir, ns;
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 50


2132:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2133:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2134:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_RPATH
2135:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (*path == '/' || *path == '\\') {	/* There is a heading separator */
2136:Middlewares/Third_Party/FatFs/Src/ff.c **** 		path++;	dp->sclust = 0;				/* Strip it and start from the root directory */
2137:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {								/* No heading separator */
2138:Middlewares/Third_Party/FatFs/Src/ff.c **** 		dp->sclust = dp->fs->cdir;			/* Start from the current directory */
2139:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
2140:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
2141:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (*path == '/' || *path == '\\')		/* Strip heading separator if exist */
2142:Middlewares/Third_Party/FatFs/Src/ff.c **** 		path++;
2143:Middlewares/Third_Party/FatFs/Src/ff.c **** 	dp->sclust = 0;							/* Always start from the root directory */
2144:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2145:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2146:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if ((UINT)*path < ' ') {				/* Null path name is the origin directory itself */
2147:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = dir_sdi(dp, 0);
2148:Middlewares/Third_Party/FatFs/Src/ff.c **** 		dp->dir = 0;
2149:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {								/* Follow path */
2150:Middlewares/Third_Party/FatFs/Src/ff.c **** 		for (;;) {
2151:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = create_name(dp, &path);	/* Get a segment name of the path */
2152:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) break;
2153:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = dir_find(dp);				/* Find an object with the sagment name */
2154:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ns = dp->fn[NSFLAG];
2155:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
2156:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (res == FR_NO_FILE) {	/* Object is not found */
2157:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, */
2158:Middlewares/Third_Party/FatFs/Src/ff.c **** 						dp->sclust = 0; dp->dir = 0;	/* it is the root directory and stay there */
2159:Middlewares/Third_Party/FatFs/Src/ff.c **** 						if (!(ns & NS_LAST)) continue;	/* Continue to follow if not last segment */
2160:Middlewares/Third_Party/FatFs/Src/ff.c **** 						res = FR_OK;					/* Ended at the root directroy. Function completed. */
2161:Middlewares/Third_Party/FatFs/Src/ff.c **** 					} else {							/* Could not find the object */
2162:Middlewares/Third_Party/FatFs/Src/ff.c **** 						if (!(ns & NS_LAST)) res = FR_NO_PATH;	/* Adjust error code if not last segment */
2163:Middlewares/Third_Party/FatFs/Src/ff.c **** 					}
2164:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
2165:Middlewares/Third_Party/FatFs/Src/ff.c **** 				break;
2166:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
2167:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (ns & NS_LAST) break;			/* Last segment matched. Function completed. */
2168:Middlewares/Third_Party/FatFs/Src/ff.c **** 			dir = dp->dir;						/* Follow the sub-directory */
2169:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!(dir[DIR_Attr] & AM_DIR)) {	/* It is not a sub-directory and cannot follow */
2170:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_NO_PATH; break;
2171:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
2172:Middlewares/Third_Party/FatFs/Src/ff.c **** 			dp->sclust = ld_clust(dp->fs, dir);
2173:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
2174:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
2175:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2176:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return res;
2177:Middlewares/Third_Party/FatFs/Src/ff.c **** }
2178:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2179:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2180:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2181:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2182:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
2183:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Get logical drive number from path name                               */
2184:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
2185:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2186:Middlewares/Third_Party/FatFs/Src/ff.c **** static
2187:Middlewares/Third_Party/FatFs/Src/ff.c **** int get_ldnumber (		/* Returns logical drive number (-1:invalid drive) */
2188:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR** path	/* Pointer to pointer to the path name */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 51


2189:Middlewares/Third_Party/FatFs/Src/ff.c **** )
2190:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 640              		.loc 1 2190 0
 641              		.cfi_startproc
 642              		@ args = 0, pretend = 0, frame = 0
 643              		@ frame_needed = 0, uses_anonymous_args = 0
 644              		@ link register save eliminated.
 645              	.LVL88:
2191:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR *tp, *tt;
2192:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT i;
2193:Middlewares/Third_Party/FatFs/Src/ff.c **** 	int vol = -1;
2194:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _STR_VOLUME_ID		/* Find string drive id */
2195:Middlewares/Third_Party/FatFs/Src/ff.c **** 	static const char* const str[] = {_VOLUME_STRS};
2196:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const char *sp;
2197:Middlewares/Third_Party/FatFs/Src/ff.c **** 	char c;
2198:Middlewares/Third_Party/FatFs/Src/ff.c **** 	TCHAR tc;
2199:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2200:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2201:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2202:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (*path) {	/* If the pointer is not a null */
 646              		.loc 1 2202 0
 647 0000 0168     		ldr	r1, [r0]
 648 0002 09B1     		cbz	r1, .L76
2203:Middlewares/Third_Party/FatFs/Src/ff.c **** 		for (tt = *path; (UINT)*tt >= (_USE_LFN ? ' ' : '!') && *tt != ':'; tt++) ;	/* Find ':' in the pa
 649              		.loc 1 2203 0
 650 0004 0A46     		mov	r2, r1
 651 0006 03E0     		b	.L63
 652              	.L76:
2193:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _STR_VOLUME_ID		/* Find string drive id */
 653              		.loc 1 2193 0
 654 0008 4FF0FF33 		mov	r3, #-1
 655 000c 08E0     		b	.L73
 656              	.LVL89:
 657              	.L66:
 658              		.loc 1 2203 0 discriminator 4
 659 000e 0132     		adds	r2, r2, #1
 660              	.LVL90:
 661              	.L63:
 662              		.loc 1 2203 0 is_stmt 0 discriminator 1
 663 0010 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 664 0012 202B     		cmp	r3, #32
 665 0014 01D9     		bls	.L65
 666              		.loc 1 2203 0 discriminator 3
 667 0016 3A2B     		cmp	r3, #58
 668 0018 F9D1     		bne	.L66
 669              	.L65:
2204:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (*tt == ':') {	/* If a ':' is exist in the path name */
 670              		.loc 1 2204 0 is_stmt 1
 671 001a 3A2B     		cmp	r3, #58
 672 001c 02D0     		beq	.L77
2205:Middlewares/Third_Party/FatFs/Src/ff.c **** 			tp = *path;
2206:Middlewares/Third_Party/FatFs/Src/ff.c **** 			i = *tp++ - '0'; 
2207:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
2208:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
2209:Middlewares/Third_Party/FatFs/Src/ff.c **** 					vol = (int)i;
2210:Middlewares/Third_Party/FatFs/Src/ff.c **** 					*path = ++tt;
2211:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 52


2212:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
2213:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _STR_VOLUME_ID
2214:Middlewares/Third_Party/FatFs/Src/ff.c **** 			 else {	/* No numeric drive number, find string drive id */
2215:Middlewares/Third_Party/FatFs/Src/ff.c **** 				i = 0; tt++;
2216:Middlewares/Third_Party/FatFs/Src/ff.c **** 				do {
2217:Middlewares/Third_Party/FatFs/Src/ff.c **** 					sp = str[i]; tp = *path;
2218:Middlewares/Third_Party/FatFs/Src/ff.c **** 					do {	/* Compare a string drive id with path name */
2219:Middlewares/Third_Party/FatFs/Src/ff.c **** 						c = *sp++; tc = *tp++;
2220:Middlewares/Third_Party/FatFs/Src/ff.c **** 						if (IsLower(tc)) tc -= 0x20;
2221:Middlewares/Third_Party/FatFs/Src/ff.c **** 					} while (c && (TCHAR)c == tc);
2222:Middlewares/Third_Party/FatFs/Src/ff.c **** 				} while ((c || tp != tt) && ++i < _VOLUMES);	/* Repeat for each id until pattern match */
2223:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
2224:Middlewares/Third_Party/FatFs/Src/ff.c **** 					vol = (int)i;
2225:Middlewares/Third_Party/FatFs/Src/ff.c **** 					*path = tt;
2226:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
2227:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
2228:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2229:Middlewares/Third_Party/FatFs/Src/ff.c **** 			return vol;
2230:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
2231:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_RPATH && _VOLUMES >= 2
2232:Middlewares/Third_Party/FatFs/Src/ff.c **** 		vol = CurrVol;	/* Current drive */
2233:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
2234:Middlewares/Third_Party/FatFs/Src/ff.c **** 		vol = 0;		/* Drive 0 */
 673              		.loc 1 2234 0
 674 001e 0023     		movs	r3, #0
 675              	.LVL91:
 676              	.L73:
2235:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2236:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
2237:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return vol;
2238:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 677              		.loc 1 2238 0
 678 0020 1846     		mov	r0, r3
 679              	.LVL92:
 680 0022 7047     		bx	lr
 681              	.LVL93:
 682              	.L77:
2190:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR *tp, *tt;
 683              		.loc 1 2190 0
 684 0024 10B4     		push	{r4}
 685              	.LCFI5:
 686              		.cfi_def_cfa_offset 4
 687              		.cfi_offset 4, -4
 688              	.LVL94:
2206:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
 689              		.loc 1 2206 0
 690 0026 4C1C     		adds	r4, r1, #1
 691              	.LVL95:
 692 0028 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 693 002a 303B     		subs	r3, r3, #48
 694              	.LVL96:
2207:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
 695              		.loc 1 2207 0
 696 002c 092B     		cmp	r3, #9
 697 002e 07D8     		bhi	.L69
2207:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
 698              		.loc 1 2207 0 is_stmt 0 discriminator 1
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 53


 699 0030 A242     		cmp	r2, r4
 700 0032 08D1     		bne	.L70
2208:Middlewares/Third_Party/FatFs/Src/ff.c **** 					vol = (int)i;
 701              		.loc 1 2208 0 is_stmt 1
 702 0034 53B9     		cbnz	r3, .L71
 703              	.LVL97:
2210:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
 704              		.loc 1 2210 0
 705 0036 0132     		adds	r2, r2, #1
 706              	.LVL98:
 707 0038 0260     		str	r2, [r0]
 708              	.LVL99:
 709              	.L62:
 710              		.loc 1 2238 0
 711 003a 1846     		mov	r0, r3
 712              	.LVL100:
 713 003c 10BC     		pop	{r4}
 714              	.LCFI6:
 715              		.cfi_remember_state
 716              		.cfi_restore 4
 717              		.cfi_def_cfa_offset 0
 718              	.LVL101:
 719 003e 7047     		bx	lr
 720              	.LVL102:
 721              	.L69:
 722              	.LCFI7:
 723              		.cfi_restore_state
2193:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _STR_VOLUME_ID		/* Find string drive id */
 724              		.loc 1 2193 0
 725 0040 4FF0FF33 		mov	r3, #-1
 726              	.LVL103:
 727 0044 F9E7     		b	.L62
 728              	.LVL104:
 729              	.L70:
 730 0046 4FF0FF33 		mov	r3, #-1
 731              	.LVL105:
 732 004a F6E7     		b	.L62
 733              	.LVL106:
 734              	.L71:
 735 004c 4FF0FF33 		mov	r3, #-1
 736              	.LVL107:
 737 0050 F3E7     		b	.L62
 738              		.cfi_endproc
 739              	.LFE90:
 741              		.section	.text.sync_window,"ax",%progbits
 742              		.align	1
 743              		.syntax unified
 744              		.thumb
 745              		.thumb_func
 746              		.fpu softvfp
 748              	sync_window:
 749              	.LFB70:
 776:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD wsect;
 750              		.loc 1 776 0
 751              		.cfi_startproc
 752              		@ args = 0, pretend = 0, frame = 0
 753              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 54


 754              	.LVL108:
 755 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 756              	.LCFI8:
 757              		.cfi_def_cfa_offset 24
 758              		.cfi_offset 3, -24
 759              		.cfi_offset 4, -20
 760              		.cfi_offset 5, -16
 761              		.cfi_offset 6, -12
 762              		.cfi_offset 7, -8
 763              		.cfi_offset 14, -4
 764              	.LVL109:
 782:Middlewares/Third_Party/FatFs/Src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 765              		.loc 1 782 0
 766 0002 90F80432 		ldrb	r3, [r0, #516]	@ zero_extendqisi2
 767 0006 0BB9     		cbnz	r3, .L86
 779:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 768              		.loc 1 779 0
 769 0008 0020     		movs	r0, #0
 770              	.LVL110:
 771              	.L79:
 797:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 772              		.loc 1 797 0
 773 000a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 774              	.LVL111:
 775              	.L86:
 776 000c 0446     		mov	r4, r0
 783:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (disk_write(fs->drv, fs->win.d8, wsect, 1) != RES_OK) {
 777              		.loc 1 783 0
 778 000e D0F82C52 		ldr	r5, [r0, #556]
 779              	.LVL112:
 784:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = FR_DISK_ERR;
 780              		.loc 1 784 0
 781 0012 0746     		mov	r7, r0
 782 0014 0123     		movs	r3, #1
 783 0016 2A46     		mov	r2, r5
 784 0018 0146     		mov	r1, r0
 785 001a 90F80102 		ldrb	r0, [r0, #513]	@ zero_extendqisi2
 786              	.LVL113:
 787 001e FFF7FEFF 		bl	disk_write
 788              	.LVL114:
 789 0022 D8B9     		cbnz	r0, .L83
 787:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (wsect - fs->fatbase < fs->fsize) {		/* Is it in the FAT area? */
 790              		.loc 1 787 0
 791 0024 0023     		movs	r3, #0
 792 0026 84F80432 		strb	r3, [r4, #516]
 788:Middlewares/Third_Party/FatFs/Src/ff.c **** 				for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 793              		.loc 1 788 0
 794 002a D4F82032 		ldr	r3, [r4, #544]
 795 002e EB1A     		subs	r3, r5, r3
 796 0030 D4F81822 		ldr	r2, [r4, #536]
 797 0034 9342     		cmp	r3, r2
 798 0036 13D2     		bcs	.L84
 789:Middlewares/Third_Party/FatFs/Src/ff.c **** 					wsect += fs->fsize;
 799              		.loc 1 789 0
 800 0038 94F80362 		ldrb	r6, [r4, #515]	@ zero_extendqisi2
 801              	.LVL115:
 802              	.L80:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 55


 789:Middlewares/Third_Party/FatFs/Src/ff.c **** 					wsect += fs->fsize;
 803              		.loc 1 789 0 is_stmt 0 discriminator 1
 804 003c 012E     		cmp	r6, #1
 805 003e 0BD9     		bls	.L87
 790:Middlewares/Third_Party/FatFs/Src/ff.c **** 					disk_write(fs->drv, fs->win.d8, wsect, 1);
 806              		.loc 1 790 0 is_stmt 1 discriminator 3
 807 0040 D4F81832 		ldr	r3, [r4, #536]
 808 0044 1D44     		add	r5, r5, r3
 809              	.LVL116:
 791:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
 810              		.loc 1 791 0 discriminator 3
 811 0046 0123     		movs	r3, #1
 812 0048 2A46     		mov	r2, r5
 813 004a 3946     		mov	r1, r7
 814 004c 94F80102 		ldrb	r0, [r4, #513]	@ zero_extendqisi2
 815 0050 FFF7FEFF 		bl	disk_write
 816              	.LVL117:
 789:Middlewares/Third_Party/FatFs/Src/ff.c **** 					wsect += fs->fsize;
 817              		.loc 1 789 0 discriminator 3
 818 0054 013E     		subs	r6, r6, #1
 819              	.LVL118:
 820 0056 F1E7     		b	.L80
 821              	.L87:
 779:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 822              		.loc 1 779 0
 823 0058 0020     		movs	r0, #0
 824 005a D6E7     		b	.L79
 825              	.LVL119:
 826              	.L83:
 785:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {
 827              		.loc 1 785 0
 828 005c 0120     		movs	r0, #1
 829 005e D4E7     		b	.L79
 830              	.L84:
 779:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 831              		.loc 1 779 0
 832 0060 0020     		movs	r0, #0
 833 0062 D2E7     		b	.L79
 834              		.cfi_endproc
 835              	.LFE70:
 837              		.section	.text.move_window,"ax",%progbits
 838              		.align	1
 839              		.syntax unified
 840              		.thumb
 841              		.thumb_func
 842              		.fpu softvfp
 844              	move_window:
 845              	.LFB71:
 806:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res = FR_OK;
 846              		.loc 1 806 0
 847              		.cfi_startproc
 848              		@ args = 0, pretend = 0, frame = 0
 849              		@ frame_needed = 0, uses_anonymous_args = 0
 850              	.LVL120:
 851 0000 70B5     		push	{r4, r5, r6, lr}
 852              	.LCFI9:
 853              		.cfi_def_cfa_offset 16
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 56


 854              		.cfi_offset 4, -16
 855              		.cfi_offset 5, -12
 856              		.cfi_offset 6, -8
 857              		.cfi_offset 14, -4
 858              	.LVL121:
 810:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
 859              		.loc 1 810 0
 860 0002 D0F82C32 		ldr	r3, [r0, #556]
 861 0006 8B42     		cmp	r3, r1
 862 0008 13D0     		beq	.L91
 863 000a 0446     		mov	r4, r0
 864 000c 0D46     		mov	r5, r1
 812:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 865              		.loc 1 812 0
 866 000e FFF7FEFF 		bl	sync_window
 867              	.LVL122:
 814:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (disk_read(fs->drv, fs->win.d8, sector, 1) != RES_OK) {
 868              		.loc 1 814 0
 869 0012 0646     		mov	r6, r0
 870 0014 70B9     		cbnz	r0, .L89
 815:Middlewares/Third_Party/FatFs/Src/ff.c **** 				sector = 0xFFFFFFFF;	/* Invalidate window if data is not reliable */
 871              		.loc 1 815 0
 872 0016 0123     		movs	r3, #1
 873 0018 2A46     		mov	r2, r5
 874 001a 2146     		mov	r1, r4
 875 001c 94F80102 		ldrb	r0, [r4, #513]	@ zero_extendqisi2
 876              	.LVL123:
 877 0020 FFF7FEFF 		bl	disk_read
 878              	.LVL124:
 879 0024 10B1     		cbz	r0, .L90
 817:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 880              		.loc 1 817 0
 881 0026 0126     		movs	r6, #1
 816:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_DISK_ERR;
 882              		.loc 1 816 0
 883 0028 4FF0FF35 		mov	r5, #-1
 884              	.LVL125:
 885              	.L90:
 819:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 886              		.loc 1 819 0
 887 002c C4F82C52 		str	r5, [r4, #556]
 888 0030 00E0     		b	.L89
 889              	.LVL126:
 890              	.L91:
 807:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 891              		.loc 1 807 0
 892 0032 0026     		movs	r6, #0
 893              	.LVL127:
 894              	.L89:
 823:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 895              		.loc 1 823 0
 896 0034 3046     		mov	r0, r6
 897 0036 70BD     		pop	{r4, r5, r6, pc}
 898              		.cfi_endproc
 899              	.LFE71:
 901              		.section	.text.check_fs,"ax",%progbits
 902              		.align	1
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 57


 903              		.syntax unified
 904              		.thumb
 905              		.thumb_func
 906              		.fpu softvfp
 908              	check_fs:
 909              	.LFB91:
2239:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2240:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2241:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2242:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2243:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
2244:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Load a sector and check if it is an FAT boot sector                   */
2245:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
2246:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2247:Middlewares/Third_Party/FatFs/Src/ff.c **** static
2248:Middlewares/Third_Party/FatFs/Src/ff.c **** BYTE check_fs (	/* 0:FAT boor sector, 1:Valid boor sector but not FAT, 2:Not a boot sector, 3:Disk 
2249:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FATFS* fs,	/* File system object */
2250:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD sect	/* Sector# (lba) to check if it is an FAT boot record or not */
2251:Middlewares/Third_Party/FatFs/Src/ff.c **** )
2252:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 910              		.loc 1 2252 0
 911              		.cfi_startproc
 912              		@ args = 0, pretend = 0, frame = 0
 913              		@ frame_needed = 0, uses_anonymous_args = 0
 914              	.LVL128:
 915 0000 10B5     		push	{r4, lr}
 916              	.LCFI10:
 917              		.cfi_def_cfa_offset 8
 918              		.cfi_offset 4, -8
 919              		.cfi_offset 14, -4
 920 0002 0446     		mov	r4, r0
2253:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->wflag = 0; fs->winsect = 0xFFFFFFFF;	/* Invaidate window */
 921              		.loc 1 2253 0
 922 0004 0023     		movs	r3, #0
 923 0006 80F80432 		strb	r3, [r0, #516]
 924 000a 4FF0FF33 		mov	r3, #-1
 925 000e C0F82C32 		str	r3, [r0, #556]
2254:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (move_window(fs, sect) != FR_OK)			/* Load boot record */
 926              		.loc 1 2254 0
 927 0012 FFF7FEFF 		bl	move_window
 928              	.LVL129:
 929 0016 88BB     		cbnz	r0, .L96
2255:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return 3;
2256:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2257:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (LD_WORD(&fs->win.d8[BS_55AA]) != 0xAA55)	/* Check boot record signature (always placed at offs
 930              		.loc 1 2257 0
 931 0018 94F8FF21 		ldrb	r2, [r4, #511]	@ zero_extendqisi2
 932 001c 94F8FE31 		ldrb	r3, [r4, #510]	@ zero_extendqisi2
 933 0020 43EA0223 		orr	r3, r3, r2, lsl #8
 934 0024 1BB2     		sxth	r3, r3
 935 0026 184A     		ldr	r2, .L101
 936 0028 9342     		cmp	r3, r2
 937 002a 29D1     		bne	.L97
2258:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return 2;
2259:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2260:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if ((LD_DWORD(&fs->win.d8[BS_FilSysType]) & 0xFFFFFF) == 0x544146)		/* Check "FAT" string */
 938              		.loc 1 2260 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 58


 939 002c 94F83920 		ldrb	r2, [r4, #57]	@ zero_extendqisi2
 940 0030 94F83830 		ldrb	r3, [r4, #56]	@ zero_extendqisi2
 941 0034 1B04     		lsls	r3, r3, #16
 942 0036 43EA0263 		orr	r3, r3, r2, lsl #24
 943 003a 94F83720 		ldrb	r2, [r4, #55]	@ zero_extendqisi2
 944 003e 43EA0223 		orr	r3, r3, r2, lsl #8
 945 0042 94F83620 		ldrb	r2, [r4, #54]	@ zero_extendqisi2
 946 0046 1343     		orrs	r3, r3, r2
 947 0048 23F07F43 		bic	r3, r3, #-16777216
 948 004c 0F4A     		ldr	r2, .L101+4
 949 004e 9342     		cmp	r3, r2
 950 0050 18D0     		beq	.L98
2261:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return 0;
2262:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if ((LD_DWORD(&fs->win.d8[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
 951              		.loc 1 2262 0
 952 0052 94F85520 		ldrb	r2, [r4, #85]	@ zero_extendqisi2
 953 0056 94F85430 		ldrb	r3, [r4, #84]	@ zero_extendqisi2
 954 005a 1B04     		lsls	r3, r3, #16
 955 005c 43EA0263 		orr	r3, r3, r2, lsl #24
 956 0060 94F85320 		ldrb	r2, [r4, #83]	@ zero_extendqisi2
 957 0064 43EA0223 		orr	r3, r3, r2, lsl #8
 958 0068 94F85220 		ldrb	r2, [r4, #82]	@ zero_extendqisi2
 959 006c 1343     		orrs	r3, r3, r2
 960 006e 23F07F43 		bic	r3, r3, #-16777216
 961 0072 064A     		ldr	r2, .L101+4
 962 0074 9342     		cmp	r3, r2
 963 0076 04D0     		beq	.L95
2263:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return 0;
2264:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2265:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return 1;
 964              		.loc 1 2265 0
 965 0078 0120     		movs	r0, #1
 966 007a 02E0     		b	.L95
 967              	.L96:
2255:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 968              		.loc 1 2255 0
 969 007c 0320     		movs	r0, #3
 970 007e 00E0     		b	.L95
 971              	.L97:
2258:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 972              		.loc 1 2258 0
 973 0080 0220     		movs	r0, #2
 974              	.L95:
2266:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 975              		.loc 1 2266 0
 976 0082 10BD     		pop	{r4, pc}
 977              	.LVL130:
 978              	.L98:
2261:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if ((LD_DWORD(&fs->win.d8[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
 979              		.loc 1 2261 0
 980 0084 0020     		movs	r0, #0
 981 0086 FCE7     		b	.L95
 982              	.L102:
 983              		.align	2
 984              	.L101:
 985 0088 55AAFFFF 		.word	-21931
 986 008c 46415400 		.word	5521734
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 59


 987              		.cfi_endproc
 988              	.LFE91:
 990              		.section	.text.validate,"ax",%progbits
 991              		.align	1
 992              		.syntax unified
 993              		.thumb
 994              		.thumb_func
 995              		.fpu softvfp
 997              	validate:
 998              	.LFB93:
2267:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2268:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2269:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2270:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2271:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
2272:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Find logical drive and check if the volume is mounted                 */
2273:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
2274:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2275:Middlewares/Third_Party/FatFs/Src/ff.c **** static
2276:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT find_volume (	/* FR_OK(0): successful, !=0: any error occurred */
2277:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FATFS** rfs,		/* Pointer to pointer to the found file system object */
2278:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR** path,	/* Pointer to pointer to the path name (drive number) */
2279:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE wmode			/* !=0: Check write protection for write access */
2280:Middlewares/Third_Party/FatFs/Src/ff.c **** )
2281:Middlewares/Third_Party/FatFs/Src/ff.c **** {
2282:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE fmt, *pt;
2283:Middlewares/Third_Party/FatFs/Src/ff.c **** 	int vol;
2284:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DSTATUS stat;
2285:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD bsect, fasize, tsect, sysect, nclst, szbfat, br[4];
2286:Middlewares/Third_Party/FatFs/Src/ff.c **** 	WORD nrsv;
2287:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FATFS *fs;
2288:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT i;
2289:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2290:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2291:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Get logical drive number from the path name */
2292:Middlewares/Third_Party/FatFs/Src/ff.c **** 	*rfs = 0;
2293:Middlewares/Third_Party/FatFs/Src/ff.c **** 	vol = get_ldnumber(path);
2294:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
2295:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2296:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Check if the file system object is valid or not */
2297:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs = FatFs[vol];					/* Get pointer to the file system object */
2298:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
2299:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2300:Middlewares/Third_Party/FatFs/Src/ff.c **** 	ENTER_FF(fs);						/* Lock the volume */
2301:Middlewares/Third_Party/FatFs/Src/ff.c **** 	*rfs = fs;							/* Return pointer to the file system object */
2302:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2303:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fs->fs_type) {					/* If the volume has been mounted */
2304:Middlewares/Third_Party/FatFs/Src/ff.c **** 		stat = disk_status(fs->drv);
2305:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
2306:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!_FS_READONLY && wmode && (stat & STA_PROTECT))	/* Check write protection if needed */
2307:Middlewares/Third_Party/FatFs/Src/ff.c **** 				return FR_WRITE_PROTECTED;
2308:Middlewares/Third_Party/FatFs/Src/ff.c **** 			return FR_OK;				/* The file system object is valid */
2309:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
2310:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
2311:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2312:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* The file system object is not valid. */
2313:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Following code attempts to mount the volume. (analyze BPB and initialize the fs object) */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 60


2314:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2315:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->fs_type = 0;					/* Clear the file system object */
2316:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
2317:Middlewares/Third_Party/FatFs/Src/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize the physical drive */
2318:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (stat & STA_NOINIT)				/* Check if the initialization succeeded */
2319:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
2320:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!_FS_READONLY && wmode && (stat & STA_PROTECT))	/* Check disk write protection if needed */
2321:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_WRITE_PROTECTED;
2322:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _MAX_SS != _MIN_SS						/* Get sector size (multiple sector size cfg only) */
2323:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (disk_ioctl(fs->drv, GET_SECTOR_SIZE, &SS(fs)) != RES_OK
2324:Middlewares/Third_Party/FatFs/Src/ff.c **** 		|| SS(fs) < _MIN_SS || SS(fs) > _MAX_SS) return FR_DISK_ERR;
2325:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2326:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Find an FAT partition on the drive. Supports only generic partitioning, FDISK and SFD. */
2327:Middlewares/Third_Party/FatFs/Src/ff.c **** 	bsect = 0;
2328:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fmt = check_fs(fs, bsect);					/* Load sector 0 and check if it is an FAT boot sector as SFD */
2329:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fmt == 1 || (!fmt && (LD2PT(vol)))) {	/* Not an FAT boot sector or forced partition number */
2330:Middlewares/Third_Party/FatFs/Src/ff.c **** 		for (i = 0; i < 4; i++) {			/* Get partition offset */
2331:Middlewares/Third_Party/FatFs/Src/ff.c **** 			pt = fs->win.d8 + MBR_Table + i * SZ_PTE;
2332:Middlewares/Third_Party/FatFs/Src/ff.c **** 			br[i] = pt[4] ? LD_DWORD(&pt[8]) : 0;
2333:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
2334:Middlewares/Third_Party/FatFs/Src/ff.c **** 		i = LD2PT(vol);						/* Partition number: 0:auto, 1-4:forced */
2335:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (i) i--;
2336:Middlewares/Third_Party/FatFs/Src/ff.c **** 		do {								/* Find an FAT volume */
2337:Middlewares/Third_Party/FatFs/Src/ff.c **** 			bsect = br[i];
2338:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fmt = bsect ? check_fs(fs, bsect) : 2;	/* Check the partition */
2339:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} while (!LD2PT(vol) && fmt && ++i < 4);
2340:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
2341:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;		/* An error occured in the disk I/O layer */
2342:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
2343:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2344:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* An FAT volume is found. Following code initializes the file system object */
2345:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2346:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (LD_WORD(fs->win.d8 + BPB_BytsPerSec) != SS(fs))	/* (BPB_BytsPerSec must be equal to the physic
2347:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_NO_FILESYSTEM;
2348:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2349:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fasize = LD_WORD(fs->win.d8 + BPB_FATSz16);			/* Number of sectors per FAT */
2350:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!fasize) fasize = LD_DWORD(fs->win.d8 + BPB_FATSz32);
2351:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->fsize = fasize;
2352:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2353:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->n_fats = fs->win.d8[BPB_NumFATs];					/* Number of FAT copies */
2354:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fs->n_fats != 1 && fs->n_fats != 2)				/* (Must be 1 or 2) */
2355:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_NO_FILESYSTEM;
2356:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fasize *= fs->n_fats;								/* Number of sectors for FAT area */
2357:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2358:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->csize = fs->win.d8[BPB_SecPerClus];				/* Number of sectors per cluster */
2359:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!fs->csize || (fs->csize & (fs->csize - 1)))	/* (Must be power of 2) */
2360:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_NO_FILESYSTEM;
2361:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2362:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->n_rootdir = LD_WORD(fs->win.d8 + BPB_RootEntCnt);	/* Number of root directory entries */
2363:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIRE))				/* (Must be sector aligned) */
2364:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_NO_FILESYSTEM;
2365:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2366:Middlewares/Third_Party/FatFs/Src/ff.c **** 	tsect = LD_WORD(fs->win.d8 + BPB_TotSec16);			/* Number of sectors on the volume */
2367:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!tsect) tsect = LD_DWORD(fs->win.d8 + BPB_TotSec32);
2368:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2369:Middlewares/Third_Party/FatFs/Src/ff.c **** 	nrsv = LD_WORD(fs->win.d8 + BPB_RsvdSecCnt);			/* Number of reserved sectors */
2370:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!nrsv) return FR_NO_FILESYSTEM;					/* (Must not be 0) */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 61


2371:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2372:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Determine the FAT sub type */
2373:Middlewares/Third_Party/FatFs/Src/ff.c **** 	sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZ_DIRE);	/* RSV + FAT + DIR */
2374:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (tsect < sysect) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
2375:Middlewares/Third_Party/FatFs/Src/ff.c **** 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
2376:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!nclst) return FR_NO_FILESYSTEM;				/* (Invalid volume size) */
2377:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fmt = FS_FAT12;
2378:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
2379:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
2380:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2381:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Boundaries and Limits */
2382:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
2383:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->volbase = bsect;								/* Volume start sector */
2384:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
2385:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
2386:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fmt == FS_FAT32) {
2387:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (fs->n_rootdir) return FR_NO_FILESYSTEM;		/* (BPB_RootEntCnt must be 0) */
2388:Middlewares/Third_Party/FatFs/Src/ff.c **** 		fs->dirbase = LD_DWORD(fs->win.d8 + BPB_RootClus);	/* Root directory start cluster */
2389:Middlewares/Third_Party/FatFs/Src/ff.c **** 		szbfat = fs->n_fatent * 4;						/* (Needed FAT size) */
2390:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {
2391:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (!fs->n_rootdir)	return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must not be 0) */
2392:Middlewares/Third_Party/FatFs/Src/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
2393:Middlewares/Third_Party/FatFs/Src/ff.c **** 		szbfat = (fmt == FS_FAT16) ?					/* (Needed FAT size) */
2394:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
2395:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
2396:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fs->fsize < (szbfat + (SS(fs) - 1)) / SS(fs))	/* (BPB_FATSz must not be less than the size nee
2397:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_NO_FILESYSTEM;
2398:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2399:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
2400:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Initialize cluster allocation information */
2401:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->last_clust = fs->free_clust = 0xFFFFFFFF;
2402:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2403:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Get fsinfo if available */
2404:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->fsi_flag = 0x80;
2405:Middlewares/Third_Party/FatFs/Src/ff.c **** #if (_FS_NOFSINFO & 3) != 3
2406:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fmt == FS_FAT32				/* Enable FSINFO only if FAT32 and BPB_FSInfo is 1 */
2407:Middlewares/Third_Party/FatFs/Src/ff.c **** 		&& LD_WORD(fs->win.d8 + BPB_FSInfo) == 1
2408:Middlewares/Third_Party/FatFs/Src/ff.c **** 		&& move_window(fs, bsect + 1) == FR_OK)
2409:Middlewares/Third_Party/FatFs/Src/ff.c **** 	{
2410:Middlewares/Third_Party/FatFs/Src/ff.c **** 		fs->fsi_flag = 0;
2411:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (LD_WORD(fs->win.d8 + BS_55AA) == 0xAA55	/* Load FSINFO data if available */
2412:Middlewares/Third_Party/FatFs/Src/ff.c **** 			&& LD_DWORD(fs->win.d8 + FSI_LeadSig) == 0x41615252
2413:Middlewares/Third_Party/FatFs/Src/ff.c **** 			&& LD_DWORD(fs->win.d8 + FSI_StrucSig) == 0x61417272)
2414:Middlewares/Third_Party/FatFs/Src/ff.c **** 		{
2415:Middlewares/Third_Party/FatFs/Src/ff.c **** #if (_FS_NOFSINFO & 1) == 0
2416:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->free_clust = LD_DWORD(fs->win.d8 + FSI_Free_Count);
2417:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2418:Middlewares/Third_Party/FatFs/Src/ff.c **** #if (_FS_NOFSINFO & 2) == 0
2419:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->last_clust = LD_DWORD(fs->win.d8 + FSI_Nxt_Free);
2420:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2421:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
2422:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
2423:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2424:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2425:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->fs_type = fmt;	/* FAT sub-type */
2426:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->id = ++Fsid;	/* File system mount ID */
2427:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_RPATH
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 62


2428:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->cdir = 0;		/* Set current directory to root */
2429:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2430:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_LOCK			/* Clear file lock semaphores */
2431:Middlewares/Third_Party/FatFs/Src/ff.c **** 	clear_lock(fs);
2432:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2433:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2434:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return FR_OK;
2435:Middlewares/Third_Party/FatFs/Src/ff.c **** }
2436:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2437:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2438:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2439:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2440:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
2441:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Check if the file/directory object is valid or not                    */
2442:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
2443:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2444:Middlewares/Third_Party/FatFs/Src/ff.c **** static
2445:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT validate (	/* FR_OK(0): The object is valid, !=0: Invalid */
2446:Middlewares/Third_Party/FatFs/Src/ff.c **** 	void* obj		/* Pointer to the object FIL/DIR to check validity */
2447:Middlewares/Third_Party/FatFs/Src/ff.c **** )
2448:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 999              		.loc 1 2448 0
 1000              		.cfi_startproc
 1001              		@ args = 0, pretend = 0, frame = 0
 1002              		@ frame_needed = 0, uses_anonymous_args = 0
 1003              	.LVL131:
2449:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FIL *fil = (FIL*)obj;	/* Assuming offset of .fs and .id in the FIL/DIR structure is identical */
2450:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2451:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2452:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!fil || !fil->fs || !fil->fs->fs_type || fil->fs->id != fil->id || (disk_status(fil->fs->drv) 
 1004              		.loc 1 2452 0
 1005 0000 B8B1     		cbz	r0, .L105
2448:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FIL *fil = (FIL*)obj;	/* Assuming offset of .fs and .id in the FIL/DIR structure is identical */
 1006              		.loc 1 2448 0 discriminator 1
 1007 0002 08B5     		push	{r3, lr}
 1008              	.LCFI11:
 1009              		.cfi_def_cfa_offset 8
 1010              		.cfi_offset 3, -8
 1011              		.cfi_offset 14, -4
 1012              		.loc 1 2452 0 discriminator 1
 1013 0004 D0F80032 		ldr	r3, [r0, #512]
 1014 0008 ABB1     		cbz	r3, .L106
 1015              		.loc 1 2452 0 is_stmt 0 discriminator 2
 1016 000a 93F80012 		ldrb	r1, [r3, #512]	@ zero_extendqisi2
 1017 000e A1B1     		cbz	r1, .L107
 1018              		.loc 1 2452 0 discriminator 3
 1019 0010 B3F80612 		ldrh	r1, [r3, #518]
 1020 0014 B0F80422 		ldrh	r2, [r0, #516]
 1021 0018 9142     		cmp	r1, r2
 1022 001a 01D0     		beq	.L114
2453:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_INVALID_OBJECT;
 1023              		.loc 1 2453 0 is_stmt 1
 1024 001c 0920     		movs	r0, #9
 1025              	.LVL132:
 1026              	.L104:
2454:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2455:Middlewares/Third_Party/FatFs/Src/ff.c **** 	ENTER_FF(fil->fs);		/* Lock file system */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 63


2456:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2457:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return FR_OK;
2458:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 1027              		.loc 1 2458 0
 1028 001e 08BD     		pop	{r3, pc}
 1029              	.LVL133:
 1030              	.L114:
2452:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_INVALID_OBJECT;
 1031              		.loc 1 2452 0 discriminator 4
 1032 0020 93F80102 		ldrb	r0, [r3, #513]	@ zero_extendqisi2
 1033              	.LVL134:
 1034 0024 FFF7FEFF 		bl	disk_status
 1035              	.LVL135:
 1036 0028 10F0010F 		tst	r0, #1
 1037 002c 07D1     		bne	.L109
2457:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 1038              		.loc 1 2457 0
 1039 002e 0020     		movs	r0, #0
 1040 0030 F5E7     		b	.L104
 1041              	.LVL136:
 1042              	.L105:
 1043              	.LCFI12:
 1044              		.cfi_def_cfa_offset 0
 1045              		.cfi_restore 3
 1046              		.cfi_restore 14
2453:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1047              		.loc 1 2453 0
 1048 0032 0920     		movs	r0, #9
 1049              	.LVL137:
 1050              		.loc 1 2458 0
 1051 0034 7047     		bx	lr
 1052              	.LVL138:
 1053              	.L106:
 1054              	.LCFI13:
 1055              		.cfi_def_cfa_offset 8
 1056              		.cfi_offset 3, -8
 1057              		.cfi_offset 14, -4
2453:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1058              		.loc 1 2453 0
 1059 0036 0920     		movs	r0, #9
 1060              	.LVL139:
 1061 0038 F1E7     		b	.L104
 1062              	.LVL140:
 1063              	.L107:
 1064 003a 0920     		movs	r0, #9
 1065              	.LVL141:
 1066 003c EFE7     		b	.L104
 1067              	.L109:
 1068 003e 0920     		movs	r0, #9
 1069 0040 EDE7     		b	.L104
 1070              		.cfi_endproc
 1071              	.LFE93:
 1073              		.section	.text.find_volume,"ax",%progbits
 1074              		.align	1
 1075              		.syntax unified
 1076              		.thumb
 1077              		.thumb_func
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 64


 1078              		.fpu softvfp
 1080              	find_volume:
 1081              	.LFB92:
2281:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE fmt, *pt;
 1082              		.loc 1 2281 0
 1083              		.cfi_startproc
 1084              		@ args = 0, pretend = 0, frame = 16
 1085              		@ frame_needed = 0, uses_anonymous_args = 0
 1086              	.LVL142:
 1087 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1088              	.LCFI14:
 1089              		.cfi_def_cfa_offset 20
 1090              		.cfi_offset 4, -20
 1091              		.cfi_offset 5, -16
 1092              		.cfi_offset 6, -12
 1093              		.cfi_offset 7, -8
 1094              		.cfi_offset 14, -4
 1095 0002 85B0     		sub	sp, sp, #20
 1096              	.LCFI15:
 1097              		.cfi_def_cfa_offset 40
 1098 0004 0646     		mov	r6, r0
 1099 0006 1746     		mov	r7, r2
2292:Middlewares/Third_Party/FatFs/Src/ff.c **** 	vol = get_ldnumber(path);
 1100              		.loc 1 2292 0
 1101 0008 0023     		movs	r3, #0
 1102 000a 0360     		str	r3, [r0]
2293:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 1103              		.loc 1 2293 0
 1104 000c 0846     		mov	r0, r1
 1105              	.LVL143:
 1106 000e FFF7FEFF 		bl	get_ldnumber
 1107              	.LVL144:
2294:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1108              		.loc 1 2294 0
 1109 0012 051E     		subs	r5, r0, #0
 1110 0014 C0F28A81 		blt	.L133
2297:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 1111              		.loc 1 2297 0
 1112 0018 D04B     		ldr	r3, .L163
 1113 001a 53F82540 		ldr	r4, [r3, r5, lsl #2]
 1114              	.LVL145:
2298:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1115              		.loc 1 2298 0
 1116 001e 002C     		cmp	r4, #0
 1117 0020 00F08781 		beq	.L134
2301:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1118              		.loc 1 2301 0
 1119 0024 3460     		str	r4, [r6]
2303:Middlewares/Third_Party/FatFs/Src/ff.c **** 		stat = disk_status(fs->drv);
 1120              		.loc 1 2303 0
 1121 0026 94F80032 		ldrb	r3, [r4, #512]	@ zero_extendqisi2
 1122 002a 7BB1     		cbz	r3, .L117
2304:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
 1123              		.loc 1 2304 0
 1124 002c 94F80102 		ldrb	r0, [r4, #513]	@ zero_extendqisi2
 1125              	.LVL146:
 1126 0030 FFF7FEFF 		bl	disk_status
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 65


 1127              	.LVL147:
2305:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!_FS_READONLY && wmode && (stat & STA_PROTECT))	/* Check write protection if needed */
 1128              		.loc 1 2305 0
 1129 0034 10F0010F 		tst	r0, #1
 1130 0038 08D1     		bne	.L117
2306:Middlewares/Third_Party/FatFs/Src/ff.c **** 				return FR_WRITE_PROTECTED;
 1131              		.loc 1 2306 0
 1132 003a 002F     		cmp	r7, #0
 1133 003c 00F07B81 		beq	.L135
2306:Middlewares/Third_Party/FatFs/Src/ff.c **** 				return FR_WRITE_PROTECTED;
 1134              		.loc 1 2306 0 is_stmt 0 discriminator 1
 1135 0040 10F0040F 		tst	r0, #4
 1136 0044 40F07981 		bne	.L136
2308:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 1137              		.loc 1 2308 0 is_stmt 1
 1138 0048 0020     		movs	r0, #0
 1139              	.LVL148:
 1140 004a 70E1     		b	.L116
 1141              	.L117:
2315:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
 1142              		.loc 1 2315 0
 1143 004c 0023     		movs	r3, #0
 1144 004e 84F80032 		strb	r3, [r4, #512]
2316:Middlewares/Third_Party/FatFs/Src/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize the physical drive */
 1145              		.loc 1 2316 0
 1146 0052 E8B2     		uxtb	r0, r5
 1147 0054 84F80102 		strb	r0, [r4, #513]
2317:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (stat & STA_NOINIT)				/* Check if the initialization succeeded */
 1148              		.loc 1 2317 0
 1149 0058 FFF7FEFF 		bl	disk_initialize
 1150              	.LVL149:
2318:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
 1151              		.loc 1 2318 0
 1152 005c 10F0010F 		tst	r0, #1
 1153 0060 40F06D81 		bne	.L137
2320:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_WRITE_PROTECTED;
 1154              		.loc 1 2320 0
 1155 0064 1FB1     		cbz	r7, .L118
2320:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_WRITE_PROTECTED;
 1156              		.loc 1 2320 0 is_stmt 0 discriminator 1
 1157 0066 10F0040F 		tst	r0, #4
 1158 006a 40F06A81 		bne	.L138
 1159              	.L118:
 1160              	.LVL150:
2328:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fmt == 1 || (!fmt && (LD2PT(vol)))) {	/* Not an FAT boot sector or forced partition number */
 1161              		.loc 1 2328 0 is_stmt 1
 1162 006e 0021     		movs	r1, #0
 1163 0070 2046     		mov	r0, r4
 1164              	.LVL151:
 1165 0072 FFF7FEFF 		bl	check_fs
 1166              	.LVL152:
 1167 0076 0346     		mov	r3, r0
 1168              	.LVL153:
2329:Middlewares/Third_Party/FatFs/Src/ff.c **** 		for (i = 0; i < 4; i++) {			/* Get partition offset */
 1169              		.loc 1 2329 0
 1170 0078 0128     		cmp	r0, #1
 1171 007a 00F0C880 		beq	.L139
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 66


2327:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fmt = check_fs(fs, bsect);					/* Load sector 0 and check if it is an FAT boot sector as SFD */
 1172              		.loc 1 2327 0
 1173 007e 0026     		movs	r6, #0
 1174              	.LVL154:
 1175              	.L120:
2341:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
 1176              		.loc 1 2341 0
 1177 0080 032B     		cmp	r3, #3
 1178 0082 00F06081 		beq	.L142
2342:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1179              		.loc 1 2342 0
 1180 0086 002B     		cmp	r3, #0
 1181 0088 40F05F81 		bne	.L143
2346:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_NO_FILESYSTEM;
 1182              		.loc 1 2346 0
 1183 008c 227B     		ldrb	r2, [r4, #12]	@ zero_extendqisi2
 1184 008e E37A     		ldrb	r3, [r4, #11]	@ zero_extendqisi2
 1185              	.LVL155:
 1186 0090 43EA0223 		orr	r3, r3, r2, lsl #8
 1187 0094 1BB2     		sxth	r3, r3
 1188 0096 B3F5007F 		cmp	r3, #512
 1189 009a 40F05881 		bne	.L144
2349:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!fasize) fasize = LD_DWORD(fs->win.d8 + BPB_FATSz32);
 1190              		.loc 1 2349 0
 1191 009e E27D     		ldrb	r2, [r4, #23]	@ zero_extendqisi2
 1192 00a0 A37D     		ldrb	r3, [r4, #22]	@ zero_extendqisi2
 1193              	.LVL156:
2350:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->fsize = fasize;
 1194              		.loc 1 2350 0
 1195 00a2 53EA0223 		orrs	r3, r3, r2, lsl #8
 1196              	.LVL157:
 1197 00a6 0DD1     		bne	.L125
2350:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->fsize = fasize;
 1198              		.loc 1 2350 0 is_stmt 0 discriminator 1
 1199 00a8 94F82720 		ldrb	r2, [r4, #39]	@ zero_extendqisi2
 1200 00ac 94F82630 		ldrb	r3, [r4, #38]	@ zero_extendqisi2
 1201              	.LVL158:
 1202 00b0 1B04     		lsls	r3, r3, #16
 1203 00b2 43EA0263 		orr	r3, r3, r2, lsl #24
 1204 00b6 94F82520 		ldrb	r2, [r4, #37]	@ zero_extendqisi2
 1205 00ba 43EA0223 		orr	r3, r3, r2, lsl #8
 1206 00be 94F82420 		ldrb	r2, [r4, #36]	@ zero_extendqisi2
 1207 00c2 1343     		orrs	r3, r3, r2
 1208              	.LVL159:
 1209              	.L125:
2351:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1210              		.loc 1 2351 0 is_stmt 1
 1211 00c4 C4F81832 		str	r3, [r4, #536]
2353:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fs->n_fats != 1 && fs->n_fats != 2)				/* (Must be 1 or 2) */
 1212              		.loc 1 2353 0
 1213 00c8 217C     		ldrb	r1, [r4, #16]	@ zero_extendqisi2
 1214 00ca 84F80312 		strb	r1, [r4, #515]
2354:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_NO_FILESYSTEM;
 1215              		.loc 1 2354 0
 1216 00ce 4A1E     		subs	r2, r1, #1
 1217 00d0 D2B2     		uxtb	r2, r2
 1218 00d2 012A     		cmp	r2, #1
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 67


 1219 00d4 00F23D81 		bhi	.L145
2356:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1220              		.loc 1 2356 0
 1221 00d8 03FB01F1 		mul	r1, r3, r1
 1222              	.LVL160:
2358:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!fs->csize || (fs->csize & (fs->csize - 1)))	/* (Must be power of 2) */
 1223              		.loc 1 2358 0
 1224 00dc 627B     		ldrb	r2, [r4, #13]	@ zero_extendqisi2
 1225 00de 84F80222 		strb	r2, [r4, #514]
2359:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_NO_FILESYSTEM;
 1226              		.loc 1 2359 0
 1227 00e2 002A     		cmp	r2, #0
 1228 00e4 00F03781 		beq	.L146
2359:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_NO_FILESYSTEM;
 1229              		.loc 1 2359 0 is_stmt 0 discriminator 1
 1230 00e8 501E     		subs	r0, r2, #1
 1231 00ea 0242     		tst	r2, r0
 1232 00ec 40F04081 		bne	.L147
2362:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIRE))				/* (Must be sector aligned) */
 1233              		.loc 1 2362 0 is_stmt 1
 1234 00f0 A07C     		ldrb	r0, [r4, #18]	@ zero_extendqisi2
 1235 00f2 657C     		ldrb	r5, [r4, #17]	@ zero_extendqisi2
 1236 00f4 45EA0025 		orr	r5, r5, r0, lsl #8
 1237 00f8 A4F80852 		strh	r5, [r4, #520]	@ movhi
2363:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_NO_FILESYSTEM;
 1238              		.loc 1 2363 0
 1239 00fc 15F00F0F 		tst	r5, #15
 1240 0100 40F03881 		bne	.L148
2366:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!tsect) tsect = LD_DWORD(fs->win.d8 + BPB_TotSec32);
 1241              		.loc 1 2366 0
 1242 0104 277D     		ldrb	r7, [r4, #20]	@ zero_extendqisi2
 1243 0106 E07C     		ldrb	r0, [r4, #19]	@ zero_extendqisi2
 1244              	.LVL161:
2367:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1245              		.loc 1 2367 0
 1246 0108 50EA0720 		orrs	r0, r0, r7, lsl #8
 1247              	.LVL162:
 1248 010c 0DD1     		bne	.L126
2367:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1249              		.loc 1 2367 0 is_stmt 0 discriminator 1
 1250 010e 94F82370 		ldrb	r7, [r4, #35]	@ zero_extendqisi2
 1251 0112 94F82200 		ldrb	r0, [r4, #34]	@ zero_extendqisi2
 1252              	.LVL163:
 1253 0116 0004     		lsls	r0, r0, #16
 1254 0118 40EA0760 		orr	r0, r0, r7, lsl #24
 1255 011c 94F82170 		ldrb	r7, [r4, #33]	@ zero_extendqisi2
 1256 0120 40EA0720 		orr	r0, r0, r7, lsl #8
 1257 0124 94F82070 		ldrb	r7, [r4, #32]	@ zero_extendqisi2
 1258 0128 3843     		orrs	r0, r0, r7
 1259              	.LVL164:
 1260              	.L126:
2369:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!nrsv) return FR_NO_FILESYSTEM;					/* (Must not be 0) */
 1261              		.loc 1 2369 0 is_stmt 1
 1262 012a 94F80FE0 		ldrb	lr, [r4, #15]	@ zero_extendqisi2
 1263 012e A77B     		ldrb	r7, [r4, #14]	@ zero_extendqisi2
 1264              	.LVL165:
2370:Middlewares/Third_Party/FatFs/Src/ff.c **** 
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 68


 1265              		.loc 1 2370 0
 1266 0130 57EA0E2E 		orrs	lr, r7, lr, lsl #8
 1267              	.LVL166:
 1268 0134 00F02081 		beq	.L149
2373:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (tsect < sysect) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 1269              		.loc 1 2373 0
 1270 0138 0EEB010C 		add	ip, lr, r1
 1271 013c 0CEB151C 		add	ip, ip, r5, lsr #4
 1272              	.LVL167:
2374:Middlewares/Third_Party/FatFs/Src/ff.c **** 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
 1273              		.loc 1 2374 0
 1274 0140 6045     		cmp	r0, ip
 1275 0142 C0F01B81 		bcc	.L150
2375:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!nclst) return FR_NO_FILESYSTEM;				/* (Invalid volume size) */
 1276              		.loc 1 2375 0
 1277 0146 A0EB0C00 		sub	r0, r0, ip
 1278              	.LVL168:
 1279 014a B0FBF2F2 		udiv	r2, r0, r2
 1280              	.LVL169:
2376:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fmt = FS_FAT12;
 1281              		.loc 1 2376 0
 1282 014e 002A     		cmp	r2, #0
 1283 0150 00F01681 		beq	.L151
 1284              	.LVL170:
2378:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 1285              		.loc 1 2378 0
 1286 0154 40F6F570 		movw	r0, #4085
 1287 0158 8242     		cmp	r2, r0
 1288 015a 71D8     		bhi	.L152
2377:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 1289              		.loc 1 2377 0
 1290 015c 0127     		movs	r7, #1
 1291              	.L127:
 1292              	.LVL171:
2379:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1293              		.loc 1 2379 0
 1294 015e 4FF6F570 		movw	r0, #65525
 1295 0162 8242     		cmp	r2, r0
 1296 0164 00D9     		bls	.L128
 1297 0166 0327     		movs	r7, #3
 1298              	.LVL172:
 1299              	.L128:
2382:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->volbase = bsect;								/* Volume start sector */
 1300              		.loc 1 2382 0
 1301 0168 0232     		adds	r2, r2, #2
 1302              	.LVL173:
 1303 016a C4F81422 		str	r2, [r4, #532]
2383:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 1304              		.loc 1 2383 0
 1305 016e C4F81C62 		str	r6, [r4, #540]
2384:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 1306              		.loc 1 2384 0
 1307 0172 0EEB0600 		add	r0, lr, r6
 1308 0176 C4F82002 		str	r0, [r4, #544]
2385:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fmt == FS_FAT32) {
 1309              		.loc 1 2385 0
 1310 017a B444     		add	ip, ip, r6
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 69


 1311              	.LVL174:
 1312 017c C4F828C2 		str	ip, [r4, #552]
2386:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (fs->n_rootdir) return FR_NO_FILESYSTEM;		/* (BPB_RootEntCnt must be 0) */
 1313              		.loc 1 2386 0
 1314 0180 032F     		cmp	r7, #3
 1315 0182 5FD0     		beq	.L158
2391:Middlewares/Third_Party/FatFs/Src/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 1316              		.loc 1 2391 0
 1317 0184 002D     		cmp	r5, #0
 1318 0186 00F0FF80 		beq	.L155
2392:Middlewares/Third_Party/FatFs/Src/ff.c **** 		szbfat = (fmt == FS_FAT16) ?					/* (Needed FAT size) */
 1319              		.loc 1 2392 0
 1320 018a 0144     		add	r1, r1, r0
 1321              	.LVL175:
 1322 018c C4F82412 		str	r1, [r4, #548]
2394:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 1323              		.loc 1 2394 0
 1324 0190 022F     		cmp	r7, #2
 1325 0192 6CD0     		beq	.L159
2394:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 1326              		.loc 1 2394 0 is_stmt 0 discriminator 2
 1327 0194 02EB4201 		add	r1, r2, r2, lsl #1
 1328 0198 02F00102 		and	r2, r2, #1
 1329              	.LVL176:
 1330 019c 02EB5102 		add	r2, r2, r1, lsr #1
 1331              	.L130:
 1332              	.LVL177:
2396:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_NO_FILESYSTEM;
 1333              		.loc 1 2396 0 is_stmt 1
 1334 01a0 02F2FF12 		addw	r2, r2, #511
 1335              	.LVL178:
 1336 01a4 B3EB522F 		cmp	r3, r2, lsr #9
 1337 01a8 C0F0F080 		bcc	.L156
2401:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1338              		.loc 1 2401 0
 1339 01ac 4FF0FF33 		mov	r3, #-1
 1340              	.LVL179:
 1341 01b0 C4F81032 		str	r3, [r4, #528]
 1342 01b4 C4F80C32 		str	r3, [r4, #524]
2404:Middlewares/Third_Party/FatFs/Src/ff.c **** #if (_FS_NOFSINFO & 3) != 3
 1343              		.loc 1 2404 0
 1344 01b8 8023     		movs	r3, #128
 1345 01ba 84F80532 		strb	r3, [r4, #517]
2406:Middlewares/Third_Party/FatFs/Src/ff.c **** 		&& LD_WORD(fs->win.d8 + BPB_FSInfo) == 1
 1346              		.loc 1 2406 0
 1347 01be 032F     		cmp	r7, #3
 1348 01c0 57D0     		beq	.L160
 1349              	.LVL180:
 1350              	.L132:
2425:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->id = ++Fsid;	/* File system mount ID */
 1351              		.loc 1 2425 0
 1352 01c2 84F80072 		strb	r7, [r4, #512]
2426:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_RPATH
 1353              		.loc 1 2426 0
 1354 01c6 664A     		ldr	r2, .L163+4
 1355 01c8 1388     		ldrh	r3, [r2]
 1356 01ca 0133     		adds	r3, r3, #1
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 70


 1357 01cc 9BB2     		uxth	r3, r3
 1358 01ce 1380     		strh	r3, [r2]	@ movhi
 1359 01d0 A4F80632 		strh	r3, [r4, #518]	@ movhi
2434:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 1360              		.loc 1 2434 0
 1361 01d4 0020     		movs	r0, #0
 1362 01d6 AAE0     		b	.L116
 1363              	.LVL181:
 1364              	.L140:
2332:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 1365              		.loc 1 2332 0
 1366 01d8 0023     		movs	r3, #0
 1367              	.LVL182:
 1368              	.L121:
2332:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 1369              		.loc 1 2332 0 is_stmt 0 discriminator 4
 1370 01da 04AA     		add	r2, sp, #16
 1371 01dc 02EB8102 		add	r2, r2, r1, lsl #2
 1372 01e0 42F8103C 		str	r3, [r2, #-16]
2330:Middlewares/Third_Party/FatFs/Src/ff.c **** 			pt = fs->win.d8 + MBR_Table + i * SZ_PTE;
 1373              		.loc 1 2330 0 is_stmt 1 discriminator 4
 1374 01e4 0131     		adds	r1, r1, #1
 1375              	.LVL183:
 1376              	.L119:
2330:Middlewares/Third_Party/FatFs/Src/ff.c **** 			pt = fs->win.d8 + MBR_Table + i * SZ_PTE;
 1377              		.loc 1 2330 0 is_stmt 0 discriminator 2
 1378 01e6 0329     		cmp	r1, #3
 1379 01e8 13D8     		bhi	.L161
2331:Middlewares/Third_Party/FatFs/Src/ff.c **** 			br[i] = pt[4] ? LD_DWORD(&pt[8]) : 0;
 1380              		.loc 1 2331 0 is_stmt 1
 1381 01ea 0B01     		lsls	r3, r1, #4
 1382 01ec 03F5DF73 		add	r3, r3, #446
 1383 01f0 2344     		add	r3, r3, r4
 1384              	.LVL184:
2332:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 1385              		.loc 1 2332 0
 1386 01f2 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
 1387 01f4 002A     		cmp	r2, #0
 1388 01f6 EFD0     		beq	.L140
2332:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 1389              		.loc 1 2332 0 is_stmt 0 discriminator 1
 1390 01f8 D87A     		ldrb	r0, [r3, #11]	@ zero_extendqisi2
 1391 01fa 9A7A     		ldrb	r2, [r3, #10]	@ zero_extendqisi2
 1392 01fc 1204     		lsls	r2, r2, #16
 1393 01fe 42EA0062 		orr	r2, r2, r0, lsl #24
 1394 0202 587A     		ldrb	r0, [r3, #9]	@ zero_extendqisi2
 1395 0204 42EA0022 		orr	r2, r2, r0, lsl #8
 1396 0208 1B7A     		ldrb	r3, [r3, #8]	@ zero_extendqisi2
 1397              	.LVL185:
 1398 020a 1343     		orrs	r3, r3, r2
 1399 020c E5E7     		b	.L121
 1400              	.LVL186:
 1401              	.L139:
2330:Middlewares/Third_Party/FatFs/Src/ff.c **** 			pt = fs->win.d8 + MBR_Table + i * SZ_PTE;
 1402              		.loc 1 2330 0 is_stmt 1
 1403 020e 0021     		movs	r1, #0
 1404 0210 E9E7     		b	.L119
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 71


 1405              	.LVL187:
 1406              	.L161:
 1407 0212 0025     		movs	r5, #0
 1408              	.LVL188:
 1409 0214 0BE0     		b	.L124
 1410              	.LVL189:
 1411              	.L162:
2338:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} while (!LD2PT(vol) && fmt && ++i < 4);
 1412              		.loc 1 2338 0 discriminator 1
 1413 0216 3146     		mov	r1, r6
 1414 0218 2046     		mov	r0, r4
 1415 021a FFF7FEFF 		bl	check_fs
 1416              	.LVL190:
2339:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 1417              		.loc 1 2339 0 discriminator 1
 1418 021e 0346     		mov	r3, r0
 1419 0220 0028     		cmp	r0, #0
 1420 0222 3FF42DAF 		beq	.L120
 1421              	.LVL191:
 1422              	.L123:
 1423 0226 0135     		adds	r5, r5, #1
 1424              	.LVL192:
 1425 0228 032D     		cmp	r5, #3
 1426 022a 3FF629AF 		bhi	.L120
 1427              	.LVL193:
 1428              	.L124:
2337:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fmt = bsect ? check_fs(fs, bsect) : 2;	/* Check the partition */
 1429              		.loc 1 2337 0
 1430 022e 04AB     		add	r3, sp, #16
 1431 0230 03EB8503 		add	r3, r3, r5, lsl #2
 1432 0234 53F8106C 		ldr	r6, [r3, #-16]
 1433              	.LVL194:
2338:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} while (!LD2PT(vol) && fmt && ++i < 4);
 1434              		.loc 1 2338 0
 1435 0238 002E     		cmp	r6, #0
 1436 023a ECD1     		bne	.L162
 1437 023c 0223     		movs	r3, #2
 1438 023e F2E7     		b	.L123
 1439              	.LVL195:
 1440              	.L152:
2378:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 1441              		.loc 1 2378 0
 1442 0240 0227     		movs	r7, #2
 1443 0242 8CE7     		b	.L127
 1444              	.LVL196:
 1445              	.L158:
2387:Middlewares/Third_Party/FatFs/Src/ff.c **** 		fs->dirbase = LD_DWORD(fs->win.d8 + BPB_RootClus);	/* Root directory start cluster */
 1446              		.loc 1 2387 0
 1447 0244 002D     		cmp	r5, #0
 1448 0246 40F09D80 		bne	.L154
2388:Middlewares/Third_Party/FatFs/Src/ff.c **** 		szbfat = fs->n_fatent * 4;						/* (Needed FAT size) */
 1449              		.loc 1 2388 0
 1450 024a 94F82F00 		ldrb	r0, [r4, #47]	@ zero_extendqisi2
 1451 024e 94F82E10 		ldrb	r1, [r4, #46]	@ zero_extendqisi2
 1452              	.LVL197:
 1453 0252 0904     		lsls	r1, r1, #16
 1454 0254 41EA0061 		orr	r1, r1, r0, lsl #24
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 72


 1455 0258 94F82D00 		ldrb	r0, [r4, #45]	@ zero_extendqisi2
 1456 025c 41EA0021 		orr	r1, r1, r0, lsl #8
 1457 0260 94F82C00 		ldrb	r0, [r4, #44]	@ zero_extendqisi2
 1458 0264 0143     		orrs	r1, r1, r0
 1459 0266 C4F82412 		str	r1, [r4, #548]
2389:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {
 1460              		.loc 1 2389 0
 1461 026a 9200     		lsls	r2, r2, #2
 1462              	.LVL198:
 1463 026c 98E7     		b	.L130
 1464              	.LVL199:
 1465              	.L159:
2394:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 1466              		.loc 1 2394 0 discriminator 1
 1467 026e 5200     		lsls	r2, r2, #1
 1468              	.LVL200:
 1469 0270 96E7     		b	.L130
 1470              	.LVL201:
 1471              	.L160:
2407:Middlewares/Third_Party/FatFs/Src/ff.c **** 		&& move_window(fs, bsect + 1) == FR_OK)
 1472              		.loc 1 2407 0
 1473 0272 94F83120 		ldrb	r2, [r4, #49]	@ zero_extendqisi2
 1474              	.LVL202:
 1475 0276 94F83030 		ldrb	r3, [r4, #48]	@ zero_extendqisi2
 1476 027a 43EA0223 		orr	r3, r3, r2, lsl #8
 1477 027e 1BB2     		sxth	r3, r3
 1478 0280 012B     		cmp	r3, #1
 1479 0282 9ED1     		bne	.L132
2408:Middlewares/Third_Party/FatFs/Src/ff.c **** 	{
 1480              		.loc 1 2408 0
 1481 0284 711C     		adds	r1, r6, #1
 1482 0286 2046     		mov	r0, r4
 1483 0288 FFF7FEFF 		bl	move_window
 1484              	.LVL203:
 1485 028c 0028     		cmp	r0, #0
 1486 028e 98D1     		bne	.L132
2410:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (LD_WORD(fs->win.d8 + BS_55AA) == 0xAA55	/* Load FSINFO data if available */
 1487              		.loc 1 2410 0
 1488 0290 0023     		movs	r3, #0
 1489 0292 84F80532 		strb	r3, [r4, #517]
2411:Middlewares/Third_Party/FatFs/Src/ff.c **** 			&& LD_DWORD(fs->win.d8 + FSI_LeadSig) == 0x41615252
 1490              		.loc 1 2411 0
 1491 0296 94F8FF21 		ldrb	r2, [r4, #511]	@ zero_extendqisi2
 1492 029a 94F8FE31 		ldrb	r3, [r4, #510]	@ zero_extendqisi2
 1493 029e 43EA0223 		orr	r3, r3, r2, lsl #8
 1494 02a2 1BB2     		sxth	r3, r3
 1495 02a4 2F4A     		ldr	r2, .L163+8
 1496 02a6 9342     		cmp	r3, r2
 1497 02a8 8BD1     		bne	.L132
2412:Middlewares/Third_Party/FatFs/Src/ff.c **** 			&& LD_DWORD(fs->win.d8 + FSI_StrucSig) == 0x61417272)
 1498              		.loc 1 2412 0
 1499 02aa E278     		ldrb	r2, [r4, #3]	@ zero_extendqisi2
 1500 02ac A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
 1501 02ae 1B04     		lsls	r3, r3, #16
 1502 02b0 43EA0263 		orr	r3, r3, r2, lsl #24
 1503 02b4 6278     		ldrb	r2, [r4, #1]	@ zero_extendqisi2
 1504 02b6 43EA0223 		orr	r3, r3, r2, lsl #8
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 73


 1505 02ba 2278     		ldrb	r2, [r4]	@ zero_extendqisi2
 1506 02bc 1343     		orrs	r3, r3, r2
 1507 02be 2A4A     		ldr	r2, .L163+12
 1508 02c0 9342     		cmp	r3, r2
 1509 02c2 7FF47EAF 		bne	.L132
2413:Middlewares/Third_Party/FatFs/Src/ff.c **** 		{
 1510              		.loc 1 2413 0
 1511 02c6 94F8E721 		ldrb	r2, [r4, #487]	@ zero_extendqisi2
 1512 02ca 94F8E631 		ldrb	r3, [r4, #486]	@ zero_extendqisi2
 1513 02ce 1B04     		lsls	r3, r3, #16
 1514 02d0 43EA0263 		orr	r3, r3, r2, lsl #24
 1515 02d4 94F8E521 		ldrb	r2, [r4, #485]	@ zero_extendqisi2
 1516 02d8 43EA0223 		orr	r3, r3, r2, lsl #8
 1517 02dc 94F8E421 		ldrb	r2, [r4, #484]	@ zero_extendqisi2
 1518 02e0 1343     		orrs	r3, r3, r2
 1519 02e2 224A     		ldr	r2, .L163+16
 1520 02e4 9342     		cmp	r3, r2
 1521 02e6 7FF46CAF 		bne	.L132
2416:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 1522              		.loc 1 2416 0
 1523 02ea 94F8EB21 		ldrb	r2, [r4, #491]	@ zero_extendqisi2
 1524 02ee 94F8EA31 		ldrb	r3, [r4, #490]	@ zero_extendqisi2
 1525 02f2 1B04     		lsls	r3, r3, #16
 1526 02f4 43EA0263 		orr	r3, r3, r2, lsl #24
 1527 02f8 94F8E921 		ldrb	r2, [r4, #489]	@ zero_extendqisi2
 1528 02fc 43EA0223 		orr	r3, r3, r2, lsl #8
 1529 0300 94F8E821 		ldrb	r2, [r4, #488]	@ zero_extendqisi2
 1530 0304 1343     		orrs	r3, r3, r2
 1531 0306 C4F81032 		str	r3, [r4, #528]
2419:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 1532              		.loc 1 2419 0
 1533 030a 94F8EF21 		ldrb	r2, [r4, #495]	@ zero_extendqisi2
 1534 030e 94F8EE31 		ldrb	r3, [r4, #494]	@ zero_extendqisi2
 1535 0312 1B04     		lsls	r3, r3, #16
 1536 0314 43EA0263 		orr	r3, r3, r2, lsl #24
 1537 0318 94F8ED21 		ldrb	r2, [r4, #493]	@ zero_extendqisi2
 1538 031c 43EA0223 		orr	r3, r3, r2, lsl #8
 1539 0320 94F8EC21 		ldrb	r2, [r4, #492]	@ zero_extendqisi2
 1540 0324 1343     		orrs	r3, r3, r2
 1541 0326 C4F80C32 		str	r3, [r4, #524]
 1542 032a 4AE7     		b	.L132
 1543              	.LVL204:
 1544              	.L133:
2294:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1545              		.loc 1 2294 0
 1546 032c 0B20     		movs	r0, #11
 1547              	.LVL205:
 1548              	.L116:
2435:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1549              		.loc 1 2435 0
 1550 032e 05B0     		add	sp, sp, #20
 1551              	.LCFI16:
 1552              		.cfi_remember_state
 1553              		.cfi_def_cfa_offset 20
 1554              		@ sp needed
 1555 0330 F0BD     		pop	{r4, r5, r6, r7, pc}
 1556              	.LVL206:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 74


 1557              	.L134:
 1558              	.LCFI17:
 1559              		.cfi_restore_state
2298:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1560              		.loc 1 2298 0
 1561 0332 0C20     		movs	r0, #12
 1562              	.LVL207:
 1563 0334 FBE7     		b	.L116
 1564              	.LVL208:
 1565              	.L135:
2308:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 1566              		.loc 1 2308 0
 1567 0336 0020     		movs	r0, #0
 1568              	.LVL209:
 1569 0338 F9E7     		b	.L116
 1570              	.LVL210:
 1571              	.L136:
2307:Middlewares/Third_Party/FatFs/Src/ff.c **** 			return FR_OK;				/* The file system object is valid */
 1572              		.loc 1 2307 0
 1573 033a 0A20     		movs	r0, #10
 1574              	.LVL211:
 1575 033c F7E7     		b	.L116
 1576              	.LVL212:
 1577              	.L137:
2319:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!_FS_READONLY && wmode && (stat & STA_PROTECT))	/* Check disk write protection if needed */
 1578              		.loc 1 2319 0
 1579 033e 0320     		movs	r0, #3
 1580              	.LVL213:
 1581 0340 F5E7     		b	.L116
 1582              	.LVL214:
 1583              	.L138:
2321:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _MAX_SS != _MIN_SS						/* Get sector size (multiple sector size cfg only) */
 1584              		.loc 1 2321 0
 1585 0342 0A20     		movs	r0, #10
 1586              	.LVL215:
 1587 0344 F3E7     		b	.L116
 1588              	.LVL216:
 1589              	.L142:
2341:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
 1590              		.loc 1 2341 0
 1591 0346 0120     		movs	r0, #1
 1592 0348 F1E7     		b	.L116
 1593              	.L143:
2342:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1594              		.loc 1 2342 0
 1595 034a 0D20     		movs	r0, #13
 1596 034c EFE7     		b	.L116
 1597              	.LVL217:
 1598              	.L144:
2347:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1599              		.loc 1 2347 0
 1600 034e 0D20     		movs	r0, #13
 1601 0350 EDE7     		b	.L116
 1602              	.LVL218:
 1603              	.L145:
2355:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fasize *= fs->n_fats;								/* Number of sectors for FAT area */
 1604              		.loc 1 2355 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 75


 1605 0352 0D20     		movs	r0, #13
 1606 0354 EBE7     		b	.L116
 1607              	.LVL219:
 1608              	.L146:
2360:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1609              		.loc 1 2360 0
 1610 0356 0D20     		movs	r0, #13
 1611 0358 E9E7     		b	.L116
 1612              	.L164:
 1613 035a 00BF     		.align	2
 1614              	.L163:
 1615 035c 00000000 		.word	.LANCHOR1
 1616 0360 00000000 		.word	.LANCHOR2
 1617 0364 55AAFFFF 		.word	-21931
 1618 0368 52526141 		.word	1096897106
 1619 036c 72724161 		.word	1631679090
 1620              	.L147:
 1621 0370 0D20     		movs	r0, #13
 1622 0372 DCE7     		b	.L116
 1623              	.L148:
2364:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1624              		.loc 1 2364 0
 1625 0374 0D20     		movs	r0, #13
 1626 0376 DAE7     		b	.L116
 1627              	.LVL220:
 1628              	.L149:
2370:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1629              		.loc 1 2370 0
 1630 0378 0D20     		movs	r0, #13
 1631              	.LVL221:
 1632 037a D8E7     		b	.L116
 1633              	.LVL222:
 1634              	.L150:
2374:Middlewares/Third_Party/FatFs/Src/ff.c **** 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
 1635              		.loc 1 2374 0
 1636 037c 0D20     		movs	r0, #13
 1637              	.LVL223:
 1638 037e D6E7     		b	.L116
 1639              	.LVL224:
 1640              	.L151:
2376:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fmt = FS_FAT12;
 1641              		.loc 1 2376 0
 1642 0380 0D20     		movs	r0, #13
 1643 0382 D4E7     		b	.L116
 1644              	.LVL225:
 1645              	.L154:
2387:Middlewares/Third_Party/FatFs/Src/ff.c **** 		fs->dirbase = LD_DWORD(fs->win.d8 + BPB_RootClus);	/* Root directory start cluster */
 1646              		.loc 1 2387 0
 1647 0384 0D20     		movs	r0, #13
 1648 0386 D2E7     		b	.L116
 1649              	.L155:
2391:Middlewares/Third_Party/FatFs/Src/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 1650              		.loc 1 2391 0
 1651 0388 0D20     		movs	r0, #13
 1652 038a D0E7     		b	.L116
 1653              	.LVL226:
 1654              	.L156:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 76


2397:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1655              		.loc 1 2397 0
 1656 038c 0D20     		movs	r0, #13
 1657 038e CEE7     		b	.L116
 1658              		.cfi_endproc
 1659              	.LFE92:
 1661              		.section	.text.sync_fs,"ax",%progbits
 1662              		.align	1
 1663              		.syntax unified
 1664              		.thumb
 1665              		.thumb_func
 1666              		.fpu softvfp
 1668              	sync_fs:
 1669              	.LFB72:
 836:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
 1670              		.loc 1 836 0
 1671              		.cfi_startproc
 1672              		@ args = 0, pretend = 0, frame = 0
 1673              		@ frame_needed = 0, uses_anonymous_args = 0
 1674              	.LVL227:
 1675 0000 38B5     		push	{r3, r4, r5, lr}
 1676              	.LCFI18:
 1677              		.cfi_def_cfa_offset 16
 1678              		.cfi_offset 3, -16
 1679              		.cfi_offset 4, -12
 1680              		.cfi_offset 5, -8
 1681              		.cfi_offset 14, -4
 1682 0002 0446     		mov	r4, r0
 840:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
 1683              		.loc 1 840 0
 1684 0004 FFF7FEFF 		bl	sync_window
 1685              	.LVL228:
 841:Middlewares/Third_Party/FatFs/Src/ff.c **** 		/* Update FSINFO sector if needed */
 1686              		.loc 1 841 0
 1687 0008 0546     		mov	r5, r0
 1688 000a 58B9     		cbnz	r0, .L166
 843:Middlewares/Third_Party/FatFs/Src/ff.c **** 			/* Create FSINFO structure */
 1689              		.loc 1 843 0
 1690 000c 94F80032 		ldrb	r3, [r4, #512]	@ zero_extendqisi2
 1691 0010 032B     		cmp	r3, #3
 1692 0012 09D0     		beq	.L170
 1693              	.LVL229:
 1694              	.L167:
 857:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = FR_DISK_ERR;
 1695              		.loc 1 857 0
 1696 0014 0022     		movs	r2, #0
 1697 0016 1146     		mov	r1, r2
 1698 0018 94F80102 		ldrb	r0, [r4, #513]	@ zero_extendqisi2
 1699 001c FFF7FEFF 		bl	disk_ioctl
 1700              	.LVL230:
 1701 0020 00B1     		cbz	r0, .L166
 858:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 1702              		.loc 1 858 0
 1703 0022 0125     		movs	r5, #1
 1704              	.L166:
 1705              	.LVL231:
 862:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 77


 1706              		.loc 1 862 0
 1707 0024 2846     		mov	r0, r5
 1708 0026 38BD     		pop	{r3, r4, r5, pc}
 1709              	.LVL232:
 1710              	.L170:
 843:Middlewares/Third_Party/FatFs/Src/ff.c **** 			/* Create FSINFO structure */
 1711              		.loc 1 843 0 discriminator 1
 1712 0028 94F80532 		ldrb	r3, [r4, #517]	@ zero_extendqisi2
 1713 002c 012B     		cmp	r3, #1
 1714 002e F1D1     		bne	.L167
 845:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_WORD(fs->win.d8 + BS_55AA, 0xAA55);
 1715              		.loc 1 845 0
 1716 0030 4FF40072 		mov	r2, #512
 1717 0034 0021     		movs	r1, #0
 1718 0036 2046     		mov	r0, r4
 1719              	.LVL233:
 1720 0038 FFF7FEFF 		bl	mem_set
 1721              	.LVL234:
 846:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_LeadSig, 0x41615252);
 1722              		.loc 1 846 0
 1723 003c 5523     		movs	r3, #85
 1724 003e 84F8FE31 		strb	r3, [r4, #510]
 1725 0042 AA23     		movs	r3, #170
 1726 0044 84F8FF31 		strb	r3, [r4, #511]
 847:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_StrucSig, 0x61417272);
 1727              		.loc 1 847 0
 1728 0048 5223     		movs	r3, #82
 1729 004a 2370     		strb	r3, [r4]
 1730 004c 6370     		strb	r3, [r4, #1]
 1731 004e 6123     		movs	r3, #97
 1732 0050 A370     		strb	r3, [r4, #2]
 1733 0052 4122     		movs	r2, #65
 1734 0054 E270     		strb	r2, [r4, #3]
 848:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_Free_Count, fs->free_clust);
 1735              		.loc 1 848 0
 1736 0056 7221     		movs	r1, #114
 1737 0058 84F8E411 		strb	r1, [r4, #484]
 1738 005c 84F8E511 		strb	r1, [r4, #485]
 1739 0060 84F8E621 		strb	r2, [r4, #486]
 1740 0064 84F8E731 		strb	r3, [r4, #487]
 849:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_Nxt_Free, fs->last_clust);
 1741              		.loc 1 849 0
 1742 0068 D4F81032 		ldr	r3, [r4, #528]
 1743 006c 84F8E831 		strb	r3, [r4, #488]
 1744 0070 C3F30722 		ubfx	r2, r3, #8, #8
 1745 0074 84F8E921 		strb	r2, [r4, #489]
 1746 0078 C3F30742 		ubfx	r2, r3, #16, #8
 1747 007c 84F8EA21 		strb	r2, [r4, #490]
 1748 0080 1B0E     		lsrs	r3, r3, #24
 1749 0082 84F8EB31 		strb	r3, [r4, #491]
 850:Middlewares/Third_Party/FatFs/Src/ff.c **** 			/* Write it into the FSINFO sector */
 1750              		.loc 1 850 0
 1751 0086 D4F80C32 		ldr	r3, [r4, #524]
 1752 008a 84F8EC31 		strb	r3, [r4, #492]
 1753 008e C3F30722 		ubfx	r2, r3, #8, #8
 1754 0092 84F8ED21 		strb	r2, [r4, #493]
 1755 0096 C3F30742 		ubfx	r2, r3, #16, #8
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 78


 1756 009a 84F8EE21 		strb	r2, [r4, #494]
 1757 009e 1B0E     		lsrs	r3, r3, #24
 1758 00a0 84F8EF31 		strb	r3, [r4, #495]
 852:Middlewares/Third_Party/FatFs/Src/ff.c **** 			disk_write(fs->drv, fs->win.d8, fs->winsect, 1);
 1759              		.loc 1 852 0
 1760 00a4 D4F81C22 		ldr	r2, [r4, #540]
 1761 00a8 0132     		adds	r2, r2, #1
 1762 00aa C4F82C22 		str	r2, [r4, #556]
 853:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->fsi_flag = 0;
 1763              		.loc 1 853 0
 1764 00ae 0123     		movs	r3, #1
 1765 00b0 2146     		mov	r1, r4
 1766 00b2 94F80102 		ldrb	r0, [r4, #513]	@ zero_extendqisi2
 1767 00b6 FFF7FEFF 		bl	disk_write
 1768              	.LVL235:
 854:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 1769              		.loc 1 854 0
 1770 00ba 0023     		movs	r3, #0
 1771 00bc 84F80532 		strb	r3, [r4, #517]
 1772 00c0 A8E7     		b	.L167
 1773              		.cfi_endproc
 1774              	.LFE72:
 1776              		.section	.text.clust2sect,"ax",%progbits
 1777              		.align	1
 1778              		.global	clust2sect
 1779              		.syntax unified
 1780              		.thumb
 1781              		.thumb_func
 1782              		.fpu softvfp
 1784              	clust2sect:
 1785              	.LFB73:
 877:Middlewares/Third_Party/FatFs/Src/ff.c **** 	clst -= 2;
 1786              		.loc 1 877 0
 1787              		.cfi_startproc
 1788              		@ args = 0, pretend = 0, frame = 0
 1789              		@ frame_needed = 0, uses_anonymous_args = 0
 1790              		@ link register save eliminated.
 1791              	.LVL236:
 878:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Invalid cluster# */
 1792              		.loc 1 878 0
 1793 0000 0239     		subs	r1, r1, #2
 1794              	.LVL237:
 879:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return clst * fs->csize + fs->database;
 1795              		.loc 1 879 0
 1796 0002 D0F81432 		ldr	r3, [r0, #532]
 1797 0006 023B     		subs	r3, r3, #2
 1798 0008 8B42     		cmp	r3, r1
 1799 000a 06D9     		bls	.L173
 880:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 1800              		.loc 1 880 0
 1801 000c 90F80232 		ldrb	r3, [r0, #514]	@ zero_extendqisi2
 1802 0010 D0F82802 		ldr	r0, [r0, #552]
 1803              	.LVL238:
 1804 0014 01FB0300 		mla	r0, r1, r3, r0
 1805 0018 7047     		bx	lr
 1806              	.LVL239:
 1807              	.L173:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 79


 879:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return clst * fs->csize + fs->database;
 1808              		.loc 1 879 0
 1809 001a 0020     		movs	r0, #0
 1810              	.LVL240:
 881:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1811              		.loc 1 881 0
 1812 001c 7047     		bx	lr
 1813              		.cfi_endproc
 1814              	.LFE73:
 1816              		.section	.text.get_fat,"ax",%progbits
 1817              		.align	1
 1818              		.global	get_fat
 1819              		.syntax unified
 1820              		.thumb
 1821              		.thumb_func
 1822              		.fpu softvfp
 1824              	get_fat:
 1825              	.LFB74:
 895:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT wc, bc;
 1826              		.loc 1 895 0
 1827              		.cfi_startproc
 1828              		@ args = 0, pretend = 0, frame = 0
 1829              		@ frame_needed = 0, uses_anonymous_args = 0
 1830              	.LVL241:
 901:Middlewares/Third_Party/FatFs/Src/ff.c **** 		val = 1;	/* Internal error */
 1831              		.loc 1 901 0
 1832 0000 0129     		cmp	r1, #1
 1833 0002 5CD9     		bls	.L180
 895:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT wc, bc;
 1834              		.loc 1 895 0 discriminator 1
 1835 0004 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1836              	.LCFI19:
 1837              		.cfi_def_cfa_offset 24
 1838              		.cfi_offset 3, -24
 1839              		.cfi_offset 4, -20
 1840              		.cfi_offset 5, -16
 1841              		.cfi_offset 6, -12
 1842              		.cfi_offset 7, -8
 1843              		.cfi_offset 14, -4
 901:Middlewares/Third_Party/FatFs/Src/ff.c **** 		val = 1;	/* Internal error */
 1844              		.loc 1 901 0 discriminator 1
 1845 0006 D0F81432 		ldr	r3, [r0, #532]
 1846 000a 8B42     		cmp	r3, r1
 1847 000c 59D9     		bls	.L181
 1848 000e 0C46     		mov	r4, r1
 1849 0010 0646     		mov	r6, r0
 1850              	.LVL242:
 907:Middlewares/Third_Party/FatFs/Src/ff.c **** 		case FS_FAT12 :
 1851              		.loc 1 907 0
 1852 0012 90F80032 		ldrb	r3, [r0, #512]	@ zero_extendqisi2
 1853 0016 022B     		cmp	r3, #2
 1854 0018 29D0     		beq	.L176
 1855 001a 032B     		cmp	r3, #3
 1856 001c 37D0     		beq	.L177
 1857 001e 012B     		cmp	r3, #1
 1858 0020 01D0     		beq	.L192
 930:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 80


 1859              		.loc 1 930 0
 1860 0022 0120     		movs	r0, #1
 1861              	.LVL243:
 1862 0024 4EE0     		b	.L174
 1863              	.LVL244:
 1864              	.L192:
 909:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 1865              		.loc 1 909 0
 1866 0026 01EB5105 		add	r5, r1, r1, lsr #1
 1867              	.LVL245:
 910:Middlewares/Third_Party/FatFs/Src/ff.c **** 			wc = fs->win.d8[bc++ % SS(fs)];
 1868              		.loc 1 910 0
 1869 002a D0F82012 		ldr	r1, [r0, #544]
 1870              	.LVL246:
 1871 002e 01EB5521 		add	r1, r1, r5, lsr #9
 1872 0032 FFF7FEFF 		bl	move_window
 1873              	.LVL247:
 1874 0036 0028     		cmp	r0, #0
 1875 0038 45D1     		bne	.L183
 911:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 1876              		.loc 1 911 0
 1877 003a 6F1C     		adds	r7, r5, #1
 1878              	.LVL248:
 1879 003c C5F30805 		ubfx	r5, r5, #0, #9
 1880 0040 755D     		ldrb	r5, [r6, r5]	@ zero_extendqisi2
 1881              	.LVL249:
 912:Middlewares/Third_Party/FatFs/Src/ff.c **** 			wc |= fs->win.d8[bc % SS(fs)] << 8;
 1882              		.loc 1 912 0
 1883 0042 D6F82012 		ldr	r1, [r6, #544]
 1884 0046 01EB5721 		add	r1, r1, r7, lsr #9
 1885 004a 3046     		mov	r0, r6
 1886 004c FFF7FEFF 		bl	move_window
 1887              	.LVL250:
 1888 0050 0028     		cmp	r0, #0
 1889 0052 3BD1     		bne	.L184
 913:Middlewares/Third_Party/FatFs/Src/ff.c **** 			val = clst & 1 ? wc >> 4 : (wc & 0xFFF);
 1890              		.loc 1 913 0
 1891 0054 C7F30807 		ubfx	r7, r7, #0, #9
 1892              	.LVL251:
 1893 0058 F05D     		ldrb	r0, [r6, r7]	@ zero_extendqisi2
 1894 005a 45EA0020 		orr	r0, r5, r0, lsl #8
 1895              	.LVL252:
 914:Middlewares/Third_Party/FatFs/Src/ff.c **** 			break;
 1896              		.loc 1 914 0
 1897 005e 14F0010F 		tst	r4, #1
 1898 0062 01D0     		beq	.L179
 914:Middlewares/Third_Party/FatFs/Src/ff.c **** 			break;
 1899              		.loc 1 914 0 is_stmt 0 discriminator 1
 1900 0064 0009     		lsrs	r0, r0, #4
 1901              	.LVL253:
 1902 0066 2DE0     		b	.L174
 1903              	.LVL254:
 1904              	.L179:
 914:Middlewares/Third_Party/FatFs/Src/ff.c **** 			break;
 1905              		.loc 1 914 0 discriminator 2
 1906 0068 C0F30B00 		ubfx	r0, r0, #0, #12
 1907              	.LVL255:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 81


 1908 006c 2AE0     		b	.L174
 1909              	.LVL256:
 1910              	.L176:
 918:Middlewares/Third_Party/FatFs/Src/ff.c **** 			p = &fs->win.d8[clst * 2 % SS(fs)];
 1911              		.loc 1 918 0 is_stmt 1
 1912 006e D0F82012 		ldr	r1, [r0, #544]
 1913              	.LVL257:
 1914 0072 01EB1421 		add	r1, r1, r4, lsr #8
 1915 0076 FFF7FEFF 		bl	move_window
 1916              	.LVL258:
 1917 007a 50BB     		cbnz	r0, .L185
 919:Middlewares/Third_Party/FatFs/Src/ff.c **** 			val = LD_WORD(p);
 1918              		.loc 1 919 0
 1919 007c 6100     		lsls	r1, r4, #1
 1920 007e 01F4FF71 		and	r1, r1, #510
 1921 0082 7318     		adds	r3, r6, r1
 1922              	.LVL259:
 920:Middlewares/Third_Party/FatFs/Src/ff.c **** 			break;
 1923              		.loc 1 920 0
 1924 0084 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1925              	.LVL260:
 1926 0086 705C     		ldrb	r0, [r6, r1]	@ zero_extendqisi2
 1927 0088 40EA0320 		orr	r0, r0, r3, lsl #8
 1928              	.LVL261:
 921:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1929              		.loc 1 921 0
 1930 008c 1AE0     		b	.L174
 1931              	.LVL262:
 1932              	.L177:
 924:Middlewares/Third_Party/FatFs/Src/ff.c **** 			p = &fs->win.d8[clst * 4 % SS(fs)];
 1933              		.loc 1 924 0
 1934 008e D0F82012 		ldr	r1, [r0, #544]
 1935              	.LVL263:
 1936 0092 01EBD411 		add	r1, r1, r4, lsr #7
 1937 0096 FFF7FEFF 		bl	move_window
 1938              	.LVL264:
 1939 009a E8B9     		cbnz	r0, .L186
 925:Middlewares/Third_Party/FatFs/Src/ff.c **** 			val = LD_DWORD(p) & 0x0FFFFFFF;
 1940              		.loc 1 925 0
 1941 009c A100     		lsls	r1, r4, #2
 1942 009e 01F4FE71 		and	r1, r1, #508
 1943 00a2 7218     		adds	r2, r6, r1
 1944              	.LVL265:
 926:Middlewares/Third_Party/FatFs/Src/ff.c **** 			break;
 1945              		.loc 1 926 0
 1946 00a4 D078     		ldrb	r0, [r2, #3]	@ zero_extendqisi2
 1947 00a6 9378     		ldrb	r3, [r2, #2]	@ zero_extendqisi2
 1948 00a8 1B04     		lsls	r3, r3, #16
 1949 00aa 43EA0063 		orr	r3, r3, r0, lsl #24
 1950 00ae 5078     		ldrb	r0, [r2, #1]	@ zero_extendqisi2
 1951 00b0 43EA0023 		orr	r3, r3, r0, lsl #8
 1952 00b4 705C     		ldrb	r0, [r6, r1]	@ zero_extendqisi2
 1953 00b6 1843     		orrs	r0, r0, r3
 1954 00b8 20F07040 		bic	r0, r0, #-268435456
 1955              	.LVL266:
 927:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1956              		.loc 1 927 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 82


 1957 00bc 02E0     		b	.L174
 1958              	.LVL267:
 1959              	.L180:
 1960              	.LCFI20:
 1961              		.cfi_def_cfa_offset 0
 1962              		.cfi_restore 3
 1963              		.cfi_restore 4
 1964              		.cfi_restore 5
 1965              		.cfi_restore 6
 1966              		.cfi_restore 7
 1967              		.cfi_restore 14
 902:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1968              		.loc 1 902 0
 1969 00be 0120     		movs	r0, #1
 1970              	.LVL268:
 935:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1971              		.loc 1 935 0
 1972 00c0 7047     		bx	lr
 1973              	.LVL269:
 1974              	.L181:
 1975              	.LCFI21:
 1976              		.cfi_def_cfa_offset 24
 1977              		.cfi_offset 3, -24
 1978              		.cfi_offset 4, -20
 1979              		.cfi_offset 5, -16
 1980              		.cfi_offset 6, -12
 1981              		.cfi_offset 7, -8
 1982              		.cfi_offset 14, -4
 902:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1983              		.loc 1 902 0
 1984 00c2 0120     		movs	r0, #1
 1985              	.LVL270:
 1986              	.L174:
 935:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1987              		.loc 1 935 0
 1988 00c4 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1989              	.LVL271:
 1990              	.L183:
 905:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 1991              		.loc 1 905 0
 1992 00c6 4FF0FF30 		mov	r0, #-1
 1993 00ca FBE7     		b	.L174
 1994              	.LVL272:
 1995              	.L184:
 1996 00cc 4FF0FF30 		mov	r0, #-1
 1997 00d0 F8E7     		b	.L174
 1998              	.LVL273:
 1999              	.L185:
 2000 00d2 4FF0FF30 		mov	r0, #-1
 2001 00d6 F5E7     		b	.L174
 2002              	.L186:
 2003 00d8 4FF0FF30 		mov	r0, #-1
 934:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 2004              		.loc 1 934 0
 2005 00dc F2E7     		b	.L174
 2006              		.cfi_endproc
 2007              	.LFE74:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 83


 2009              		.section	.text.dir_sdi,"ax",%progbits
 2010              		.align	1
 2011              		.syntax unified
 2012              		.thumb
 2013              		.thumb_func
 2014              		.fpu softvfp
 2016              	dir_sdi:
 2017              	.LFB78:
1157:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD clst, sect;
 2018              		.loc 1 1157 0
 2019              		.cfi_startproc
 2020              		@ args = 0, pretend = 0, frame = 0
 2021              		@ frame_needed = 0, uses_anonymous_args = 0
 2022              	.LVL274:
 2023 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2024              	.LCFI22:
 2025              		.cfi_def_cfa_offset 24
 2026              		.cfi_offset 3, -24
 2027              		.cfi_offset 4, -20
 2028              		.cfi_offset 5, -16
 2029              		.cfi_offset 6, -12
 2030              		.cfi_offset 7, -8
 2031              		.cfi_offset 14, -4
 2032 0002 0646     		mov	r6, r0
1162:Middlewares/Third_Party/FatFs/Src/ff.c **** 	clst = dp->sclust;		/* Table start cluster (0:root) */
 2033              		.loc 1 1162 0
 2034 0004 A0F80612 		strh	r1, [r0, #518]	@ movhi
1163:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (clst == 1 || clst >= dp->fs->n_fatent)	/* Check start cluster range */
 2035              		.loc 1 1163 0
 2036 0008 D0F80842 		ldr	r4, [r0, #520]
 2037              	.LVL275:
1164:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_INT_ERR;
 2038              		.loc 1 1164 0
 2039 000c 012C     		cmp	r4, #1
 2040 000e 44D0     		beq	.L200
 2041 0010 0D46     		mov	r5, r1
1164:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_INT_ERR;
 2042              		.loc 1 1164 0 is_stmt 0 discriminator 1
 2043 0012 D0F80032 		ldr	r3, [r0, #512]
 2044 0016 D3F81422 		ldr	r2, [r3, #532]
 2045 001a A242     		cmp	r2, r4
 2046 001c 3FD9     		bls	.L201
1166:Middlewares/Third_Party/FatFs/Src/ff.c **** 		clst = dp->fs->dirbase;
 2047              		.loc 1 1166 0 is_stmt 1
 2048 001e 1CB9     		cbnz	r4, .L195
1166:Middlewares/Third_Party/FatFs/Src/ff.c **** 		clst = dp->fs->dirbase;
 2049              		.loc 1 1166 0 is_stmt 0 discriminator 1
 2050 0020 93F80022 		ldrb	r2, [r3, #512]	@ zero_extendqisi2
 2051 0024 032A     		cmp	r2, #3
 2052 0026 17D0     		beq	.L208
 2053              	.L195:
1169:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (idx >= dp->fs->n_rootdir)	/* Is index out of range? */
 2054              		.loc 1 1169 0 is_stmt 1
 2055 0028 CCB9     		cbnz	r4, .L196
1170:Middlewares/Third_Party/FatFs/Src/ff.c **** 			return FR_INT_ERR;
 2056              		.loc 1 1170 0
 2057 002a B3F80822 		ldrh	r2, [r3, #520]
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 84


 2058 002e AA42     		cmp	r2, r5
 2059 0030 37D9     		bls	.L202
1172:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 2060              		.loc 1 1172 0
 2061 0032 D3F82402 		ldr	r0, [r3, #548]
 2062              	.LVL276:
 2063              	.L197:
1185:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!sect) return FR_INT_ERR;
 2064              		.loc 1 1185 0
 2065 0036 C6F80C42 		str	r4, [r6, #524]
1186:Middlewares/Third_Party/FatFs/Src/ff.c **** 	dp->sect = sect + idx / (SS(dp->fs) / SZ_DIRE);					/* Sector# of the directory entry */
 2066              		.loc 1 1186 0
 2067 003a D0B3     		cbz	r0, .L206
1187:Middlewares/Third_Party/FatFs/Src/ff.c **** 	dp->dir = dp->fs->win.d8 + (idx % (SS(dp->fs) / SZ_DIRE)) * SZ_DIRE;	/* Ptr to the entry in the se
 2068              		.loc 1 1187 0
 2069 003c 00EB1510 		add	r0, r0, r5, lsr #4
 2070              	.LVL277:
 2071 0040 C6F81002 		str	r0, [r6, #528]
1188:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 2072              		.loc 1 1188 0
 2073 0044 D6F80032 		ldr	r3, [r6, #512]
 2074 0048 05F00F05 		and	r5, r5, #15
 2075              	.LVL278:
 2076 004c 03EB4515 		add	r5, r3, r5, lsl #5
 2077 0050 C6F81452 		str	r5, [r6, #532]
1190:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 2078              		.loc 1 1190 0
 2079 0054 0020     		movs	r0, #0
 2080 0056 23E0     		b	.L194
 2081              	.LVL279:
 2082              	.L208:
1167:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 2083              		.loc 1 1167 0
 2084 0058 D3F82442 		ldr	r4, [r3, #548]
 2085              	.LVL280:
 2086 005c E4E7     		b	.L195
 2087              	.L196:
1175:Middlewares/Third_Party/FatFs/Src/ff.c **** 		while (idx >= ic) {	/* Follow cluster chain */
 2088              		.loc 1 1175 0
 2089 005e 93F80272 		ldrb	r7, [r3, #514]	@ zero_extendqisi2
 2090 0062 3F01     		lsls	r7, r7, #4
 2091              	.LVL281:
 2092              	.L198:
1176:Middlewares/Third_Party/FatFs/Src/ff.c **** 			clst = get_fat(dp->fs, clst);				/* Get next cluster */
 2093              		.loc 1 1176 0
 2094 0064 BD42     		cmp	r5, r7
 2095 0066 12D3     		bcc	.L209
1177:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 2096              		.loc 1 1177 0
 2097 0068 2146     		mov	r1, r4
 2098 006a D6F80002 		ldr	r0, [r6, #512]
 2099 006e FFF7FEFF 		bl	get_fat
 2100              	.LVL282:
 2101 0072 0446     		mov	r4, r0
 2102              	.LVL283:
1178:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (clst < 2 || clst >= dp->fs->n_fatent)	/* Reached to end of table or internal error */
 2103              		.loc 1 1178 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 85


 2104 0074 B0F1FF3F 		cmp	r0, #-1
 2105 0078 15D0     		beq	.L203
1179:Middlewares/Third_Party/FatFs/Src/ff.c **** 				return FR_INT_ERR;
 2106              		.loc 1 1179 0
 2107 007a 0128     		cmp	r0, #1
 2108 007c 15D9     		bls	.L204
1179:Middlewares/Third_Party/FatFs/Src/ff.c **** 				return FR_INT_ERR;
 2109              		.loc 1 1179 0 is_stmt 0 discriminator 1
 2110 007e D6F80032 		ldr	r3, [r6, #512]
 2111 0082 D3F81432 		ldr	r3, [r3, #532]
 2112 0086 8342     		cmp	r3, r0
 2113 0088 11D9     		bls	.L205
1181:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 2114              		.loc 1 1181 0 is_stmt 1
 2115 008a ED1B     		subs	r5, r5, r7
 2116              	.LVL284:
 2117 008c EAE7     		b	.L198
 2118              	.LVL285:
 2119              	.L209:
1183:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 2120              		.loc 1 1183 0
 2121 008e 2146     		mov	r1, r4
 2122 0090 D6F80002 		ldr	r0, [r6, #512]
 2123 0094 FFF7FEFF 		bl	clust2sect
 2124              	.LVL286:
 2125 0098 CDE7     		b	.L197
 2126              	.LVL287:
 2127              	.L200:
1165:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!clst && dp->fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
 2128              		.loc 1 1165 0
 2129 009a 0220     		movs	r0, #2
 2130              	.LVL288:
 2131 009c 00E0     		b	.L194
 2132              	.LVL289:
 2133              	.L201:
 2134 009e 0220     		movs	r0, #2
 2135              	.LVL290:
 2136              	.L194:
1191:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 2137              		.loc 1 1191 0
 2138 00a0 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2139              	.LVL291:
 2140              	.L202:
1171:Middlewares/Third_Party/FatFs/Src/ff.c **** 		sect = dp->fs->dirbase;
 2141              		.loc 1 1171 0
 2142 00a2 0220     		movs	r0, #2
 2143              	.LVL292:
 2144 00a4 FCE7     		b	.L194
 2145              	.LVL293:
 2146              	.L203:
1178:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (clst < 2 || clst >= dp->fs->n_fatent)	/* Reached to end of table or internal error */
 2147              		.loc 1 1178 0
 2148 00a6 0120     		movs	r0, #1
 2149              	.LVL294:
 2150 00a8 FAE7     		b	.L194
 2151              	.LVL295:
 2152              	.L204:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 86


1180:Middlewares/Third_Party/FatFs/Src/ff.c **** 			idx -= ic;
 2153              		.loc 1 1180 0
 2154 00aa 0220     		movs	r0, #2
 2155              	.LVL296:
 2156 00ac F8E7     		b	.L194
 2157              	.LVL297:
 2158              	.L205:
 2159 00ae 0220     		movs	r0, #2
 2160              	.LVL298:
 2161 00b0 F6E7     		b	.L194
 2162              	.LVL299:
 2163              	.L206:
1186:Middlewares/Third_Party/FatFs/Src/ff.c **** 	dp->sect = sect + idx / (SS(dp->fs) / SZ_DIRE);					/* Sector# of the directory entry */
 2164              		.loc 1 1186 0
 2165 00b2 0220     		movs	r0, #2
 2166              	.LVL300:
 2167 00b4 F4E7     		b	.L194
 2168              		.cfi_endproc
 2169              	.LFE78:
 2171              		.section	.text.dir_remove,"ax",%progbits
 2172              		.align	1
 2173              		.syntax unified
 2174              		.thumb
 2175              		.thumb_func
 2176              		.fpu softvfp
 2178              	dir_remove:
 2179              	.LFB86:
1729:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
 2180              		.loc 1 1729 0
 2181              		.cfi_startproc
 2182              		@ args = 0, pretend = 0, frame = 0
 2183              		@ frame_needed = 0, uses_anonymous_args = 0
 2184              	.LVL301:
 2185 0000 38B5     		push	{r3, r4, r5, lr}
 2186              	.LCFI23:
 2187              		.cfi_def_cfa_offset 16
 2188              		.cfi_offset 3, -16
 2189              		.cfi_offset 4, -12
 2190              		.cfi_offset 5, -8
 2191              		.cfi_offset 14, -4
 2192 0002 0446     		mov	r4, r0
1750:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
 2193              		.loc 1 1750 0
 2194 0004 B0F80612 		ldrh	r1, [r0, #518]
 2195 0008 FFF7FEFF 		bl	dir_sdi
 2196              	.LVL302:
1751:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = move_window(dp->fs, dp->sect);
 2197              		.loc 1 1751 0
 2198 000c 0546     		mov	r5, r0
 2199 000e 08B1     		cbz	r0, .L213
 2200              	.LVL303:
 2201              	.L211:
1762:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* !_FS_READONLY */
 2202              		.loc 1 1762 0
 2203 0010 2846     		mov	r0, r5
 2204 0012 38BD     		pop	{r3, r4, r5, pc}
 2205              	.LVL304:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 87


 2206              	.L213:
1752:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {
 2207              		.loc 1 1752 0
 2208 0014 D4F81012 		ldr	r1, [r4, #528]
 2209 0018 D4F80002 		ldr	r0, [r4, #512]
 2210              	.LVL305:
 2211 001c FFF7FEFF 		bl	move_window
 2212              	.LVL306:
1753:Middlewares/Third_Party/FatFs/Src/ff.c **** 			mem_set(dp->dir, 0, SZ_DIRE);	/* Clear and mark the entry "deleted" */
 2213              		.loc 1 1753 0
 2214 0020 0546     		mov	r5, r0
 2215 0022 0028     		cmp	r0, #0
 2216 0024 F4D1     		bne	.L211
1754:Middlewares/Third_Party/FatFs/Src/ff.c **** 			*dp->dir = DDEM;
 2217              		.loc 1 1754 0
 2218 0026 2022     		movs	r2, #32
 2219 0028 0021     		movs	r1, #0
 2220 002a D4F81402 		ldr	r0, [r4, #532]
 2221              	.LVL307:
 2222 002e FFF7FEFF 		bl	mem_set
 2223              	.LVL308:
1755:Middlewares/Third_Party/FatFs/Src/ff.c **** 			dp->fs->wflag = 1;
 2224              		.loc 1 1755 0
 2225 0032 D4F81432 		ldr	r3, [r4, #532]
 2226 0036 E522     		movs	r2, #229
 2227 0038 1A70     		strb	r2, [r3]
1756:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 2228              		.loc 1 1756 0
 2229 003a D4F80032 		ldr	r3, [r4, #512]
 2230 003e 0122     		movs	r2, #1
 2231 0040 83F80422 		strb	r2, [r3, #516]
 2232 0044 E4E7     		b	.L211
 2233              		.cfi_endproc
 2234              	.LFE86:
 2236              		.section	.text.put_fat,"ax",%progbits
 2237              		.align	1
 2238              		.global	put_fat
 2239              		.syntax unified
 2240              		.thumb
 2241              		.thumb_func
 2242              		.fpu softvfp
 2244              	put_fat:
 2245              	.LFB75:
 951:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT bc;
 2246              		.loc 1 951 0
 2247              		.cfi_startproc
 2248              		@ args = 0, pretend = 0, frame = 0
 2249              		@ frame_needed = 0, uses_anonymous_args = 0
 2250              	.LVL309:
 957:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = FR_INT_ERR;
 2251              		.loc 1 957 0
 2252 0000 0129     		cmp	r1, #1
 2253 0002 40F28B80 		bls	.L223
 957:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = FR_INT_ERR;
 2254              		.loc 1 957 0 is_stmt 0 discriminator 1
 2255 0006 D0F81432 		ldr	r3, [r0, #532]
 2256 000a 8B42     		cmp	r3, r1
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 88


 2257 000c 40F28880 		bls	.L224
 951:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT bc;
 2258              		.loc 1 951 0 is_stmt 1
 2259 0010 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2260              	.LCFI24:
 2261              		.cfi_def_cfa_offset 24
 2262              		.cfi_offset 4, -24
 2263              		.cfi_offset 5, -20
 2264              		.cfi_offset 6, -16
 2265              		.cfi_offset 7, -12
 2266              		.cfi_offset 8, -8
 2267              		.cfi_offset 14, -4
 2268 0014 1646     		mov	r6, r2
 2269 0016 0C46     		mov	r4, r1
 2270 0018 0546     		mov	r5, r0
 961:Middlewares/Third_Party/FatFs/Src/ff.c **** 		case FS_FAT12 :
 2271              		.loc 1 961 0
 2272 001a 90F80032 		ldrb	r3, [r0, #512]	@ zero_extendqisi2
 2273 001e 022B     		cmp	r3, #2
 2274 0020 45D0     		beq	.L216
 2275 0022 032B     		cmp	r3, #3
 2276 0024 58D0     		beq	.L217
 2277 0026 012B     		cmp	r3, #1
 2278 0028 03D0     		beq	.L231
 994:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 2279              		.loc 1 994 0
 2280 002a 0223     		movs	r3, #2
 2281              	.LVL310:
 2282              	.L215:
 999:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* !_FS_READONLY */
 2283              		.loc 1 999 0
 2284 002c 1846     		mov	r0, r3
 2285 002e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2286              	.LVL311:
 2287              	.L231:
 963:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2288              		.loc 1 963 0
 2289 0032 01EB5107 		add	r7, r1, r1, lsr #1
 2290              	.LVL312:
 964:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) break;
 2291              		.loc 1 964 0
 2292 0036 D0F82012 		ldr	r1, [r0, #544]
 2293              	.LVL313:
 2294 003a 01EB5721 		add	r1, r1, r7, lsr #9
 2295 003e FFF7FEFF 		bl	move_window
 2296              	.LVL314:
 965:Middlewares/Third_Party/FatFs/Src/ff.c **** 			p = &fs->win.d8[bc++ % SS(fs)];
 2297              		.loc 1 965 0
 2298 0042 0346     		mov	r3, r0
 2299 0044 0028     		cmp	r0, #0
 2300 0046 F1D1     		bne	.L215
 966:Middlewares/Third_Party/FatFs/Src/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 2301              		.loc 1 966 0
 2302 0048 07F10108 		add	r8, r7, #1
 2303              	.LVL315:
 2304 004c C7F30807 		ubfx	r7, r7, #0, #9
 2305              	.LVL316:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 89


 967:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->wflag = 1;
 2306              		.loc 1 967 0
 2307 0050 14F00104 		ands	r4, r4, #1
 2308              	.LVL317:
 2309 0054 20D0     		beq	.L219
 967:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->wflag = 1;
 2310              		.loc 1 967 0 is_stmt 0 discriminator 1
 2311 0056 EB57     		ldrsb	r3, [r5, r7]
 2312 0058 03F00F03 		and	r3, r3, #15
 2313 005c 3201     		lsls	r2, r6, #4
 2314 005e 02F47F62 		and	r2, r2, #4080
 2315 0062 1343     		orrs	r3, r3, r2
 2316 0064 DBB2     		uxtb	r3, r3
 2317              	.L220:
 967:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->wflag = 1;
 2318              		.loc 1 967 0 discriminator 4
 2319 0066 EB55     		strb	r3, [r5, r7]
 968:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2320              		.loc 1 968 0 is_stmt 1 discriminator 4
 2321 0068 0123     		movs	r3, #1
 2322 006a 85F80432 		strb	r3, [r5, #516]
 969:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) break;
 2323              		.loc 1 969 0 discriminator 4
 2324 006e D5F82012 		ldr	r1, [r5, #544]
 2325 0072 01EB5821 		add	r1, r1, r8, lsr #9
 2326 0076 2846     		mov	r0, r5
 2327              	.LVL318:
 2328 0078 FFF7FEFF 		bl	move_window
 2329              	.LVL319:
 970:Middlewares/Third_Party/FatFs/Src/ff.c **** 			p = &fs->win.d8[bc % SS(fs)];
 2330              		.loc 1 970 0 discriminator 4
 2331 007c 0346     		mov	r3, r0
 2332 007e 0028     		cmp	r0, #0
 2333 0080 D4D1     		bne	.L215
 971:Middlewares/Third_Party/FatFs/Src/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
 2334              		.loc 1 971 0
 2335 0082 C8F30808 		ubfx	r8, r8, #0, #9
 2336              	.LVL320:
 972:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->wflag = 1;
 2337              		.loc 1 972 0
 2338 0086 4CB1     		cbz	r4, .L221
 972:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->wflag = 1;
 2339              		.loc 1 972 0 is_stmt 0 discriminator 1
 2340 0088 C6F30716 		ubfx	r6, r6, #4, #8
 2341              	.LVL321:
 2342              	.L222:
 972:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->wflag = 1;
 2343              		.loc 1 972 0 discriminator 4
 2344 008c 05F80860 		strb	r6, [r5, r8]
 973:Middlewares/Third_Party/FatFs/Src/ff.c **** 			break;
 2345              		.loc 1 973 0 is_stmt 1 discriminator 4
 2346 0090 0122     		movs	r2, #1
 2347 0092 85F80422 		strb	r2, [r5, #516]
 974:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 2348              		.loc 1 974 0 discriminator 4
 2349 0096 C9E7     		b	.L215
 2350              	.LVL322:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 90


 2351              	.L219:
 967:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->wflag = 1;
 2352              		.loc 1 967 0 discriminator 2
 2353 0098 F3B2     		uxtb	r3, r6
 2354 009a E4E7     		b	.L220
 2355              	.LVL323:
 2356              	.L221:
 972:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->wflag = 1;
 2357              		.loc 1 972 0 discriminator 2
 2358 009c 15F90810 		ldrsb	r1, [r5, r8]
 2359 00a0 21F00F01 		bic	r1, r1, #15
 2360 00a4 C6F30326 		ubfx	r6, r6, #8, #4
 2361              	.LVL324:
 2362 00a8 0E43     		orrs	r6, r6, r1
 2363 00aa F6B2     		uxtb	r6, r6
 2364 00ac EEE7     		b	.L222
 2365              	.LVL325:
 2366              	.L216:
 977:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) break;
 2367              		.loc 1 977 0
 2368 00ae D0F82012 		ldr	r1, [r0, #544]
 2369              	.LVL326:
 2370 00b2 01EB1421 		add	r1, r1, r4, lsr #8
 2371 00b6 FFF7FEFF 		bl	move_window
 2372              	.LVL327:
 978:Middlewares/Third_Party/FatFs/Src/ff.c **** 			p = &fs->win.d8[clst * 2 % SS(fs)];
 2373              		.loc 1 978 0
 2374 00ba 0346     		mov	r3, r0
 2375 00bc 0028     		cmp	r0, #0
 2376 00be B5D1     		bne	.L215
 979:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_WORD(p, (WORD)val);
 2377              		.loc 1 979 0
 2378 00c0 6100     		lsls	r1, r4, #1
 2379 00c2 01F4FF71 		and	r1, r1, #510
 2380 00c6 6818     		adds	r0, r5, r1
 2381              	.LVL328:
 980:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->wflag = 1;
 2382              		.loc 1 980 0
 2383 00c8 6E54     		strb	r6, [r5, r1]
 2384 00ca C6F30726 		ubfx	r6, r6, #8, #8
 2385              	.LVL329:
 2386 00ce 4670     		strb	r6, [r0, #1]
 981:Middlewares/Third_Party/FatFs/Src/ff.c **** 			break;
 2387              		.loc 1 981 0
 2388 00d0 0122     		movs	r2, #1
 2389 00d2 85F80422 		strb	r2, [r5, #516]
 982:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 2390              		.loc 1 982 0
 2391 00d6 A9E7     		b	.L215
 2392              	.LVL330:
 2393              	.L217:
 985:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) break;
 2394              		.loc 1 985 0
 2395 00d8 D0F82012 		ldr	r1, [r0, #544]
 2396              	.LVL331:
 2397 00dc 01EBD411 		add	r1, r1, r4, lsr #7
 2398 00e0 FFF7FEFF 		bl	move_window
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 91


 2399              	.LVL332:
 986:Middlewares/Third_Party/FatFs/Src/ff.c **** 			p = &fs->win.d8[clst * 4 % SS(fs)];
 2400              		.loc 1 986 0
 2401 00e4 0346     		mov	r3, r0
 2402 00e6 0028     		cmp	r0, #0
 2403 00e8 A0D1     		bne	.L215
 987:Middlewares/Third_Party/FatFs/Src/ff.c **** 			val |= LD_DWORD(p) & 0xF0000000;
 2404              		.loc 1 987 0
 2405 00ea A100     		lsls	r1, r4, #2
 2406 00ec 01F4FE71 		and	r1, r1, #508
 2407 00f0 6818     		adds	r0, r5, r1
 2408              	.LVL333:
 988:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(p, val);
 2409              		.loc 1 988 0
 2410 00f2 C478     		ldrb	r4, [r0, #3]	@ zero_extendqisi2
 2411              	.LVL334:
 2412 00f4 8278     		ldrb	r2, [r0, #2]	@ zero_extendqisi2
 2413 00f6 1204     		lsls	r2, r2, #16
 2414 00f8 42EA0462 		orr	r2, r2, r4, lsl #24
 2415 00fc 02F07042 		and	r2, r2, #-268435456
 2416 0100 1643     		orrs	r6, r6, r2
 2417              	.LVL335:
 989:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->wflag = 1;
 2418              		.loc 1 989 0
 2419 0102 6E54     		strb	r6, [r5, r1]
 2420 0104 C6F30722 		ubfx	r2, r6, #8, #8
 2421 0108 4270     		strb	r2, [r0, #1]
 2422 010a C6F30742 		ubfx	r2, r6, #16, #8
 2423 010e 8270     		strb	r2, [r0, #2]
 2424 0110 360E     		lsrs	r6, r6, #24
 2425              	.LVL336:
 2426 0112 C670     		strb	r6, [r0, #3]
 990:Middlewares/Third_Party/FatFs/Src/ff.c **** 			break;
 2427              		.loc 1 990 0
 2428 0114 0122     		movs	r2, #1
 2429 0116 85F80422 		strb	r2, [r5, #516]
 991:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 2430              		.loc 1 991 0
 2431 011a 87E7     		b	.L215
 2432              	.LVL337:
 2433              	.L223:
 2434              	.LCFI25:
 2435              		.cfi_def_cfa_offset 0
 2436              		.cfi_restore 4
 2437              		.cfi_restore 5
 2438              		.cfi_restore 6
 2439              		.cfi_restore 7
 2440              		.cfi_restore 8
 2441              		.cfi_restore 14
 958:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 2442              		.loc 1 958 0
 2443 011c 0223     		movs	r3, #2
 2444 011e 00E0     		b	.L228
 2445              	.L224:
 2446 0120 0223     		movs	r3, #2
 2447              	.L228:
 2448              	.LVL338:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 92


 999:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* !_FS_READONLY */
 2449              		.loc 1 999 0
 2450 0122 1846     		mov	r0, r3
 2451              	.LVL339:
 2452 0124 7047     		bx	lr
 2453              		.cfi_endproc
 2454              	.LFE75:
 2456              		.section	.text.create_chain,"ax",%progbits
 2457              		.align	1
 2458              		.syntax unified
 2459              		.thumb
 2460              		.thumb_func
 2461              		.fpu softvfp
 2463              	create_chain:
 2464              	.LFB77:
1067:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD cs, ncl, scl;
 2465              		.loc 1 1067 0
 2466              		.cfi_startproc
 2467              		@ args = 0, pretend = 0, frame = 0
 2468              		@ frame_needed = 0, uses_anonymous_args = 0
 2469              	.LVL340:
 2470 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2471              	.LCFI26:
 2472              		.cfi_def_cfa_offset 24
 2473              		.cfi_offset 3, -24
 2474              		.cfi_offset 4, -20
 2475              		.cfi_offset 5, -16
 2476              		.cfi_offset 6, -12
 2477              		.cfi_offset 7, -8
 2478              		.cfi_offset 14, -4
 2479 0002 0546     		mov	r5, r0
1072:Middlewares/Third_Party/FatFs/Src/ff.c **** 		scl = fs->last_clust;			/* Get suggested start point */
 2480              		.loc 1 1072 0
 2481 0004 0F46     		mov	r7, r1
 2482 0006 41B9     		cbnz	r1, .L233
1073:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
 2483              		.loc 1 1073 0
 2484 0008 D0F80C62 		ldr	r6, [r0, #524]
 2485              	.LVL341:
1074:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 2486              		.loc 1 1074 0
 2487 000c 9EB1     		cbz	r6, .L241
1074:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 2488              		.loc 1 1074 0 is_stmt 0 discriminator 2
 2489 000e D0F81432 		ldr	r3, [r0, #532]
 2490 0012 B342     		cmp	r3, r6
 2491 0014 10D8     		bhi	.L234
1074:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 2492              		.loc 1 1074 0
 2493 0016 0126     		movs	r6, #1
 2494              	.LVL342:
 2495 0018 0EE0     		b	.L234
 2496              	.LVL343:
 2497              	.L233:
1077:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (cs < 2) return 1;			/* Invalid value */
 2498              		.loc 1 1077 0 is_stmt 1
 2499 001a FFF7FEFF 		bl	get_fat
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 93


 2500              	.LVL344:
 2501 001e 0346     		mov	r3, r0
 2502              	.LVL345:
1078:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
 2503              		.loc 1 1078 0
 2504 0020 0128     		cmp	r0, #1
 2505 0022 4BD9     		bls	.L243
1079:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
 2506              		.loc 1 1079 0
 2507 0024 B0F1FF3F 		cmp	r0, #-1
 2508 0028 4DD0     		beq	.L232
1080:Middlewares/Third_Party/FatFs/Src/ff.c **** 		scl = clst;
 2509              		.loc 1 1080 0
 2510 002a D5F81422 		ldr	r2, [r5, #532]
 2511 002e 8242     		cmp	r2, r0
 2512 0030 49D8     		bhi	.L232
1081:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 2513              		.loc 1 1081 0
 2514 0032 3E46     		mov	r6, r7
 2515 0034 00E0     		b	.L234
 2516              	.LVL346:
 2517              	.L241:
1074:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 2518              		.loc 1 1074 0
 2519 0036 0126     		movs	r6, #1
 2520              	.LVL347:
 2521              	.L234:
1084:Middlewares/Third_Party/FatFs/Src/ff.c **** 	for (;;) {
 2522              		.loc 1 1084 0
 2523 0038 3446     		mov	r4, r6
 2524 003a 0CE0     		b	.L238
 2525              	.LVL348:
 2526              	.L236:
1091:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (cs == 0) break;				/* Found a free cluster */
 2527              		.loc 1 1091 0
 2528 003c 2146     		mov	r1, r4
 2529 003e 2846     		mov	r0, r5
 2530 0040 FFF7FEFF 		bl	get_fat
 2531              	.LVL349:
1092:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (cs == 0xFFFFFFFF || cs == 1)/* An error occurred */
 2532              		.loc 1 1092 0
 2533 0044 0346     		mov	r3, r0
 2534 0046 78B1     		cbz	r0, .L237
1093:Middlewares/Third_Party/FatFs/Src/ff.c **** 			return cs;
 2535              		.loc 1 1093 0
 2536 0048 B0F1FF3F 		cmp	r0, #-1
 2537 004c 3BD0     		beq	.L232
1093:Middlewares/Third_Party/FatFs/Src/ff.c **** 			return cs;
 2538              		.loc 1 1093 0 is_stmt 0 discriminator 1
 2539 004e 0128     		cmp	r0, #1
 2540 0050 39D0     		beq	.L232
1095:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 2541              		.loc 1 1095 0 is_stmt 1
 2542 0052 B442     		cmp	r4, r6
 2543 0054 36D0     		beq	.L249
 2544              	.LVL350:
 2545              	.L238:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 94


1086:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (ncl >= fs->n_fatent) {		/* Check wrap around */
 2546              		.loc 1 1086 0
 2547 0056 0134     		adds	r4, r4, #1
 2548              	.LVL351:
1087:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ncl = 2;
 2549              		.loc 1 1087 0
 2550 0058 D5F81432 		ldr	r3, [r5, #532]
 2551 005c A342     		cmp	r3, r4
 2552 005e EDD8     		bhi	.L236
 2553              	.LVL352:
1089:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 2554              		.loc 1 1089 0
 2555 0060 012E     		cmp	r6, #1
 2556 0062 2DD9     		bls	.L244
1088:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (ncl > scl) return 0;	/* No free cluster */
 2557              		.loc 1 1088 0
 2558 0064 0224     		movs	r4, #2
 2559 0066 E9E7     		b	.L236
 2560              	.LVL353:
 2561              	.L237:
1098:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK && clst != 0) {
 2562              		.loc 1 1098 0
 2563 0068 6FF07042 		mvn	r2, #-268435456
 2564 006c 2146     		mov	r1, r4
 2565 006e 2846     		mov	r0, r5
 2566              	.LVL354:
 2567 0070 FFF7FEFF 		bl	put_fat
 2568              	.LVL355:
1099:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = put_fat(fs, clst, ncl);	/* Link it to the previous one if needed */
 2569              		.loc 1 1099 0
 2570 0074 0346     		mov	r3, r0
 2571 0076 00B9     		cbnz	r0, .L239
1099:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = put_fat(fs, clst, ncl);	/* Link it to the previous one if needed */
 2572              		.loc 1 1099 0 is_stmt 0 discriminator 1
 2573 0078 97B9     		cbnz	r7, .L250
 2574              	.LVL356:
 2575              	.L239:
1102:Middlewares/Third_Party/FatFs/Src/ff.c **** 		fs->last_clust = ncl;			/* Update FSINFO */
 2576              		.loc 1 1102 0 is_stmt 1
 2577 007a C3B9     		cbnz	r3, .L240
1103:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
 2578              		.loc 1 1103 0
 2579 007c C5F80C42 		str	r4, [r5, #524]
1104:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->free_clust--;
 2580              		.loc 1 1104 0
 2581 0080 D5F81032 		ldr	r3, [r5, #528]
 2582              	.LVL357:
 2583 0084 B3F1FF3F 		cmp	r3, #-1
 2584 0088 1FD0     		beq	.L246
1105:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->fsi_flag |= 1;
 2585              		.loc 1 1105 0
 2586 008a 013B     		subs	r3, r3, #1
 2587 008c C5F81032 		str	r3, [r5, #528]
1106:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 2588              		.loc 1 1106 0
 2589 0090 95F80532 		ldrb	r3, [r5, #517]	@ zero_extendqisi2
 2590 0094 43F00103 		orr	r3, r3, #1
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 95


 2591 0098 85F80532 		strb	r3, [r5, #517]
 2592 009c 2346     		mov	r3, r4
 2593 009e 12E0     		b	.L232
 2594              	.LVL358:
 2595              	.L250:
1100:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 2596              		.loc 1 1100 0
 2597 00a0 2246     		mov	r2, r4
 2598 00a2 3946     		mov	r1, r7
 2599 00a4 2846     		mov	r0, r5
 2600              	.LVL359:
 2601 00a6 FFF7FEFF 		bl	put_fat
 2602              	.LVL360:
 2603 00aa 0346     		mov	r3, r0
 2604              	.LVL361:
 2605 00ac E5E7     		b	.L239
 2606              	.L240:
1109:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 2607              		.loc 1 1109 0
 2608 00ae 012B     		cmp	r3, #1
 2609 00b0 01D0     		beq	.L251
 2610 00b2 0123     		movs	r3, #1
 2611              	.LVL362:
 2612 00b4 07E0     		b	.L232
 2613              	.LVL363:
 2614              	.L251:
 2615 00b6 4FF0FF33 		mov	r3, #-1
 2616              	.LVL364:
 2617 00ba 04E0     		b	.L232
 2618              	.LVL365:
 2619              	.L243:
1078:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
 2620              		.loc 1 1078 0
 2621 00bc 0123     		movs	r3, #1
 2622 00be 02E0     		b	.L232
 2623              	.LVL366:
 2624              	.L244:
1089:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 2625              		.loc 1 1089 0
 2626 00c0 0023     		movs	r3, #0
 2627 00c2 00E0     		b	.L232
 2628              	.LVL367:
 2629              	.L249:
1095:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 2630              		.loc 1 1095 0
 2631 00c4 0023     		movs	r3, #0
 2632              	.LVL368:
 2633              	.L232:
1113:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* !_FS_READONLY */
 2634              		.loc 1 1113 0
 2635 00c6 1846     		mov	r0, r3
 2636 00c8 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2637              	.LVL369:
 2638              	.L246:
 2639 00ca 2346     		mov	r3, r4
 2640 00cc FBE7     		b	.L232
 2641              		.cfi_endproc
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 96


 2642              	.LFE77:
 2644              		.section	.text.dir_next,"ax",%progbits
 2645              		.align	1
 2646              		.syntax unified
 2647              		.thumb
 2648              		.thumb_func
 2649              		.fpu softvfp
 2651              	dir_next:
 2652              	.LFB79:
1205:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD clst;
 2653              		.loc 1 1205 0
 2654              		.cfi_startproc
 2655              		@ args = 0, pretend = 0, frame = 0
 2656              		@ frame_needed = 0, uses_anonymous_args = 0
 2657              	.LVL370:
 2658 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 2659              	.LCFI27:
 2660              		.cfi_def_cfa_offset 32
 2661              		.cfi_offset 3, -32
 2662              		.cfi_offset 4, -28
 2663              		.cfi_offset 5, -24
 2664              		.cfi_offset 6, -20
 2665              		.cfi_offset 7, -16
 2666              		.cfi_offset 8, -12
 2667              		.cfi_offset 9, -8
 2668              		.cfi_offset 14, -4
1213:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!(i & 0xFFFF) || !dp->sect)	/* Report EOT when index has reached 65535 */
 2669              		.loc 1 1213 0
 2670 0004 B0F80652 		ldrh	r5, [r0, #518]
 2671 0008 6B1C     		adds	r3, r5, #1
 2672              	.LVL371:
1214:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_NO_FILE;
 2673              		.loc 1 1214 0
 2674 000a 9AB2     		uxth	r2, r3
 2675 000c 002A     		cmp	r2, #0
 2676 000e 00F08480 		beq	.L259
1214:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_NO_FILE;
 2677              		.loc 1 1214 0 is_stmt 0 discriminator 1
 2678 0012 D0F81022 		ldr	r2, [r0, #528]
 2679 0016 002A     		cmp	r2, #0
 2680 0018 00F08180 		beq	.L260
 2681 001c 0F46     		mov	r7, r1
 2682 001e 0446     		mov	r4, r0
1217:Middlewares/Third_Party/FatFs/Src/ff.c **** 		dp->sect++;					/* Next sector */
 2683              		.loc 1 1217 0 is_stmt 1
 2684 0020 13F00F06 		ands	r6, r3, #15
 2685 0024 0BD1     		bne	.L254
1218:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 2686              		.loc 1 1218 0
 2687 0026 0132     		adds	r2, r2, #1
 2688 0028 C0F81022 		str	r2, [r0, #528]
1220:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (i >= dp->fs->n_rootdir)	/* Report EOT if it reached end of static table */
 2689              		.loc 1 1220 0
 2690 002c D0F80C12 		ldr	r1, [r0, #524]
 2691              	.LVL372:
 2692 0030 89B9     		cbnz	r1, .L255
1221:Middlewares/Third_Party/FatFs/Src/ff.c **** 				return FR_NO_FILE;
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 97


 2693              		.loc 1 1221 0
 2694 0032 D0F80022 		ldr	r2, [r0, #512]
 2695 0036 B2F80822 		ldrh	r2, [r2, #520]
 2696 003a 9A42     		cmp	r2, r3
 2697 003c 71D9     		bls	.L271
 2698              	.LVL373:
 2699              	.L254:
1257:Middlewares/Third_Party/FatFs/Src/ff.c **** 	dp->dir = dp->fs->win.d8 + (i % (SS(dp->fs) / SZ_DIRE)) * SZ_DIRE;	/* Current entry in the window 
 2700              		.loc 1 1257 0
 2701 003e 6B1C     		adds	r3, r5, #1
 2702 0040 A4F80632 		strh	r3, [r4, #518]	@ movhi
1258:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 2703              		.loc 1 1258 0
 2704 0044 D4F80032 		ldr	r3, [r4, #512]
 2705 0048 03EB4613 		add	r3, r3, r6, lsl #5
 2706 004c C4F81432 		str	r3, [r4, #532]
1260:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 2707              		.loc 1 1260 0
 2708 0050 0020     		movs	r0, #0
 2709              	.LVL374:
 2710              	.L253:
1261:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 2711              		.loc 1 1261 0
 2712 0052 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 2713              	.LVL375:
 2714              	.L255:
1225:Middlewares/Third_Party/FatFs/Src/ff.c **** 				clst = get_fat(dp->fs, dp->clust);				/* Get next cluster */
 2715              		.loc 1 1225 0
 2716 0056 D0F80002 		ldr	r0, [r0, #512]
 2717              	.LVL376:
 2718 005a 90F80222 		ldrb	r2, [r0, #514]	@ zero_extendqisi2
 2719 005e 013A     		subs	r2, r2, #1
 2720 0060 12EA1318 		ands	r8, r2, r3, lsr #4
 2721 0064 EBD1     		bne	.L254
1226:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (clst <= 1) return FR_INT_ERR;
 2722              		.loc 1 1226 0
 2723 0066 FFF7FEFF 		bl	get_fat
 2724              	.LVL377:
 2725 006a 8146     		mov	r9, r0
 2726              	.LVL378:
1227:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 2727              		.loc 1 1227 0
 2728 006c 0128     		cmp	r0, #1
 2729 006e 5AD9     		bls	.L262
1228:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (clst >= dp->fs->n_fatent) {					/* If it reached end of dynamic table, */
 2730              		.loc 1 1228 0
 2731 0070 B0F1FF3F 		cmp	r0, #-1
 2732 0074 59D0     		beq	.L263
1229:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
 2733              		.loc 1 1229 0
 2734 0076 D4F80002 		ldr	r0, [r4, #512]
 2735              	.LVL379:
 2736 007a D0F81432 		ldr	r3, [r0, #532]
 2737 007e 4B45     		cmp	r3, r9
 2738 0080 41D8     		bhi	.L256
1231:Middlewares/Third_Party/FatFs/Src/ff.c **** 					clst = create_chain(dp->fs, dp->clust);		/* Stretch cluster chain */
 2739              		.loc 1 1231 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 98


 2740 0082 002F     		cmp	r7, #0
 2741 0084 53D0     		beq	.L264
1232:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
 2742              		.loc 1 1232 0
 2743 0086 D4F80C12 		ldr	r1, [r4, #524]
 2744 008a FFF7FEFF 		bl	create_chain
 2745              	.LVL380:
1233:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (clst == 1) return FR_INT_ERR;
 2746              		.loc 1 1233 0
 2747 008e 8146     		mov	r9, r0
 2748 0090 0028     		cmp	r0, #0
 2749 0092 4ED0     		beq	.L265
1234:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 2750              		.loc 1 1234 0
 2751 0094 0128     		cmp	r0, #1
 2752 0096 4ED0     		beq	.L266
1235:Middlewares/Third_Party/FatFs/Src/ff.c **** 					/* Clean-up stretched table */
 2753              		.loc 1 1235 0
 2754 0098 B0F1FF3F 		cmp	r0, #-1
 2755 009c 4DD0     		beq	.L267
1237:Middlewares/Third_Party/FatFs/Src/ff.c **** 					mem_set(dp->fs->win.d8, 0, SS(dp->fs));		/* Clear window buffer */
 2756              		.loc 1 1237 0
 2757 009e D4F80002 		ldr	r0, [r4, #512]
 2758              	.LVL381:
 2759 00a2 FFF7FEFF 		bl	sync_window
 2760              	.LVL382:
 2761 00a6 08B1     		cbz	r0, .L272
 2762 00a8 0120     		movs	r0, #1
 2763 00aa D2E7     		b	.L253
 2764              	.L272:
1238:Middlewares/Third_Party/FatFs/Src/ff.c **** 					dp->fs->winsect = clust2sect(dp->fs, clst);	/* Cluster start sector */
 2765              		.loc 1 1238 0
 2766 00ac 4FF40072 		mov	r2, #512
 2767 00b0 0021     		movs	r1, #0
 2768 00b2 D4F80002 		ldr	r0, [r4, #512]
 2769 00b6 FFF7FEFF 		bl	mem_set
 2770              	.LVL383:
1239:Middlewares/Third_Party/FatFs/Src/ff.c **** 					for (c = 0; c < dp->fs->csize; c++) {		/* Fill the new cluster with 0 */
 2771              		.loc 1 1239 0
 2772 00ba D4F80072 		ldr	r7, [r4, #512]
 2773              	.LVL384:
 2774 00be 4946     		mov	r1, r9
 2775 00c0 3846     		mov	r0, r7
 2776 00c2 FFF7FEFF 		bl	clust2sect
 2777              	.LVL385:
 2778 00c6 C7F82C02 		str	r0, [r7, #556]
 2779              	.LVL386:
 2780              	.L257:
1240:Middlewares/Third_Party/FatFs/Src/ff.c **** 						dp->fs->wflag = 1;
 2781              		.loc 1 1240 0 discriminator 1
 2782 00ca D4F80032 		ldr	r3, [r4, #512]
 2783 00ce 93F80222 		ldrb	r2, [r3, #514]	@ zero_extendqisi2
 2784 00d2 4245     		cmp	r2, r8
 2785 00d4 11D9     		bls	.L273
1241:Middlewares/Third_Party/FatFs/Src/ff.c **** 						if (sync_window(dp->fs)) return FR_DISK_ERR;
 2786              		.loc 1 1241 0
 2787 00d6 0122     		movs	r2, #1
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 99


 2788 00d8 83F80422 		strb	r2, [r3, #516]
1242:Middlewares/Third_Party/FatFs/Src/ff.c **** 						dp->fs->winsect++;
 2789              		.loc 1 1242 0
 2790 00dc D4F80002 		ldr	r0, [r4, #512]
 2791 00e0 FFF7FEFF 		bl	sync_window
 2792              	.LVL387:
 2793 00e4 58BB     		cbnz	r0, .L269
1243:Middlewares/Third_Party/FatFs/Src/ff.c **** 					}
 2794              		.loc 1 1243 0 discriminator 2
 2795 00e6 D4F80022 		ldr	r2, [r4, #512]
 2796 00ea D2F82C32 		ldr	r3, [r2, #556]
 2797 00ee 0133     		adds	r3, r3, #1
 2798 00f0 C2F82C32 		str	r3, [r2, #556]
1240:Middlewares/Third_Party/FatFs/Src/ff.c **** 						dp->fs->wflag = 1;
 2799              		.loc 1 1240 0 discriminator 2
 2800 00f4 08F10108 		add	r8, r8, #1
 2801              	.LVL388:
 2802 00f8 E7E7     		b	.L257
 2803              	.L273:
1245:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
 2804              		.loc 1 1245 0
 2805 00fa D3F82C22 		ldr	r2, [r3, #556]
 2806 00fe A2EB0802 		sub	r2, r2, r8
 2807 0102 C3F82C22 		str	r2, [r3, #556]
 2808              	.LVL389:
 2809              	.L256:
1251:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dp->sect = clust2sect(dp->fs, clst);
 2810              		.loc 1 1251 0
 2811 0106 C4F80C92 		str	r9, [r4, #524]
1252:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 2812              		.loc 1 1252 0
 2813 010a 4946     		mov	r1, r9
 2814 010c D4F80002 		ldr	r0, [r4, #512]
 2815 0110 FFF7FEFF 		bl	clust2sect
 2816              	.LVL390:
 2817 0114 C4F81002 		str	r0, [r4, #528]
 2818 0118 91E7     		b	.L254
 2819              	.LVL391:
 2820              	.L259:
1215:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 2821              		.loc 1 1215 0
 2822 011a 0420     		movs	r0, #4
 2823              	.LVL392:
 2824 011c 99E7     		b	.L253
 2825              	.LVL393:
 2826              	.L260:
 2827 011e 0420     		movs	r0, #4
 2828              	.LVL394:
 2829 0120 97E7     		b	.L253
 2830              	.LVL395:
 2831              	.L271:
1222:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 2832              		.loc 1 1222 0
 2833 0122 0420     		movs	r0, #4
 2834              	.LVL396:
 2835 0124 95E7     		b	.L253
 2836              	.LVL397:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 100


 2837              	.L262:
1227:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 2838              		.loc 1 1227 0
 2839 0126 0220     		movs	r0, #2
 2840              	.LVL398:
 2841 0128 93E7     		b	.L253
 2842              	.LVL399:
 2843              	.L263:
1228:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (clst >= dp->fs->n_fatent) {					/* If it reached end of dynamic table, */
 2844              		.loc 1 1228 0
 2845 012a 0120     		movs	r0, #1
 2846              	.LVL400:
 2847 012c 91E7     		b	.L253
 2848              	.L264:
1231:Middlewares/Third_Party/FatFs/Src/ff.c **** 					clst = create_chain(dp->fs, dp->clust);		/* Stretch cluster chain */
 2849              		.loc 1 1231 0
 2850 012e 0420     		movs	r0, #4
 2851 0130 8FE7     		b	.L253
 2852              	.LVL401:
 2853              	.L265:
1233:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (clst == 1) return FR_INT_ERR;
 2854              		.loc 1 1233 0
 2855 0132 0720     		movs	r0, #7
 2856              	.LVL402:
 2857 0134 8DE7     		b	.L253
 2858              	.LVL403:
 2859              	.L266:
1234:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 2860              		.loc 1 1234 0
 2861 0136 0220     		movs	r0, #2
 2862              	.LVL404:
 2863 0138 8BE7     		b	.L253
 2864              	.LVL405:
 2865              	.L267:
1235:Middlewares/Third_Party/FatFs/Src/ff.c **** 					/* Clean-up stretched table */
 2866              		.loc 1 1235 0
 2867 013a 0120     		movs	r0, #1
 2868              	.LVL406:
 2869 013c 89E7     		b	.L253
 2870              	.LVL407:
 2871              	.L269:
1242:Middlewares/Third_Party/FatFs/Src/ff.c **** 						dp->fs->winsect++;
 2872              		.loc 1 1242 0
 2873 013e 0120     		movs	r0, #1
 2874 0140 87E7     		b	.L253
 2875              		.cfi_endproc
 2876              	.LFE79:
 2878              		.section	.text.dir_find,"ax",%progbits
 2879              		.align	1
 2880              		.syntax unified
 2881              		.thumb
 2882              		.thumb_func
 2883              		.fpu softvfp
 2885              	dir_find:
 2886              	.LFB83:
1531:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
 2887              		.loc 1 1531 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 101


 2888              		.cfi_startproc
 2889              		@ args = 0, pretend = 0, frame = 0
 2890              		@ frame_needed = 0, uses_anonymous_args = 0
 2891              	.LVL408:
 2892 0000 38B5     		push	{r3, r4, r5, lr}
 2893              	.LCFI28:
 2894              		.cfi_def_cfa_offset 16
 2895              		.cfi_offset 3, -16
 2896              		.cfi_offset 4, -12
 2897              		.cfi_offset 5, -8
 2898              		.cfi_offset 14, -4
 2899 0002 0446     		mov	r4, r0
1538:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res != FR_OK) return res;
 2900              		.loc 1 1538 0
 2901 0004 0021     		movs	r1, #0
 2902 0006 FFF7FEFF 		bl	dir_sdi
 2903              	.LVL409:
1539:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 2904              		.loc 1 1539 0
 2905 000a 0546     		mov	r5, r0
 2906 000c 40B1     		cbz	r0, .L277
 2907              	.LVL410:
 2908              	.L275:
1579:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 2909              		.loc 1 1579 0
 2910 000e 2846     		mov	r0, r5
 2911 0010 38BD     		pop	{r3, r4, r5, pc}
 2912              	.LVL411:
 2913              	.L276:
1575:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} while (res == FR_OK);
 2914              		.loc 1 1575 0
 2915 0012 0021     		movs	r1, #0
 2916 0014 2046     		mov	r0, r4
 2917 0016 FFF7FEFF 		bl	dir_next
 2918              	.LVL412:
1576:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 2919              		.loc 1 1576 0
 2920 001a 0546     		mov	r5, r0
 2921 001c 0028     		cmp	r0, #0
 2922 001e F6D1     		bne	.L275
 2923              	.L277:
1545:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res != FR_OK) break;
 2924              		.loc 1 1545 0
 2925 0020 D4F81012 		ldr	r1, [r4, #528]
 2926 0024 D4F80002 		ldr	r0, [r4, #512]
 2927              	.LVL413:
 2928 0028 FFF7FEFF 		bl	move_window
 2929              	.LVL414:
1546:Middlewares/Third_Party/FatFs/Src/ff.c **** 		dir = dp->dir;					/* Ptr to the directory entry of current index */
 2930              		.loc 1 1546 0
 2931 002c 0546     		mov	r5, r0
 2932 002e 0028     		cmp	r0, #0
 2933 0030 EDD1     		bne	.L275
1547:Middlewares/Third_Party/FatFs/Src/ff.c **** 		c = dir[DIR_Name];
 2934              		.loc 1 1547 0
 2935 0032 D4F81402 		ldr	r0, [r4, #532]
 2936              	.LVL415:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 102


1548:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 2937              		.loc 1 1548 0
 2938 0036 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 2939              	.LVL416:
1549:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
 2940              		.loc 1 1549 0
 2941 0038 5BB1     		cbz	r3, .L278
1572:Middlewares/Third_Party/FatFs/Src/ff.c **** 			break;
 2942              		.loc 1 1572 0
 2943 003a C37A     		ldrb	r3, [r0, #11]	@ zero_extendqisi2
 2944              	.LVL417:
 2945 003c 13F0080F 		tst	r3, #8
 2946 0040 E7D1     		bne	.L276
1572:Middlewares/Third_Party/FatFs/Src/ff.c **** 			break;
 2947              		.loc 1 1572 0 is_stmt 0 discriminator 1
 2948 0042 0B22     		movs	r2, #11
 2949 0044 D4F81812 		ldr	r1, [r4, #536]
 2950 0048 FFF7FEFF 		bl	mem_cmp
 2951              	.LVL418:
 2952 004c 0028     		cmp	r0, #0
 2953 004e E0D1     		bne	.L276
 2954 0050 DDE7     		b	.L275
 2955              	.LVL419:
 2956              	.L278:
1549:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
 2957              		.loc 1 1549 0 is_stmt 1
 2958 0052 0425     		movs	r5, #4
 2959 0054 DBE7     		b	.L275
 2960              		.cfi_endproc
 2961              	.LFE83:
 2963              		.section	.text.follow_path,"ax",%progbits
 2964              		.align	1
 2965              		.syntax unified
 2966              		.thumb
 2967              		.thumb_func
 2968              		.fpu softvfp
 2970              	follow_path:
 2971              	.LFB89:
2129:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
 2972              		.loc 1 2129 0
 2973              		.cfi_startproc
 2974              		@ args = 0, pretend = 0, frame = 8
 2975              		@ frame_needed = 0, uses_anonymous_args = 0
 2976              	.LVL420:
 2977 0000 10B5     		push	{r4, lr}
 2978              	.LCFI29:
 2979              		.cfi_def_cfa_offset 8
 2980              		.cfi_offset 4, -8
 2981              		.cfi_offset 14, -4
 2982 0002 82B0     		sub	sp, sp, #8
 2983              	.LCFI30:
 2984              		.cfi_def_cfa_offset 16
 2985 0004 0446     		mov	r4, r0
 2986 0006 0191     		str	r1, [sp, #4]
2141:Middlewares/Third_Party/FatFs/Src/ff.c **** 		path++;
 2987              		.loc 1 2141 0
 2988 0008 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 103


 2989 000a 2F2B     		cmp	r3, #47
 2990 000c 01D0     		beq	.L281
2141:Middlewares/Third_Party/FatFs/Src/ff.c **** 		path++;
 2991              		.loc 1 2141 0 is_stmt 0 discriminator 1
 2992 000e 5C2B     		cmp	r3, #92
 2993 0010 01D1     		bne	.L282
 2994              	.L281:
2142:Middlewares/Third_Party/FatFs/Src/ff.c **** 	dp->sclust = 0;							/* Always start from the root directory */
 2995              		.loc 1 2142 0 is_stmt 1
 2996 0012 0131     		adds	r1, r1, #1
 2997              	.LVL421:
 2998 0014 0191     		str	r1, [sp, #4]
 2999              	.LVL422:
 3000              	.L282:
2143:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 3001              		.loc 1 2143 0
 3002 0016 0023     		movs	r3, #0
 3003 0018 C4F80832 		str	r3, [r4, #520]
2146:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = dir_sdi(dp, 0);
 3004              		.loc 1 2146 0
 3005 001c 019B     		ldr	r3, [sp, #4]
 3006 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3007 0020 1F2B     		cmp	r3, #31
 3008 0022 1DD9     		bls	.L289
 3009              	.LVL423:
 3010              	.L283:
2151:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) break;
 3011              		.loc 1 2151 0
 3012 0024 01A9     		add	r1, sp, #4
 3013 0026 2046     		mov	r0, r4
 3014 0028 FFF7FEFF 		bl	create_name
 3015              	.LVL424:
2152:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = dir_find(dp);				/* Find an object with the sagment name */
 3016              		.loc 1 2152 0
 3017 002c 0346     		mov	r3, r0
 3018 002e F8B9     		cbnz	r0, .L284
2153:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ns = dp->fn[NSFLAG];
 3019              		.loc 1 2153 0
 3020 0030 2046     		mov	r0, r4
 3021              	.LVL425:
 3022 0032 FFF7FEFF 		bl	dir_find
 3023              	.LVL426:
2154:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
 3024              		.loc 1 2154 0
 3025 0036 D4F81832 		ldr	r3, [r4, #536]
 3026 003a DA7A     		ldrb	r2, [r3, #11]	@ zero_extendqisi2
 3027              	.LVL427:
2155:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (res == FR_NO_FILE) {	/* Object is not found */
 3028              		.loc 1 2155 0
 3029 003c 0346     		mov	r3, r0
 3030 003e D0B9     		cbnz	r0, .L290
2167:Middlewares/Third_Party/FatFs/Src/ff.c **** 			dir = dp->dir;						/* Follow the sub-directory */
 3031              		.loc 1 2167 0
 3032 0040 12F0040F 		tst	r2, #4
 3033 0044 14D1     		bne	.L284
2168:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!(dir[DIR_Attr] & AM_DIR)) {	/* It is not a sub-directory and cannot follow */
 3034              		.loc 1 2168 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 104


 3035 0046 D4F81412 		ldr	r1, [r4, #532]
 3036              	.LVL428:
2169:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_NO_PATH; break;
 3037              		.loc 1 2169 0
 3038 004a CB7A     		ldrb	r3, [r1, #11]	@ zero_extendqisi2
 3039 004c 13F0100F 		tst	r3, #16
 3040 0050 18D0     		beq	.L287
2172:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 3041              		.loc 1 2172 0
 3042 0052 D4F80002 		ldr	r0, [r4, #512]
 3043              	.LVL429:
 3044 0056 FFF7FEFF 		bl	ld_clust
 3045              	.LVL430:
 3046 005a C4F80802 		str	r0, [r4, #520]
2151:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) break;
 3047              		.loc 1 2151 0
 3048 005e E1E7     		b	.L283
 3049              	.LVL431:
 3050              	.L289:
2147:Middlewares/Third_Party/FatFs/Src/ff.c **** 		dp->dir = 0;
 3051              		.loc 1 2147 0
 3052 0060 0021     		movs	r1, #0
 3053 0062 2046     		mov	r0, r4
 3054              	.LVL432:
 3055 0064 FFF7FEFF 		bl	dir_sdi
 3056              	.LVL433:
 3057 0068 0346     		mov	r3, r0
 3058              	.LVL434:
2148:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {								/* Follow path */
 3059              		.loc 1 2148 0
 3060 006a 0022     		movs	r2, #0
 3061 006c C4F81422 		str	r2, [r4, #532]
 3062              	.LVL435:
 3063              	.L284:
2177:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 3064              		.loc 1 2177 0
 3065 0070 1846     		mov	r0, r3
 3066 0072 02B0     		add	sp, sp, #8
 3067              	.LCFI31:
 3068              		.cfi_remember_state
 3069              		.cfi_def_cfa_offset 8
 3070              		@ sp needed
 3071 0074 10BD     		pop	{r4, pc}
 3072              	.LVL436:
 3073              	.L290:
 3074              	.LCFI32:
 3075              		.cfi_restore_state
2156:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, */
 3076              		.loc 1 2156 0
 3077 0076 0428     		cmp	r0, #4
 3078 0078 FAD1     		bne	.L284
2162:Middlewares/Third_Party/FatFs/Src/ff.c **** 					}
 3079              		.loc 1 2162 0
 3080 007a 12F0040F 		tst	r2, #4
 3081 007e F7D1     		bne	.L284
 3082 0080 0523     		movs	r3, #5
 3083 0082 F5E7     		b	.L284
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 105


 3084              	.LVL437:
 3085              	.L287:
2170:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 3086              		.loc 1 2170 0
 3087 0084 0523     		movs	r3, #5
 3088 0086 F3E7     		b	.L284
 3089              		.cfi_endproc
 3090              	.LFE89:
 3092              		.section	.text.dir_alloc,"ax",%progbits
 3093              		.align	1
 3094              		.syntax unified
 3095              		.thumb
 3096              		.thumb_func
 3097              		.fpu softvfp
 3099              	dir_alloc:
 3100              	.LFB80:
1276:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
 3101              		.loc 1 1276 0
 3102              		.cfi_startproc
 3103              		@ args = 0, pretend = 0, frame = 0
 3104              		@ frame_needed = 0, uses_anonymous_args = 0
 3105              	.LVL438:
 3106 0000 70B5     		push	{r4, r5, r6, lr}
 3107              	.LCFI33:
 3108              		.cfi_def_cfa_offset 16
 3109              		.cfi_offset 4, -16
 3110              		.cfi_offset 5, -12
 3111              		.cfi_offset 6, -8
 3112              		.cfi_offset 14, -4
 3113 0002 0446     		mov	r4, r0
 3114 0004 0E46     		mov	r6, r1
1281:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
 3115              		.loc 1 1281 0
 3116 0006 0021     		movs	r1, #0
 3117              	.LVL439:
 3118 0008 FFF7FEFF 		bl	dir_sdi
 3119              	.LVL440:
1282:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n = 0;
 3120              		.loc 1 1282 0
 3121 000c 0346     		mov	r3, r0
 3122 000e D8B9     		cbnz	r0, .L292
1283:Middlewares/Third_Party/FatFs/Src/ff.c **** 		do {
 3123              		.loc 1 1283 0
 3124 0010 0025     		movs	r5, #0
 3125 0012 08E0     		b	.L295
 3126              	.LVL441:
 3127              	.L293:
1288:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {
 3128              		.loc 1 1288 0
 3129 0014 0135     		adds	r5, r5, #1
 3130              	.LVL442:
 3131 0016 B542     		cmp	r5, r6
 3132 0018 16D0     		beq	.L292
 3133              	.LVL443:
 3134              	.L294:
1292:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} while (res == FR_OK);
 3135              		.loc 1 1292 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 106


 3136 001a 0121     		movs	r1, #1
 3137 001c 2046     		mov	r0, r4
 3138              	.LVL444:
 3139 001e FFF7FEFF 		bl	dir_next
 3140              	.LVL445:
1293:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 3141              		.loc 1 1293 0
 3142 0022 0346     		mov	r3, r0
 3143 0024 80B9     		cbnz	r0, .L292
 3144              	.LVL446:
 3145              	.L295:
1285:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) break;
 3146              		.loc 1 1285 0
 3147 0026 D4F81012 		ldr	r1, [r4, #528]
 3148 002a D4F80002 		ldr	r0, [r4, #512]
 3149              	.LVL447:
 3150 002e FFF7FEFF 		bl	move_window
 3151              	.LVL448:
1286:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (dp->dir[0] == DDEM || dp->dir[0] == 0) {	/* Is it a free entry? */
 3152              		.loc 1 1286 0
 3153 0032 0346     		mov	r3, r0
 3154 0034 40B9     		cbnz	r0, .L292
1287:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (++n == nent) break;	/* A block of contiguous free entries is found */
 3155              		.loc 1 1287 0
 3156 0036 D4F81422 		ldr	r2, [r4, #532]
 3157 003a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 3158 003c E52A     		cmp	r2, #229
 3159 003e E9D0     		beq	.L293
1287:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (++n == nent) break;	/* A block of contiguous free entries is found */
 3160              		.loc 1 1287 0 is_stmt 0 discriminator 1
 3161 0040 002A     		cmp	r2, #0
 3162 0042 E7D0     		beq	.L293
1290:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 3163              		.loc 1 1290 0 is_stmt 1
 3164 0044 0025     		movs	r5, #0
 3165              	.LVL449:
 3166 0046 E8E7     		b	.L294
 3167              	.L292:
 3168              	.LVL450:
1295:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return res;
 3169              		.loc 1 1295 0
 3170 0048 042B     		cmp	r3, #4
 3171 004a 01D0     		beq	.L300
 3172              	.LVL451:
 3173              	.L296:
1297:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 3174              		.loc 1 1297 0
 3175 004c 1846     		mov	r0, r3
 3176 004e 70BD     		pop	{r4, r5, r6, pc}
 3177              	.LVL452:
 3178              	.L300:
1295:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return res;
 3179              		.loc 1 1295 0
 3180 0050 0723     		movs	r3, #7
 3181              	.LVL453:
 3182 0052 FBE7     		b	.L296
 3183              		.cfi_endproc
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 107


 3184              	.LFE80:
 3186              		.section	.text.dir_register,"ax",%progbits
 3187              		.align	1
 3188              		.syntax unified
 3189              		.thumb
 3190              		.thumb_func
 3191              		.fpu softvfp
 3193              	dir_register:
 3194              	.LFB85:
1651:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
 3195              		.loc 1 1651 0
 3196              		.cfi_startproc
 3197              		@ args = 0, pretend = 0, frame = 0
 3198              		@ frame_needed = 0, uses_anonymous_args = 0
 3199              	.LVL454:
 3200 0000 38B5     		push	{r3, r4, r5, lr}
 3201              	.LCFI34:
 3202              		.cfi_def_cfa_offset 16
 3203              		.cfi_offset 3, -16
 3204              		.cfi_offset 4, -12
 3205              		.cfi_offset 5, -8
 3206              		.cfi_offset 14, -4
 3207 0002 0546     		mov	r5, r0
1699:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 3208              		.loc 1 1699 0
 3209 0004 0121     		movs	r1, #1
 3210 0006 FFF7FEFF 		bl	dir_alloc
 3211              	.LVL455:
1702:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = move_window(dp->fs, dp->sect);
 3212              		.loc 1 1702 0
 3213 000a 0446     		mov	r4, r0
 3214 000c 08B1     		cbz	r0, .L304
 3215              	.LVL456:
 3216              	.L302:
1715:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* !_FS_READONLY */
 3217              		.loc 1 1715 0
 3218 000e 2046     		mov	r0, r4
 3219 0010 38BD     		pop	{r3, r4, r5, pc}
 3220              	.LVL457:
 3221              	.L304:
1703:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {
 3222              		.loc 1 1703 0
 3223 0012 D5F81012 		ldr	r1, [r5, #528]
 3224 0016 D5F80002 		ldr	r0, [r5, #512]
 3225              	.LVL458:
 3226 001a FFF7FEFF 		bl	move_window
 3227              	.LVL459:
1704:Middlewares/Third_Party/FatFs/Src/ff.c **** 			mem_set(dp->dir, 0, SZ_DIRE);	/* Clean the entry */
 3228              		.loc 1 1704 0
 3229 001e 0446     		mov	r4, r0
 3230 0020 0028     		cmp	r0, #0
 3231 0022 F4D1     		bne	.L302
1705:Middlewares/Third_Party/FatFs/Src/ff.c **** 			mem_cpy(dp->dir, dp->fn, 11);	/* Put SFN */
 3232              		.loc 1 1705 0
 3233 0024 2022     		movs	r2, #32
 3234 0026 0021     		movs	r1, #0
 3235 0028 D5F81402 		ldr	r0, [r5, #532]
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 108


 3236              	.LVL460:
 3237 002c FFF7FEFF 		bl	mem_set
 3238              	.LVL461:
1706:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN
 3239              		.loc 1 1706 0
 3240 0030 0B22     		movs	r2, #11
 3241 0032 D5F81812 		ldr	r1, [r5, #536]
 3242 0036 D5F81402 		ldr	r0, [r5, #532]
 3243 003a FFF7FEFF 		bl	mem_cpy
 3244              	.LVL462:
1710:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 3245              		.loc 1 1710 0
 3246 003e D5F80032 		ldr	r3, [r5, #512]
 3247 0042 0122     		movs	r2, #1
 3248 0044 83F80422 		strb	r2, [r3, #516]
 3249 0048 E1E7     		b	.L302
 3250              		.cfi_endproc
 3251              	.LFE85:
 3253              		.section	.text.dir_read,"ax",%progbits
 3254              		.align	1
 3255              		.syntax unified
 3256              		.thumb
 3257              		.thumb_func
 3258              		.fpu softvfp
 3260              	dir_read:
 3261              	.LFB84:
1593:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
 3262              		.loc 1 1593 0
 3263              		.cfi_startproc
 3264              		@ args = 0, pretend = 0, frame = 0
 3265              		@ frame_needed = 0, uses_anonymous_args = 0
 3266              	.LVL463:
 3267 0000 70B5     		push	{r4, r5, r6, lr}
 3268              	.LCFI35:
 3269              		.cfi_def_cfa_offset 16
 3270              		.cfi_offset 4, -16
 3271              		.cfi_offset 5, -12
 3272              		.cfi_offset 6, -8
 3273              		.cfi_offset 14, -4
 3274 0002 0446     		mov	r4, r0
 3275 0004 0D46     		mov	r5, r1
 3276              	.LVL464:
1600:Middlewares/Third_Party/FatFs/Src/ff.c **** 	while (dp->sect) {
 3277              		.loc 1 1600 0
 3278 0006 0426     		movs	r6, #4
1601:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = move_window(dp->fs, dp->sect);
 3279              		.loc 1 1601 0
 3280 0008 05E0     		b	.L306
 3281              	.LVL465:
 3282              	.L308:
1630:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res != FR_OK) break;
 3283              		.loc 1 1630 0
 3284 000a 0021     		movs	r1, #0
 3285 000c 2046     		mov	r0, r4
 3286              	.LVL466:
 3287 000e FFF7FEFF 		bl	dir_next
 3288              	.LVL467:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 109


1631:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 3289              		.loc 1 1631 0
 3290 0012 0646     		mov	r6, r0
 3291 0014 F8B9     		cbnz	r0, .L307
 3292              	.LVL468:
 3293              	.L306:
1601:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = move_window(dp->fs, dp->sect);
 3294              		.loc 1 1601 0
 3295 0016 D4F81012 		ldr	r1, [r4, #528]
 3296 001a E1B1     		cbz	r1, .L307
1602:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res != FR_OK) break;
 3297              		.loc 1 1602 0
 3298 001c D4F80002 		ldr	r0, [r4, #512]
 3299 0020 FFF7FEFF 		bl	move_window
 3300              	.LVL469:
1603:Middlewares/Third_Party/FatFs/Src/ff.c **** 		dir = dp->dir;					/* Ptr to the directory entry of current index */
 3301              		.loc 1 1603 0
 3302 0024 0646     		mov	r6, r0
 3303 0026 B0B9     		cbnz	r0, .L307
1604:Middlewares/Third_Party/FatFs/Src/ff.c **** 		c = dir[DIR_Name];
 3304              		.loc 1 1604 0
 3305 0028 D4F81432 		ldr	r3, [r4, #532]
 3306              	.LVL470:
1605:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 3307              		.loc 1 1605 0
 3308 002c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3309              	.LVL471:
1606:Middlewares/Third_Party/FatFs/Src/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
 3310              		.loc 1 1606 0
 3311 002e 8AB1     		cbz	r2, .L311
1607:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN	/* LFN configuration */
 3312              		.loc 1 1607 0
 3313 0030 DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
 3314              	.LVL472:
 3315 0032 03F03F03 		and	r3, r3, #63
 3316              	.LVL473:
1627:Middlewares/Third_Party/FatFs/Src/ff.c **** 			break;
 3317              		.loc 1 1627 0
 3318 0036 E52A     		cmp	r2, #229
 3319 0038 E7D0     		beq	.L308
1627:Middlewares/Third_Party/FatFs/Src/ff.c **** 			break;
 3320              		.loc 1 1627 0 is_stmt 0 discriminator 1
 3321 003a 2E2A     		cmp	r2, #46
 3322 003c E5D0     		beq	.L308
1627:Middlewares/Third_Party/FatFs/Src/ff.c **** 			break;
 3323              		.loc 1 1627 0 discriminator 2
 3324 003e 0F2B     		cmp	r3, #15
 3325 0040 E3D0     		beq	.L308
1627:Middlewares/Third_Party/FatFs/Src/ff.c **** 			break;
 3326              		.loc 1 1627 0 discriminator 3
 3327 0042 23F02003 		bic	r3, r3, #32
 3328              	.LVL474:
 3329 0046 082B     		cmp	r3, #8
 3330 0048 14BF     		ite	ne
 3331 004a 0023     		movne	r3, #0
 3332 004c 0123     		moveq	r3, #1
 3333 004e AB42     		cmp	r3, r5
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 110


 3334 0050 DBD1     		bne	.L308
 3335 0052 00E0     		b	.L307
 3336              	.LVL475:
 3337              	.L311:
1606:Middlewares/Third_Party/FatFs/Src/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
 3338              		.loc 1 1606 0 is_stmt 1
 3339 0054 0426     		movs	r6, #4
 3340              	.LVL476:
 3341              	.L307:
1634:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 3342              		.loc 1 1634 0
 3343 0056 16B1     		cbz	r6, .L310
1634:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 3344              		.loc 1 1634 0 is_stmt 0 discriminator 1
 3345 0058 0023     		movs	r3, #0
 3346 005a C4F81032 		str	r3, [r4, #528]
 3347              	.L310:
1637:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif	/* _FS_MINIMIZE <= 1 || _USE_LABEL || _FS_RPATH >= 2 */
 3348              		.loc 1 1637 0 is_stmt 1
 3349 005e 3046     		mov	r0, r6
 3350 0060 70BD     		pop	{r4, r5, r6, pc}
 3351              		.cfi_endproc
 3352              	.LFE84:
 3354              		.section	.text.remove_chain,"ax",%progbits
 3355              		.align	1
 3356              		.syntax unified
 3357              		.thumb
 3358              		.thumb_func
 3359              		.fpu softvfp
 3361              	remove_chain:
 3362              	.LFB76:
1014:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
 3363              		.loc 1 1014 0
 3364              		.cfi_startproc
 3365              		@ args = 0, pretend = 0, frame = 0
 3366              		@ frame_needed = 0, uses_anonymous_args = 0
 3367              	.LVL477:
 3368 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3369              	.LCFI36:
 3370              		.cfi_def_cfa_offset 24
 3371              		.cfi_offset 3, -24
 3372              		.cfi_offset 4, -20
 3373              		.cfi_offset 5, -16
 3374              		.cfi_offset 6, -12
 3375              		.cfi_offset 7, -8
 3376              		.cfi_offset 14, -4
1021:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = FR_INT_ERR;
 3377              		.loc 1 1021 0
 3378 0002 0129     		cmp	r1, #1
 3379 0004 2DD9     		bls	.L318
 3380 0006 0446     		mov	r4, r0
 3381 0008 0D46     		mov	r5, r1
1021:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = FR_INT_ERR;
 3382              		.loc 1 1021 0 is_stmt 0 discriminator 1
 3383 000a D0F81432 		ldr	r3, [r0, #532]
 3384 000e 8B42     		cmp	r3, r1
 3385 0010 29D9     		bls	.L319
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 111


1025:Middlewares/Third_Party/FatFs/Src/ff.c **** 		while (clst < fs->n_fatent) {			/* Not a last link? */
 3386              		.loc 1 1025 0 is_stmt 1
 3387 0012 0027     		movs	r7, #0
 3388 0014 09E0     		b	.L315
 3389              	.LVL478:
 3390              	.L323:
1034:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fs->fsi_flag |= 1;
 3391              		.loc 1 1034 0
 3392 0016 0133     		adds	r3, r3, #1
 3393 0018 C4F81032 		str	r3, [r4, #528]
1035:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 3394              		.loc 1 1035 0
 3395 001c 94F80532 		ldrb	r3, [r4, #517]	@ zero_extendqisi2
 3396 0020 43F00103 		orr	r3, r3, #1
 3397 0024 84F80532 		strb	r3, [r4, #517]
 3398              	.L316:
1014:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
 3399              		.loc 1 1014 0
 3400 0028 3546     		mov	r5, r6
 3401              	.LVL479:
 3402              	.L315:
1026:Middlewares/Third_Party/FatFs/Src/ff.c **** 			nxt = get_fat(fs, clst);			/* Get cluster status */
 3403              		.loc 1 1026 0
 3404 002a D4F81432 		ldr	r3, [r4, #532]
 3405 002e AB42     		cmp	r3, r5
 3406 0030 1AD9     		bls	.L314
1027:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (nxt == 0) break;				/* Empty cluster? */
 3407              		.loc 1 1027 0
 3408 0032 2946     		mov	r1, r5
 3409 0034 2046     		mov	r0, r4
 3410 0036 FFF7FEFF 		bl	get_fat
 3411              	.LVL480:
1028:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (nxt == 1) { res = FR_INT_ERR; break; }	/* Internal error? */
 3412              		.loc 1 1028 0
 3413 003a 0646     		mov	r6, r0
 3414 003c A0B1     		cbz	r0, .L314
1029:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (nxt == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }	/* Disk error? */
 3415              		.loc 1 1029 0
 3416 003e 0128     		cmp	r0, #1
 3417 0040 14D0     		beq	.L320
1030:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = put_fat(fs, clst, 0);			/* Mark the cluster "empty" */
 3418              		.loc 1 1030 0
 3419 0042 B0F1FF3F 		cmp	r0, #-1
 3420 0046 13D0     		beq	.L321
1031:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) break;
 3421              		.loc 1 1031 0
 3422 0048 0022     		movs	r2, #0
 3423 004a 2946     		mov	r1, r5
 3424 004c 2046     		mov	r0, r4
 3425              	.LVL481:
 3426 004e FFF7FEFF 		bl	put_fat
 3427              	.LVL482:
1032:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (fs->free_clust != 0xFFFFFFFF) {	/* Update FSINFO */
 3428              		.loc 1 1032 0
 3429 0052 0746     		mov	r7, r0
 3430 0054 40B9     		cbnz	r0, .L314
1033:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fs->free_clust++;
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 112


 3431              		.loc 1 1033 0
 3432 0056 D4F81032 		ldr	r3, [r4, #528]
 3433 005a B3F1FF3F 		cmp	r3, #-1
 3434 005e DAD1     		bne	.L323
 3435 0060 E2E7     		b	.L316
 3436              	.LVL483:
 3437              	.L318:
1022:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 3438              		.loc 1 1022 0
 3439 0062 0227     		movs	r7, #2
 3440 0064 00E0     		b	.L314
 3441              	.L319:
 3442 0066 0227     		movs	r7, #2
 3443              	.LVL484:
 3444              	.L314:
1052:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 3445              		.loc 1 1052 0
 3446 0068 3846     		mov	r0, r7
 3447 006a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3448              	.LVL485:
 3449              	.L320:
1029:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (nxt == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }	/* Disk error? */
 3450              		.loc 1 1029 0
 3451 006c 0227     		movs	r7, #2
 3452              	.LVL486:
 3453 006e FBE7     		b	.L314
 3454              	.LVL487:
 3455              	.L321:
1030:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = put_fat(fs, clst, 0);			/* Mark the cluster "empty" */
 3456              		.loc 1 1030 0
 3457 0070 0127     		movs	r7, #1
 3458              	.LVL488:
 3459 0072 F9E7     		b	.L314
 3460              		.cfi_endproc
 3461              	.LFE76:
 3463              		.section	.text.f_mount,"ax",%progbits
 3464              		.align	1
 3465              		.global	f_mount
 3466              		.syntax unified
 3467              		.thumb
 3468              		.thumb_func
 3469              		.fpu softvfp
 3471              	f_mount:
 3472              	.LFB94:
2459:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2460:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2461:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2462:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2463:Middlewares/Third_Party/FatFs/Src/ff.c **** /*--------------------------------------------------------------------------
2464:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2465:Middlewares/Third_Party/FatFs/Src/ff.c ****    Public Functions
2466:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2467:Middlewares/Third_Party/FatFs/Src/ff.c **** --------------------------------------------------------------------------*/
2468:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2469:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2470:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2471:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 113


2472:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Mount/Unmount a Logical Drive                                         */
2473:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
2474:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2475:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_mount (
2476:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FATFS* fs,			/* Pointer to the file system object (NULL:unmount)*/
2477:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR* path,	/* Logical drive number to be mounted/unmounted */
2478:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE opt			/* 0:Do not mount (delayed mount), 1:Mount immediately */
2479:Middlewares/Third_Party/FatFs/Src/ff.c **** )
2480:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 3473              		.loc 1 2480 0
 3474              		.cfi_startproc
 3475              		@ args = 0, pretend = 0, frame = 16
 3476              		@ frame_needed = 0, uses_anonymous_args = 0
 3477              	.LVL489:
 3478 0000 10B5     		push	{r4, lr}
 3479              	.LCFI37:
 3480              		.cfi_def_cfa_offset 8
 3481              		.cfi_offset 4, -8
 3482              		.cfi_offset 14, -4
 3483 0002 84B0     		sub	sp, sp, #16
 3484              	.LCFI38:
 3485              		.cfi_def_cfa_offset 24
 3486 0004 0190     		str	r0, [sp, #4]
 3487 0006 0091     		str	r1, [sp]
 3488 0008 1446     		mov	r4, r2
2481:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FATFS *cfs;
2482:Middlewares/Third_Party/FatFs/Src/ff.c **** 	int vol;
2483:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
2484:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR *rp = path;
 3489              		.loc 1 2484 0
 3490 000a 04A8     		add	r0, sp, #16
 3491              	.LVL490:
 3492 000c 40F8041D 		str	r1, [r0, #-4]!
2485:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2486:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2487:Middlewares/Third_Party/FatFs/Src/ff.c **** 	vol = get_ldnumber(&rp);
 3493              		.loc 1 2487 0
 3494 0010 FFF7FEFF 		bl	get_ldnumber
 3495              	.LVL491:
2488:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 3496              		.loc 1 2488 0
 3497 0014 0028     		cmp	r0, #0
 3498 0016 1ADB     		blt	.L328
2489:Middlewares/Third_Party/FatFs/Src/ff.c **** 	cfs = FatFs[vol];					/* Pointer to fs object */
 3499              		.loc 1 2489 0
 3500 0018 0F4B     		ldr	r3, .L333
 3501 001a 53F82030 		ldr	r3, [r3, r0, lsl #2]
 3502              	.LVL492:
2490:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2491:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (cfs) {
 3503              		.loc 1 2491 0
 3504 001e 13B1     		cbz	r3, .L326
2492:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_LOCK
2493:Middlewares/Third_Party/FatFs/Src/ff.c **** 		clear_lock(cfs);
2494:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2495:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_REENTRANT						/* Discard sync object of the current volume */
2496:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (!ff_del_syncobj(cfs->sobj)) return FR_INT_ERR;
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 114


2497:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2498:Middlewares/Third_Party/FatFs/Src/ff.c **** 		cfs->fs_type = 0;				/* Clear old fs object */
 3505              		.loc 1 2498 0
 3506 0020 0022     		movs	r2, #0
 3507 0022 83F80022 		strb	r2, [r3, #512]
 3508              	.L326:
2499:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
2500:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2501:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fs) {
 3509              		.loc 1 2501 0
 3510 0026 019B     		ldr	r3, [sp, #4]
 3511              	.LVL493:
 3512 0028 13B1     		cbz	r3, .L327
2502:Middlewares/Third_Party/FatFs/Src/ff.c **** 		fs->fs_type = 0;				/* Clear new fs object */
 3513              		.loc 1 2502 0
 3514 002a 0022     		movs	r2, #0
 3515 002c 83F80022 		strb	r2, [r3, #512]
 3516              	.L327:
2503:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_REENTRANT						/* Create sync object for the new volume */
2504:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (!ff_cre_syncobj((BYTE)vol, &fs->sobj)) return FR_INT_ERR;
2505:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2506:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
2507:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FatFs[vol] = fs;					/* Register new fs object */
 3517              		.loc 1 2507 0
 3518 0030 094A     		ldr	r2, .L333
 3519              	.LVL494:
 3520 0032 42F82030 		str	r3, [r2, r0, lsl #2]
 3521              	.LVL495:
2508:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2509:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!fs || opt != 1) return FR_OK;	/* Do not mount now, it will be mounted later */
 3522              		.loc 1 2509 0
 3523 0036 63B1     		cbz	r3, .L329
 3524              		.loc 1 2509 0 is_stmt 0 discriminator 2
 3525 0038 012C     		cmp	r4, #1
 3526 003a 02D0     		beq	.L332
 3527              		.loc 1 2509 0
 3528 003c 0020     		movs	r0, #0
 3529              	.LVL496:
 3530              	.L325:
2510:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2511:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = find_volume(&fs, &path, 0);	/* Force mounted the volume */
2512:Middlewares/Third_Party/FatFs/Src/ff.c **** 	LEAVE_FF(fs, res);
2513:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 3531              		.loc 1 2513 0 is_stmt 1
 3532 003e 04B0     		add	sp, sp, #16
 3533              	.LCFI39:
 3534              		.cfi_remember_state
 3535              		.cfi_def_cfa_offset 8
 3536              		@ sp needed
 3537 0040 10BD     		pop	{r4, pc}
 3538              	.LVL497:
 3539              	.L332:
 3540              	.LCFI40:
 3541              		.cfi_restore_state
2511:Middlewares/Third_Party/FatFs/Src/ff.c **** 	LEAVE_FF(fs, res);
 3542              		.loc 1 2511 0
 3543 0042 0022     		movs	r2, #0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 115


 3544 0044 6946     		mov	r1, sp
 3545 0046 01A8     		add	r0, sp, #4
 3546              	.LVL498:
 3547 0048 FFF7FEFF 		bl	find_volume
 3548              	.LVL499:
2512:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 3549              		.loc 1 2512 0
 3550 004c F7E7     		b	.L325
 3551              	.LVL500:
 3552              	.L328:
2488:Middlewares/Third_Party/FatFs/Src/ff.c **** 	cfs = FatFs[vol];					/* Pointer to fs object */
 3553              		.loc 1 2488 0
 3554 004e 0B20     		movs	r0, #11
 3555              	.LVL501:
 3556 0050 F5E7     		b	.L325
 3557              	.LVL502:
 3558              	.L329:
2509:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 3559              		.loc 1 2509 0
 3560 0052 0020     		movs	r0, #0
 3561              	.LVL503:
 3562 0054 F3E7     		b	.L325
 3563              	.L334:
 3564 0056 00BF     		.align	2
 3565              	.L333:
 3566 0058 00000000 		.word	.LANCHOR1
 3567              		.cfi_endproc
 3568              	.LFE94:
 3570              		.section	.text.f_open,"ax",%progbits
 3571              		.align	1
 3572              		.global	f_open
 3573              		.syntax unified
 3574              		.thumb
 3575              		.thumb_func
 3576              		.fpu softvfp
 3578              	f_open:
 3579              	.LFB95:
2514:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2515:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2516:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2517:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2518:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
2519:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Open or Create a File                                                 */
2520:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
2521:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2522:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_open (
2523:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FIL* fp,			/* Pointer to the blank file object */
2524:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR* path,	/* Pointer to the file name */
2525:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE mode			/* Access mode and file open mode flags */
2526:Middlewares/Third_Party/FatFs/Src/ff.c **** )
2527:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 3580              		.loc 1 2527 0
 3581              		.cfi_startproc
 3582              		@ args = 0, pretend = 0, frame = 560
 3583              		@ frame_needed = 0, uses_anonymous_args = 0
 3584              	.LVL504:
 3585 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 116


 3586              	.LCFI41:
 3587              		.cfi_def_cfa_offset 28
 3588              		.cfi_offset 4, -28
 3589              		.cfi_offset 5, -24
 3590              		.cfi_offset 6, -20
 3591              		.cfi_offset 7, -16
 3592              		.cfi_offset 8, -12
 3593              		.cfi_offset 9, -8
 3594              		.cfi_offset 14, -4
 3595 0004 ADF50D7D 		sub	sp, sp, #564
 3596              	.LCFI42:
 3597              		.cfi_def_cfa_offset 592
 3598 0008 0191     		str	r1, [sp, #4]
2528:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
2529:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR dj;
2530:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE *dir;
2531:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DEFINE_NAMEBUF;
2532:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
2533:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD dw, cl;
2534:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2535:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2536:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2537:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!fp) return FR_INVALID_OBJECT;
 3599              		.loc 1 2537 0
 3600 000a 0028     		cmp	r0, #0
 3601 000c 00F0B080 		beq	.L345
 3602 0010 0446     		mov	r4, r0
 3603 0012 1546     		mov	r5, r2
2538:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fp->fs = 0;			/* Clear file object */
 3604              		.loc 1 2538 0
 3605 0014 0023     		movs	r3, #0
 3606 0016 C0F80032 		str	r3, [r0, #512]
2539:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2540:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Get logical drive number */
2541:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
2542:Middlewares/Third_Party/FatFs/Src/ff.c **** 	mode &= FA_READ | FA_WRITE | FA_CREATE_ALWAYS | FA_OPEN_ALWAYS | FA_CREATE_NEW;
 3607              		.loc 1 2542 0
 3608 001a 02F01F08 		and	r8, r2, #31
 3609              	.LVL505:
2543:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = find_volume(&dj.fs, &path, (BYTE)(mode & ~FA_READ));
 3610              		.loc 1 2543 0
 3611 001e 02F01E02 		and	r2, r2, #30
 3612 0022 01A9     		add	r1, sp, #4
 3613              	.LVL506:
 3614 0024 85A8     		add	r0, sp, #532
 3615              	.LVL507:
 3616 0026 FFF7FEFF 		bl	find_volume
 3617              	.LVL508:
2544:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
2545:Middlewares/Third_Party/FatFs/Src/ff.c **** 	mode &= FA_READ;
2546:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = find_volume(&dj.fs, &path, 0);
2547:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2548:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
 3618              		.loc 1 2548 0
 3619 002a 0646     		mov	r6, r0
 3620 002c 20B1     		cbz	r0, .L352
 3621              	.LVL509:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 117


 3622              	.L336:
2549:Middlewares/Third_Party/FatFs/Src/ff.c **** 		INIT_BUF(dj);
2550:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
2551:Middlewares/Third_Party/FatFs/Src/ff.c **** 		dir = dj.dir;
2552:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY	/* R/W configuration */
2553:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {
2554:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!dir)	/* Default directory itself */
2555:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_INVALID_NAME;
2556:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_LOCK
2557:Middlewares/Third_Party/FatFs/Src/ff.c **** 			else
2558:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = chk_lock(&dj, (mode & ~FA_READ) ? 1 : 0);
2559:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2560:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
2561:Middlewares/Third_Party/FatFs/Src/ff.c **** 		/* Create or Open a file */
2562:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (mode & (FA_CREATE_ALWAYS | FA_OPEN_ALWAYS | FA_CREATE_NEW)) {
2563:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
2564:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (res == FR_NO_FILE)			/* There is no file to open, create a new entry */
2565:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_LOCK
2566:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = enq_lock() ? dir_register(&dj) : FR_TOO_MANY_OPEN_FILES;
2567:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
2568:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = dir_register(&dj);
2569:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2570:Middlewares/Third_Party/FatFs/Src/ff.c **** 				mode |= FA_CREATE_ALWAYS;		/* File is created */
2571:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dir = dj.dir;					/* New entry */
2572:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
2573:Middlewares/Third_Party/FatFs/Src/ff.c **** 			else {								/* Any object is already existing */
2574:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (dir[DIR_Attr] & (AM_RDO | AM_DIR)) {	/* Cannot overwrite it (R/O or DIR) */
2575:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = FR_DENIED;
2576:Middlewares/Third_Party/FatFs/Src/ff.c **** 				} else {
2577:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (mode & FA_CREATE_NEW)	/* Cannot create as new file */
2578:Middlewares/Third_Party/FatFs/Src/ff.c **** 						res = FR_EXIST;
2579:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
2580:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
2581:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_OK && (mode & FA_CREATE_ALWAYS)) {	/* Truncate it if overwrite mode */
2582:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dw = GET_FATTIME();				/* Created time */
2583:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ST_DWORD(dir + DIR_CrtTime, dw);
2584:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dir[DIR_Attr] = 0;				/* Reset attribute */
2585:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ST_DWORD(dir + DIR_FileSize, 0);/* size = 0 */
2586:Middlewares/Third_Party/FatFs/Src/ff.c **** 				cl = ld_clust(dj.fs, dir);		/* Get start cluster */
2587:Middlewares/Third_Party/FatFs/Src/ff.c **** 				st_clust(dir, 0);				/* cluster = 0 */
2588:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dj.fs->wflag = 1;
2589:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (cl) {						/* Remove the cluster chain if exist */
2590:Middlewares/Third_Party/FatFs/Src/ff.c **** 					dw = dj.fs->winsect;
2591:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = remove_chain(dj.fs, cl);
2592:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (res == FR_OK) {
2593:Middlewares/Third_Party/FatFs/Src/ff.c **** 						dj.fs->last_clust = cl - 1;	/* Reuse the cluster hole */
2594:Middlewares/Third_Party/FatFs/Src/ff.c **** 						res = move_window(dj.fs, dw);
2595:Middlewares/Third_Party/FatFs/Src/ff.c **** 					}
2596:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
2597:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
2598:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
2599:Middlewares/Third_Party/FatFs/Src/ff.c **** 		else {	/* Open an existing file */
2600:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_OK) {					/* Follow succeeded */
2601:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (dir[DIR_Attr] & AM_DIR) {	/* It is a directory */
2602:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = FR_NO_FILE;
2603:Middlewares/Third_Party/FatFs/Src/ff.c **** 				} else {
2604:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if ((mode & FA_WRITE) && (dir[DIR_Attr] & AM_RDO)) /* R/O violation */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 118


2605:Middlewares/Third_Party/FatFs/Src/ff.c **** 						res = FR_DENIED;
2606:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
2607:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
2608:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
2609:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {
2610:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (mode & FA_CREATE_ALWAYS)		/* Set file change flag if created or overwritten */
2611:Middlewares/Third_Party/FatFs/Src/ff.c **** 				mode |= FA__WRITTEN;
2612:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->dir_sect = dj.fs->winsect;		/* Pointer to the directory entry */
2613:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->dir_ptr = dir;
2614:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_LOCK
2615:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->lockid = inc_lock(&dj, (mode & ~FA_READ) ? 1 : 0);
2616:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!fp->lockid) res = FR_INT_ERR;
2617:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2618:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
2619:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2620:Middlewares/Third_Party/FatFs/Src/ff.c **** #else				/* R/O configuration */
2621:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {					/* Follow succeeded */
2622:Middlewares/Third_Party/FatFs/Src/ff.c **** 			dir = dj.dir;
2623:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!dir) {						/* Current directory itself */
2624:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_INVALID_NAME;
2625:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {
2626:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (dir[DIR_Attr] & AM_DIR)	/* It is a directory */
2627:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = FR_NO_FILE;
2628:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
2629:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
2630:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2631:Middlewares/Third_Party/FatFs/Src/ff.c **** 		FREE_BUF();
2632:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2633:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {
2634:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->flag = mode;					/* File access mode */
2635:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->err = 0;						/* Clear error flag */
2636:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->sclust = ld_clust(dj.fs, dir);	/* File start cluster */
2637:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->fsize = LD_DWORD(dir + DIR_FileSize);	/* File size */
2638:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->fptr = 0;						/* File pointer */
2639:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->dsect = 0;
2640:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_FASTSEEK
2641:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->cltbl = 0;						/* Normal seek mode */
2642:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2643:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->fs = dj.fs;	 					/* Validate file object */
2644:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->id = fp->fs->id;
2645:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
2646:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
2647:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2648:Middlewares/Third_Party/FatFs/Src/ff.c **** 	LEAVE_FF(dj.fs, res);
2649:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 3623              		.loc 1 2649 0
 3624 002e 3046     		mov	r0, r6
 3625 0030 0DF50D7D 		add	sp, sp, #564
 3626              	.LCFI43:
 3627              		.cfi_remember_state
 3628              		.cfi_def_cfa_offset 28
 3629              		@ sp needed
 3630 0034 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 3631              	.LVL510:
 3632              	.L352:
 3633              	.LCFI44:
 3634              		.cfi_restore_state
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 119


2549:Middlewares/Third_Party/FatFs/Src/ff.c **** 		INIT_BUF(dj);
 3635              		.loc 1 2549 0
 3636 0038 02AB     		add	r3, sp, #8
 3637 003a 8B93     		str	r3, [sp, #556]
2550:Middlewares/Third_Party/FatFs/Src/ff.c **** 		dir = dj.dir;
 3638              		.loc 1 2550 0
 3639 003c 0199     		ldr	r1, [sp, #4]
 3640 003e 05A8     		add	r0, sp, #20
 3641              	.LVL511:
 3642 0040 FFF7FEFF 		bl	follow_path
 3643              	.LVL512:
2551:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY	/* R/W configuration */
 3644              		.loc 1 2551 0
 3645 0044 8A9F     		ldr	r7, [sp, #552]
 3646              	.LVL513:
2553:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!dir)	/* Default directory itself */
 3647              		.loc 1 2553 0
 3648 0046 0646     		mov	r6, r0
 3649 0048 08B9     		cbnz	r0, .L337
2554:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_INVALID_NAME;
 3650              		.loc 1 2554 0
 3651 004a 002F     		cmp	r7, #0
 3652 004c 40D0     		beq	.L353
 3653              	.L337:
 3654              	.LVL514:
2562:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
 3655              		.loc 1 2562 0
 3656 004e 15F01C0F 		tst	r5, #28
 3657 0052 7DD0     		beq	.L338
2563:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (res == FR_NO_FILE)			/* There is no file to open, create a new entry */
 3658              		.loc 1 2563 0
 3659 0054 002E     		cmp	r6, #0
 3660 0056 42D0     		beq	.L339
2564:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_LOCK
 3661              		.loc 1 2564 0
 3662 0058 042E     		cmp	r6, #4
 3663 005a 3BD0     		beq	.L354
 3664              	.L340:
2570:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dir = dj.dir;					/* New entry */
 3665              		.loc 1 2570 0
 3666 005c 48F00808 		orr	r8, r8, #8
 3667              	.LVL515:
2571:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 3668              		.loc 1 2571 0
 3669 0060 8A9F     		ldr	r7, [sp, #552]
 3670              	.LVL516:
 3671              	.L341:
2581:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dw = GET_FATTIME();				/* Created time */
 3672              		.loc 1 2581 0
 3673 0062 16B9     		cbnz	r6, .L342
2581:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dw = GET_FATTIME();				/* Created time */
 3674              		.loc 1 2581 0 is_stmt 0 discriminator 1
 3675 0064 18F0080F 		tst	r8, #8
 3676 0068 44D1     		bne	.L355
 3677              	.LVL517:
 3678              	.L342:
2609:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (mode & FA_CREATE_ALWAYS)		/* Set file change flag if created or overwritten */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 120


 3679              		.loc 1 2609 0 is_stmt 1
 3680 006a 5EB9     		cbnz	r6, .L343
2610:Middlewares/Third_Party/FatFs/Src/ff.c **** 				mode |= FA__WRITTEN;
 3681              		.loc 1 2610 0
 3682 006c 18F0080F 		tst	r8, #8
 3683 0070 01D0     		beq	.L344
2611:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->dir_sect = dj.fs->winsect;		/* Pointer to the directory entry */
 3684              		.loc 1 2611 0
 3685 0072 48F02008 		orr	r8, r8, #32
 3686              	.LVL518:
 3687              	.L344:
2612:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->dir_ptr = dir;
 3688              		.loc 1 2612 0
 3689 0076 859B     		ldr	r3, [sp, #532]
 3690 0078 D3F82C32 		ldr	r3, [r3, #556]
 3691 007c C4F81C32 		str	r3, [r4, #540]
2613:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_LOCK
 3692              		.loc 1 2613 0
 3693 0080 C4F82072 		str	r7, [r4, #544]
 3694              	.L343:
2633:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->flag = mode;					/* File access mode */
 3695              		.loc 1 2633 0
 3696 0084 002E     		cmp	r6, #0
 3697 0086 D2D1     		bne	.L336
2634:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->err = 0;						/* Clear error flag */
 3698              		.loc 1 2634 0
 3699 0088 84F80682 		strb	r8, [r4, #518]
2635:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->sclust = ld_clust(dj.fs, dir);	/* File start cluster */
 3700              		.loc 1 2635 0
 3701 008c 4FF00008 		mov	r8, #0
 3702              	.LVL519:
 3703 0090 84F80782 		strb	r8, [r4, #519]
2636:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->fsize = LD_DWORD(dir + DIR_FileSize);	/* File size */
 3704              		.loc 1 2636 0
 3705 0094 859D     		ldr	r5, [sp, #532]
 3706 0096 3946     		mov	r1, r7
 3707 0098 2846     		mov	r0, r5
 3708 009a FFF7FEFF 		bl	ld_clust
 3709              	.LVL520:
 3710 009e C4F81002 		str	r0, [r4, #528]
2637:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->fptr = 0;						/* File pointer */
 3711              		.loc 1 2637 0
 3712 00a2 FA7F     		ldrb	r2, [r7, #31]	@ zero_extendqisi2
 3713 00a4 BB7F     		ldrb	r3, [r7, #30]	@ zero_extendqisi2
 3714 00a6 1B04     		lsls	r3, r3, #16
 3715 00a8 43EA0263 		orr	r3, r3, r2, lsl #24
 3716 00ac 7A7F     		ldrb	r2, [r7, #29]	@ zero_extendqisi2
 3717 00ae 43EA0223 		orr	r3, r3, r2, lsl #8
 3718 00b2 3A7F     		ldrb	r2, [r7, #28]	@ zero_extendqisi2
 3719 00b4 1343     		orrs	r3, r3, r2
 3720 00b6 C4F80C32 		str	r3, [r4, #524]
2638:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->dsect = 0;
 3721              		.loc 1 2638 0
 3722 00ba C4F80882 		str	r8, [r4, #520]
2639:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_FASTSEEK
 3723              		.loc 1 2639 0
 3724 00be C4F81882 		str	r8, [r4, #536]
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 121


2643:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->id = fp->fs->id;
 3725              		.loc 1 2643 0
 3726 00c2 C4F80052 		str	r5, [r4, #512]
2644:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 3727              		.loc 1 2644 0
 3728 00c6 B5F80632 		ldrh	r3, [r5, #518]
 3729 00ca A4F80432 		strh	r3, [r4, #516]	@ movhi
 3730 00ce AEE7     		b	.L336
 3731              	.LVL521:
 3732              	.L353:
2555:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_LOCK
 3733              		.loc 1 2555 0
 3734 00d0 0626     		movs	r6, #6
 3735 00d2 BCE7     		b	.L337
 3736              	.LVL522:
 3737              	.L354:
2568:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 3738              		.loc 1 2568 0
 3739 00d4 05A8     		add	r0, sp, #20
 3740 00d6 FFF7FEFF 		bl	dir_register
 3741              	.LVL523:
 3742 00da 0646     		mov	r6, r0
 3743              	.LVL524:
 3744 00dc BEE7     		b	.L340
 3745              	.L339:
2574:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = FR_DENIED;
 3746              		.loc 1 2574 0
 3747 00de FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 3748 00e0 13F0110F 		tst	r3, #17
 3749 00e4 04D1     		bne	.L347
2577:Middlewares/Third_Party/FatFs/Src/ff.c **** 						res = FR_EXIST;
 3750              		.loc 1 2577 0
 3751 00e6 15F0040F 		tst	r5, #4
 3752 00ea BAD0     		beq	.L341
2578:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
 3753              		.loc 1 2578 0
 3754 00ec 0826     		movs	r6, #8
 3755              	.LVL525:
 3756 00ee B8E7     		b	.L341
 3757              	.LVL526:
 3758              	.L347:
2575:Middlewares/Third_Party/FatFs/Src/ff.c **** 				} else {
 3759              		.loc 1 2575 0
 3760 00f0 0726     		movs	r6, #7
 3761              	.LVL527:
 3762 00f2 B6E7     		b	.L341
 3763              	.LVL528:
 3764              	.L355:
2583:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dir[DIR_Attr] = 0;				/* Reset attribute */
 3765              		.loc 1 2583 0
 3766 00f4 0025     		movs	r5, #0
 3767 00f6 BD73     		strb	r5, [r7, #14]
 3768 00f8 FD73     		strb	r5, [r7, #15]
 3769 00fa C423     		movs	r3, #196
 3770 00fc 3B74     		strb	r3, [r7, #16]
 3771 00fe 4623     		movs	r3, #70
 3772 0100 7B74     		strb	r3, [r7, #17]
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 122


2584:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ST_DWORD(dir + DIR_FileSize, 0);/* size = 0 */
 3773              		.loc 1 2584 0
 3774 0102 FD72     		strb	r5, [r7, #11]
2585:Middlewares/Third_Party/FatFs/Src/ff.c **** 				cl = ld_clust(dj.fs, dir);		/* Get start cluster */
 3775              		.loc 1 2585 0
 3776 0104 3D77     		strb	r5, [r7, #28]
 3777 0106 7D77     		strb	r5, [r7, #29]
 3778 0108 BD77     		strb	r5, [r7, #30]
 3779 010a FD77     		strb	r5, [r7, #31]
2586:Middlewares/Third_Party/FatFs/Src/ff.c **** 				st_clust(dir, 0);				/* cluster = 0 */
 3780              		.loc 1 2586 0
 3781 010c 3946     		mov	r1, r7
 3782 010e 8598     		ldr	r0, [sp, #532]
 3783 0110 FFF7FEFF 		bl	ld_clust
 3784              	.LVL529:
 3785 0114 8146     		mov	r9, r0
 3786              	.LVL530:
2587:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dj.fs->wflag = 1;
 3787              		.loc 1 2587 0
 3788 0116 2946     		mov	r1, r5
 3789 0118 3846     		mov	r0, r7
 3790              	.LVL531:
 3791 011a FFF7FEFF 		bl	st_clust
 3792              	.LVL532:
2588:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (cl) {						/* Remove the cluster chain if exist */
 3793              		.loc 1 2588 0
 3794 011e 8598     		ldr	r0, [sp, #532]
 3795 0120 0123     		movs	r3, #1
 3796 0122 80F80432 		strb	r3, [r0, #516]
2589:Middlewares/Third_Party/FatFs/Src/ff.c **** 					dw = dj.fs->winsect;
 3797              		.loc 1 2589 0
 3798 0126 B9F1000F 		cmp	r9, #0
 3799 012a 9ED0     		beq	.L342
2590:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = remove_chain(dj.fs, cl);
 3800              		.loc 1 2590 0
 3801 012c D0F82C52 		ldr	r5, [r0, #556]
 3802              	.LVL533:
2591:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (res == FR_OK) {
 3803              		.loc 1 2591 0
 3804 0130 4946     		mov	r1, r9
 3805 0132 FFF7FEFF 		bl	remove_chain
 3806              	.LVL534:
2592:Middlewares/Third_Party/FatFs/Src/ff.c **** 						dj.fs->last_clust = cl - 1;	/* Reuse the cluster hole */
 3807              		.loc 1 2592 0
 3808 0136 0646     		mov	r6, r0
 3809 0138 0028     		cmp	r0, #0
 3810 013a 96D1     		bne	.L342
2593:Middlewares/Third_Party/FatFs/Src/ff.c **** 						res = move_window(dj.fs, dw);
 3811              		.loc 1 2593 0
 3812 013c 8598     		ldr	r0, [sp, #532]
 3813              	.LVL535:
 3814 013e 09F1FF33 		add	r3, r9, #-1
 3815 0142 C0F80C32 		str	r3, [r0, #524]
2594:Middlewares/Third_Party/FatFs/Src/ff.c **** 					}
 3816              		.loc 1 2594 0
 3817 0146 2946     		mov	r1, r5
 3818 0148 FFF7FEFF 		bl	move_window
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 123


 3819              	.LVL536:
 3820 014c 0646     		mov	r6, r0
 3821              	.LVL537:
 3822 014e 8CE7     		b	.L342
 3823              	.LVL538:
 3824              	.L338:
2600:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (dir[DIR_Attr] & AM_DIR) {	/* It is a directory */
 3825              		.loc 1 2600 0
 3826 0150 002E     		cmp	r6, #0
 3827 0152 8AD1     		bne	.L342
2601:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = FR_NO_FILE;
 3828              		.loc 1 2601 0
 3829 0154 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 3830 0156 13F0100F 		tst	r3, #16
 3831 015a 07D1     		bne	.L349
2604:Middlewares/Third_Party/FatFs/Src/ff.c **** 						res = FR_DENIED;
 3832              		.loc 1 2604 0
 3833 015c 15F0020F 		tst	r5, #2
 3834 0160 83D0     		beq	.L342
2604:Middlewares/Third_Party/FatFs/Src/ff.c **** 						res = FR_DENIED;
 3835              		.loc 1 2604 0 is_stmt 0 discriminator 1
 3836 0162 13F0010F 		tst	r3, #1
 3837 0166 80D0     		beq	.L342
2605:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
 3838              		.loc 1 2605 0 is_stmt 1
 3839 0168 0726     		movs	r6, #7
 3840              	.LVL539:
 3841 016a 7EE7     		b	.L342
 3842              	.LVL540:
 3843              	.L349:
2602:Middlewares/Third_Party/FatFs/Src/ff.c **** 				} else {
 3844              		.loc 1 2602 0
 3845 016c 0426     		movs	r6, #4
 3846              	.LVL541:
 3847 016e 7CE7     		b	.L342
 3848              	.LVL542:
 3849              	.L345:
2537:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fp->fs = 0;			/* Clear file object */
 3850              		.loc 1 2537 0
 3851 0170 0926     		movs	r6, #9
 3852 0172 5CE7     		b	.L336
 3853              		.cfi_endproc
 3854              	.LFE95:
 3856              		.section	.text.f_read,"ax",%progbits
 3857              		.align	1
 3858              		.global	f_read
 3859              		.syntax unified
 3860              		.thumb
 3861              		.thumb_func
 3862              		.fpu softvfp
 3864              	f_read:
 3865              	.LFB96:
2650:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2651:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2652:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2653:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2654:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 124


2655:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Read File                                                             */
2656:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
2657:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2658:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_read (
2659:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FIL* fp, 		/* Pointer to the file object */
2660:Middlewares/Third_Party/FatFs/Src/ff.c **** 	void* buff,		/* Pointer to data buffer */
2661:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT btr,		/* Number of bytes to read */
2662:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT* br		/* Pointer to number of bytes read */
2663:Middlewares/Third_Party/FatFs/Src/ff.c **** )
2664:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 3866              		.loc 1 2664 0
 3867              		.cfi_startproc
 3868              		@ args = 0, pretend = 0, frame = 8
 3869              		@ frame_needed = 0, uses_anonymous_args = 0
 3870              	.LVL543:
 3871 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 3872              	.LCFI45:
 3873              		.cfi_def_cfa_offset 36
 3874              		.cfi_offset 4, -36
 3875              		.cfi_offset 5, -32
 3876              		.cfi_offset 6, -28
 3877              		.cfi_offset 7, -24
 3878              		.cfi_offset 8, -20
 3879              		.cfi_offset 9, -16
 3880              		.cfi_offset 10, -12
 3881              		.cfi_offset 11, -8
 3882              		.cfi_offset 14, -4
 3883 0004 83B0     		sub	sp, sp, #12
 3884              	.LCFI46:
 3885              		.cfi_def_cfa_offset 48
 3886 0006 0446     		mov	r4, r0
 3887 0008 8946     		mov	r9, r1
 3888 000a 1546     		mov	r5, r2
 3889 000c 9846     		mov	r8, r3
 3890              	.LVL544:
2665:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
2666:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD clst, sect, remain;
2667:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT rcnt, cc;
2668:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE csect, *rbuff = (BYTE*)buff;
2669:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2670:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2671:Middlewares/Third_Party/FatFs/Src/ff.c **** 	*br = 0;	/* Clear read byte counter */
 3891              		.loc 1 2671 0
 3892 000e 0023     		movs	r3, #0
 3893              	.LVL545:
 3894 0010 C8F80030 		str	r3, [r8]
2672:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2673:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = validate(fp);							/* Check validity */
 3895              		.loc 1 2673 0
 3896 0014 FFF7FEFF 		bl	validate
 3897              	.LVL546:
2674:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
 3898              		.loc 1 2674 0
 3899 0018 0190     		str	r0, [sp, #4]
 3900 001a 0028     		cmp	r0, #0
 3901 001c 40F0C480 		bne	.L357
2675:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fp->err)								/* Check error */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 125


 3902              		.loc 1 2675 0
 3903 0020 94F80732 		ldrb	r3, [r4, #519]	@ zero_extendqisi2
 3904 0024 002B     		cmp	r3, #0
 3905 0026 40F0BE80 		bne	.L378
2676:Middlewares/Third_Party/FatFs/Src/ff.c **** 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
2677:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!(fp->flag & FA_READ)) 					/* Check access mode */
 3906              		.loc 1 2677 0
 3907 002a 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 3908 002e 13F0010F 		tst	r3, #1
 3909 0032 00F0BD80 		beq	.L379
2678:Middlewares/Third_Party/FatFs/Src/ff.c **** 		LEAVE_FF(fp->fs, FR_DENIED);
2679:Middlewares/Third_Party/FatFs/Src/ff.c **** 	remain = fp->fsize - fp->fptr;
 3910              		.loc 1 2679 0
 3911 0036 D4F80C62 		ldr	r6, [r4, #524]
 3912 003a D4F80832 		ldr	r3, [r4, #520]
 3913 003e F61A     		subs	r6, r6, r3
 3914              	.LVL547:
2680:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
 3915              		.loc 1 2680 0
 3916 0040 AE42     		cmp	r6, r5
 3917 0042 68D3     		bcc	.L376
 3918 0044 2E46     		mov	r6, r5
 3919              	.LVL548:
 3920 0046 66E0     		b	.L376
 3921              	.LVL549:
 3922              	.L362:
2681:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2682:Middlewares/Third_Party/FatFs/Src/ff.c **** 	for ( ;  btr;								/* Repeat until all data read */
2683:Middlewares/Third_Party/FatFs/Src/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
2684:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {		/* On the sector boundary? */
2685:Middlewares/Third_Party/FatFs/Src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
2686:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!csect) {						/* On the cluster boundary? */
2687:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
2688:Middlewares/Third_Party/FatFs/Src/ff.c **** 					clst = fp->sclust;			/* Follow from the origin */
2689:Middlewares/Third_Party/FatFs/Src/ff.c **** 				} else {						/* Middle or end of the file */
2690:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_FASTSEEK
2691:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (fp->cltbl)
2692:Middlewares/Third_Party/FatFs/Src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
2693:Middlewares/Third_Party/FatFs/Src/ff.c **** 					else
2694:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2695:Middlewares/Third_Party/FatFs/Src/ff.c **** 						clst = get_fat(fp->fs, fp->clust);	/* Follow cluster chain on the FAT */
 3923              		.loc 1 2695 0
 3924 0048 D4F81412 		ldr	r1, [r4, #532]
 3925 004c FFF7FEFF 		bl	get_fat
 3926              	.LVL550:
 3927 0050 76E0     		b	.L363
 3928              	.L386:
2696:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
2697:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (clst < 2) ABORT(fp->fs, FR_INT_ERR);
 3929              		.loc 1 2697 0 discriminator 1
 3930 0052 0223     		movs	r3, #2
 3931 0054 84F80732 		strb	r3, [r4, #519]
 3932 0058 0193     		str	r3, [sp, #4]
 3933 005a A5E0     		b	.L357
 3934              	.L387:
2698:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 3935              		.loc 1 2698 0 discriminator 1
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 126


 3936 005c 0123     		movs	r3, #1
 3937 005e 84F80732 		strb	r3, [r4, #519]
 3938 0062 0193     		str	r3, [sp, #4]
 3939 0064 A0E0     		b	.L357
 3940              	.LVL551:
 3941              	.L388:
2699:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
2700:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
2701:Middlewares/Third_Party/FatFs/Src/ff.c **** 			sect = clust2sect(fp->fs, fp->clust);	/* Get current sector */
2702:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 3942              		.loc 1 2702 0 discriminator 1
 3943 0066 0223     		movs	r3, #2
 3944 0068 84F80732 		strb	r3, [r4, #519]
 3945 006c 0193     		str	r3, [sp, #4]
 3946 006e 9BE0     		b	.L357
 3947              	.LVL552:
 3948              	.L369:
2703:Middlewares/Third_Party/FatFs/Src/ff.c **** 			sect += csect;
2704:Middlewares/Third_Party/FatFs/Src/ff.c **** 			cc = btr / SS(fp->fs);				/* When remaining bytes >= sector size, */
2705:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (cc) {							/* Read maximum contiguous sectors directly */
2706:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
2707:Middlewares/Third_Party/FatFs/Src/ff.c **** 					cc = fp->fs->csize - csect;
2708:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (disk_read(fp->fs->drv, rbuff, sect, cc) != RES_OK)
2709:Middlewares/Third_Party/FatFs/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
2710:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
2711:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_TINY
2712:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (fp->fs->wflag && fp->fs->winsect - sect < cc)
2713:Middlewares/Third_Party/FatFs/Src/ff.c **** 					mem_cpy(rbuff + ((fp->fs->winsect - sect) * SS(fp->fs)), fp->fs->win.d8, SS(fp->fs));
2714:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
2715:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if ((fp->flag & FA__DIRTY) && fp->dsect - sect < cc)
 3949              		.loc 1 2715 0
 3950 0070 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 3951 0074 13F0400F 		tst	r3, #64
 3952 0078 05D0     		beq	.L370
 3953              		.loc 1 2715 0 is_stmt 0 discriminator 1
 3954 007a D4F81802 		ldr	r0, [r4, #536]
 3955 007e A0EB0A00 		sub	r0, r0, r10
 3956 0082 A842     		cmp	r0, r5
 3957 0084 01D3     		bcc	.L383
 3958              	.L370:
2716:Middlewares/Third_Party/FatFs/Src/ff.c **** 					mem_cpy(rbuff + ((fp->dsect - sect) * SS(fp->fs)), fp->buf.d8, SS(fp->fs));
2717:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2718:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2719:Middlewares/Third_Party/FatFs/Src/ff.c **** 				rcnt = SS(fp->fs) * cc;			/* Number of bytes transferred */
 3959              		.loc 1 2719 0 is_stmt 1
 3960 0086 6D02     		lsls	r5, r5, #9
 3961              	.LVL553:
2720:Middlewares/Third_Party/FatFs/Src/ff.c **** 				continue;
 3962              		.loc 1 2720 0
 3963 0088 39E0     		b	.L371
 3964              	.LVL554:
 3965              	.L383:
2716:Middlewares/Third_Party/FatFs/Src/ff.c **** 					mem_cpy(rbuff + ((fp->dsect - sect) * SS(fp->fs)), fp->buf.d8, SS(fp->fs));
 3966              		.loc 1 2716 0
 3967 008a 4FF40072 		mov	r2, #512
 3968 008e 2146     		mov	r1, r4
 3969 0090 09EB4020 		add	r0, r9, r0, lsl #9
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 127


 3970 0094 FFF7FEFF 		bl	mem_cpy
 3971              	.LVL555:
 3972 0098 F5E7     		b	.L370
 3973              	.L367:
2721:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
2722:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_TINY
2723:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (fp->dsect != sect) {			/* Load data sector if not in cache */
 3974              		.loc 1 2723 0
 3975 009a D4F81822 		ldr	r2, [r4, #536]
 3976 009e 5245     		cmp	r2, r10
 3977 00a0 1DD0     		beq	.L372
2724:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
2725:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (fp->flag & FA__DIRTY) {		/* Write-back dirty sector cache */
 3978              		.loc 1 2725 0
 3979 00a2 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 3980 00a6 13F0400F 		tst	r3, #64
 3981 00aa 0DD0     		beq	.L373
2726:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
 3982              		.loc 1 2726 0
 3983 00ac 0123     		movs	r3, #1
 3984 00ae 2146     		mov	r1, r4
 3985 00b0 9BF80102 		ldrb	r0, [fp, #513]	@ zero_extendqisi2
 3986 00b4 FFF7FEFF 		bl	disk_write
 3987              	.LVL556:
 3988 00b8 0028     		cmp	r0, #0
 3989 00ba 6AD1     		bne	.L384
2727:Middlewares/Third_Party/FatFs/Src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
2728:Middlewares/Third_Party/FatFs/Src/ff.c **** 					fp->flag &= ~FA__DIRTY;
 3990              		.loc 1 2728 0
 3991 00bc 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 3992 00c0 23F04003 		bic	r3, r3, #64
 3993 00c4 84F80632 		strb	r3, [r4, #518]
 3994              	.L373:
2729:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
2730:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2731:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (disk_read(fp->fs->drv, fp->buf.d8, sect, 1) != RES_OK)	/* Fill sector cache */
 3995              		.loc 1 2731 0
 3996 00c8 D4F80002 		ldr	r0, [r4, #512]
 3997 00cc 0123     		movs	r3, #1
 3998 00ce 5246     		mov	r2, r10
 3999 00d0 2146     		mov	r1, r4
 4000 00d2 90F80102 		ldrb	r0, [r0, #513]	@ zero_extendqisi2
 4001 00d6 FFF7FEFF 		bl	disk_read
 4002              	.LVL557:
 4003 00da 0028     		cmp	r0, #0
 4004 00dc 5ED1     		bne	.L385
 4005              	.L372:
2732:Middlewares/Third_Party/FatFs/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
2733:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
2734:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2735:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->dsect = sect;
 4006              		.loc 1 2735 0
 4007 00de C4F818A2 		str	r10, [r4, #536]
 4008              	.LVL558:
 4009              	.L360:
2736:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
2737:Middlewares/Third_Party/FatFs/Src/ff.c **** 		rcnt = SS(fp->fs) - ((UINT)fp->fptr % SS(fp->fs));	/* Get partial sector data from sector buffer 
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 128


 4010              		.loc 1 2737 0
 4011 00e2 D4F80812 		ldr	r1, [r4, #520]
 4012 00e6 C1F30801 		ubfx	r1, r1, #0, #9
 4013 00ea C1F50075 		rsb	r5, r1, #512
 4014              	.LVL559:
2738:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (rcnt > btr) rcnt = btr;
 4015              		.loc 1 2738 0
 4016 00ee AE42     		cmp	r6, r5
 4017 00f0 00D2     		bcs	.L375
 4018 00f2 3546     		mov	r5, r6
 4019              	.LVL560:
 4020              	.L375:
2739:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_TINY
2740:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (move_window(fp->fs, fp->dsect) != FR_OK)		/* Move sector window */
2741:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ABORT(fp->fs, FR_DISK_ERR);
2742:Middlewares/Third_Party/FatFs/Src/ff.c **** 		mem_cpy(rbuff, &fp->fs->win.d8[fp->fptr % SS(fp->fs)], rcnt);	/* Pick partial sector */
2743:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
2744:Middlewares/Third_Party/FatFs/Src/ff.c **** 		mem_cpy(rbuff, &fp->buf.d8[fp->fptr % SS(fp->fs)], rcnt);	/* Pick partial sector */
 4021              		.loc 1 2744 0
 4022 00f4 2A46     		mov	r2, r5
 4023 00f6 2144     		add	r1, r1, r4
 4024 00f8 4846     		mov	r0, r9
 4025 00fa FFF7FEFF 		bl	mem_cpy
 4026              	.LVL561:
 4027              	.L371:
2683:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {		/* On the sector boundary? */
 4028              		.loc 1 2683 0
 4029 00fe A944     		add	r9, r9, r5
 4030              	.LVL562:
 4031 0100 D4F80832 		ldr	r3, [r4, #520]
 4032 0104 2B44     		add	r3, r3, r5
 4033 0106 C4F80832 		str	r3, [r4, #520]
 4034 010a D8F80030 		ldr	r3, [r8]
 4035 010e 2B44     		add	r3, r3, r5
 4036 0110 C8F80030 		str	r3, [r8]
 4037 0114 761B     		subs	r6, r6, r5
 4038              	.LVL563:
 4039              	.L376:
2682:Middlewares/Third_Party/FatFs/Src/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
 4040              		.loc 1 2682 0
 4041 0116 002E     		cmp	r6, #0
 4042 0118 46D0     		beq	.L357
2684:Middlewares/Third_Party/FatFs/Src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 4043              		.loc 1 2684 0
 4044 011a D4F80832 		ldr	r3, [r4, #520]
 4045 011e C3F30802 		ubfx	r2, r3, #0, #9
 4046 0122 002A     		cmp	r2, #0
 4047 0124 DDD1     		bne	.L360
2685:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!csect) {						/* On the cluster boundary? */
 4048              		.loc 1 2685 0
 4049 0126 D4F80002 		ldr	r0, [r4, #512]
 4050 012a 90F80272 		ldrb	r7, [r0, #514]	@ zero_extendqisi2
 4051 012e 013F     		subs	r7, r7, #1
 4052 0130 FFB2     		uxtb	r7, r7
 4053              	.LVL564:
2686:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
 4054              		.loc 1 2686 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 129


 4055 0132 17EA5327 		ands	r7, r7, r3, lsr #9
 4056              	.LVL565:
 4057 0136 0AD1     		bne	.L361
2687:Middlewares/Third_Party/FatFs/Src/ff.c **** 					clst = fp->sclust;			/* Follow from the origin */
 4058              		.loc 1 2687 0
 4059 0138 002B     		cmp	r3, #0
 4060 013a 85D1     		bne	.L362
2688:Middlewares/Third_Party/FatFs/Src/ff.c **** 				} else {						/* Middle or end of the file */
 4061              		.loc 1 2688 0
 4062 013c D4F81002 		ldr	r0, [r4, #528]
 4063              	.LVL566:
 4064              	.L363:
2697:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 4065              		.loc 1 2697 0
 4066 0140 0128     		cmp	r0, #1
 4067 0142 86D9     		bls	.L386
2698:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 4068              		.loc 1 2698 0
 4069 0144 B0F1FF3F 		cmp	r0, #-1
 4070 0148 88D0     		beq	.L387
2699:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 4071              		.loc 1 2699 0
 4072 014a C4F81402 		str	r0, [r4, #532]
 4073              	.LVL567:
 4074              	.L361:
2701:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 4075              		.loc 1 2701 0
 4076 014e D4F800B2 		ldr	fp, [r4, #512]
 4077 0152 D4F81412 		ldr	r1, [r4, #532]
 4078 0156 5846     		mov	r0, fp
 4079 0158 FFF7FEFF 		bl	clust2sect
 4080              	.LVL568:
2702:Middlewares/Third_Party/FatFs/Src/ff.c **** 			sect += csect;
 4081              		.loc 1 2702 0
 4082 015c 8246     		mov	r10, r0
 4083 015e 0028     		cmp	r0, #0
 4084 0160 81D0     		beq	.L388
2703:Middlewares/Third_Party/FatFs/Src/ff.c **** 			cc = btr / SS(fp->fs);				/* When remaining bytes >= sector size, */
 4085              		.loc 1 2703 0
 4086 0162 BA44     		add	r10, r10, r7
 4087              	.LVL569:
2705:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
 4088              		.loc 1 2705 0
 4089 0164 750A     		lsrs	r5, r6, #9
 4090              	.LVL570:
 4091 0166 98D0     		beq	.L367
2706:Middlewares/Third_Party/FatFs/Src/ff.c **** 					cc = fp->fs->csize - csect;
 4092              		.loc 1 2706 0
 4093 0168 7B19     		adds	r3, r7, r5
 4094 016a 9BF80222 		ldrb	r2, [fp, #514]	@ zero_extendqisi2
 4095 016e 9342     		cmp	r3, r2
 4096 0170 00D9     		bls	.L368
2707:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (disk_read(fp->fs->drv, rbuff, sect, cc) != RES_OK)
 4097              		.loc 1 2707 0
 4098 0172 D51B     		subs	r5, r2, r7
 4099              	.LVL571:
 4100              	.L368:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 130


2708:Middlewares/Third_Party/FatFs/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 4101              		.loc 1 2708 0
 4102 0174 2B46     		mov	r3, r5
 4103 0176 5246     		mov	r2, r10
 4104 0178 4946     		mov	r1, r9
 4105 017a 9BF80102 		ldrb	r0, [fp, #513]	@ zero_extendqisi2
 4106 017e FFF7FEFF 		bl	disk_read
 4107              	.LVL572:
 4108 0182 0028     		cmp	r0, #0
 4109 0184 3FF474AF 		beq	.L369
2709:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 4110              		.loc 1 2709 0
 4111 0188 0123     		movs	r3, #1
 4112 018a 84F80732 		strb	r3, [r4, #519]
 4113 018e 0193     		str	r3, [sp, #4]
 4114 0190 0AE0     		b	.L357
 4115              	.L384:
2727:Middlewares/Third_Party/FatFs/Src/ff.c **** 					fp->flag &= ~FA__DIRTY;
 4116              		.loc 1 2727 0
 4117 0192 0123     		movs	r3, #1
 4118 0194 84F80732 		strb	r3, [r4, #519]
 4119 0198 0193     		str	r3, [sp, #4]
 4120 019a 05E0     		b	.L357
 4121              	.L385:
2732:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 4122              		.loc 1 2732 0
 4123 019c 0123     		movs	r3, #1
 4124 019e 84F80732 		strb	r3, [r4, #519]
 4125 01a2 0193     		str	r3, [sp, #4]
 4126 01a4 00E0     		b	.L357
 4127              	.LVL573:
 4128              	.L378:
2676:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!(fp->flag & FA_READ)) 					/* Check access mode */
 4129              		.loc 1 2676 0
 4130 01a6 0193     		str	r3, [sp, #4]
 4131              	.LVL574:
 4132              	.L357:
2745:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2746:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
2747:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2748:Middlewares/Third_Party/FatFs/Src/ff.c **** 	LEAVE_FF(fp->fs, FR_OK);
2749:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 4133              		.loc 1 2749 0
 4134 01a8 0198     		ldr	r0, [sp, #4]
 4135 01aa 03B0     		add	sp, sp, #12
 4136              	.LCFI47:
 4137              		.cfi_remember_state
 4138              		.cfi_def_cfa_offset 36
 4139              		@ sp needed
 4140 01ac BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 4141              	.LVL575:
 4142              	.L379:
 4143              	.LCFI48:
 4144              		.cfi_restore_state
2678:Middlewares/Third_Party/FatFs/Src/ff.c **** 	remain = fp->fsize - fp->fptr;
 4145              		.loc 1 2678 0
 4146 01b0 0723     		movs	r3, #7
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 131


 4147 01b2 0193     		str	r3, [sp, #4]
 4148 01b4 F8E7     		b	.L357
 4149              		.cfi_endproc
 4150              	.LFE96:
 4152              		.section	.text.f_write,"ax",%progbits
 4153              		.align	1
 4154              		.global	f_write
 4155              		.syntax unified
 4156              		.thumb
 4157              		.thumb_func
 4158              		.fpu softvfp
 4160              	f_write:
 4161              	.LFB97:
2750:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2751:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2752:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2753:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2754:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
2755:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
2756:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Write File                                                            */
2757:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
2758:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2759:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_write (
2760:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FIL* fp,			/* Pointer to the file object */
2761:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const void *buff,	/* Pointer to the data to be written */
2762:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT btw,			/* Number of bytes to write */
2763:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT* bw			/* Pointer to number of bytes written */
2764:Middlewares/Third_Party/FatFs/Src/ff.c **** )
2765:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 4162              		.loc 1 2765 0
 4163              		.cfi_startproc
 4164              		@ args = 0, pretend = 0, frame = 8
 4165              		@ frame_needed = 0, uses_anonymous_args = 0
 4166              	.LVL576:
 4167 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 4168              	.LCFI49:
 4169              		.cfi_def_cfa_offset 36
 4170              		.cfi_offset 4, -36
 4171              		.cfi_offset 5, -32
 4172              		.cfi_offset 6, -28
 4173              		.cfi_offset 7, -24
 4174              		.cfi_offset 8, -20
 4175              		.cfi_offset 9, -16
 4176              		.cfi_offset 10, -12
 4177              		.cfi_offset 11, -8
 4178              		.cfi_offset 14, -4
 4179 0004 83B0     		sub	sp, sp, #12
 4180              	.LCFI50:
 4181              		.cfi_def_cfa_offset 48
 4182 0006 0446     		mov	r4, r0
 4183 0008 8846     		mov	r8, r1
 4184 000a 1646     		mov	r6, r2
 4185 000c 9946     		mov	r9, r3
 4186              	.LVL577:
2766:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
2767:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD clst, sect;
2768:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT wcnt, cc;
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 132


2769:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const BYTE *wbuff = (const BYTE*)buff;
2770:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE csect;
2771:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2772:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2773:Middlewares/Third_Party/FatFs/Src/ff.c **** 	*bw = 0;	/* Clear write byte counter */
 4187              		.loc 1 2773 0
 4188 000e 0023     		movs	r3, #0
 4189              	.LVL578:
 4190 0010 C9F80030 		str	r3, [r9]
2774:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2775:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = validate(fp);						/* Check validity */
 4191              		.loc 1 2775 0
 4192 0014 FFF7FEFF 		bl	validate
 4193              	.LVL579:
2776:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
 4194              		.loc 1 2776 0
 4195 0018 0190     		str	r0, [sp, #4]
 4196 001a 0028     		cmp	r0, #0
 4197 001c 40F0F480 		bne	.L390
2777:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fp->err)							/* Check error */
 4198              		.loc 1 2777 0
 4199 0020 94F80732 		ldrb	r3, [r4, #519]	@ zero_extendqisi2
 4200 0024 002B     		cmp	r3, #0
 4201 0026 40F0EE80 		bne	.L413
2778:Middlewares/Third_Party/FatFs/Src/ff.c **** 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
2779:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!(fp->flag & FA_WRITE))				/* Check access mode */
 4202              		.loc 1 2779 0
 4203 002a 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 4204 002e 13F0020F 		tst	r3, #2
 4205 0032 00F0ED80 		beq	.L414
2780:Middlewares/Third_Party/FatFs/Src/ff.c **** 		LEAVE_FF(fp->fs, FR_DENIED);
2781:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fp->fptr + btw < fp->fptr) btw = 0;	/* File size cannot reach 4GB */
 4206              		.loc 1 2781 0
 4207 0036 D4F80832 		ldr	r3, [r4, #520]
 4208 003a F342     		cmn	r3, r6
 4209 003c 74D3     		bcc	.L410
 4210 003e 0026     		movs	r6, #0
 4211              	.LVL580:
 4212 0040 72E0     		b	.L410
 4213              	.LVL581:
 4214              	.L421:
2782:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2783:Middlewares/Third_Party/FatFs/Src/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
2784:Middlewares/Third_Party/FatFs/Src/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
2785:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
2786:Middlewares/Third_Party/FatFs/Src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
2787:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
2788:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
2789:Middlewares/Third_Party/FatFs/Src/ff.c **** 					clst = fp->sclust;		/* Follow from the origin */
2790:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (clst == 0)			/* When no cluster is allocated, */
2791:Middlewares/Third_Party/FatFs/Src/ff.c **** 						clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
 4215              		.loc 1 2791 0
 4216 0042 0021     		movs	r1, #0
 4217 0044 FFF7FEFF 		bl	create_chain
 4218              	.LVL582:
 4219 0048 0346     		mov	r3, r0
 4220              	.LVL583:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 133


 4221 004a 86E0     		b	.L396
 4222              	.LVL584:
 4223              	.L395:
2792:Middlewares/Third_Party/FatFs/Src/ff.c **** 				} else {					/* Middle or end of the file */
2793:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_FASTSEEK
2794:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (fp->cltbl)
2795:Middlewares/Third_Party/FatFs/Src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
2796:Middlewares/Third_Party/FatFs/Src/ff.c **** 					else
2797:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2798:Middlewares/Third_Party/FatFs/Src/ff.c **** 						clst = create_chain(fp->fs, fp->clust);	/* Follow or stretch cluster chain on the FAT */
 4224              		.loc 1 2798 0
 4225 004c D4F81412 		ldr	r1, [r4, #532]
 4226 0050 FFF7FEFF 		bl	create_chain
 4227              	.LVL585:
 4228 0054 0346     		mov	r3, r0
 4229              	.LVL586:
 4230 0056 80E0     		b	.L396
 4231              	.LVL587:
 4232              	.L422:
2799:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
2800:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
2801:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 4233              		.loc 1 2801 0 discriminator 1
 4234 0058 0223     		movs	r3, #2
 4235              	.LVL588:
 4236 005a 84F80732 		strb	r3, [r4, #519]
 4237 005e 0193     		str	r3, [sp, #4]
 4238 0060 D2E0     		b	.L390
 4239              	.LVL589:
 4240              	.L423:
2802:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 4241              		.loc 1 2802 0 discriminator 1
 4242 0062 0123     		movs	r3, #1
 4243              	.LVL590:
 4244 0064 84F80732 		strb	r3, [r4, #519]
 4245 0068 0193     		str	r3, [sp, #4]
 4246 006a CDE0     		b	.L390
 4247              	.L424:
2803:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
2804:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (fp->sclust == 0) fp->sclust = clst;	/* Set start cluster if the first write */
2805:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
2806:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_TINY
2807:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (fp->fs->winsect == fp->dsect && sync_window(fp->fs))	/* Write-back sector cache */
2808:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ABORT(fp->fs, FR_DISK_ERR);
2809:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
2810:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (fp->flag & FA__DIRTY) {		/* Write-back sector cache */
2811:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
 4248              		.loc 1 2811 0
 4249 006c D4F80002 		ldr	r0, [r4, #512]
 4250 0070 0123     		movs	r3, #1
 4251 0072 D4F81822 		ldr	r2, [r4, #536]
 4252 0076 2146     		mov	r1, r4
 4253 0078 90F80102 		ldrb	r0, [r0, #513]	@ zero_extendqisi2
 4254 007c FFF7FEFF 		bl	disk_write
 4255              	.LVL591:
 4256 0080 30B9     		cbnz	r0, .L418
2812:Middlewares/Third_Party/FatFs/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 134


2813:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fp->flag &= ~FA__DIRTY;
 4257              		.loc 1 2813 0
 4258 0082 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 4259 0086 23F04003 		bic	r3, r3, #64
 4260 008a 84F80632 		strb	r3, [r4, #518]
 4261 008e 7AE0     		b	.L400
 4262              	.L418:
2812:Middlewares/Third_Party/FatFs/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 4263              		.loc 1 2812 0
 4264 0090 0123     		movs	r3, #1
 4265 0092 84F80732 		strb	r3, [r4, #519]
 4266 0096 0193     		str	r3, [sp, #4]
 4267 0098 B6E0     		b	.L390
 4268              	.LVL592:
 4269              	.L425:
2814:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
2815:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2816:Middlewares/Third_Party/FatFs/Src/ff.c **** 			sect = clust2sect(fp->fs, fp->clust);	/* Get current sector */
2817:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 4270              		.loc 1 2817 0 discriminator 1
 4271 009a 0223     		movs	r3, #2
 4272 009c 84F80732 		strb	r3, [r4, #519]
 4273 00a0 0193     		str	r3, [sp, #4]
 4274 00a2 B1E0     		b	.L390
 4275              	.LVL593:
 4276              	.L405:
2818:Middlewares/Third_Party/FatFs/Src/ff.c **** 			sect += csect;
2819:Middlewares/Third_Party/FatFs/Src/ff.c **** 			cc = btw / SS(fp->fs);			/* When remaining bytes >= sector size, */
2820:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (cc) {						/* Write maximum contiguous sectors directly */
2821:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
2822:Middlewares/Third_Party/FatFs/Src/ff.c **** 					cc = fp->fs->csize - csect;
2823:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (disk_write(fp->fs->drv, wbuff, sect, cc) != RES_OK)
2824:Middlewares/Third_Party/FatFs/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
2825:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_MINIMIZE <= 2
2826:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_TINY
2827:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (fp->fs->winsect - sect < cc) {	/* Refill sector cache if it gets invalidated by the direct 
2828:Middlewares/Third_Party/FatFs/Src/ff.c **** 					mem_cpy(fp->fs->win.d8, wbuff + ((fp->fs->winsect - sect) * SS(fp->fs)), SS(fp->fs));
2829:Middlewares/Third_Party/FatFs/Src/ff.c **** 					fp->fs->wflag = 0;
2830:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
2831:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
2832:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (fp->dsect - sect < cc) { /* Refill sector cache if it gets invalidated by the direct write 
 4277              		.loc 1 2832 0
 4278 00a4 D4F81812 		ldr	r1, [r4, #536]
 4279 00a8 A1EB0A01 		sub	r1, r1, r10
 4280 00ac A942     		cmp	r1, r5
 4281 00ae 01D3     		bcc	.L419
 4282              	.L406:
2833:Middlewares/Third_Party/FatFs/Src/ff.c **** 					mem_cpy(fp->buf.d8, wbuff + ((fp->dsect - sect) * SS(fp->fs)), SS(fp->fs));
2834:Middlewares/Third_Party/FatFs/Src/ff.c **** 					fp->flag &= ~FA__DIRTY;
2835:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
2836:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2837:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2838:Middlewares/Third_Party/FatFs/Src/ff.c **** 				wcnt = SS(fp->fs) * cc;		/* Number of bytes transferred */
 4283              		.loc 1 2838 0
 4284 00b0 6D02     		lsls	r5, r5, #9
 4285              	.LVL594:
2839:Middlewares/Third_Party/FatFs/Src/ff.c **** 				continue;
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 135


 4286              		.loc 1 2839 0
 4287 00b2 2DE0     		b	.L407
 4288              	.LVL595:
 4289              	.L419:
2833:Middlewares/Third_Party/FatFs/Src/ff.c **** 					mem_cpy(fp->buf.d8, wbuff + ((fp->dsect - sect) * SS(fp->fs)), SS(fp->fs));
 4290              		.loc 1 2833 0
 4291 00b4 4FF40072 		mov	r2, #512
 4292 00b8 08EB4121 		add	r1, r8, r1, lsl #9
 4293 00bc 2046     		mov	r0, r4
 4294 00be FFF7FEFF 		bl	mem_cpy
 4295              	.LVL596:
2834:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
 4296              		.loc 1 2834 0
 4297 00c2 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 4298 00c6 23F04003 		bic	r3, r3, #64
 4299 00ca 84F80632 		strb	r3, [r4, #518]
 4300 00ce EFE7     		b	.L406
 4301              	.L403:
2840:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
2841:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_TINY
2842:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (fp->fptr >= fp->fsize) {	/* Avoid silly cache filling at growing edge */
2843:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (sync_window(fp->fs)) ABORT(fp->fs, FR_DISK_ERR);
2844:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fp->fs->winsect = sect;
2845:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
2846:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
2847:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
 4302              		.loc 1 2847 0
 4303 00d0 D4F81832 		ldr	r3, [r4, #536]
 4304 00d4 5345     		cmp	r3, r10
 4305 00d6 05D0     		beq	.L408
2848:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (fp->fptr < fp->fsize &&
 4306              		.loc 1 2848 0
 4307 00d8 D4F80822 		ldr	r2, [r4, #520]
 4308 00dc D4F80C32 		ldr	r3, [r4, #524]
 4309 00e0 9A42     		cmp	r2, r3
 4310 00e2 73D3     		bcc	.L420
 4311              	.L408:
2849:Middlewares/Third_Party/FatFs/Src/ff.c **** 					disk_read(fp->fs->drv, fp->buf.d8, sect, 1) != RES_OK)
2850:Middlewares/Third_Party/FatFs/Src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
2851:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
2852:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2853:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->dsect = sect;
 4312              		.loc 1 2853 0
 4313 00e4 C4F818A2 		str	r10, [r4, #536]
 4314              	.LVL597:
 4315              	.L393:
2854:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
2855:Middlewares/Third_Party/FatFs/Src/ff.c **** 		wcnt = SS(fp->fs) - ((UINT)fp->fptr % SS(fp->fs));/* Put partial sector into file I/O buffer */
 4316              		.loc 1 2855 0
 4317 00e8 D4F80802 		ldr	r0, [r4, #520]
 4318 00ec C0F30800 		ubfx	r0, r0, #0, #9
 4319 00f0 C0F50075 		rsb	r5, r0, #512
 4320              	.LVL598:
2856:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (wcnt > btw) wcnt = btw;
 4321              		.loc 1 2856 0
 4322 00f4 AE42     		cmp	r6, r5
 4323 00f6 00D2     		bcs	.L409
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 136


 4324 00f8 3546     		mov	r5, r6
 4325              	.LVL599:
 4326              	.L409:
2857:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_TINY
2858:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (move_window(fp->fs, fp->dsect) != FR_OK)	/* Move sector window */
2859:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ABORT(fp->fs, FR_DISK_ERR);
2860:Middlewares/Third_Party/FatFs/Src/ff.c **** 		mem_cpy(&fp->fs->win.d8[fp->fptr % SS(fp->fs)], wbuff, wcnt);	/* Fit partial sector */
2861:Middlewares/Third_Party/FatFs/Src/ff.c **** 		fp->fs->wflag = 1;
2862:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
2863:Middlewares/Third_Party/FatFs/Src/ff.c **** 		mem_cpy(&fp->buf.d8[fp->fptr % SS(fp->fs)], wbuff, wcnt);	/* Fit partial sector */
 4327              		.loc 1 2863 0
 4328 00fa 2A46     		mov	r2, r5
 4329 00fc 4146     		mov	r1, r8
 4330 00fe 2044     		add	r0, r0, r4
 4331 0100 FFF7FEFF 		bl	mem_cpy
 4332              	.LVL600:
2864:Middlewares/Third_Party/FatFs/Src/ff.c **** 		fp->flag |= FA__DIRTY;
 4333              		.loc 1 2864 0
 4334 0104 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 4335 0108 43F04003 		orr	r3, r3, #64
 4336 010c 84F80632 		strb	r3, [r4, #518]
 4337              	.L407:
2784:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 4338              		.loc 1 2784 0
 4339 0110 A844     		add	r8, r8, r5
 4340              	.LVL601:
 4341 0112 D4F80832 		ldr	r3, [r4, #520]
 4342 0116 2B44     		add	r3, r3, r5
 4343 0118 C4F80832 		str	r3, [r4, #520]
 4344 011c D9F80030 		ldr	r3, [r9]
 4345 0120 2B44     		add	r3, r3, r5
 4346 0122 C9F80030 		str	r3, [r9]
 4347 0126 761B     		subs	r6, r6, r5
 4348              	.LVL602:
 4349              	.L410:
2783:Middlewares/Third_Party/FatFs/Src/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 4350              		.loc 1 2783 0
 4351 0128 002E     		cmp	r6, #0
 4352 012a 5DD0     		beq	.L397
2785:Middlewares/Third_Party/FatFs/Src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 4353              		.loc 1 2785 0
 4354 012c D4F80832 		ldr	r3, [r4, #520]
 4355 0130 C3F30802 		ubfx	r2, r3, #0, #9
 4356 0134 002A     		cmp	r2, #0
 4357 0136 D7D1     		bne	.L393
2786:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
 4358              		.loc 1 2786 0
 4359 0138 D4F80002 		ldr	r0, [r4, #512]
 4360 013c 90F80272 		ldrb	r7, [r0, #514]	@ zero_extendqisi2
 4361 0140 013F     		subs	r7, r7, #1
 4362 0142 FFB2     		uxtb	r7, r7
 4363              	.LVL603:
2787:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 4364              		.loc 1 2787 0
 4365 0144 17EA5327 		ands	r7, r7, r3, lsr #9
 4366              	.LVL604:
 4367 0148 17D1     		bne	.L394
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 137


2788:Middlewares/Third_Party/FatFs/Src/ff.c **** 					clst = fp->sclust;		/* Follow from the origin */
 4368              		.loc 1 2788 0
 4369 014a 002B     		cmp	r3, #0
 4370 014c 7FF47EAF 		bne	.L395
2789:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (clst == 0)			/* When no cluster is allocated, */
 4371              		.loc 1 2789 0
 4372 0150 D4F81032 		ldr	r3, [r4, #528]
 4373              	.LVL605:
2790:Middlewares/Third_Party/FatFs/Src/ff.c **** 						clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
 4374              		.loc 1 2790 0
 4375 0154 002B     		cmp	r3, #0
 4376 0156 3FF474AF 		beq	.L421
 4377              	.L396:
2800:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 4378              		.loc 1 2800 0
 4379 015a 002B     		cmp	r3, #0
 4380 015c 44D0     		beq	.L397
2801:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 4381              		.loc 1 2801 0
 4382 015e 012B     		cmp	r3, #1
 4383 0160 3FF47AAF 		beq	.L422
2802:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 4384              		.loc 1 2802 0
 4385 0164 B3F1FF3F 		cmp	r3, #-1
 4386 0168 3FF47BAF 		beq	.L423
2803:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (fp->sclust == 0) fp->sclust = clst;	/* Set start cluster if the first write */
 4387              		.loc 1 2803 0
 4388 016c C4F81432 		str	r3, [r4, #532]
2804:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 4389              		.loc 1 2804 0
 4390 0170 D4F81022 		ldr	r2, [r4, #528]
 4391 0174 0AB9     		cbnz	r2, .L394
2804:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 4392              		.loc 1 2804 0 is_stmt 0 discriminator 1
 4393 0176 C4F81032 		str	r3, [r4, #528]
 4394              	.LVL606:
 4395              	.L394:
2810:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
 4396              		.loc 1 2810 0 is_stmt 1
 4397 017a 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 4398 017e 13F0400F 		tst	r3, #64
 4399 0182 7FF473AF 		bne	.L424
 4400              	.L400:
2816:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
 4401              		.loc 1 2816 0
 4402 0186 D4F800B2 		ldr	fp, [r4, #512]
 4403 018a D4F81412 		ldr	r1, [r4, #532]
 4404 018e 5846     		mov	r0, fp
 4405 0190 FFF7FEFF 		bl	clust2sect
 4406              	.LVL607:
2817:Middlewares/Third_Party/FatFs/Src/ff.c **** 			sect += csect;
 4407              		.loc 1 2817 0
 4408 0194 8246     		mov	r10, r0
 4409 0196 0028     		cmp	r0, #0
 4410 0198 3FF47FAF 		beq	.L425
2818:Middlewares/Third_Party/FatFs/Src/ff.c **** 			cc = btw / SS(fp->fs);			/* When remaining bytes >= sector size, */
 4411              		.loc 1 2818 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 138


 4412 019c BA44     		add	r10, r10, r7
 4413              	.LVL608:
2820:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
 4414              		.loc 1 2820 0
 4415 019e 750A     		lsrs	r5, r6, #9
 4416              	.LVL609:
 4417 01a0 96D0     		beq	.L403
2821:Middlewares/Third_Party/FatFs/Src/ff.c **** 					cc = fp->fs->csize - csect;
 4418              		.loc 1 2821 0
 4419 01a2 7B19     		adds	r3, r7, r5
 4420 01a4 9BF80222 		ldrb	r2, [fp, #514]	@ zero_extendqisi2
 4421 01a8 9342     		cmp	r3, r2
 4422 01aa 00D9     		bls	.L404
2822:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (disk_write(fp->fs->drv, wbuff, sect, cc) != RES_OK)
 4423              		.loc 1 2822 0
 4424 01ac D51B     		subs	r5, r2, r7
 4425              	.LVL610:
 4426              	.L404:
2823:Middlewares/Third_Party/FatFs/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 4427              		.loc 1 2823 0
 4428 01ae 2B46     		mov	r3, r5
 4429 01b0 5246     		mov	r2, r10
 4430 01b2 4146     		mov	r1, r8
 4431 01b4 9BF80102 		ldrb	r0, [fp, #513]	@ zero_extendqisi2
 4432 01b8 FFF7FEFF 		bl	disk_write
 4433              	.LVL611:
 4434 01bc 0028     		cmp	r0, #0
 4435 01be 3FF471AF 		beq	.L405
2824:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_MINIMIZE <= 2
 4436              		.loc 1 2824 0
 4437 01c2 0123     		movs	r3, #1
 4438 01c4 84F80732 		strb	r3, [r4, #519]
 4439 01c8 0193     		str	r3, [sp, #4]
 4440 01ca 1DE0     		b	.L390
 4441              	.L420:
2849:Middlewares/Third_Party/FatFs/Src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
 4442              		.loc 1 2849 0 discriminator 1
 4443 01cc 0123     		movs	r3, #1
 4444 01ce 5246     		mov	r2, r10
 4445 01d0 2146     		mov	r1, r4
 4446 01d2 9BF80102 		ldrb	r0, [fp, #513]	@ zero_extendqisi2
 4447 01d6 FFF7FEFF 		bl	disk_read
 4448              	.LVL612:
2848:Middlewares/Third_Party/FatFs/Src/ff.c **** 					disk_read(fp->fs->drv, fp->buf.d8, sect, 1) != RES_OK)
 4449              		.loc 1 2848 0 discriminator 1
 4450 01da 0028     		cmp	r0, #0
 4451 01dc 82D0     		beq	.L408
2850:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 4452              		.loc 1 2850 0
 4453 01de 0123     		movs	r3, #1
 4454 01e0 84F80732 		strb	r3, [r4, #519]
 4455 01e4 0193     		str	r3, [sp, #4]
 4456 01e6 0FE0     		b	.L390
 4457              	.LVL613:
 4458              	.L397:
2865:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2866:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 139


2867:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2868:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
 4459              		.loc 1 2868 0
 4460 01e8 D4F80832 		ldr	r3, [r4, #520]
 4461 01ec D4F80C22 		ldr	r2, [r4, #524]
 4462 01f0 9342     		cmp	r3, r2
 4463 01f2 01D9     		bls	.L412
 4464              		.loc 1 2868 0 is_stmt 0 discriminator 1
 4465 01f4 C4F80C32 		str	r3, [r4, #524]
 4466              	.L412:
2869:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 4467              		.loc 1 2869 0 is_stmt 1
 4468 01f8 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 4469 01fc 43F02003 		orr	r3, r3, #32
 4470 0200 84F80632 		strb	r3, [r4, #518]
2870:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2871:Middlewares/Third_Party/FatFs/Src/ff.c **** 	LEAVE_FF(fp->fs, FR_OK);
 4471              		.loc 1 2871 0
 4472 0204 00E0     		b	.L390
 4473              	.LVL614:
 4474              	.L413:
2778:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!(fp->flag & FA_WRITE))				/* Check access mode */
 4475              		.loc 1 2778 0
 4476 0206 0193     		str	r3, [sp, #4]
 4477              	.LVL615:
 4478              	.L390:
2872:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 4479              		.loc 1 2872 0
 4480 0208 0198     		ldr	r0, [sp, #4]
 4481 020a 03B0     		add	sp, sp, #12
 4482              	.LCFI51:
 4483              		.cfi_remember_state
 4484              		.cfi_def_cfa_offset 36
 4485              		@ sp needed
 4486 020c BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 4487              	.LVL616:
 4488              	.L414:
 4489              	.LCFI52:
 4490              		.cfi_restore_state
2780:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fp->fptr + btw < fp->fptr) btw = 0;	/* File size cannot reach 4GB */
 4491              		.loc 1 2780 0
 4492 0210 0723     		movs	r3, #7
 4493 0212 0193     		str	r3, [sp, #4]
 4494 0214 F8E7     		b	.L390
 4495              		.cfi_endproc
 4496              	.LFE97:
 4498              		.section	.text.f_sync,"ax",%progbits
 4499              		.align	1
 4500              		.global	f_sync
 4501              		.syntax unified
 4502              		.thumb
 4503              		.thumb_func
 4504              		.fpu softvfp
 4506              	f_sync:
 4507              	.LFB98:
2873:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2874:Middlewares/Third_Party/FatFs/Src/ff.c **** 
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 140


2875:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2876:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2877:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
2878:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Synchronize the File                                                  */
2879:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
2880:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2881:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_sync (
2882:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FIL* fp		/* Pointer to the file object */
2883:Middlewares/Third_Party/FatFs/Src/ff.c **** )
2884:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 4508              		.loc 1 2884 0
 4509              		.cfi_startproc
 4510              		@ args = 0, pretend = 0, frame = 0
 4511              		@ frame_needed = 0, uses_anonymous_args = 0
 4512              	.LVL617:
 4513 0000 38B5     		push	{r3, r4, r5, lr}
 4514              	.LCFI53:
 4515              		.cfi_def_cfa_offset 16
 4516              		.cfi_offset 3, -16
 4517              		.cfi_offset 4, -12
 4518              		.cfi_offset 5, -8
 4519              		.cfi_offset 14, -4
 4520 0002 0446     		mov	r4, r0
2885:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
2886:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD tm;
2887:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE *dir;
2888:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2889:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2890:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = validate(fp);					/* Check validity of the object */
 4521              		.loc 1 2890 0
 4522 0004 FFF7FEFF 		bl	validate
 4523              	.LVL618:
2891:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
 4524              		.loc 1 2891 0
 4525 0008 0346     		mov	r3, r0
 4526 000a 08BB     		cbnz	r0, .L427
2892:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (fp->flag & FA__WRITTEN) {	/* Has the file been written? */
 4527              		.loc 1 2892 0
 4528 000c 94F80622 		ldrb	r2, [r4, #518]	@ zero_extendqisi2
 4529 0010 12F0200F 		tst	r2, #32
 4530 0014 1CD0     		beq	.L427
2893:Middlewares/Third_Party/FatFs/Src/ff.c **** 			/* Write-back dirty buffer */
2894:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_TINY
2895:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (fp->flag & FA__DIRTY) {
 4531              		.loc 1 2895 0
 4532 0016 12F0400F 		tst	r2, #64
 4533 001a 11D0     		beq	.L428
2896:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
 4534              		.loc 1 2896 0
 4535 001c D4F80002 		ldr	r0, [r4, #512]
 4536              	.LVL619:
 4537 0020 0123     		movs	r3, #1
 4538 0022 D4F81822 		ldr	r2, [r4, #536]
 4539 0026 2146     		mov	r1, r4
 4540 0028 90F80102 		ldrb	r0, [r0, #513]	@ zero_extendqisi2
 4541 002c FFF7FEFF 		bl	disk_write
 4542              	.LVL620:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 141


 4543 0030 0028     		cmp	r0, #0
 4544 0032 41D1     		bne	.L429
2897:Middlewares/Third_Party/FatFs/Src/ff.c **** 					LEAVE_FF(fp->fs, FR_DISK_ERR);
2898:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fp->flag &= ~FA__DIRTY;
 4545              		.loc 1 2898 0
 4546 0034 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 4547 0038 23F04003 		bic	r3, r3, #64
 4548 003c 84F80632 		strb	r3, [r4, #518]
 4549              	.L428:
2899:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
2900:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2901:Middlewares/Third_Party/FatFs/Src/ff.c **** 			/* Update the directory entry */
2902:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = move_window(fp->fs, fp->dir_sect);
 4550              		.loc 1 2902 0
 4551 0040 D4F81C12 		ldr	r1, [r4, #540]
 4552 0044 D4F80002 		ldr	r0, [r4, #512]
 4553 0048 FFF7FEFF 		bl	move_window
 4554              	.LVL621:
2903:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_OK) {
 4555              		.loc 1 2903 0
 4556 004c 0346     		mov	r3, r0
 4557 004e 08B1     		cbz	r0, .L431
 4558              	.LVL622:
 4559              	.L427:
2904:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dir = fp->dir_ptr;
2905:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dir[DIR_Attr] |= AM_ARC;					/* Set archive bit */
2906:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ST_DWORD(dir + DIR_FileSize, fp->fsize);	/* Update file size */
2907:Middlewares/Third_Party/FatFs/Src/ff.c **** 				st_clust(dir, fp->sclust);					/* Update start cluster */
2908:Middlewares/Third_Party/FatFs/Src/ff.c **** 				tm = GET_FATTIME();							/* Update updated time */
2909:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ST_DWORD(dir + DIR_WrtTime, tm);
2910:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ST_WORD(dir + DIR_LstAccDate, 0);
2911:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fp->flag &= ~FA__WRITTEN;
2912:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fp->fs->wflag = 1;
2913:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = sync_fs(fp->fs);
2914:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
2915:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
2916:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
2917:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2918:Middlewares/Third_Party/FatFs/Src/ff.c **** 	LEAVE_FF(fp->fs, res);
2919:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 4560              		.loc 1 2919 0
 4561 0050 1846     		mov	r0, r3
 4562 0052 38BD     		pop	{r3, r4, r5, pc}
 4563              	.LVL623:
 4564              	.L431:
2904:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dir = fp->dir_ptr;
 4565              		.loc 1 2904 0
 4566 0054 D4F82052 		ldr	r5, [r4, #544]
 4567              	.LVL624:
2905:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ST_DWORD(dir + DIR_FileSize, fp->fsize);	/* Update file size */
 4568              		.loc 1 2905 0
 4569 0058 EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 4570 005a 43F02003 		orr	r3, r3, #32
 4571 005e EB72     		strb	r3, [r5, #11]
2906:Middlewares/Third_Party/FatFs/Src/ff.c **** 				st_clust(dir, fp->sclust);					/* Update start cluster */
 4572              		.loc 1 2906 0
 4573 0060 94F80C32 		ldrb	r3, [r4, #524]	@ zero_extendqisi2
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 142


 4574 0064 2B77     		strb	r3, [r5, #28]
 4575 0066 B4F80C32 		ldrh	r3, [r4, #524]
 4576 006a 1B0A     		lsrs	r3, r3, #8
 4577 006c 6B77     		strb	r3, [r5, #29]
 4578 006e 94F80E32 		ldrb	r3, [r4, #526]	@ zero_extendqisi2
 4579 0072 AB77     		strb	r3, [r5, #30]
 4580 0074 94F80F32 		ldrb	r3, [r4, #527]	@ zero_extendqisi2
 4581 0078 EB77     		strb	r3, [r5, #31]
2907:Middlewares/Third_Party/FatFs/Src/ff.c **** 				tm = GET_FATTIME();							/* Update updated time */
 4582              		.loc 1 2907 0
 4583 007a D4F81012 		ldr	r1, [r4, #528]
 4584 007e 2846     		mov	r0, r5
 4585              	.LVL625:
 4586 0080 FFF7FEFF 		bl	st_clust
 4587              	.LVL626:
2909:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ST_WORD(dir + DIR_LstAccDate, 0);
 4588              		.loc 1 2909 0
 4589 0084 0023     		movs	r3, #0
 4590 0086 AB75     		strb	r3, [r5, #22]
 4591 0088 EB75     		strb	r3, [r5, #23]
 4592 008a C422     		movs	r2, #196
 4593 008c 2A76     		strb	r2, [r5, #24]
 4594 008e 4622     		movs	r2, #70
 4595 0090 6A76     		strb	r2, [r5, #25]
2910:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fp->flag &= ~FA__WRITTEN;
 4596              		.loc 1 2910 0
 4597 0092 AB74     		strb	r3, [r5, #18]
 4598 0094 EB74     		strb	r3, [r5, #19]
2911:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fp->fs->wflag = 1;
 4599              		.loc 1 2911 0
 4600 0096 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 4601 009a 23F02003 		bic	r3, r3, #32
 4602 009e 84F80632 		strb	r3, [r4, #518]
2912:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = sync_fs(fp->fs);
 4603              		.loc 1 2912 0
 4604 00a2 D4F80032 		ldr	r3, [r4, #512]
 4605 00a6 0122     		movs	r2, #1
 4606 00a8 83F80422 		strb	r2, [r3, #516]
2913:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 4607              		.loc 1 2913 0
 4608 00ac D4F80002 		ldr	r0, [r4, #512]
 4609 00b0 FFF7FEFF 		bl	sync_fs
 4610              	.LVL627:
 4611 00b4 0346     		mov	r3, r0
 4612              	.LVL628:
 4613 00b6 CBE7     		b	.L427
 4614              	.LVL629:
 4615              	.L429:
2897:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fp->flag &= ~FA__DIRTY;
 4616              		.loc 1 2897 0
 4617 00b8 0123     		movs	r3, #1
 4618 00ba C9E7     		b	.L427
 4619              		.cfi_endproc
 4620              	.LFE98:
 4622              		.section	.text.f_close,"ax",%progbits
 4623              		.align	1
 4624              		.global	f_close
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 143


 4625              		.syntax unified
 4626              		.thumb
 4627              		.thumb_func
 4628              		.fpu softvfp
 4630              	f_close:
 4631              	.LFB99:
2920:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2921:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* !_FS_READONLY */
2922:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2923:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2924:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2925:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2926:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
2927:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Close File                                                            */
2928:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
2929:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2930:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_close (
2931:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FIL *fp		/* Pointer to the file object to be closed */
2932:Middlewares/Third_Party/FatFs/Src/ff.c **** )
2933:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 4632              		.loc 1 2933 0
 4633              		.cfi_startproc
 4634              		@ args = 0, pretend = 0, frame = 0
 4635              		@ frame_needed = 0, uses_anonymous_args = 0
 4636              	.LVL630:
 4637 0000 10B5     		push	{r4, lr}
 4638              	.LCFI54:
 4639              		.cfi_def_cfa_offset 8
 4640              		.cfi_offset 4, -8
 4641              		.cfi_offset 14, -4
 4642 0002 0446     		mov	r4, r0
2934:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
2935:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2936:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2937:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
2938:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = f_sync(fp);					/* Flush cached data */
 4643              		.loc 1 2938 0
 4644 0004 FFF7FEFF 		bl	f_sync
 4645              	.LVL631:
2939:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK)
 4646              		.loc 1 2939 0
 4647 0008 0346     		mov	r3, r0
 4648 000a 08B1     		cbz	r0, .L435
 4649              	.L433:
 4650              	.LVL632:
2940:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2941:Middlewares/Third_Party/FatFs/Src/ff.c **** 	{
2942:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = validate(fp);				/* Lock volume */
2943:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {
2944:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_REENTRANT
2945:Middlewares/Third_Party/FatFs/Src/ff.c **** 			FATFS *fs = fp->fs;
2946:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2947:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_LOCK
2948:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = dec_lock(fp->lockid);	/* Decrement file open counter */
2949:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_OK)
2950:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2951:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fp->fs = 0;				/* Invalidate file object */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 144


2952:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_REENTRANT
2953:Middlewares/Third_Party/FatFs/Src/ff.c **** 			unlock_fs(fs, FR_OK);		/* Unlock volume */
2954:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2955:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
2956:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
2957:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return res;
2958:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 4651              		.loc 1 2958 0
 4652 000c 1846     		mov	r0, r3
 4653 000e 10BD     		pop	{r4, pc}
 4654              	.LVL633:
 4655              	.L435:
2942:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {
 4656              		.loc 1 2942 0
 4657 0010 2046     		mov	r0, r4
 4658              	.LVL634:
 4659 0012 FFF7FEFF 		bl	validate
 4660              	.LVL635:
2943:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_REENTRANT
 4661              		.loc 1 2943 0
 4662 0016 0346     		mov	r3, r0
 4663 0018 0028     		cmp	r0, #0
 4664 001a F7D1     		bne	.L433
2951:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_REENTRANT
 4665              		.loc 1 2951 0
 4666 001c 0022     		movs	r2, #0
 4667 001e C4F80022 		str	r2, [r4, #512]
 4668 0022 F3E7     		b	.L433
 4669              		.cfi_endproc
 4670              	.LFE99:
 4672              		.section	.text.f_lseek,"ax",%progbits
 4673              		.align	1
 4674              		.global	f_lseek
 4675              		.syntax unified
 4676              		.thumb
 4677              		.thumb_func
 4678              		.fpu softvfp
 4680              	f_lseek:
 4681              	.LFB100:
2959:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2960:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2961:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2962:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2963:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
2964:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Change Current Directory or Current Drive, Get Current Directory      */
2965:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
2966:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2967:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_RPATH >= 1
2968:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _VOLUMES >= 2
2969:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_chdrive (
2970:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR* path		/* Drive number */
2971:Middlewares/Third_Party/FatFs/Src/ff.c **** )
2972:Middlewares/Third_Party/FatFs/Src/ff.c **** {
2973:Middlewares/Third_Party/FatFs/Src/ff.c **** 	int vol;
2974:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2975:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2976:Middlewares/Third_Party/FatFs/Src/ff.c **** 	vol = get_ldnumber(&path);
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 145


2977:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
2978:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2979:Middlewares/Third_Party/FatFs/Src/ff.c **** 	CurrVol = (BYTE)vol;
2980:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2981:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return FR_OK;
2982:Middlewares/Third_Party/FatFs/Src/ff.c **** }
2983:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
2984:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2985:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2986:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_chdir (
2987:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR* path	/* Pointer to the directory path */
2988:Middlewares/Third_Party/FatFs/Src/ff.c **** )
2989:Middlewares/Third_Party/FatFs/Src/ff.c **** {
2990:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
2991:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR dj;
2992:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DEFINE_NAMEBUF;
2993:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2994:Middlewares/Third_Party/FatFs/Src/ff.c **** 
2995:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Get logical drive number */
2996:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = find_volume(&dj.fs, &path, 0);
2997:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
2998:Middlewares/Third_Party/FatFs/Src/ff.c **** 		INIT_BUF(dj);
2999:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the path */
3000:Middlewares/Third_Party/FatFs/Src/ff.c **** 		FREE_BUF();
3001:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {					/* Follow completed */
3002:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!dj.dir) {
3003:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dj.fs->cdir = dj.sclust;	/* Start directory itself */
3004:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {
3005:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (dj.dir[DIR_Attr] & AM_DIR)	/* Reached to the directory */
3006:Middlewares/Third_Party/FatFs/Src/ff.c **** 					dj.fs->cdir = ld_clust(dj.fs, dj.dir);
3007:Middlewares/Third_Party/FatFs/Src/ff.c **** 				else
3008:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = FR_NO_PATH;		/* Reached but a file */
3009:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3010:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
3011:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
3012:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
3013:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3014:Middlewares/Third_Party/FatFs/Src/ff.c **** 	LEAVE_FF(dj.fs, res);
3015:Middlewares/Third_Party/FatFs/Src/ff.c **** }
3016:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3017:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3018:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_RPATH >= 2
3019:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_getcwd (
3020:Middlewares/Third_Party/FatFs/Src/ff.c **** 	TCHAR* buff,	/* Pointer to the directory path */
3021:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT len		/* Size of path */
3022:Middlewares/Third_Party/FatFs/Src/ff.c **** )
3023:Middlewares/Third_Party/FatFs/Src/ff.c **** {
3024:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
3025:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR dj;
3026:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT i, n;
3027:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD ccl;
3028:Middlewares/Third_Party/FatFs/Src/ff.c **** 	TCHAR *tp;
3029:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FILINFO fno;
3030:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DEFINE_NAMEBUF;
3031:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3032:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3033:Middlewares/Third_Party/FatFs/Src/ff.c **** 	*buff = 0;
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 146


3034:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Get logical drive number */
3035:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = find_volume(&dj.fs, (const TCHAR**)&buff, 0);	/* Get current volume */
3036:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
3037:Middlewares/Third_Party/FatFs/Src/ff.c **** 		INIT_BUF(dj);
3038:Middlewares/Third_Party/FatFs/Src/ff.c **** 		i = len;			/* Bottom of buffer (directory stack base) */
3039:Middlewares/Third_Party/FatFs/Src/ff.c **** 		dj.sclust = dj.fs->cdir;			/* Start to follow upper directory from current directory */
3040:Middlewares/Third_Party/FatFs/Src/ff.c **** 		while ((ccl = dj.sclust) != 0) {	/* Repeat while current directory is a sub-directory */
3041:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = dir_sdi(&dj, 1);			/* Get parent directory */
3042:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) break;
3043:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = dir_read(&dj, 0);
3044:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) break;
3045:Middlewares/Third_Party/FatFs/Src/ff.c **** 			dj.sclust = ld_clust(dj.fs, dj.dir);	/* Goto parent directory */
3046:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = dir_sdi(&dj, 0);
3047:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) break;
3048:Middlewares/Third_Party/FatFs/Src/ff.c **** 			do {							/* Find the entry links to the child directory */
3049:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = dir_read(&dj, 0);
3050:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (res != FR_OK) break;
3051:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (ccl == ld_clust(dj.fs, dj.dir)) break;	/* Found the entry */
3052:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = dir_next(&dj, 0);	
3053:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} while (res == FR_OK);
3054:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_NO_FILE) res = FR_INT_ERR;/* It cannot be 'not found'. */
3055:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) break;
3056:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN
3057:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fno.lfname = buff;
3058:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fno.lfsize = i;
3059:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3060:Middlewares/Third_Party/FatFs/Src/ff.c **** 			get_fileinfo(&dj, &fno);		/* Get the directory name and push it to the buffer */
3061:Middlewares/Third_Party/FatFs/Src/ff.c **** 			tp = fno.fname;
3062:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN
3063:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (*buff) tp = buff;
3064:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3065:Middlewares/Third_Party/FatFs/Src/ff.c **** 			for (n = 0; tp[n]; n++) ;
3066:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (i < n + 3) {
3067:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_NOT_ENOUGH_CORE; break;
3068:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3069:Middlewares/Third_Party/FatFs/Src/ff.c **** 			while (n) buff[--i] = tp[--n];
3070:Middlewares/Third_Party/FatFs/Src/ff.c **** 			buff[--i] = '/';
3071:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
3072:Middlewares/Third_Party/FatFs/Src/ff.c **** 		tp = buff;
3073:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {
3074:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _VOLUMES >= 2
3075:Middlewares/Third_Party/FatFs/Src/ff.c **** 			*tp++ = '0' + CurrVol;			/* Put drive number */
3076:Middlewares/Third_Party/FatFs/Src/ff.c **** 			*tp++ = ':';
3077:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3078:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (i == len) {					/* Root-directory */
3079:Middlewares/Third_Party/FatFs/Src/ff.c **** 				*tp++ = '/';
3080:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {						/* Sub-directroy */
3081:Middlewares/Third_Party/FatFs/Src/ff.c **** 				do		/* Add stacked path str */
3082:Middlewares/Third_Party/FatFs/Src/ff.c **** 					*tp++ = buff[i++];
3083:Middlewares/Third_Party/FatFs/Src/ff.c **** 				while (i < len);
3084:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3085:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
3086:Middlewares/Third_Party/FatFs/Src/ff.c **** 		*tp = 0;
3087:Middlewares/Third_Party/FatFs/Src/ff.c **** 		FREE_BUF();
3088:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
3089:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3090:Middlewares/Third_Party/FatFs/Src/ff.c **** 	LEAVE_FF(dj.fs, res);
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 147


3091:Middlewares/Third_Party/FatFs/Src/ff.c **** }
3092:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* _FS_RPATH >= 2 */
3093:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* _FS_RPATH >= 1 */
3094:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3095:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3096:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3097:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_MINIMIZE <= 2
3098:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3099:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Seek File R/W Pointer                                                 */
3100:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3101:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3102:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_lseek (
3103:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FIL* fp,		/* Pointer to the file object */
3104:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD ofs		/* File pointer from top of file */
3105:Middlewares/Third_Party/FatFs/Src/ff.c **** )
3106:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 4682              		.loc 1 3106 0
 4683              		.cfi_startproc
 4684              		@ args = 0, pretend = 0, frame = 0
 4685              		@ frame_needed = 0, uses_anonymous_args = 0
 4686              	.LVL636:
 4687 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 4688              	.LCFI55:
 4689              		.cfi_def_cfa_offset 24
 4690              		.cfi_offset 4, -24
 4691              		.cfi_offset 5, -20
 4692              		.cfi_offset 6, -16
 4693              		.cfi_offset 7, -12
 4694              		.cfi_offset 8, -8
 4695              		.cfi_offset 14, -4
 4696 0004 0446     		mov	r4, r0
 4697 0006 0D46     		mov	r5, r1
3107:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
3108:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD clst, bcs, nsect, ifptr;
3109:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_FASTSEEK
3110:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD cl, pcl, ncl, tcl, dsc, tlen, ulen, *tbl;
3111:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3112:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3113:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3114:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = validate(fp);					/* Check validity of the object */
 4698              		.loc 1 3114 0
 4699 0008 FFF7FEFF 		bl	validate
 4700              	.LVL637:
3115:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
 4701              		.loc 1 3115 0
 4702 000c 0646     		mov	r6, r0
 4703 000e 0028     		cmp	r0, #0
 4704 0010 40F0D780 		bne	.L437
3116:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fp->err)						/* Check error */
 4705              		.loc 1 3116 0
 4706 0014 94F80732 		ldrb	r3, [r4, #519]	@ zero_extendqisi2
 4707 0018 002B     		cmp	r3, #0
 4708 001a 40F0D180 		bne	.L458
3117:Middlewares/Third_Party/FatFs/Src/ff.c **** 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
3118:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3119:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_FASTSEEK
3120:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fp->cltbl) {	/* Fast seek */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 148


3121:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (ofs == CREATE_LINKMAP) {	/* Create CLMT */
3122:Middlewares/Third_Party/FatFs/Src/ff.c **** 			tbl = fp->cltbl;
3123:Middlewares/Third_Party/FatFs/Src/ff.c **** 			tlen = *tbl++; ulen = 2;	/* Given table size and required table size */
3124:Middlewares/Third_Party/FatFs/Src/ff.c **** 			cl = fp->sclust;			/* Top of the chain */
3125:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (cl) {
3126:Middlewares/Third_Party/FatFs/Src/ff.c **** 				do {
3127:Middlewares/Third_Party/FatFs/Src/ff.c **** 					/* Get a fragment */
3128:Middlewares/Third_Party/FatFs/Src/ff.c **** 					tcl = cl; ncl = 0; ulen += 2;	/* Top, length and used items */
3129:Middlewares/Third_Party/FatFs/Src/ff.c **** 					do {
3130:Middlewares/Third_Party/FatFs/Src/ff.c **** 						pcl = cl; ncl++;
3131:Middlewares/Third_Party/FatFs/Src/ff.c **** 						cl = get_fat(fp->fs, cl);
3132:Middlewares/Third_Party/FatFs/Src/ff.c **** 						if (cl <= 1) ABORT(fp->fs, FR_INT_ERR);
3133:Middlewares/Third_Party/FatFs/Src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
3134:Middlewares/Third_Party/FatFs/Src/ff.c **** 					} while (cl == pcl + 1);
3135:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
3136:Middlewares/Third_Party/FatFs/Src/ff.c **** 						*tbl++ = ncl; *tbl++ = tcl;
3137:Middlewares/Third_Party/FatFs/Src/ff.c **** 					}
3138:Middlewares/Third_Party/FatFs/Src/ff.c **** 				} while (cl < fp->fs->n_fatent);	/* Repeat until end of chain */
3139:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3140:Middlewares/Third_Party/FatFs/Src/ff.c **** 			*fp->cltbl = ulen;	/* Number of items used */
3141:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (ulen <= tlen)
3142:Middlewares/Third_Party/FatFs/Src/ff.c **** 				*tbl = 0;		/* Terminate table */
3143:Middlewares/Third_Party/FatFs/Src/ff.c **** 			else
3144:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_NOT_ENOUGH_CORE;	/* Given table size is smaller than required */
3145:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3146:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {						/* Fast seek */
3147:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (ofs > fp->fsize)		/* Clip offset at the file size */
3148:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ofs = fp->fsize;
3149:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->fptr = ofs;				/* Set file pointer */
3150:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (ofs) {
3151:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fp->clust = clmt_clust(fp, ofs - 1);
3152:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dsc = clust2sect(fp->fs, fp->clust);
3153:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (!dsc) ABORT(fp->fs, FR_INT_ERR);
3154:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dsc += (ofs - 1) / SS(fp->fs) & (fp->fs->csize - 1);
3155:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (fp->fptr % SS(fp->fs) && dsc != fp->dsect) {	/* Refill sector cache if needed */
3156:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_TINY
3157:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
3158:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (fp->flag & FA__DIRTY) {		/* Write-back dirty sector cache */
3159:Middlewares/Third_Party/FatFs/Src/ff.c **** 						if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
3160:Middlewares/Third_Party/FatFs/Src/ff.c **** 							ABORT(fp->fs, FR_DISK_ERR);
3161:Middlewares/Third_Party/FatFs/Src/ff.c **** 						fp->flag &= ~FA__DIRTY;
3162:Middlewares/Third_Party/FatFs/Src/ff.c **** 					}
3163:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3164:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (disk_read(fp->fs->drv, fp->buf.d8, dsc, 1) != RES_OK)	/* Load current sector */
3165:Middlewares/Third_Party/FatFs/Src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
3166:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3167:Middlewares/Third_Party/FatFs/Src/ff.c **** 					fp->dsect = dsc;
3168:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
3169:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3170:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
3171:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else
3172:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3173:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3174:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Normal Seek */
3175:Middlewares/Third_Party/FatFs/Src/ff.c **** 	{
3176:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (ofs > fp->fsize					/* In read-only mode, clip offset with the file size */
 4709              		.loc 1 3176 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 149


 4710 001e D4F80C32 		ldr	r3, [r4, #524]
 4711 0022 AB42     		cmp	r3, r5
 4712 0024 05D2     		bcs	.L438
3177:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
3178:Middlewares/Third_Party/FatFs/Src/ff.c **** 			 && !(fp->flag & FA_WRITE)
 4713              		.loc 1 3178 0
 4714 0026 94F80622 		ldrb	r2, [r4, #518]	@ zero_extendqisi2
 4715 002a 12F0020F 		tst	r2, #2
 4716 002e 00D1     		bne	.L438
3179:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3180:Middlewares/Third_Party/FatFs/Src/ff.c **** 			) ofs = fp->fsize;
 4717              		.loc 1 3180 0
 4718 0030 1D46     		mov	r5, r3
 4719              	.LVL638:
 4720              	.L438:
3181:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3182:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ifptr = fp->fptr;
 4721              		.loc 1 3182 0
 4722 0032 D4F80872 		ldr	r7, [r4, #520]
 4723              	.LVL639:
3183:Middlewares/Third_Party/FatFs/Src/ff.c **** 		fp->fptr = nsect = 0;
 4724              		.loc 1 3183 0
 4725 0036 0023     		movs	r3, #0
 4726 0038 C4F80832 		str	r3, [r4, #520]
3184:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (ofs) {
 4727              		.loc 1 3184 0
 4728 003c 0DB3     		cbz	r5, .L439
3185:Middlewares/Third_Party/FatFs/Src/ff.c **** 			bcs = (DWORD)fp->fs->csize * SS(fp->fs);	/* Cluster size (byte) */
 4729              		.loc 1 3185 0
 4730 003e D4F80002 		ldr	r0, [r4, #512]
 4731              	.LVL640:
 4732 0042 90F80282 		ldrb	r8, [r0, #514]	@ zero_extendqisi2
 4733 0046 4FEA4828 		lsl	r8, r8, #9
 4734              	.LVL641:
3186:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (ifptr > 0 &&
 4735              		.loc 1 3186 0
 4736 004a 87B1     		cbz	r7, .L440
3187:Middlewares/Third_Party/FatFs/Src/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 4737              		.loc 1 3187 0 discriminator 1
 4738 004c 6B1E     		subs	r3, r5, #1
 4739 004e B3FBF8F3 		udiv	r3, r3, r8
 4740 0052 013F     		subs	r7, r7, #1
 4741              	.LVL642:
 4742 0054 B7FBF8F2 		udiv	r2, r7, r8
3186:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (ifptr > 0 &&
 4743              		.loc 1 3186 0 discriminator 1
 4744 0058 9342     		cmp	r3, r2
 4745 005a 08D3     		bcc	.L440
3188:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fp->fptr = (ifptr - 1) & ~(bcs - 1);	/* start from the current cluster */
 4746              		.loc 1 3188 0
 4747 005c C8F10003 		rsb	r3, r8, #0
 4748 0060 1F40     		ands	r7, r7, r3
 4749              	.LVL643:
 4750 0062 C4F80872 		str	r7, [r4, #520]
3189:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ofs -= fp->fptr;
 4751              		.loc 1 3189 0
 4752 0066 EF1B     		subs	r7, r5, r7
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 150


 4753              	.LVL644:
3190:Middlewares/Third_Party/FatFs/Src/ff.c **** 				clst = fp->clust;
 4754              		.loc 1 3190 0
 4755 0068 D4F81452 		ldr	r5, [r4, #532]
 4756              	.LVL645:
 4757 006c 07E0     		b	.L441
 4758              	.LVL646:
 4759              	.L440:
3191:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {									/* When seek to back cluster, */
3192:Middlewares/Third_Party/FatFs/Src/ff.c **** 				clst = fp->sclust;						/* start from the first cluster */
 4760              		.loc 1 3192 0
 4761 006e D4F81032 		ldr	r3, [r4, #528]
 4762              	.LVL647:
3193:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
3194:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (clst == 0) {						/* If no cluster chain, create a new chain */
 4763              		.loc 1 3194 0
 4764 0072 002B     		cmp	r3, #0
 4765 0074 3FD0     		beq	.L463
 4766              	.L442:
3195:Middlewares/Third_Party/FatFs/Src/ff.c **** 					clst = create_chain(fp->fs, 0);
3196:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
3197:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
3198:Middlewares/Third_Party/FatFs/Src/ff.c **** 					fp->sclust = clst;
3199:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
3200:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3201:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fp->clust = clst;
 4767              		.loc 1 3201 0
 4768 0076 C4F81432 		str	r3, [r4, #532]
 4769 007a 2F46     		mov	r7, r5
 4770 007c 1D46     		mov	r5, r3
 4771              	.LVL648:
 4772              	.L441:
3202:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3203:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (clst != 0) {
 4773              		.loc 1 3203 0
 4774 007e 002D     		cmp	r5, #0
 4775 0080 67D1     		bne	.L445
 4776              	.LVL649:
 4777              	.L439:
3204:Middlewares/Third_Party/FatFs/Src/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
3205:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
3206:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (fp->flag & FA_WRITE) {			/* Check if in write mode or not */
3207:Middlewares/Third_Party/FatFs/Src/ff.c **** 						clst = create_chain(fp->fs, clst);	/* Force stretch if in write mode */
3208:Middlewares/Third_Party/FatFs/Src/ff.c **** 						if (clst == 0) {				/* When disk gets full, clip file size */
3209:Middlewares/Third_Party/FatFs/Src/ff.c **** 							ofs = bcs; break;
3210:Middlewares/Third_Party/FatFs/Src/ff.c **** 						}
3211:Middlewares/Third_Party/FatFs/Src/ff.c **** 					} else
3212:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3213:Middlewares/Third_Party/FatFs/Src/ff.c **** 						clst = get_fat(fp->fs, clst);	/* Follow cluster chain if not in write mode */
3214:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
3215:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (clst <= 1 || clst >= fp->fs->n_fatent) ABORT(fp->fs, FR_INT_ERR);
3216:Middlewares/Third_Party/FatFs/Src/ff.c **** 					fp->clust = clst;
3217:Middlewares/Third_Party/FatFs/Src/ff.c **** 					fp->fptr += bcs;
3218:Middlewares/Third_Party/FatFs/Src/ff.c **** 					ofs -= bcs;
3219:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
3220:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fp->fptr += ofs;
3221:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (ofs % SS(fp->fs)) {
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 151


3222:Middlewares/Third_Party/FatFs/Src/ff.c **** 					nsect = clust2sect(fp->fs, clst);	/* Current sector */
3223:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (!nsect) ABORT(fp->fs, FR_INT_ERR);
3224:Middlewares/Third_Party/FatFs/Src/ff.c **** 					nsect += ofs / SS(fp->fs);
3225:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
3226:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3227:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
3228:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (fp->fptr % SS(fp->fs) && nsect != fp->dsect) {	/* Fill sector cache if needed */
 4778              		.loc 1 3228 0
 4779 0082 D4F80832 		ldr	r3, [r4, #520]
 4780 0086 C3F30803 		ubfx	r3, r3, #0, #9
 4781 008a 2BB3     		cbz	r3, .L454
 4782              		.loc 1 3228 0 is_stmt 0 discriminator 1
 4783 008c D4F81822 		ldr	r2, [r4, #536]
 4784 0090 AA42     		cmp	r2, r5
 4785 0092 21D0     		beq	.L454
3229:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_TINY
3230:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
3231:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (fp->flag & FA__DIRTY) {			/* Write-back dirty sector cache */
 4786              		.loc 1 3231 0 is_stmt 1
 4787 0094 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 4788 0098 13F0400F 		tst	r3, #64
 4789 009c 0FD0     		beq	.L455
3232:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
 4790              		.loc 1 3232 0
 4791 009e D4F80002 		ldr	r0, [r4, #512]
 4792 00a2 0123     		movs	r3, #1
 4793 00a4 2146     		mov	r1, r4
 4794 00a6 90F80102 		ldrb	r0, [r0, #513]	@ zero_extendqisi2
 4795 00aa FFF7FEFF 		bl	disk_write
 4796              	.LVL650:
 4797 00ae 0028     		cmp	r0, #0
 4798 00b0 7ED1     		bne	.L464
3233:Middlewares/Third_Party/FatFs/Src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
3234:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fp->flag &= ~FA__DIRTY;
 4799              		.loc 1 3234 0
 4800 00b2 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 4801 00b6 23F04003 		bic	r3, r3, #64
 4802 00ba 84F80632 		strb	r3, [r4, #518]
 4803              	.L455:
3235:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3236:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3237:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (disk_read(fp->fs->drv, fp->buf.d8, nsect, 1) != RES_OK)	/* Fill sector cache */
 4804              		.loc 1 3237 0
 4805 00be D4F80002 		ldr	r0, [r4, #512]
 4806 00c2 0123     		movs	r3, #1
 4807 00c4 2A46     		mov	r2, r5
 4808 00c6 2146     		mov	r1, r4
 4809 00c8 90F80102 		ldrb	r0, [r0, #513]	@ zero_extendqisi2
 4810 00cc FFF7FEFF 		bl	disk_read
 4811              	.LVL651:
 4812 00d0 0028     		cmp	r0, #0
 4813 00d2 71D1     		bne	.L465
3238:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ABORT(fp->fs, FR_DISK_ERR);
3239:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3240:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->dsect = nsect;
 4814              		.loc 1 3240 0
 4815 00d4 C4F81852 		str	r5, [r4, #536]
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 152


 4816              	.L454:
3241:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
3242:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
3243:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (fp->fptr > fp->fsize) {			/* Set file change flag if the file size is extended */
 4817              		.loc 1 3243 0
 4818 00d8 D4F80832 		ldr	r3, [r4, #520]
 4819 00dc D4F80C22 		ldr	r2, [r4, #524]
 4820 00e0 9342     		cmp	r3, r2
 4821 00e2 6ED9     		bls	.L437
3244:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->fsize = fp->fptr;
 4822              		.loc 1 3244 0
 4823 00e4 C4F80C32 		str	r3, [r4, #524]
3245:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->flag |= FA__WRITTEN;
 4824              		.loc 1 3245 0
 4825 00e8 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 4826 00ec 43F02003 		orr	r3, r3, #32
 4827 00f0 84F80632 		strb	r3, [r4, #518]
 4828 00f4 65E0     		b	.L437
 4829              	.LVL652:
 4830              	.L463:
3195:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 4831              		.loc 1 3195 0
 4832 00f6 0021     		movs	r1, #0
 4833 00f8 FFF7FEFF 		bl	create_chain
 4834              	.LVL653:
 4835 00fc 0346     		mov	r3, r0
 4836              	.LVL654:
3196:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 4837              		.loc 1 3196 0
 4838 00fe 0128     		cmp	r0, #1
 4839 0100 05D0     		beq	.L466
3197:Middlewares/Third_Party/FatFs/Src/ff.c **** 					fp->sclust = clst;
 4840              		.loc 1 3197 0
 4841 0102 B0F1FF3F 		cmp	r0, #-1
 4842 0106 06D0     		beq	.L467
3198:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
 4843              		.loc 1 3198 0
 4844 0108 C4F81002 		str	r0, [r4, #528]
 4845 010c B3E7     		b	.L442
 4846              	.L466:
3196:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 4847              		.loc 1 3196 0 discriminator 1
 4848 010e 0226     		movs	r6, #2
 4849 0110 84F80762 		strb	r6, [r4, #519]
 4850 0114 55E0     		b	.L437
 4851              	.L467:
3197:Middlewares/Third_Party/FatFs/Src/ff.c **** 					fp->sclust = clst;
 4852              		.loc 1 3197 0 discriminator 1
 4853 0116 0126     		movs	r6, #1
 4854 0118 84F80762 		strb	r6, [r4, #519]
 4855 011c 51E0     		b	.L437
 4856              	.LVL655:
 4857              	.L446:
3213:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 4858              		.loc 1 3213 0
 4859 011e 2946     		mov	r1, r5
 4860 0120 D4F80002 		ldr	r0, [r4, #512]
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 153


 4861 0124 FFF7FEFF 		bl	get_fat
 4862              	.LVL656:
 4863 0128 0546     		mov	r5, r0
 4864              	.LVL657:
 4865              	.L448:
3214:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (clst <= 1 || clst >= fp->fs->n_fatent) ABORT(fp->fs, FR_INT_ERR);
 4866              		.loc 1 3214 0
 4867 012a B5F1FF3F 		cmp	r5, #-1
 4868 012e 31D0     		beq	.L468
3215:Middlewares/Third_Party/FatFs/Src/ff.c **** 					fp->clust = clst;
 4869              		.loc 1 3215 0
 4870 0130 012D     		cmp	r5, #1
 4871 0132 33D9     		bls	.L450
3215:Middlewares/Third_Party/FatFs/Src/ff.c **** 					fp->clust = clst;
 4872              		.loc 1 3215 0 is_stmt 0 discriminator 2
 4873 0134 D4F80032 		ldr	r3, [r4, #512]
 4874 0138 D3F81432 		ldr	r3, [r3, #532]
 4875 013c AB42     		cmp	r3, r5
 4876 013e 2DD9     		bls	.L450
3216:Middlewares/Third_Party/FatFs/Src/ff.c **** 					fp->fptr += bcs;
 4877              		.loc 1 3216 0 is_stmt 1
 4878 0140 C4F81452 		str	r5, [r4, #532]
3217:Middlewares/Third_Party/FatFs/Src/ff.c **** 					ofs -= bcs;
 4879              		.loc 1 3217 0
 4880 0144 D4F80832 		ldr	r3, [r4, #520]
 4881 0148 4344     		add	r3, r3, r8
 4882 014a C4F80832 		str	r3, [r4, #520]
3218:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
 4883              		.loc 1 3218 0
 4884 014e A7EB0807 		sub	r7, r7, r8
 4885              	.LVL658:
 4886              	.L445:
3204:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
 4887              		.loc 1 3204 0
 4888 0152 4745     		cmp	r7, r8
 4889 0154 0DD9     		bls	.L447
3206:Middlewares/Third_Party/FatFs/Src/ff.c **** 						clst = create_chain(fp->fs, clst);	/* Force stretch if in write mode */
 4890              		.loc 1 3206 0
 4891 0156 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 4892 015a 13F0020F 		tst	r3, #2
 4893 015e DED0     		beq	.L446
3207:Middlewares/Third_Party/FatFs/Src/ff.c **** 						if (clst == 0) {				/* When disk gets full, clip file size */
 4894              		.loc 1 3207 0
 4895 0160 2946     		mov	r1, r5
 4896 0162 D4F80002 		ldr	r0, [r4, #512]
 4897 0166 FFF7FEFF 		bl	create_chain
 4898              	.LVL659:
3208:Middlewares/Third_Party/FatFs/Src/ff.c **** 							ofs = bcs; break;
 4899              		.loc 1 3208 0
 4900 016a 0546     		mov	r5, r0
 4901 016c 0028     		cmp	r0, #0
 4902 016e DCD1     		bne	.L448
3209:Middlewares/Third_Party/FatFs/Src/ff.c **** 						}
 4903              		.loc 1 3209 0
 4904 0170 4746     		mov	r7, r8
 4905              	.LVL660:
 4906              	.L447:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 154


3220:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (ofs % SS(fp->fs)) {
 4907              		.loc 1 3220 0
 4908 0172 D4F80832 		ldr	r3, [r4, #520]
 4909 0176 3B44     		add	r3, r3, r7
 4910 0178 C4F80832 		str	r3, [r4, #520]
3221:Middlewares/Third_Party/FatFs/Src/ff.c **** 					nsect = clust2sect(fp->fs, clst);	/* Current sector */
 4911              		.loc 1 3221 0
 4912 017c C7F30803 		ubfx	r3, r7, #0, #9
 4913 0180 A3B1     		cbz	r3, .L461
3222:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (!nsect) ABORT(fp->fs, FR_INT_ERR);
 4914              		.loc 1 3222 0
 4915 0182 2946     		mov	r1, r5
 4916 0184 D4F80002 		ldr	r0, [r4, #512]
 4917 0188 FFF7FEFF 		bl	clust2sect
 4918              	.LVL661:
3223:Middlewares/Third_Party/FatFs/Src/ff.c **** 					nsect += ofs / SS(fp->fs);
 4919              		.loc 1 3223 0
 4920 018c 50B1     		cbz	r0, .L469
3224:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
 4921              		.loc 1 3224 0
 4922 018e 00EB5725 		add	r5, r0, r7, lsr #9
 4923              	.LVL662:
 4924 0192 76E7     		b	.L439
 4925              	.LVL663:
 4926              	.L468:
3214:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (clst <= 1 || clst >= fp->fs->n_fatent) ABORT(fp->fs, FR_INT_ERR);
 4927              		.loc 1 3214 0 discriminator 1
 4928 0194 0126     		movs	r6, #1
 4929 0196 84F80762 		strb	r6, [r4, #519]
 4930 019a 12E0     		b	.L437
 4931              	.L450:
3215:Middlewares/Third_Party/FatFs/Src/ff.c **** 					fp->clust = clst;
 4932              		.loc 1 3215 0 discriminator 3
 4933 019c 0226     		movs	r6, #2
 4934 019e 84F80762 		strb	r6, [r4, #519]
 4935 01a2 0EE0     		b	.L437
 4936              	.LVL664:
 4937              	.L469:
3223:Middlewares/Third_Party/FatFs/Src/ff.c **** 					nsect += ofs / SS(fp->fs);
 4938              		.loc 1 3223 0 discriminator 1
 4939 01a4 0226     		movs	r6, #2
 4940 01a6 84F80762 		strb	r6, [r4, #519]
 4941 01aa 0AE0     		b	.L437
 4942              	.LVL665:
 4943              	.L461:
3183:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (ofs) {
 4944              		.loc 1 3183 0
 4945 01ac 0025     		movs	r5, #0
 4946              	.LVL666:
 4947 01ae 68E7     		b	.L439
 4948              	.LVL667:
 4949              	.L464:
3233:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fp->flag &= ~FA__DIRTY;
 4950              		.loc 1 3233 0
 4951 01b0 0126     		movs	r6, #1
 4952 01b2 84F80762 		strb	r6, [r4, #519]
 4953 01b6 04E0     		b	.L437
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 155


 4954              	.L465:
3238:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 4955              		.loc 1 3238 0
 4956 01b8 0126     		movs	r6, #1
 4957 01ba 84F80762 		strb	r6, [r4, #519]
 4958 01be 00E0     		b	.L437
 4959              	.LVL668:
 4960              	.L458:
3117:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 4961              		.loc 1 3117 0
 4962 01c0 1E46     		mov	r6, r3
 4963              	.LVL669:
 4964              	.L437:
3246:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
3247:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3248:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
3249:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3250:Middlewares/Third_Party/FatFs/Src/ff.c **** 	LEAVE_FF(fp->fs, res);
3251:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 4965              		.loc 1 3251 0
 4966 01c2 3046     		mov	r0, r6
 4967 01c4 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 4968              		.cfi_endproc
 4969              	.LFE100:
 4971              		.section	.text.f_opendir,"ax",%progbits
 4972              		.align	1
 4973              		.global	f_opendir
 4974              		.syntax unified
 4975              		.thumb
 4976              		.thumb_func
 4977              		.fpu softvfp
 4979              	f_opendir:
 4980              	.LFB101:
3252:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3253:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3254:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3255:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_MINIMIZE <= 1
3256:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3257:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Create a Directory Object                                             */
3258:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3259:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3260:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_opendir (
3261:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR* dp,			/* Pointer to directory object to create */
3262:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR* path	/* Pointer to the directory path */
3263:Middlewares/Third_Party/FatFs/Src/ff.c **** )
3264:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 4981              		.loc 1 3264 0
 4982              		.cfi_startproc
 4983              		@ args = 0, pretend = 0, frame = 24
 4984              		@ frame_needed = 0, uses_anonymous_args = 0
 4985              	.LVL670:
 4986 0000 10B5     		push	{r4, lr}
 4987              	.LCFI56:
 4988              		.cfi_def_cfa_offset 8
 4989              		.cfi_offset 4, -8
 4990              		.cfi_offset 14, -4
 4991 0002 86B0     		sub	sp, sp, #24
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 156


 4992              	.LCFI57:
 4993              		.cfi_def_cfa_offset 32
 4994 0004 0191     		str	r1, [sp, #4]
3265:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
3266:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FATFS* fs;
3267:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DEFINE_NAMEBUF;
3268:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3269:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3270:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!dp) return FR_INVALID_OBJECT;
 4995              		.loc 1 3270 0
 4996 0006 B0B3     		cbz	r0, .L476
 4997 0008 0446     		mov	r4, r0
3271:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3272:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Get logical drive number */
3273:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = find_volume(&fs, &path, 0);
 4998              		.loc 1 3273 0
 4999 000a 0022     		movs	r2, #0
 5000 000c 01A9     		add	r1, sp, #4
 5001              	.LVL671:
 5002 000e 05A8     		add	r0, sp, #20
 5003              	.LVL672:
 5004 0010 FFF7FEFF 		bl	find_volume
 5005              	.LVL673:
3274:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
 5006              		.loc 1 3274 0
 5007 0014 0346     		mov	r3, r0
 5008 0016 30B1     		cbz	r0, .L480
 5009              	.L472:
3275:Middlewares/Third_Party/FatFs/Src/ff.c **** 		dp->fs = fs;
3276:Middlewares/Third_Party/FatFs/Src/ff.c **** 		INIT_BUF(*dp);
3277:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
3278:Middlewares/Third_Party/FatFs/Src/ff.c **** 		FREE_BUF();
3279:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
3280:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (dp->dir) {						/* It is not the origin directory itself */
3281:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (dp->dir[DIR_Attr] & AM_DIR)	/* The object is a sub directory */
3282:Middlewares/Third_Party/FatFs/Src/ff.c **** 					dp->sclust = ld_clust(fs, dp->dir);
3283:Middlewares/Third_Party/FatFs/Src/ff.c **** 				else							/* The object is a file */
3284:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = FR_NO_PATH;
3285:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3286:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_OK) {
3287:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dp->id = fs->id;
3288:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
3289:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_LOCK
3290:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (res == FR_OK) {
3291:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (dp->sclust) {
3292:Middlewares/Third_Party/FatFs/Src/ff.c **** 						dp->lockid = inc_lock(dp, 0);	/* Lock the sub directory */
3293:Middlewares/Third_Party/FatFs/Src/ff.c **** 						if (!dp->lockid)
3294:Middlewares/Third_Party/FatFs/Src/ff.c **** 							res = FR_TOO_MANY_OPEN_FILES;
3295:Middlewares/Third_Party/FatFs/Src/ff.c **** 					} else {
3296:Middlewares/Third_Party/FatFs/Src/ff.c **** 						dp->lockid = 0;	/* Root directory need not to be locked */
3297:Middlewares/Third_Party/FatFs/Src/ff.c **** 					}
3298:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
3299:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3300:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3301:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
3302:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
3303:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 157


3304:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res != FR_OK) dp->fs = 0;		/* Invalidate the directory object if function faild */
 5010              		.loc 1 3304 0
 5011 0018 13B1     		cbz	r3, .L471
 5012              	.L475:
 5013              		.loc 1 3304 0 is_stmt 0 discriminator 1
 5014 001a 0022     		movs	r2, #0
 5015 001c C4F80022 		str	r2, [r4, #512]
 5016              	.LVL674:
 5017              	.L471:
3305:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3306:Middlewares/Third_Party/FatFs/Src/ff.c **** 	LEAVE_FF(fs, res);
3307:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 5018              		.loc 1 3307 0 is_stmt 1
 5019 0020 1846     		mov	r0, r3
 5020 0022 06B0     		add	sp, sp, #24
 5021              	.LCFI58:
 5022              		.cfi_remember_state
 5023              		.cfi_def_cfa_offset 8
 5024              		@ sp needed
 5025 0024 10BD     		pop	{r4, pc}
 5026              	.LVL675:
 5027              	.L480:
 5028              	.LCFI59:
 5029              		.cfi_restore_state
3275:Middlewares/Third_Party/FatFs/Src/ff.c **** 		dp->fs = fs;
 5030              		.loc 1 3275 0
 5031 0026 059B     		ldr	r3, [sp, #20]
 5032 0028 C4F80032 		str	r3, [r4, #512]
3276:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
 5033              		.loc 1 3276 0
 5034 002c 02AB     		add	r3, sp, #8
 5035 002e C4F81832 		str	r3, [r4, #536]
3277:Middlewares/Third_Party/FatFs/Src/ff.c **** 		FREE_BUF();
 5036              		.loc 1 3277 0
 5037 0032 0199     		ldr	r1, [sp, #4]
 5038 0034 2046     		mov	r0, r4
 5039 0036 FFF7FEFF 		bl	follow_path
 5040              	.LVL676:
3279:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (dp->dir) {						/* It is not the origin directory itself */
 5041              		.loc 1 3279 0
 5042 003a 0346     		mov	r3, r0
 5043 003c A8B9     		cbnz	r0, .L473
3280:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (dp->dir[DIR_Attr] & AM_DIR)	/* The object is a sub directory */
 5044              		.loc 1 3280 0
 5045 003e D4F81412 		ldr	r1, [r4, #532]
 5046 0042 41B1     		cbz	r1, .L474
3281:Middlewares/Third_Party/FatFs/Src/ff.c **** 					dp->sclust = ld_clust(fs, dp->dir);
 5047              		.loc 1 3281 0
 5048 0044 CB7A     		ldrb	r3, [r1, #11]	@ zero_extendqisi2
 5049 0046 13F0100F 		tst	r3, #16
 5050 004a 12D0     		beq	.L477
3282:Middlewares/Third_Party/FatFs/Src/ff.c **** 				else							/* The object is a file */
 5051              		.loc 1 3282 0
 5052 004c 0598     		ldr	r0, [sp, #20]
 5053 004e FFF7FEFF 		bl	ld_clust
 5054              	.LVL677:
 5055 0052 C4F80802 		str	r0, [r4, #520]
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 158


 5056              	.L474:
3287:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
 5057              		.loc 1 3287 0
 5058 0056 059B     		ldr	r3, [sp, #20]
 5059 0058 B3F80632 		ldrh	r3, [r3, #518]
 5060 005c A4F80432 		strh	r3, [r4, #516]	@ movhi
3288:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_LOCK
 5061              		.loc 1 3288 0
 5062 0060 0021     		movs	r1, #0
 5063 0062 2046     		mov	r0, r4
 5064 0064 FFF7FEFF 		bl	dir_sdi
 5065              	.LVL678:
 5066 0068 0346     		mov	r3, r0
 5067              	.L473:
3302:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 5068              		.loc 1 3302 0
 5069 006a 042B     		cmp	r3, #4
 5070 006c D4D1     		bne	.L472
 5071              	.LVL679:
 5072 006e 0523     		movs	r3, #5
 5073 0070 D3E7     		b	.L475
 5074              	.LVL680:
 5075              	.L477:
3284:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 5076              		.loc 1 3284 0
 5077 0072 0523     		movs	r3, #5
 5078 0074 F9E7     		b	.L473
 5079              	.LVL681:
 5080              	.L476:
3270:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 5081              		.loc 1 3270 0
 5082 0076 0923     		movs	r3, #9
 5083 0078 D2E7     		b	.L471
 5084              		.cfi_endproc
 5085              	.LFE101:
 5087              		.section	.text.f_closedir,"ax",%progbits
 5088              		.align	1
 5089              		.global	f_closedir
 5090              		.syntax unified
 5091              		.thumb
 5092              		.thumb_func
 5093              		.fpu softvfp
 5095              	f_closedir:
 5096              	.LFB102:
3308:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3309:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3310:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3311:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3312:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3313:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Close Directory                                                       */
3314:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3315:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3316:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_closedir (
3317:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR *dp		/* Pointer to the directory object to be closed */
3318:Middlewares/Third_Party/FatFs/Src/ff.c **** )
3319:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 5097              		.loc 1 3319 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 159


 5098              		.cfi_startproc
 5099              		@ args = 0, pretend = 0, frame = 0
 5100              		@ frame_needed = 0, uses_anonymous_args = 0
 5101              	.LVL682:
 5102 0000 10B5     		push	{r4, lr}
 5103              	.LCFI60:
 5104              		.cfi_def_cfa_offset 8
 5105              		.cfi_offset 4, -8
 5106              		.cfi_offset 14, -4
 5107 0002 0446     		mov	r4, r0
3320:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
3321:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3322:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3323:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = validate(dp);
 5108              		.loc 1 3323 0
 5109 0004 FFF7FEFF 		bl	validate
 5110              	.LVL683:
3324:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
 5111              		.loc 1 3324 0
 5112 0008 0346     		mov	r3, r0
 5113 000a 10B9     		cbnz	r0, .L482
3325:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_REENTRANT
3326:Middlewares/Third_Party/FatFs/Src/ff.c **** 		FATFS *fs = dp->fs;
3327:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3328:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_LOCK
3329:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (dp->lockid)				/* Decrement sub-directory open counter */
3330:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = dec_lock(dp->lockid);
3331:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK)
3332:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3333:Middlewares/Third_Party/FatFs/Src/ff.c **** 			dp->fs = 0;				/* Invalidate directory object */
 5114              		.loc 1 3333 0
 5115 000c 0022     		movs	r2, #0
 5116 000e C4F80022 		str	r2, [r4, #512]
 5117              	.L482:
3334:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_REENTRANT
3335:Middlewares/Third_Party/FatFs/Src/ff.c **** 		unlock_fs(fs, FR_OK);		/* Unlock volume */
3336:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3337:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
3338:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return res;
3339:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 5118              		.loc 1 3339 0
 5119 0012 1846     		mov	r0, r3
 5120              	.LVL684:
 5121 0014 10BD     		pop	{r4, pc}
 5122              		.cfi_endproc
 5123              	.LFE102:
 5125              		.section	.text.f_readdir,"ax",%progbits
 5126              		.align	1
 5127              		.global	f_readdir
 5128              		.syntax unified
 5129              		.thumb
 5130              		.thumb_func
 5131              		.fpu softvfp
 5133              	f_readdir:
 5134              	.LFB103:
3340:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3341:Middlewares/Third_Party/FatFs/Src/ff.c **** 
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 160


3342:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3343:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3344:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3345:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Read Directory Entries in Sequence                                    */
3346:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3347:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3348:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_readdir (
3349:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR* dp,			/* Pointer to the open directory object */
3350:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FILINFO* fno		/* Pointer to file information to return */
3351:Middlewares/Third_Party/FatFs/Src/ff.c **** )
3352:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 5135              		.loc 1 3352 0
 5136              		.cfi_startproc
 5137              		@ args = 0, pretend = 0, frame = 16
 5138              		@ frame_needed = 0, uses_anonymous_args = 0
 5139              	.LVL685:
 5140 0000 70B5     		push	{r4, r5, r6, lr}
 5141              	.LCFI61:
 5142              		.cfi_def_cfa_offset 16
 5143              		.cfi_offset 4, -16
 5144              		.cfi_offset 5, -12
 5145              		.cfi_offset 6, -8
 5146              		.cfi_offset 14, -4
 5147 0002 84B0     		sub	sp, sp, #16
 5148              	.LCFI62:
 5149              		.cfi_def_cfa_offset 32
 5150 0004 0446     		mov	r4, r0
 5151 0006 0E46     		mov	r6, r1
3353:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
3354:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DEFINE_NAMEBUF;
3355:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3356:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3357:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = validate(dp);						/* Check validity of the object */
 5152              		.loc 1 3357 0
 5153 0008 FFF7FEFF 		bl	validate
 5154              	.LVL686:
3358:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
 5155              		.loc 1 3358 0
 5156 000c 0546     		mov	r5, r0
 5157 000e A8B9     		cbnz	r0, .L485
3359:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (!fno) {
 5158              		.loc 1 3359 0
 5159 0010 BEB1     		cbz	r6, .L492
3360:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = dir_sdi(dp, 0);			/* Rewind the directory object */
3361:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {
3362:Middlewares/Third_Party/FatFs/Src/ff.c **** 			INIT_BUF(*dp);
 5160              		.loc 1 3362 0
 5161 0012 01AB     		add	r3, sp, #4
 5162 0014 C4F81832 		str	r3, [r4, #536]
3363:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = dir_read(dp, 0);			/* Read an item */
 5163              		.loc 1 3363 0
 5164 0018 0021     		movs	r1, #0
 5165 001a 2046     		mov	r0, r4
 5166              	.LVL687:
 5167 001c FFF7FEFF 		bl	dir_read
 5168              	.LVL688:
3364:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_NO_FILE) {		/* Reached end of directory */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 161


 5169              		.loc 1 3364 0
 5170 0020 0428     		cmp	r0, #4
 5171 0022 14D0     		beq	.L493
3365:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dp->sect = 0;
3366:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_OK;
3367:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3368:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_OK) {				/* A valid entry is found */
 5172              		.loc 1 3368 0
 5173 0024 D8B9     		cbnz	r0, .L489
 5174              	.LVL689:
 5175              	.L488:
3369:Middlewares/Third_Party/FatFs/Src/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
 5176              		.loc 1 3369 0
 5177 0026 3146     		mov	r1, r6
 5178 0028 2046     		mov	r0, r4
 5179 002a FFF7FEFF 		bl	get_fileinfo
 5180              	.LVL690:
3370:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = dir_next(dp, 0);		/* Increment index for next */
 5181              		.loc 1 3370 0
 5182 002e 0021     		movs	r1, #0
 5183 0030 2046     		mov	r0, r4
 5184 0032 FFF7FEFF 		bl	dir_next
 5185              	.LVL691:
3371:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (res == FR_NO_FILE) {
 5186              		.loc 1 3371 0
 5187 0036 0428     		cmp	r0, #4
 5188 0038 0DD0     		beq	.L494
3370:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = dir_next(dp, 0);		/* Increment index for next */
 5189              		.loc 1 3370 0
 5190 003a 0546     		mov	r5, r0
 5191              	.LVL692:
 5192              	.L485:
3372:Middlewares/Third_Party/FatFs/Src/ff.c **** 					dp->sect = 0;
3373:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = FR_OK;
3374:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
3375:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3376:Middlewares/Third_Party/FatFs/Src/ff.c **** 			FREE_BUF();
3377:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
3378:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
3379:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3380:Middlewares/Third_Party/FatFs/Src/ff.c **** 	LEAVE_FF(dp->fs, res);
3381:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 5193              		.loc 1 3381 0
 5194 003c 2846     		mov	r0, r5
 5195 003e 04B0     		add	sp, sp, #16
 5196              	.LCFI63:
 5197              		.cfi_remember_state
 5198              		.cfi_def_cfa_offset 16
 5199              		@ sp needed
 5200 0040 70BD     		pop	{r4, r5, r6, pc}
 5201              	.LVL693:
 5202              	.L492:
 5203              	.LCFI64:
 5204              		.cfi_restore_state
3360:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {
 5205              		.loc 1 3360 0
 5206 0042 0021     		movs	r1, #0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 162


 5207 0044 2046     		mov	r0, r4
 5208              	.LVL694:
 5209 0046 FFF7FEFF 		bl	dir_sdi
 5210              	.LVL695:
 5211 004a 0546     		mov	r5, r0
 5212              	.LVL696:
 5213 004c F6E7     		b	.L485
 5214              	.LVL697:
 5215              	.L493:
3365:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_OK;
 5216              		.loc 1 3365 0
 5217 004e 0023     		movs	r3, #0
 5218 0050 C4F81032 		str	r3, [r4, #528]
 5219              	.LVL698:
 5220 0054 E7E7     		b	.L488
 5221              	.LVL699:
 5222              	.L494:
3372:Middlewares/Third_Party/FatFs/Src/ff.c **** 					dp->sect = 0;
 5223              		.loc 1 3372 0
 5224 0056 0023     		movs	r3, #0
 5225 0058 C4F81032 		str	r3, [r4, #528]
 5226              	.LVL700:
 5227 005c EEE7     		b	.L485
 5228              	.LVL701:
 5229              	.L489:
3363:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_NO_FILE) {		/* Reached end of directory */
 5230              		.loc 1 3363 0
 5231 005e 0546     		mov	r5, r0
 5232 0060 ECE7     		b	.L485
 5233              		.cfi_endproc
 5234              	.LFE103:
 5236              		.section	.text.f_stat,"ax",%progbits
 5237              		.align	1
 5238              		.global	f_stat
 5239              		.syntax unified
 5240              		.thumb
 5241              		.thumb_func
 5242              		.fpu softvfp
 5244              	f_stat:
 5245              	.LFB104:
3382:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3383:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3384:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3385:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_FIND
3386:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3387:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Find next file                                                        */
3388:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3389:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3390:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_findnext (
3391:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR* dp,		/* Pointer to the open directory object */
3392:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FILINFO* fno	/* Pointer to the file information structure */
3393:Middlewares/Third_Party/FatFs/Src/ff.c **** )
3394:Middlewares/Third_Party/FatFs/Src/ff.c **** {
3395:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
3396:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3397:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3398:Middlewares/Third_Party/FatFs/Src/ff.c **** 	for (;;) {
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 163


3399:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = f_readdir(dp, fno);		/* Get a directory item */
3400:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res != FR_OK || !fno || !fno->fname[0]) break;	/* Terminate if any error or end of directory 
3401:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN
3402:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (fno->lfname && pattern_matching(dp->pat, fno->lfname, 0, 0)) break;	/* Test for LFN if exist 
3403:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3404:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (pattern_matching(dp->pat, fno->fname, 0, 0)) break;	/* Test for SFN */
3405:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
3406:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return res;
3407:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3408:Middlewares/Third_Party/FatFs/Src/ff.c **** }
3409:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3410:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3411:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3412:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3413:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Find first file                                                       */
3414:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3415:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3416:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_findfirst (
3417:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR* dp,				/* Pointer to the blank directory object */
3418:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FILINFO* fno,			/* Pointer to the file information structure */
3419:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR* path,		/* Pointer to the directory to open */
3420:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR* pattern	/* Pointer to the matching pattern */
3421:Middlewares/Third_Party/FatFs/Src/ff.c **** )
3422:Middlewares/Third_Party/FatFs/Src/ff.c **** {
3423:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
3424:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3425:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3426:Middlewares/Third_Party/FatFs/Src/ff.c **** 	dp->pat = pattern;		/* Save pointer to pattern string */
3427:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = f_opendir(dp, path);		/* Open the target directory */
3428:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK)
3429:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = f_findnext(dp, fno);	/* Find the first item */
3430:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return res;
3431:Middlewares/Third_Party/FatFs/Src/ff.c **** }
3432:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3433:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif	/* _USE_FIND */
3434:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3435:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3436:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3437:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_MINIMIZE == 0
3438:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3439:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Get File Status                                                       */
3440:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3441:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3442:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_stat (
3443:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR* path,	/* Pointer to the file path */
3444:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FILINFO* fno		/* Pointer to file information to return */
3445:Middlewares/Third_Party/FatFs/Src/ff.c **** )
3446:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 5246              		.loc 1 3446 0
 5247              		.cfi_startproc
 5248              		@ args = 0, pretend = 0, frame = 560
 5249              		@ frame_needed = 0, uses_anonymous_args = 0
 5250              	.LVL702:
 5251 0000 30B5     		push	{r4, r5, lr}
 5252              	.LCFI65:
 5253              		.cfi_def_cfa_offset 12
 5254              		.cfi_offset 4, -12
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 164


 5255              		.cfi_offset 5, -8
 5256              		.cfi_offset 14, -4
 5257 0002 ADF50D7D 		sub	sp, sp, #564
 5258              	.LCFI66:
 5259              		.cfi_def_cfa_offset 576
 5260 0006 0190     		str	r0, [sp, #4]
 5261 0008 0D46     		mov	r5, r1
3447:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
3448:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR dj;
3449:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DEFINE_NAMEBUF;
3450:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3451:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3452:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Get logical drive number */
3453:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = find_volume(&dj.fs, &path, 0);
 5262              		.loc 1 3453 0
 5263 000a 0022     		movs	r2, #0
 5264 000c 01A9     		add	r1, sp, #4
 5265              	.LVL703:
 5266 000e 85A8     		add	r0, sp, #532
 5267              	.LVL704:
 5268 0010 FFF7FEFF 		bl	find_volume
 5269              	.LVL705:
3454:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
 5270              		.loc 1 3454 0
 5271 0014 0446     		mov	r4, r0
 5272 0016 18B1     		cbz	r0, .L499
 5273              	.LVL706:
 5274              	.L496:
3455:Middlewares/Third_Party/FatFs/Src/ff.c **** 		INIT_BUF(dj);
3456:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
3457:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
3458:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (dj.dir) {		/* Found an object */
3459:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (fno) get_fileinfo(&dj, fno);
3460:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {			/* It is root directory */
3461:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_INVALID_NAME;
3462:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3463:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
3464:Middlewares/Third_Party/FatFs/Src/ff.c **** 		FREE_BUF();
3465:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
3466:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3467:Middlewares/Third_Party/FatFs/Src/ff.c **** 	LEAVE_FF(dj.fs, res);
3468:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 5275              		.loc 1 3468 0
 5276 0018 2046     		mov	r0, r4
 5277 001a 0DF50D7D 		add	sp, sp, #564
 5278              	.LCFI67:
 5279              		.cfi_remember_state
 5280              		.cfi_def_cfa_offset 12
 5281              		@ sp needed
 5282 001e 30BD     		pop	{r4, r5, pc}
 5283              	.LVL707:
 5284              	.L499:
 5285              	.LCFI68:
 5286              		.cfi_restore_state
3455:Middlewares/Third_Party/FatFs/Src/ff.c **** 		INIT_BUF(dj);
 5287              		.loc 1 3455 0
 5288 0020 02AB     		add	r3, sp, #8
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 165


 5289 0022 8B93     		str	r3, [sp, #556]
3456:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
 5290              		.loc 1 3456 0
 5291 0024 0199     		ldr	r1, [sp, #4]
 5292 0026 05A8     		add	r0, sp, #20
 5293              	.LVL708:
 5294 0028 FFF7FEFF 		bl	follow_path
 5295              	.LVL709:
3457:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (dj.dir) {		/* Found an object */
 5296              		.loc 1 3457 0
 5297 002c 0446     		mov	r4, r0
 5298 002e 0028     		cmp	r0, #0
 5299 0030 F2D1     		bne	.L496
3458:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (fno) get_fileinfo(&dj, fno);
 5300              		.loc 1 3458 0
 5301 0032 8A9B     		ldr	r3, [sp, #552]
 5302 0034 33B1     		cbz	r3, .L497
3459:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {			/* It is root directory */
 5303              		.loc 1 3459 0
 5304 0036 002D     		cmp	r5, #0
 5305 0038 EED0     		beq	.L496
3459:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {			/* It is root directory */
 5306              		.loc 1 3459 0 is_stmt 0 discriminator 1
 5307 003a 2946     		mov	r1, r5
 5308 003c 05A8     		add	r0, sp, #20
 5309              	.LVL710:
 5310 003e FFF7FEFF 		bl	get_fileinfo
 5311              	.LVL711:
 5312 0042 E9E7     		b	.L496
 5313              	.LVL712:
 5314              	.L497:
3461:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 5315              		.loc 1 3461 0 is_stmt 1
 5316 0044 0624     		movs	r4, #6
 5317 0046 E7E7     		b	.L496
 5318              		.cfi_endproc
 5319              	.LFE104:
 5321              		.section	.text.f_getfree,"ax",%progbits
 5322              		.align	1
 5323              		.global	f_getfree
 5324              		.syntax unified
 5325              		.thumb
 5326              		.thumb_func
 5327              		.fpu softvfp
 5329              	f_getfree:
 5330              	.LFB105:
3469:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3470:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3471:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3472:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
3473:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3474:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Get Number of Free Clusters                                           */
3475:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3476:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3477:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_getfree (
3478:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR* path,	/* Path name of the logical drive number */
3479:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD* nclst,		/* Pointer to a variable to return number of free clusters */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 166


3480:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FATFS** fatfs		/* Pointer to return pointer to corresponding file system object */
3481:Middlewares/Third_Party/FatFs/Src/ff.c **** )
3482:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 5331              		.loc 1 3482 0
 5332              		.cfi_startproc
 5333              		@ args = 0, pretend = 0, frame = 8
 5334              		@ frame_needed = 0, uses_anonymous_args = 0
 5335              	.LVL713:
 5336 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 5337              	.LCFI69:
 5338              		.cfi_def_cfa_offset 32
 5339              		.cfi_offset 4, -32
 5340              		.cfi_offset 5, -28
 5341              		.cfi_offset 6, -24
 5342              		.cfi_offset 7, -20
 5343              		.cfi_offset 8, -16
 5344              		.cfi_offset 9, -12
 5345              		.cfi_offset 10, -8
 5346              		.cfi_offset 14, -4
 5347 0004 82B0     		sub	sp, sp, #8
 5348              	.LCFI70:
 5349              		.cfi_def_cfa_offset 40
 5350 0006 02AB     		add	r3, sp, #8
 5351 0008 43F8040D 		str	r0, [r3, #-4]!
 5352 000c 8946     		mov	r9, r1
 5353 000e 1446     		mov	r4, r2
3483:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
3484:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FATFS *fs;
3485:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD n, clst, sect, stat;
3486:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT i;
3487:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE fat, *p;
3488:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3489:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3490:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Get logical drive number */
3491:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = find_volume(fatfs, &path, 0);
 5354              		.loc 1 3491 0
 5355 0010 0022     		movs	r2, #0
 5356              	.LVL714:
 5357 0012 1946     		mov	r1, r3
 5358              	.LVL715:
 5359 0014 2046     		mov	r0, r4
 5360              	.LVL716:
 5361 0016 FFF7FEFF 		bl	find_volume
 5362              	.LVL717:
3492:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs = *fatfs;
 5363              		.loc 1 3492 0
 5364 001a 2568     		ldr	r5, [r4]
 5365              	.LVL718:
3493:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
 5366              		.loc 1 3493 0
 5367 001c 0746     		mov	r7, r0
 5368 001e 0028     		cmp	r0, #0
 5369 0020 67D1     		bne	.L501
3494:Middlewares/Third_Party/FatFs/Src/ff.c **** 		/* If free_clust is valid, return it without full cluster scan */
3495:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (fs->free_clust <= fs->n_fatent - 2) {
 5370              		.loc 1 3495 0
 5371 0022 D5F81032 		ldr	r3, [r5, #528]
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 167


 5372 0026 D5F81442 		ldr	r4, [r5, #532]
 5373              	.LVL719:
 5374 002a A21E     		subs	r2, r4, #2
 5375 002c 9342     		cmp	r3, r2
 5376 002e 0AD9     		bls	.L516
3496:Middlewares/Third_Party/FatFs/Src/ff.c **** 			*nclst = fs->free_clust;
3497:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {
3498:Middlewares/Third_Party/FatFs/Src/ff.c **** 			/* Get number of free clusters */
3499:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fat = fs->fs_type;
 5377              		.loc 1 3499 0
 5378 0030 95F80082 		ldrb	r8, [r5, #512]	@ zero_extendqisi2
 5379              	.LVL720:
3500:Middlewares/Third_Party/FatFs/Src/ff.c **** 			n = 0;
3501:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (fat == FS_FAT12) {
 5380              		.loc 1 3501 0
 5381 0034 B8F1010F 		cmp	r8, #1
 5382 0038 08D0     		beq	.L517
 5383              	.LVL721:
3502:Middlewares/Third_Party/FatFs/Src/ff.c **** 				clst = 2;
3503:Middlewares/Third_Party/FatFs/Src/ff.c **** 				do {
3504:Middlewares/Third_Party/FatFs/Src/ff.c **** 					stat = get_fat(fs, clst);
3505:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (stat == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
3506:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
3507:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (stat == 0) n++;
3508:Middlewares/Third_Party/FatFs/Src/ff.c **** 				} while (++clst < fs->n_fatent);
3509:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {
3510:Middlewares/Third_Party/FatFs/Src/ff.c **** 				clst = fs->n_fatent;
3511:Middlewares/Third_Party/FatFs/Src/ff.c **** 				sect = fs->fatbase;
 5384              		.loc 1 3511 0
 5385 003a D5F82012 		ldr	r1, [r5, #544]
 5386              	.LVL722:
3512:Middlewares/Third_Party/FatFs/Src/ff.c **** 				i = 0; p = 0;
 5387              		.loc 1 3512 0
 5388 003e 0022     		movs	r2, #0
 5389 0040 1046     		mov	r0, r2
 5390              	.LVL723:
3500:Middlewares/Third_Party/FatFs/Src/ff.c **** 			n = 0;
 5391              		.loc 1 3500 0
 5392 0042 1646     		mov	r6, r2
 5393 0044 32E0     		b	.L512
 5394              	.LVL724:
 5395              	.L516:
3496:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {
 5396              		.loc 1 3496 0
 5397 0046 C9F80030 		str	r3, [r9]
 5398 004a 52E0     		b	.L501
 5399              	.LVL725:
 5400              	.L517:
3502:Middlewares/Third_Party/FatFs/Src/ff.c **** 				clst = 2;
 5401              		.loc 1 3502 0
 5402 004c 0224     		movs	r4, #2
3500:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (fat == FS_FAT12) {
 5403              		.loc 1 3500 0
 5404 004e 0026     		movs	r6, #0
 5405 0050 04E0     		b	.L506
 5406              	.LVL726:
 5407              	.L505:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 168


3508:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {
 5408              		.loc 1 3508 0
 5409 0052 0134     		adds	r4, r4, #1
 5410              	.LVL727:
 5411 0054 D5F81432 		ldr	r3, [r5, #532]
 5412 0058 A342     		cmp	r3, r4
 5413 005a 40D9     		bls	.L504
 5414              	.LVL728:
 5415              	.L506:
3504:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (stat == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
 5416              		.loc 1 3504 0
 5417 005c 2146     		mov	r1, r4
 5418 005e 2846     		mov	r0, r5
 5419 0060 FFF7FEFF 		bl	get_fat
 5420              	.LVL729:
3505:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
 5421              		.loc 1 3505 0
 5422 0064 B0F1FF3F 		cmp	r0, #-1
 5423 0068 38D0     		beq	.L513
3506:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (stat == 0) n++;
 5424              		.loc 1 3506 0
 5425 006a 0128     		cmp	r0, #1
 5426 006c 45D0     		beq	.L514
3507:Middlewares/Third_Party/FatFs/Src/ff.c **** 				} while (++clst < fs->n_fatent);
 5427              		.loc 1 3507 0
 5428 006e 0028     		cmp	r0, #0
 5429 0070 EFD1     		bne	.L505
3507:Middlewares/Third_Party/FatFs/Src/ff.c **** 				} while (++clst < fs->n_fatent);
 5430              		.loc 1 3507 0 is_stmt 0 discriminator 1
 5431 0072 0136     		adds	r6, r6, #1
 5432              	.LVL730:
 5433 0074 EDE7     		b	.L505
 5434              	.LVL731:
 5435              	.L518:
3513:Middlewares/Third_Party/FatFs/Src/ff.c **** 				do {
3514:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (!i) {
3515:Middlewares/Third_Party/FatFs/Src/ff.c **** 						res = move_window(fs, sect++);
 5436              		.loc 1 3515 0 is_stmt 1
 5437 0076 01F1010A 		add	r10, r1, #1
 5438              	.LVL732:
 5439 007a 2846     		mov	r0, r5
 5440              	.LVL733:
 5441 007c FFF7FEFF 		bl	move_window
 5442              	.LVL734:
3516:Middlewares/Third_Party/FatFs/Src/ff.c **** 						if (res != FR_OK) break;
 5443              		.loc 1 3516 0
 5444 0080 0746     		mov	r7, r0
 5445 0082 60BB     		cbnz	r0, .L504
3517:Middlewares/Third_Party/FatFs/Src/ff.c **** 						p = fs->win.d8;
 5446              		.loc 1 3517 0
 5447 0084 2A46     		mov	r2, r5
 5448              	.LVL735:
3515:Middlewares/Third_Party/FatFs/Src/ff.c **** 						if (res != FR_OK) break;
 5449              		.loc 1 3515 0
 5450 0086 5146     		mov	r1, r10
3518:Middlewares/Third_Party/FatFs/Src/ff.c **** 						i = SS(fs);
 5451              		.loc 1 3518 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 169


 5452 0088 4FF40070 		mov	r0, #512
 5453              	.LVL736:
 5454 008c 10E0     		b	.L507
 5455              	.LVL737:
 5456              	.L519:
3519:Middlewares/Third_Party/FatFs/Src/ff.c **** 					}
3520:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (fat == FS_FAT16) {
3521:Middlewares/Third_Party/FatFs/Src/ff.c **** 						if (LD_WORD(p) == 0) n++;
 5457              		.loc 1 3521 0
 5458 008e 92F801C0 		ldrb	ip, [r2, #1]	@ zero_extendqisi2
 5459 0092 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 5460 0094 43EA0C23 		orr	r3, r3, ip, lsl #8
 5461 0098 1BB2     		sxth	r3, r3
 5462 009a 03B9     		cbnz	r3, .L509
 5463              		.loc 1 3521 0 is_stmt 0 discriminator 1
 5464 009c 0136     		adds	r6, r6, #1
 5465              	.LVL738:
 5466              	.L509:
3522:Middlewares/Third_Party/FatFs/Src/ff.c **** 						p += 2; i -= 2;
 5467              		.loc 1 3522 0 is_stmt 1
 5468 009e 0232     		adds	r2, r2, #2
 5469              	.LVL739:
 5470 00a0 0238     		subs	r0, r0, #2
 5471              	.LVL740:
 5472 00a2 01E0     		b	.L510
 5473              	.L511:
3523:Middlewares/Third_Party/FatFs/Src/ff.c **** 					} else {
3524:Middlewares/Third_Party/FatFs/Src/ff.c **** 						if ((LD_DWORD(p) & 0x0FFFFFFF) == 0) n++;
3525:Middlewares/Third_Party/FatFs/Src/ff.c **** 						p += 4; i -= 4;
 5474              		.loc 1 3525 0
 5475 00a4 0432     		adds	r2, r2, #4
 5476              	.LVL741:
 5477 00a6 0438     		subs	r0, r0, #4
 5478              	.LVL742:
 5479              	.L510:
3526:Middlewares/Third_Party/FatFs/Src/ff.c **** 					}
3527:Middlewares/Third_Party/FatFs/Src/ff.c **** 				} while (--clst);
 5480              		.loc 1 3527 0
 5481 00a8 013C     		subs	r4, r4, #1
 5482              	.LVL743:
 5483 00aa 18D0     		beq	.L504
 5484              	.LVL744:
 5485              	.L512:
3514:Middlewares/Third_Party/FatFs/Src/ff.c **** 						res = move_window(fs, sect++);
 5486              		.loc 1 3514 0
 5487 00ac 0028     		cmp	r0, #0
 5488 00ae E2D0     		beq	.L518
 5489              	.LVL745:
 5490              	.L507:
3520:Middlewares/Third_Party/FatFs/Src/ff.c **** 						if (LD_WORD(p) == 0) n++;
 5491              		.loc 1 3520 0
 5492 00b0 B8F1020F 		cmp	r8, #2
 5493 00b4 EBD0     		beq	.L519
3524:Middlewares/Third_Party/FatFs/Src/ff.c **** 						p += 4; i -= 4;
 5494              		.loc 1 3524 0
 5495 00b6 92F803C0 		ldrb	ip, [r2, #3]	@ zero_extendqisi2
 5496 00ba 9378     		ldrb	r3, [r2, #2]	@ zero_extendqisi2
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 170


 5497 00bc 1B04     		lsls	r3, r3, #16
 5498 00be 43EA0C63 		orr	r3, r3, ip, lsl #24
 5499 00c2 92F801C0 		ldrb	ip, [r2, #1]	@ zero_extendqisi2
 5500 00c6 43EA0C23 		orr	r3, r3, ip, lsl #8
 5501 00ca 92F800C0 		ldrb	ip, [r2]	@ zero_extendqisi2
 5502 00ce 43EA0C03 		orr	r3, r3, ip
 5503 00d2 33F07043 		bics	r3, r3, #-268435456
 5504 00d6 E5D1     		bne	.L511
3524:Middlewares/Third_Party/FatFs/Src/ff.c **** 						p += 4; i -= 4;
 5505              		.loc 1 3524 0 is_stmt 0 discriminator 1
 5506 00d8 0136     		adds	r6, r6, #1
 5507              	.LVL746:
 5508 00da E3E7     		b	.L511
 5509              	.LVL747:
 5510              	.L513:
3505:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
 5511              		.loc 1 3505 0 is_stmt 1
 5512 00dc 0127     		movs	r7, #1
 5513              	.LVL748:
 5514              	.L504:
3528:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3529:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->free_clust = n;
 5515              		.loc 1 3529 0
 5516 00de C5F81062 		str	r6, [r5, #528]
3530:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fs->fsi_flag |= 1;
 5517              		.loc 1 3530 0
 5518 00e2 95F80532 		ldrb	r3, [r5, #517]	@ zero_extendqisi2
 5519 00e6 43F00103 		orr	r3, r3, #1
 5520 00ea 85F80532 		strb	r3, [r5, #517]
3531:Middlewares/Third_Party/FatFs/Src/ff.c **** 			*nclst = n;
 5521              		.loc 1 3531 0
 5522 00ee C9F80060 		str	r6, [r9]
 5523              	.LVL749:
 5524              	.L501:
3532:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
3533:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
3534:Middlewares/Third_Party/FatFs/Src/ff.c **** 	LEAVE_FF(fs, res);
3535:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 5525              		.loc 1 3535 0
 5526 00f2 3846     		mov	r0, r7
 5527 00f4 02B0     		add	sp, sp, #8
 5528              	.LCFI71:
 5529              		.cfi_remember_state
 5530              		.cfi_def_cfa_offset 32
 5531              		@ sp needed
 5532 00f6 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 5533              	.LVL750:
 5534              	.L514:
 5535              	.LCFI72:
 5536              		.cfi_restore_state
3506:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (stat == 0) n++;
 5537              		.loc 1 3506 0
 5538 00fa 0227     		movs	r7, #2
 5539 00fc EFE7     		b	.L504
 5540              		.cfi_endproc
 5541              	.LFE105:
 5543              		.section	.text.f_truncate,"ax",%progbits
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 171


 5544              		.align	1
 5545              		.global	f_truncate
 5546              		.syntax unified
 5547              		.thumb
 5548              		.thumb_func
 5549              		.fpu softvfp
 5551              	f_truncate:
 5552              	.LFB106:
3536:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3537:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3538:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3539:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3540:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3541:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Truncate File                                                         */
3542:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3543:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3544:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_truncate (
3545:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FIL* fp		/* Pointer to the file object */
3546:Middlewares/Third_Party/FatFs/Src/ff.c **** )
3547:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 5553              		.loc 1 3547 0
 5554              		.cfi_startproc
 5555              		@ args = 0, pretend = 0, frame = 0
 5556              		@ frame_needed = 0, uses_anonymous_args = 0
 5557              	.LVL751:
 5558 0000 70B5     		push	{r4, r5, r6, lr}
 5559              	.LCFI73:
 5560              		.cfi_def_cfa_offset 16
 5561              		.cfi_offset 4, -16
 5562              		.cfi_offset 5, -12
 5563              		.cfi_offset 6, -8
 5564              		.cfi_offset 14, -4
 5565 0002 0446     		mov	r4, r0
3548:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
3549:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD ncl;
3550:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3551:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3552:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = validate(fp);						/* Check validity of the object */
 5566              		.loc 1 3552 0
 5567 0004 FFF7FEFF 		bl	validate
 5568              	.LVL752:
3553:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
 5569              		.loc 1 3553 0
 5570 0008 0546     		mov	r5, r0
 5571 000a 50B9     		cbnz	r0, .L521
3554:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (fp->err) {						/* Check error */
 5572              		.loc 1 3554 0
 5573 000c 94F80732 		ldrb	r3, [r4, #519]	@ zero_extendqisi2
 5574 0010 33B9     		cbnz	r3, .L528
3555:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = (FRESULT)fp->err;
3556:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {
3557:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!(fp->flag & FA_WRITE))		/* Check access mode */
 5575              		.loc 1 3557 0
 5576 0012 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 5577 0016 13F0020F 		tst	r3, #2
 5578 001a 02D1     		bne	.L521
3558:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_DENIED;
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 172


 5579              		.loc 1 3558 0
 5580 001c 0725     		movs	r5, #7
 5581 001e 23E0     		b	.L522
 5582              	.L528:
3555:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = (FRESULT)fp->err;
 5583              		.loc 1 3555 0
 5584 0020 1D46     		mov	r5, r3
 5585              	.L521:
 5586              	.LVL753:
3559:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
3560:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
3561:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
 5587              		.loc 1 3561 0
 5588 0022 0DBB     		cbnz	r5, .L522
3562:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (fp->fsize > fp->fptr) {
 5589              		.loc 1 3562 0
 5590 0024 D4F80C22 		ldr	r2, [r4, #524]
 5591 0028 D4F80832 		ldr	r3, [r4, #520]
 5592 002c 9A42     		cmp	r2, r3
 5593 002e 18D9     		bls	.L523
3563:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->fsize = fp->fptr;	/* Set file size to current R/W point */
 5594              		.loc 1 3563 0
 5595 0030 C4F80C32 		str	r3, [r4, #524]
3564:Middlewares/Third_Party/FatFs/Src/ff.c **** 			fp->flag |= FA__WRITTEN;
 5596              		.loc 1 3564 0
 5597 0034 94F80622 		ldrb	r2, [r4, #518]	@ zero_extendqisi2
 5598 0038 42F02002 		orr	r2, r2, #32
 5599 003c 84F80622 		strb	r2, [r4, #518]
3565:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 5600              		.loc 1 3565 0
 5601 0040 A3B9     		cbnz	r3, .L524
3566:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = remove_chain(fp->fs, fp->sclust);
 5602              		.loc 1 3566 0
 5603 0042 D4F81012 		ldr	r1, [r4, #528]
 5604 0046 D4F80002 		ldr	r0, [r4, #512]
 5605 004a FFF7FEFF 		bl	remove_chain
 5606              	.LVL754:
 5607 004e 0546     		mov	r5, r0
 5608              	.LVL755:
3567:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fp->sclust = 0;
 5609              		.loc 1 3567 0
 5610 0050 0023     		movs	r3, #0
 5611 0052 C4F81032 		str	r3, [r4, #528]
 5612              	.LVL756:
 5613              	.L525:
3568:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {				/* When truncate a part of the file, remove remaining clusters */
3569:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ncl = get_fat(fp->fs, fp->clust);
3570:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_OK;
3571:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (ncl == 0xFFFFFFFF) res = FR_DISK_ERR;
3572:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (ncl == 1) res = FR_INT_ERR;
3573:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (res == FR_OK && ncl < fp->fs->n_fatent) {
3574:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = put_fat(fp->fs, fp->clust, 0x0FFFFFFF);
3575:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (res == FR_OK) res = remove_chain(fp->fs, ncl);
3576:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
3577:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3578:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_TINY
3579:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_OK && (fp->flag & FA__DIRTY)) {
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 173


 5614              		.loc 1 3579 0
 5615 0056 25B9     		cbnz	r5, .L523
 5616              		.loc 1 3579 0 is_stmt 0 discriminator 1
 5617 0058 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 5618 005c 13F0400F 		tst	r3, #64
 5619 0060 2CD1     		bne	.L534
 5620              	.L523:
3580:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
3581:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = FR_DISK_ERR;
3582:Middlewares/Third_Party/FatFs/Src/ff.c **** 				else
3583:Middlewares/Third_Party/FatFs/Src/ff.c **** 					fp->flag &= ~FA__DIRTY;
3584:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3585:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3586:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
3587:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res != FR_OK) fp->err = (FRESULT)res;
 5621              		.loc 1 3587 0 is_stmt 1
 5622 0062 0DB1     		cbz	r5, .L522
 5623              	.LVL757:
 5624              	.L527:
 5625              		.loc 1 3587 0 is_stmt 0 discriminator 1
 5626 0064 84F80752 		strb	r5, [r4, #519]
 5627              	.L522:
 5628              	.LVL758:
3588:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
3589:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3590:Middlewares/Third_Party/FatFs/Src/ff.c **** 	LEAVE_FF(fp->fs, res);
3591:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 5629              		.loc 1 3591 0 is_stmt 1
 5630 0068 2846     		mov	r0, r5
 5631 006a 70BD     		pop	{r4, r5, r6, pc}
 5632              	.LVL759:
 5633              	.L524:
3569:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_OK;
 5634              		.loc 1 3569 0
 5635 006c D4F81412 		ldr	r1, [r4, #532]
 5636 0070 D4F80002 		ldr	r0, [r4, #512]
 5637 0074 FFF7FEFF 		bl	get_fat
 5638              	.LVL760:
 5639 0078 0646     		mov	r6, r0
 5640              	.LVL761:
3571:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (ncl == 1) res = FR_INT_ERR;
 5641              		.loc 1 3571 0
 5642 007a B0F1FF3F 		cmp	r0, #-1
 5643 007e 19D0     		beq	.L535
 5644              	.L526:
 5645              	.LVL762:
3572:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (res == FR_OK && ncl < fp->fs->n_fatent) {
 5646              		.loc 1 3572 0
 5647 0080 012E     		cmp	r6, #1
 5648 0082 19D0     		beq	.L531
3573:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = put_fat(fp->fs, fp->clust, 0x0FFFFFFF);
 5649              		.loc 1 3573 0
 5650 0084 002D     		cmp	r5, #0
 5651 0086 E6D1     		bne	.L525
3573:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = put_fat(fp->fs, fp->clust, 0x0FFFFFFF);
 5652              		.loc 1 3573 0 is_stmt 0 discriminator 1
 5653 0088 D4F80002 		ldr	r0, [r4, #512]
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 174


 5654              	.LVL763:
 5655 008c D0F81432 		ldr	r3, [r0, #532]
 5656 0090 B342     		cmp	r3, r6
 5657 0092 E0D9     		bls	.L525
3574:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (res == FR_OK) res = remove_chain(fp->fs, ncl);
 5658              		.loc 1 3574 0 is_stmt 1
 5659 0094 6FF07042 		mvn	r2, #-268435456
 5660 0098 D4F81412 		ldr	r1, [r4, #532]
 5661 009c FFF7FEFF 		bl	put_fat
 5662              	.LVL764:
3575:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
 5663              		.loc 1 3575 0
 5664 00a0 0546     		mov	r5, r0
 5665 00a2 0028     		cmp	r0, #0
 5666 00a4 D7D1     		bne	.L525
3575:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
 5667              		.loc 1 3575 0 is_stmt 0 discriminator 1
 5668 00a6 3146     		mov	r1, r6
 5669 00a8 D4F80002 		ldr	r0, [r4, #512]
 5670              	.LVL765:
 5671 00ac FFF7FEFF 		bl	remove_chain
 5672              	.LVL766:
 5673 00b0 0546     		mov	r5, r0
 5674              	.LVL767:
 5675 00b2 D0E7     		b	.L525
 5676              	.LVL768:
 5677              	.L535:
3571:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (ncl == 1) res = FR_INT_ERR;
 5678              		.loc 1 3571 0 is_stmt 1
 5679 00b4 0125     		movs	r5, #1
 5680 00b6 E3E7     		b	.L526
 5681              	.LVL769:
 5682              	.L531:
3572:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (res == FR_OK && ncl < fp->fs->n_fatent) {
 5683              		.loc 1 3572 0
 5684 00b8 0225     		movs	r5, #2
 5685              	.LVL770:
 5686 00ba CCE7     		b	.L525
 5687              	.LVL771:
 5688              	.L534:
3580:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = FR_DISK_ERR;
 5689              		.loc 1 3580 0
 5690 00bc D4F80002 		ldr	r0, [r4, #512]
 5691 00c0 0123     		movs	r3, #1
 5692 00c2 D4F81822 		ldr	r2, [r4, #536]
 5693 00c6 2146     		mov	r1, r4
 5694 00c8 90F80102 		ldrb	r0, [r0, #513]	@ zero_extendqisi2
 5695 00cc FFF7FEFF 		bl	disk_write
 5696              	.LVL772:
 5697 00d0 30B9     		cbnz	r0, .L532
3583:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 5698              		.loc 1 3583 0
 5699 00d2 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 5700 00d6 23F04003 		bic	r3, r3, #64
 5701 00da 84F80632 		strb	r3, [r4, #518]
 5702 00de C0E7     		b	.L523
 5703              	.L532:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 175


3581:Middlewares/Third_Party/FatFs/Src/ff.c **** 				else
 5704              		.loc 1 3581 0
 5705 00e0 0125     		movs	r5, #1
 5706              	.LVL773:
 5707 00e2 BFE7     		b	.L527
 5708              		.cfi_endproc
 5709              	.LFE106:
 5711              		.section	.text.f_unlink,"ax",%progbits
 5712              		.align	1
 5713              		.global	f_unlink
 5714              		.syntax unified
 5715              		.thumb
 5716              		.thumb_func
 5717              		.fpu softvfp
 5719              	f_unlink:
 5720              	.LFB107:
3592:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3593:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3594:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3595:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3596:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3597:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Delete a File or Directory                                            */
3598:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3599:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3600:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_unlink (
3601:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR* path		/* Pointer to the file or directory path */
3602:Middlewares/Third_Party/FatFs/Src/ff.c **** )
3603:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 5721              		.loc 1 3603 0
 5722              		.cfi_startproc
 5723              		@ args = 0, pretend = 0, frame = 1104
 5724              		@ frame_needed = 0, uses_anonymous_args = 0
 5725              	.LVL774:
 5726 0000 70B5     		push	{r4, r5, r6, lr}
 5727              	.LCFI74:
 5728              		.cfi_def_cfa_offset 16
 5729              		.cfi_offset 4, -16
 5730              		.cfi_offset 5, -12
 5731              		.cfi_offset 6, -8
 5732              		.cfi_offset 14, -4
 5733 0002 ADF58A6D 		sub	sp, sp, #1104
 5734              	.LCFI75:
 5735              		.cfi_def_cfa_offset 1120
 5736 0006 0190     		str	r0, [sp, #4]
 5737              	.LVL775:
3604:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
3605:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR dj, sdj;
3606:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE *dir;
3607:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD dclst = 0;
3608:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DEFINE_NAMEBUF;
3609:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3610:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3611:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Get logical drive number */
3612:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = find_volume(&dj.fs, &path, 1);
 5738              		.loc 1 3612 0
 5739 0008 0122     		movs	r2, #1
 5740 000a 01A9     		add	r1, sp, #4
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 176


 5741 000c 0DF23440 		addw	r0, sp, #1076
 5742              	.LVL776:
 5743 0010 FFF7FEFF 		bl	find_volume
 5744              	.LVL777:
3613:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
 5745              		.loc 1 3613 0
 5746 0014 0446     		mov	r4, r0
 5747 0016 18B1     		cbz	r0, .L545
 5748              	.LVL778:
 5749              	.L537:
3614:Middlewares/Third_Party/FatFs/Src/ff.c **** 		INIT_BUF(dj);
3615:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
3616:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT))
3617:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = FR_INVALID_NAME;			/* Cannot remove dot entry */
3618:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_LOCK
3619:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) res = chk_lock(&dj, 2);	/* Cannot remove open object */
3620:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3621:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {					/* The object is accessible */
3622:Middlewares/Third_Party/FatFs/Src/ff.c **** 			dir = dj.dir;
3623:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!dir) {
3624:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
3625:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {
3626:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (dir[DIR_Attr] & AM_RDO)
3627:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
3628:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3629:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_OK) {
3630:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dclst = ld_clust(dj.fs, dir);
3631:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (dclst && (dir[DIR_Attr] & AM_DIR)) {	/* Is it a sub-directory ? */
3632:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_RPATH
3633:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (dclst == dj.fs->cdir) {		 		/* Is it the current directory? */
3634:Middlewares/Third_Party/FatFs/Src/ff.c **** 						res = FR_DENIED;
3635:Middlewares/Third_Party/FatFs/Src/ff.c **** 					} else
3636:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3637:Middlewares/Third_Party/FatFs/Src/ff.c **** 					{
3638:Middlewares/Third_Party/FatFs/Src/ff.c **** 						mem_cpy(&sdj, &dj, sizeof (DIR));	/* Open the sub-directory */
3639:Middlewares/Third_Party/FatFs/Src/ff.c **** 						sdj.sclust = dclst;
3640:Middlewares/Third_Party/FatFs/Src/ff.c **** 						res = dir_sdi(&sdj, 2);
3641:Middlewares/Third_Party/FatFs/Src/ff.c **** 						if (res == FR_OK) {
3642:Middlewares/Third_Party/FatFs/Src/ff.c **** 							res = dir_read(&sdj, 0);			/* Read an item (excluding dot entries) */
3643:Middlewares/Third_Party/FatFs/Src/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? (cannot remove) */
3644:Middlewares/Third_Party/FatFs/Src/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? (can remove) */
3645:Middlewares/Third_Party/FatFs/Src/ff.c **** 						}
3646:Middlewares/Third_Party/FatFs/Src/ff.c **** 					}
3647:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
3648:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3649:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_OK) {
3650:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = dir_remove(&dj);		/* Remove the directory entry */
3651:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (res == FR_OK && dclst)	/* Remove the cluster chain if exist */
3652:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = remove_chain(dj.fs, dclst);
3653:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (res == FR_OK) res = sync_fs(dj.fs);
3654:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3655:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
3656:Middlewares/Third_Party/FatFs/Src/ff.c **** 		FREE_BUF();
3657:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
3658:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3659:Middlewares/Third_Party/FatFs/Src/ff.c **** 	LEAVE_FF(dj.fs, res);
3660:Middlewares/Third_Party/FatFs/Src/ff.c **** }
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 177


 5750              		.loc 1 3660 0
 5751 0018 2046     		mov	r0, r4
 5752 001a 0DF58A6D 		add	sp, sp, #1104
 5753              	.LCFI76:
 5754              		.cfi_remember_state
 5755              		.cfi_def_cfa_offset 16
 5756              		@ sp needed
 5757 001e 70BD     		pop	{r4, r5, r6, pc}
 5758              	.LVL779:
 5759              	.L545:
 5760              	.LCFI77:
 5761              		.cfi_restore_state
3614:Middlewares/Third_Party/FatFs/Src/ff.c **** 		INIT_BUF(dj);
 5762              		.loc 1 3614 0
 5763 0020 03AB     		add	r3, sp, #12
 5764 0022 CDF84C34 		str	r3, [sp, #1100]
3615:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT))
 5765              		.loc 1 3615 0
 5766 0026 0199     		ldr	r1, [sp, #4]
 5767 0028 8DA8     		add	r0, sp, #564
 5768              	.LVL780:
 5769 002a FFF7FEFF 		bl	follow_path
 5770              	.LVL781:
3621:Middlewares/Third_Party/FatFs/Src/ff.c **** 			dir = dj.dir;
 5771              		.loc 1 3621 0
 5772 002e 0446     		mov	r4, r0
 5773 0030 0028     		cmp	r0, #0
 5774 0032 F1D1     		bne	.L537
3622:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!dir) {
 5775              		.loc 1 3622 0
 5776 0034 DDF84814 		ldr	r1, [sp, #1096]
 5777              	.LVL782:
3623:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
 5778              		.loc 1 3623 0
 5779 0038 11B3     		cbz	r1, .L541
3626:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
 5780              		.loc 1 3626 0
 5781 003a CD7A     		ldrb	r5, [r1, #11]	@ zero_extendqisi2
 5782 003c 15F0010F 		tst	r5, #1
 5783 0040 21D1     		bne	.L542
 5784              	.LVL783:
3630:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (dclst && (dir[DIR_Attr] & AM_DIR)) {	/* Is it a sub-directory ? */
 5785              		.loc 1 3630 0
 5786 0042 DDF83404 		ldr	r0, [sp, #1076]
 5787 0046 FFF7FEFF 		bl	ld_clust
 5788              	.LVL784:
3631:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_RPATH
 5789              		.loc 1 3631 0
 5790 004a 0646     		mov	r6, r0
 5791 004c E8B1     		cbz	r0, .L538
3631:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_RPATH
 5792              		.loc 1 3631 0 is_stmt 0 discriminator 1
 5793 004e 15F0100F 		tst	r5, #16
 5794 0052 1AD0     		beq	.L538
3638:Middlewares/Third_Party/FatFs/Src/ff.c **** 						sdj.sclust = dclst;
 5795              		.loc 1 3638 0 is_stmt 1
 5796 0054 4FF40772 		mov	r2, #540
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 178


 5797 0058 8DA9     		add	r1, sp, #564
 5798 005a 06A8     		add	r0, sp, #24
 5799              	.LVL785:
 5800 005c FFF7FEFF 		bl	mem_cpy
 5801              	.LVL786:
3639:Middlewares/Third_Party/FatFs/Src/ff.c **** 						res = dir_sdi(&sdj, 2);
 5802              		.loc 1 3639 0
 5803 0060 8896     		str	r6, [sp, #544]
3640:Middlewares/Third_Party/FatFs/Src/ff.c **** 						if (res == FR_OK) {
 5804              		.loc 1 3640 0
 5805 0062 0221     		movs	r1, #2
 5806 0064 06A8     		add	r0, sp, #24
 5807 0066 FFF7FEFF 		bl	dir_sdi
 5808              	.LVL787:
3641:Middlewares/Third_Party/FatFs/Src/ff.c **** 							res = dir_read(&sdj, 0);			/* Read an item (excluding dot entries) */
 5809              		.loc 1 3641 0
 5810 006a 0446     		mov	r4, r0
 5811 006c 68B9     		cbnz	r0, .L538
3642:Middlewares/Third_Party/FatFs/Src/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? (cannot remove) */
 5812              		.loc 1 3642 0
 5813 006e 0021     		movs	r1, #0
 5814 0070 06A8     		add	r0, sp, #24
 5815              	.LVL788:
 5816 0072 FFF7FEFF 		bl	dir_read
 5817              	.LVL789:
3643:Middlewares/Third_Party/FatFs/Src/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? (can remove) */
 5818              		.loc 1 3643 0
 5819 0076 0446     		mov	r4, r0
 5820 0078 B8B1     		cbz	r0, .L543
3644:Middlewares/Third_Party/FatFs/Src/ff.c **** 						}
 5821              		.loc 1 3644 0
 5822 007a 0428     		cmp	r0, #4
 5823 007c 05D1     		bne	.L538
 5824 007e 06E0     		b	.L539
 5825              	.LVL790:
 5826              	.L541:
3607:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DEFINE_NAMEBUF;
 5827              		.loc 1 3607 0
 5828 0080 0026     		movs	r6, #0
3624:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {
 5829              		.loc 1 3624 0
 5830 0082 0624     		movs	r4, #6
 5831 0084 01E0     		b	.L538
 5832              	.L542:
3607:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DEFINE_NAMEBUF;
 5833              		.loc 1 3607 0
 5834 0086 0026     		movs	r6, #0
3627:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 5835              		.loc 1 3627 0
 5836 0088 0724     		movs	r4, #7
 5837              	.LVL791:
 5838              	.L538:
3649:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = dir_remove(&dj);		/* Remove the directory entry */
 5839              		.loc 1 3649 0
 5840 008a 002C     		cmp	r4, #0
 5841 008c C4D1     		bne	.L537
 5842              	.LVL792:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 179


 5843              	.L539:
3650:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (res == FR_OK && dclst)	/* Remove the cluster chain if exist */
 5844              		.loc 1 3650 0
 5845 008e 8DA8     		add	r0, sp, #564
 5846 0090 FFF7FEFF 		bl	dir_remove
 5847              	.LVL793:
3651:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = remove_chain(dj.fs, dclst);
 5848              		.loc 1 3651 0
 5849 0094 0446     		mov	r4, r0
 5850 0096 00B9     		cbnz	r0, .L540
3651:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = remove_chain(dj.fs, dclst);
 5851              		.loc 1 3651 0 is_stmt 0 discriminator 1
 5852 0098 4EB9     		cbnz	r6, .L546
 5853              	.LVL794:
 5854              	.L540:
3653:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 5855              		.loc 1 3653 0 is_stmt 1
 5856 009a 002C     		cmp	r4, #0
 5857 009c BCD1     		bne	.L537
3653:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 5858              		.loc 1 3653 0 is_stmt 0 discriminator 1
 5859 009e DDF83404 		ldr	r0, [sp, #1076]
 5860 00a2 FFF7FEFF 		bl	sync_fs
 5861              	.LVL795:
 5862 00a6 0446     		mov	r4, r0
 5863              	.LVL796:
 5864 00a8 B6E7     		b	.L537
 5865              	.LVL797:
 5866              	.L543:
3643:Middlewares/Third_Party/FatFs/Src/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? (can remove) */
 5867              		.loc 1 3643 0 is_stmt 1
 5868 00aa 0724     		movs	r4, #7
 5869 00ac EDE7     		b	.L538
 5870              	.L546:
3652:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (res == FR_OK) res = sync_fs(dj.fs);
 5871              		.loc 1 3652 0
 5872 00ae 3146     		mov	r1, r6
 5873 00b0 DDF83404 		ldr	r0, [sp, #1076]
 5874              	.LVL798:
 5875 00b4 FFF7FEFF 		bl	remove_chain
 5876              	.LVL799:
 5877 00b8 0446     		mov	r4, r0
 5878              	.LVL800:
 5879 00ba EEE7     		b	.L540
 5880              		.cfi_endproc
 5881              	.LFE107:
 5883              		.section	.text.f_mkdir,"ax",%progbits
 5884              		.align	1
 5885              		.global	f_mkdir
 5886              		.syntax unified
 5887              		.thumb
 5888              		.thumb_func
 5889              		.fpu softvfp
 5891              	f_mkdir:
 5892              	.LFB108:
3661:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3662:Middlewares/Third_Party/FatFs/Src/ff.c **** 
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 180


3663:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3664:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3665:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3666:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Create a Directory                                                    */
3667:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3668:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3669:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_mkdir (
3670:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR* path		/* Pointer to the directory path */
3671:Middlewares/Third_Party/FatFs/Src/ff.c **** )
3672:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 5893              		.loc 1 3672 0
 5894              		.cfi_startproc
 5895              		@ args = 0, pretend = 0, frame = 560
 5896              		@ frame_needed = 0, uses_anonymous_args = 0
 5897              	.LVL801:
 5898 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 5899              	.LCFI78:
 5900              		.cfi_def_cfa_offset 32
 5901              		.cfi_offset 4, -32
 5902              		.cfi_offset 5, -28
 5903              		.cfi_offset 6, -24
 5904              		.cfi_offset 7, -20
 5905              		.cfi_offset 8, -16
 5906              		.cfi_offset 9, -12
 5907              		.cfi_offset 10, -8
 5908              		.cfi_offset 14, -4
 5909 0004 ADF50C7D 		sub	sp, sp, #560
 5910              	.LCFI79:
 5911              		.cfi_def_cfa_offset 592
 5912 0008 0190     		str	r0, [sp, #4]
 5913              	.LVL802:
3673:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
3674:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR dj;
3675:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE *dir, n;
3676:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD dsc, dcl, pcl, tm = GET_FATTIME();
3677:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DEFINE_NAMEBUF;
3678:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3679:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3680:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Get logical drive number */
3681:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = find_volume(&dj.fs, &path, 1);
 5914              		.loc 1 3681 0
 5915 000a 0122     		movs	r2, #1
 5916 000c 01A9     		add	r1, sp, #4
 5917 000e 85A8     		add	r0, sp, #532
 5918              	.LVL803:
 5919 0010 FFF7FEFF 		bl	find_volume
 5920              	.LVL804:
3682:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
 5921              		.loc 1 3682 0
 5922 0014 0446     		mov	r4, r0
 5923 0016 20B1     		cbz	r0, .L565
 5924              	.LVL805:
 5925              	.L548:
3683:Middlewares/Third_Party/FatFs/Src/ff.c **** 		INIT_BUF(dj);
3684:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
3685:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
3686:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT))
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 181


3687:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = FR_INVALID_NAME;
3688:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_NO_FILE) {				/* Can create a new directory */
3689:Middlewares/Third_Party/FatFs/Src/ff.c **** 			dcl = create_chain(dj.fs, 0);		/* Allocate a cluster for the new directory table */
3690:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = FR_OK;
3691:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (dcl == 0) res = FR_DENIED;		/* No space to allocate a new cluster */
3692:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
3693:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
3694:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_OK)					/* Flush FAT */
3695:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = sync_window(dj.fs);
3696:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_OK) {					/* Initialize the new directory table */
3697:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dsc = clust2sect(dj.fs, dcl);
3698:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dir = dj.fs->win.d8;
3699:Middlewares/Third_Party/FatFs/Src/ff.c **** 				mem_set(dir, 0, SS(dj.fs));
3700:Middlewares/Third_Party/FatFs/Src/ff.c **** 				mem_set(dir + DIR_Name, ' ', 11);	/* Create "." entry */
3701:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dir[DIR_Name] = '.';
3702:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dir[DIR_Attr] = AM_DIR;
3703:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ST_DWORD(dir + DIR_WrtTime, tm);
3704:Middlewares/Third_Party/FatFs/Src/ff.c **** 				st_clust(dir, dcl);
3705:Middlewares/Third_Party/FatFs/Src/ff.c **** 				mem_cpy(dir + SZ_DIRE, dir, SZ_DIRE); 	/* Create ".." entry */
3706:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dir[SZ_DIRE + 1] = '.'; pcl = dj.sclust;
3707:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (dj.fs->fs_type == FS_FAT32 && pcl == dj.fs->dirbase)
3708:Middlewares/Third_Party/FatFs/Src/ff.c **** 					pcl = 0;
3709:Middlewares/Third_Party/FatFs/Src/ff.c **** 				st_clust(dir + SZ_DIRE, pcl);
3710:Middlewares/Third_Party/FatFs/Src/ff.c **** 				for (n = dj.fs->csize; n; n--) {	/* Write dot entries and clear following sectors */
3711:Middlewares/Third_Party/FatFs/Src/ff.c **** 					dj.fs->winsect = dsc++;
3712:Middlewares/Third_Party/FatFs/Src/ff.c **** 					dj.fs->wflag = 1;
3713:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = sync_window(dj.fs);
3714:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (res != FR_OK) break;
3715:Middlewares/Third_Party/FatFs/Src/ff.c **** 					mem_set(dir, 0, SS(dj.fs));
3716:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
3717:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3718:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_OK) res = dir_register(&dj);	/* Register the object to the directoy */
3719:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) {
3720:Middlewares/Third_Party/FatFs/Src/ff.c **** 				remove_chain(dj.fs, dcl);			/* Could not register, remove cluster chain */
3721:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {
3722:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dir = dj.dir;
3723:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dir[DIR_Attr] = AM_DIR;				/* Attribute */
3724:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ST_DWORD(dir + DIR_WrtTime, tm);	/* Created time */
3725:Middlewares/Third_Party/FatFs/Src/ff.c **** 				st_clust(dir, dcl);					/* Table start cluster */
3726:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dj.fs->wflag = 1;
3727:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = sync_fs(dj.fs);
3728:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3729:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
3730:Middlewares/Third_Party/FatFs/Src/ff.c **** 		FREE_BUF();
3731:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
3732:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3733:Middlewares/Third_Party/FatFs/Src/ff.c **** 	LEAVE_FF(dj.fs, res);
3734:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 5926              		.loc 1 3734 0
 5927 0018 2046     		mov	r0, r4
 5928 001a 0DF50C7D 		add	sp, sp, #560
 5929              	.LCFI80:
 5930              		.cfi_remember_state
 5931              		.cfi_def_cfa_offset 32
 5932              		@ sp needed
 5933 001e BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 5934              	.LVL806:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 182


 5935              	.L565:
 5936              	.LCFI81:
 5937              		.cfi_restore_state
3683:Middlewares/Third_Party/FatFs/Src/ff.c **** 		INIT_BUF(dj);
 5938              		.loc 1 3683 0
 5939 0022 02AB     		add	r3, sp, #8
 5940 0024 8B93     		str	r3, [sp, #556]
3684:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
 5941              		.loc 1 3684 0
 5942 0026 0199     		ldr	r1, [sp, #4]
 5943 0028 05A8     		add	r0, sp, #20
 5944              	.LVL807:
 5945 002a FFF7FEFF 		bl	follow_path
 5946              	.LVL808:
3685:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT))
 5947              		.loc 1 3685 0
 5948 002e 0028     		cmp	r0, #0
 5949 0030 00F09580 		beq	.L558
3688:Middlewares/Third_Party/FatFs/Src/ff.c **** 			dcl = create_chain(dj.fs, 0);		/* Allocate a cluster for the new directory table */
 5950              		.loc 1 3688 0
 5951 0034 0428     		cmp	r0, #4
 5952 0036 01D0     		beq	.L566
3684:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
 5953              		.loc 1 3684 0
 5954 0038 0446     		mov	r4, r0
 5955 003a EDE7     		b	.L548
 5956              	.L566:
3689:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = FR_OK;
 5957              		.loc 1 3689 0
 5958 003c 0021     		movs	r1, #0
 5959 003e 8598     		ldr	r0, [sp, #532]
 5960              	.LVL809:
 5961 0040 FFF7FEFF 		bl	create_chain
 5962              	.LVL810:
3691:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
 5963              		.loc 1 3691 0
 5964 0044 0746     		mov	r7, r0
 5965 0046 00B9     		cbnz	r0, .L549
 5966 0048 0724     		movs	r4, #7
 5967              	.L549:
 5968              	.LVL811:
3692:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
 5969              		.loc 1 3692 0
 5970 004a 012F     		cmp	r7, #1
 5971 004c 1DD0     		beq	.L567
 5972              	.LVL812:
 5973              	.L550:
3693:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_OK)					/* Flush FAT */
 5974              		.loc 1 3693 0
 5975 004e B7F1FF3F 		cmp	r7, #-1
 5976 0052 21D0     		beq	.L562
3694:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = sync_window(dj.fs);
 5977              		.loc 1 3694 0
 5978 0054 DCB1     		cbz	r4, .L568
 5979              	.LVL813:
 5980              	.L551:
3696:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dsc = clust2sect(dj.fs, dcl);
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 183


 5981              		.loc 1 3696 0
 5982 0056 0CB3     		cbz	r4, .L569
 5983              	.LVL814:
 5984              	.L552:
3718:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) {
 5985              		.loc 1 3718 0
 5986 0058 002C     		cmp	r4, #0
 5987 005a 76D0     		beq	.L570
 5988              	.L556:
3719:Middlewares/Third_Party/FatFs/Src/ff.c **** 				remove_chain(dj.fs, dcl);			/* Could not register, remove cluster chain */
 5989              		.loc 1 3719 0
 5990 005c 002C     		cmp	r4, #0
 5991 005e 79D1     		bne	.L571
3722:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dir[DIR_Attr] = AM_DIR;				/* Attribute */
 5992              		.loc 1 3722 0
 5993 0060 8A98     		ldr	r0, [sp, #552]
 5994              	.LVL815:
3723:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ST_DWORD(dir + DIR_WrtTime, tm);	/* Created time */
 5995              		.loc 1 3723 0
 5996 0062 1023     		movs	r3, #16
 5997 0064 C372     		strb	r3, [r0, #11]
3724:Middlewares/Third_Party/FatFs/Src/ff.c **** 				st_clust(dir, dcl);					/* Table start cluster */
 5998              		.loc 1 3724 0
 5999 0066 0023     		movs	r3, #0
 6000 0068 8375     		strb	r3, [r0, #22]
 6001 006a C375     		strb	r3, [r0, #23]
 6002 006c C423     		movs	r3, #196
 6003 006e 0376     		strb	r3, [r0, #24]
 6004 0070 4623     		movs	r3, #70
 6005 0072 4376     		strb	r3, [r0, #25]
3725:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dj.fs->wflag = 1;
 6006              		.loc 1 3725 0
 6007 0074 3946     		mov	r1, r7
 6008 0076 FFF7FEFF 		bl	st_clust
 6009              	.LVL816:
3726:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = sync_fs(dj.fs);
 6010              		.loc 1 3726 0
 6011 007a 8598     		ldr	r0, [sp, #532]
 6012 007c 0123     		movs	r3, #1
 6013 007e 80F80432 		strb	r3, [r0, #516]
3727:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 6014              		.loc 1 3727 0
 6015 0082 FFF7FEFF 		bl	sync_fs
 6016              	.LVL817:
 6017 0086 0446     		mov	r4, r0
 6018              	.LVL818:
 6019 0088 C6E7     		b	.L548
 6020              	.LVL819:
 6021              	.L567:
3692:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
 6022              		.loc 1 3692 0
 6023 008a 0224     		movs	r4, #2
 6024              	.LVL820:
 6025 008c DFE7     		b	.L550
 6026              	.LVL821:
 6027              	.L568:
3695:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_OK) {					/* Initialize the new directory table */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 184


 6028              		.loc 1 3695 0
 6029 008e 8598     		ldr	r0, [sp, #532]
 6030              	.LVL822:
 6031 0090 FFF7FEFF 		bl	sync_window
 6032              	.LVL823:
 6033 0094 0446     		mov	r4, r0
 6034              	.LVL824:
 6035 0096 DEE7     		b	.L551
 6036              	.LVL825:
 6037              	.L562:
3693:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_OK)					/* Flush FAT */
 6038              		.loc 1 3693 0
 6039 0098 0124     		movs	r4, #1
 6040              	.LVL826:
 6041 009a DCE7     		b	.L551
 6042              	.LVL827:
 6043              	.L569:
3697:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dir = dj.fs->win.d8;
 6044              		.loc 1 3697 0
 6045 009c 859D     		ldr	r5, [sp, #532]
 6046 009e 3946     		mov	r1, r7
 6047 00a0 2846     		mov	r0, r5
 6048 00a2 FFF7FEFF 		bl	clust2sect
 6049              	.LVL828:
 6050 00a6 0646     		mov	r6, r0
 6051              	.LVL829:
3698:Middlewares/Third_Party/FatFs/Src/ff.c **** 				mem_set(dir, 0, SS(dj.fs));
 6052              		.loc 1 3698 0
 6053 00a8 A846     		mov	r8, r5
 6054              	.LVL830:
3699:Middlewares/Third_Party/FatFs/Src/ff.c **** 				mem_set(dir + DIR_Name, ' ', 11);	/* Create "." entry */
 6055              		.loc 1 3699 0
 6056 00aa 4FF40072 		mov	r2, #512
 6057 00ae 0021     		movs	r1, #0
 6058 00b0 2846     		mov	r0, r5
 6059              	.LVL831:
 6060 00b2 FFF7FEFF 		bl	mem_set
 6061              	.LVL832:
3700:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dir[DIR_Name] = '.';
 6062              		.loc 1 3700 0
 6063 00b6 0B22     		movs	r2, #11
 6064 00b8 2021     		movs	r1, #32
 6065 00ba 2846     		mov	r0, r5
 6066 00bc FFF7FEFF 		bl	mem_set
 6067              	.LVL833:
3701:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dir[DIR_Attr] = AM_DIR;
 6068              		.loc 1 3701 0
 6069 00c0 4FF02E0A 		mov	r10, #46
 6070 00c4 85F800A0 		strb	r10, [r5]
3702:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ST_DWORD(dir + DIR_WrtTime, tm);
 6071              		.loc 1 3702 0
 6072 00c8 1023     		movs	r3, #16
 6073 00ca EB72     		strb	r3, [r5, #11]
3703:Middlewares/Third_Party/FatFs/Src/ff.c **** 				st_clust(dir, dcl);
 6074              		.loc 1 3703 0
 6075 00cc 0023     		movs	r3, #0
 6076 00ce AB75     		strb	r3, [r5, #22]
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 185


 6077 00d0 EB75     		strb	r3, [r5, #23]
 6078 00d2 C423     		movs	r3, #196
 6079 00d4 2B76     		strb	r3, [r5, #24]
 6080 00d6 4623     		movs	r3, #70
 6081 00d8 6B76     		strb	r3, [r5, #25]
3704:Middlewares/Third_Party/FatFs/Src/ff.c **** 				mem_cpy(dir + SZ_DIRE, dir, SZ_DIRE); 	/* Create ".." entry */
 6082              		.loc 1 3704 0
 6083 00da 3946     		mov	r1, r7
 6084 00dc 2846     		mov	r0, r5
 6085 00de FFF7FEFF 		bl	st_clust
 6086              	.LVL834:
3705:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dir[SZ_DIRE + 1] = '.'; pcl = dj.sclust;
 6087              		.loc 1 3705 0
 6088 00e2 05F12009 		add	r9, r5, #32
 6089 00e6 2022     		movs	r2, #32
 6090 00e8 2946     		mov	r1, r5
 6091 00ea 4846     		mov	r0, r9
 6092 00ec FFF7FEFF 		bl	mem_cpy
 6093              	.LVL835:
3706:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (dj.fs->fs_type == FS_FAT32 && pcl == dj.fs->dirbase)
 6094              		.loc 1 3706 0
 6095 00f0 85F821A0 		strb	r10, [r5, #33]
 6096 00f4 8799     		ldr	r1, [sp, #540]
 6097              	.LVL836:
3707:Middlewares/Third_Party/FatFs/Src/ff.c **** 					pcl = 0;
 6098              		.loc 1 3707 0
 6099 00f6 859B     		ldr	r3, [sp, #532]
 6100 00f8 93F80022 		ldrb	r2, [r3, #512]	@ zero_extendqisi2
 6101 00fc 032A     		cmp	r2, #3
 6102 00fe 1ED0     		beq	.L572
 6103              	.LVL837:
 6104              	.L553:
3709:Middlewares/Third_Party/FatFs/Src/ff.c **** 				for (n = dj.fs->csize; n; n--) {	/* Write dot entries and clear following sectors */
 6105              		.loc 1 3709 0
 6106 0100 4846     		mov	r0, r9
 6107 0102 FFF7FEFF 		bl	st_clust
 6108              	.LVL838:
3710:Middlewares/Third_Party/FatFs/Src/ff.c **** 					dj.fs->winsect = dsc++;
 6109              		.loc 1 3710 0
 6110 0106 859B     		ldr	r3, [sp, #532]
 6111 0108 93F80252 		ldrb	r5, [r3, #514]	@ zero_extendqisi2
 6112              	.LVL839:
 6113              	.L554:
3710:Middlewares/Third_Party/FatFs/Src/ff.c **** 					dj.fs->winsect = dsc++;
 6114              		.loc 1 3710 0 is_stmt 0 discriminator 1
 6115 010c 002D     		cmp	r5, #0
 6116 010e A3D0     		beq	.L552
3711:Middlewares/Third_Party/FatFs/Src/ff.c **** 					dj.fs->wflag = 1;
 6117              		.loc 1 3711 0 is_stmt 1
 6118 0110 06F10109 		add	r9, r6, #1
 6119              	.LVL840:
 6120 0114 8598     		ldr	r0, [sp, #532]
 6121 0116 C0F82C62 		str	r6, [r0, #556]
3712:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = sync_window(dj.fs);
 6122              		.loc 1 3712 0
 6123 011a 0123     		movs	r3, #1
 6124 011c 80F80432 		strb	r3, [r0, #516]
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 186


3713:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (res != FR_OK) break;
 6125              		.loc 1 3713 0
 6126 0120 FFF7FEFF 		bl	sync_window
 6127              	.LVL841:
3714:Middlewares/Third_Party/FatFs/Src/ff.c **** 					mem_set(dir, 0, SS(dj.fs));
 6128              		.loc 1 3714 0
 6129 0124 0446     		mov	r4, r0
 6130 0126 0028     		cmp	r0, #0
 6131 0128 96D1     		bne	.L552
3715:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
 6132              		.loc 1 3715 0 discriminator 2
 6133 012a 4FF40072 		mov	r2, #512
 6134 012e 0021     		movs	r1, #0
 6135 0130 4046     		mov	r0, r8
 6136              	.LVL842:
 6137 0132 FFF7FEFF 		bl	mem_set
 6138              	.LVL843:
3710:Middlewares/Third_Party/FatFs/Src/ff.c **** 					dj.fs->winsect = dsc++;
 6139              		.loc 1 3710 0 discriminator 2
 6140 0136 013D     		subs	r5, r5, #1
 6141              	.LVL844:
 6142 0138 EDB2     		uxtb	r5, r5
 6143              	.LVL845:
3711:Middlewares/Third_Party/FatFs/Src/ff.c **** 					dj.fs->wflag = 1;
 6144              		.loc 1 3711 0 discriminator 2
 6145 013a 4E46     		mov	r6, r9
 6146 013c E6E7     		b	.L554
 6147              	.LVL846:
 6148              	.L572:
3707:Middlewares/Third_Party/FatFs/Src/ff.c **** 					pcl = 0;
 6149              		.loc 1 3707 0 discriminator 1
 6150 013e D3F82432 		ldr	r3, [r3, #548]
 6151 0142 8B42     		cmp	r3, r1
 6152 0144 DCD1     		bne	.L553
3708:Middlewares/Third_Party/FatFs/Src/ff.c **** 				st_clust(dir + SZ_DIRE, pcl);
 6153              		.loc 1 3708 0
 6154 0146 0021     		movs	r1, #0
 6155              	.LVL847:
 6156 0148 DAE7     		b	.L553
 6157              	.LVL848:
 6158              	.L570:
3718:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res != FR_OK) {
 6159              		.loc 1 3718 0 discriminator 1
 6160 014a 05A8     		add	r0, sp, #20
 6161 014c FFF7FEFF 		bl	dir_register
 6162              	.LVL849:
 6163 0150 0446     		mov	r4, r0
 6164              	.LVL850:
 6165 0152 83E7     		b	.L556
 6166              	.L571:
3720:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {
 6167              		.loc 1 3720 0
 6168 0154 3946     		mov	r1, r7
 6169 0156 8598     		ldr	r0, [sp, #532]
 6170 0158 FFF7FEFF 		bl	remove_chain
 6171              	.LVL851:
 6172 015c 5CE7     		b	.L548
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 187


 6173              	.LVL852:
 6174              	.L558:
3685:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT))
 6175              		.loc 1 3685 0
 6176 015e 0824     		movs	r4, #8
 6177 0160 5AE7     		b	.L548
 6178              		.cfi_endproc
 6179              	.LFE108:
 6181              		.section	.text.f_chmod,"ax",%progbits
 6182              		.align	1
 6183              		.global	f_chmod
 6184              		.syntax unified
 6185              		.thumb
 6186              		.thumb_func
 6187              		.fpu softvfp
 6189              	f_chmod:
 6190              	.LFB109:
3735:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3736:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3737:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3738:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3739:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3740:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Change Attribute                                                      */
3741:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3742:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3743:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_chmod (
3744:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR* path,	/* Pointer to the file path */
3745:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE attr,			/* Attribute bits */
3746:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE mask			/* Attribute mask to change */
3747:Middlewares/Third_Party/FatFs/Src/ff.c **** )
3748:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 6191              		.loc 1 3748 0
 6192              		.cfi_startproc
 6193              		@ args = 0, pretend = 0, frame = 560
 6194              		@ frame_needed = 0, uses_anonymous_args = 0
 6195              	.LVL853:
 6196 0000 30B5     		push	{r4, r5, lr}
 6197              	.LCFI82:
 6198              		.cfi_def_cfa_offset 12
 6199              		.cfi_offset 4, -12
 6200              		.cfi_offset 5, -8
 6201              		.cfi_offset 14, -4
 6202 0002 ADF50D7D 		sub	sp, sp, #564
 6203              	.LCFI83:
 6204              		.cfi_def_cfa_offset 576
 6205 0006 0190     		str	r0, [sp, #4]
 6206 0008 0D46     		mov	r5, r1
 6207 000a 1446     		mov	r4, r2
3749:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
3750:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR dj;
3751:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE *dir;
3752:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DEFINE_NAMEBUF;
3753:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3754:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3755:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Get logical drive number */
3756:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = find_volume(&dj.fs, &path, 1);
 6208              		.loc 1 3756 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 188


 6209 000c 0122     		movs	r2, #1
 6210              	.LVL854:
 6211 000e 01A9     		add	r1, sp, #4
 6212              	.LVL855:
 6213 0010 85A8     		add	r0, sp, #532
 6214              	.LVL856:
 6215 0012 FFF7FEFF 		bl	find_volume
 6216              	.LVL857:
3757:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
 6217              		.loc 1 3757 0
 6218 0016 0346     		mov	r3, r0
 6219 0018 18B1     		cbz	r0, .L577
 6220              	.LVL858:
 6221              	.L574:
3758:Middlewares/Third_Party/FatFs/Src/ff.c **** 		INIT_BUF(dj);
3759:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
3760:Middlewares/Third_Party/FatFs/Src/ff.c **** 		FREE_BUF();
3761:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT))
3762:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = FR_INVALID_NAME;
3763:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {
3764:Middlewares/Third_Party/FatFs/Src/ff.c **** 			dir = dj.dir;
3765:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!dir) {						/* Is it a root directory? */
3766:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_INVALID_NAME;
3767:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {						/* File or sub directory */
3768:Middlewares/Third_Party/FatFs/Src/ff.c **** 				mask &= AM_RDO|AM_HID|AM_SYS|AM_ARC;	/* Valid attribute mask */
3769:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dir[DIR_Attr] = (attr & mask) | (dir[DIR_Attr] & (BYTE)~mask);	/* Apply attribute change */
3770:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dj.fs->wflag = 1;
3771:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = sync_fs(dj.fs);
3772:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3773:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
3774:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
3775:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3776:Middlewares/Third_Party/FatFs/Src/ff.c **** 	LEAVE_FF(dj.fs, res);
3777:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 6222              		.loc 1 3777 0
 6223 001a 1846     		mov	r0, r3
 6224 001c 0DF50D7D 		add	sp, sp, #564
 6225              	.LCFI84:
 6226              		.cfi_remember_state
 6227              		.cfi_def_cfa_offset 12
 6228              		@ sp needed
 6229 0020 30BD     		pop	{r4, r5, pc}
 6230              	.LVL859:
 6231              	.L577:
 6232              	.LCFI85:
 6233              		.cfi_restore_state
3758:Middlewares/Third_Party/FatFs/Src/ff.c **** 		INIT_BUF(dj);
 6234              		.loc 1 3758 0
 6235 0022 02AB     		add	r3, sp, #8
 6236 0024 8B93     		str	r3, [sp, #556]
3759:Middlewares/Third_Party/FatFs/Src/ff.c **** 		FREE_BUF();
 6237              		.loc 1 3759 0
 6238 0026 0199     		ldr	r1, [sp, #4]
 6239 0028 05A8     		add	r0, sp, #20
 6240              	.LVL860:
 6241 002a FFF7FEFF 		bl	follow_path
 6242              	.LVL861:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 189


3763:Middlewares/Third_Party/FatFs/Src/ff.c **** 			dir = dj.dir;
 6243              		.loc 1 3763 0
 6244 002e 0346     		mov	r3, r0
 6245 0030 0028     		cmp	r0, #0
 6246 0032 F2D1     		bne	.L574
3764:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!dir) {						/* Is it a root directory? */
 6247              		.loc 1 3764 0
 6248 0034 8A9A     		ldr	r2, [sp, #552]
 6249              	.LVL862:
3765:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_INVALID_NAME;
 6250              		.loc 1 3765 0
 6251 0036 72B1     		cbz	r2, .L575
3768:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dir[DIR_Attr] = (attr & mask) | (dir[DIR_Attr] & (BYTE)~mask);	/* Apply attribute change */
 6252              		.loc 1 3768 0
 6253 0038 04F02704 		and	r4, r4, #39
 6254              	.LVL863:
3769:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dj.fs->wflag = 1;
 6255              		.loc 1 3769 0
 6256 003c D37A     		ldrb	r3, [r2, #11]	@ zero_extendqisi2
 6257 003e 5D40     		eors	r5, r5, r3
 6258 0040 2C40     		ands	r4, r4, r5
 6259              	.LVL864:
 6260 0042 5C40     		eors	r4, r4, r3
 6261 0044 D472     		strb	r4, [r2, #11]
3770:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = sync_fs(dj.fs);
 6262              		.loc 1 3770 0
 6263 0046 8598     		ldr	r0, [sp, #532]
 6264              	.LVL865:
 6265 0048 0123     		movs	r3, #1
 6266 004a 80F80432 		strb	r3, [r0, #516]
3771:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 6267              		.loc 1 3771 0
 6268 004e FFF7FEFF 		bl	sync_fs
 6269              	.LVL866:
 6270 0052 0346     		mov	r3, r0
 6271              	.LVL867:
 6272 0054 E1E7     		b	.L574
 6273              	.LVL868:
 6274              	.L575:
3766:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {						/* File or sub directory */
 6275              		.loc 1 3766 0
 6276 0056 0623     		movs	r3, #6
 6277 0058 DFE7     		b	.L574
 6278              		.cfi_endproc
 6279              	.LFE109:
 6281              		.section	.text.f_rename,"ax",%progbits
 6282              		.align	1
 6283              		.global	f_rename
 6284              		.syntax unified
 6285              		.thumb
 6286              		.thumb_func
 6287              		.fpu softvfp
 6289              	f_rename:
 6290              	.LFB110:
3778:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3779:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3780:Middlewares/Third_Party/FatFs/Src/ff.c **** 
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 190


3781:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3782:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3783:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Rename File/Directory                                                 */
3784:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3785:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3786:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_rename (
3787:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR* path_old,	/* Pointer to the object to be renamed */
3788:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR* path_new	/* Pointer to the new name */
3789:Middlewares/Third_Party/FatFs/Src/ff.c **** )
3790:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 6291              		.loc 1 3790 0
 6292              		.cfi_startproc
 6293              		@ args = 0, pretend = 0, frame = 1128
 6294              		@ frame_needed = 0, uses_anonymous_args = 0
 6295              	.LVL869:
 6296 0000 70B5     		push	{r4, r5, r6, lr}
 6297              	.LCFI86:
 6298              		.cfi_def_cfa_offset 16
 6299              		.cfi_offset 4, -16
 6300              		.cfi_offset 5, -12
 6301              		.cfi_offset 6, -8
 6302              		.cfi_offset 14, -4
 6303 0002 ADF58D6D 		sub	sp, sp, #1128
 6304              	.LCFI87:
 6305              		.cfi_def_cfa_offset 1144
 6306 0006 0190     		str	r0, [sp, #4]
 6307 0008 0091     		str	r1, [sp]
3791:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
3792:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR djo, djn;
3793:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE buf[21], *dir;
3794:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD dw;
3795:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DEFINE_NAMEBUF;
3796:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3797:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3798:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Get logical drive number of the source object */
3799:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = find_volume(&djo.fs, &path_old, 1);
 6308              		.loc 1 3799 0
 6309 000a 0122     		movs	r2, #1
 6310 000c 01A9     		add	r1, sp, #4
 6311              	.LVL870:
 6312 000e 0DF24C40 		addw	r0, sp, #1100
 6313              	.LVL871:
 6314 0012 FFF7FEFF 		bl	find_volume
 6315              	.LVL872:
3800:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
 6316              		.loc 1 3800 0
 6317 0016 0446     		mov	r4, r0
 6318 0018 18B1     		cbz	r0, .L587
 6319              	.LVL873:
 6320              	.L579:
3801:Middlewares/Third_Party/FatFs/Src/ff.c **** 		djn.fs = djo.fs;
3802:Middlewares/Third_Party/FatFs/Src/ff.c **** 		INIT_BUF(djo);
3803:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
3804:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (djo.fn[NSFLAG] & NS_DOT))
3805:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = FR_INVALID_NAME;
3806:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _FS_LOCK
3807:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) res = chk_lock(&djo, 2);
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 191


3808:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3809:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {						/* Old object is found */
3810:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!djo.dir) {						/* Is root dir? */
3811:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_NO_FILE;
3812:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {
3813:Middlewares/Third_Party/FatFs/Src/ff.c **** 				mem_cpy(buf, djo.dir + DIR_Attr, 21);	/* Save information about object except name */
3814:Middlewares/Third_Party/FatFs/Src/ff.c **** 				mem_cpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
3815:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (get_ldnumber(&path_new) >= 0)		/* Snip drive number off and ignore it */
3816:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = follow_path(&djn, path_new);	/* and make sure if new object name is not conflicting */
3817:Middlewares/Third_Party/FatFs/Src/ff.c **** 				else
3818:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = FR_INVALID_DRIVE;
3819:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (res == FR_OK) res = FR_EXIST;		/* The new object name is already existing */
3820:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (res == FR_NO_FILE) { 				/* It is a valid path and no name collision */
3821:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
3822:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (res == FR_OK) {
3823:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Start of critical section where any interruption can cause a cross-link */
3824:Middlewares/Third_Party/FatFs/Src/ff.c **** 						dir = djn.dir;					/* Copy information about object except name */
3825:Middlewares/Third_Party/FatFs/Src/ff.c **** 						mem_cpy(dir + 13, buf + 2, 19);
3826:Middlewares/Third_Party/FatFs/Src/ff.c **** 						dir[DIR_Attr] = buf[0] | AM_ARC;
3827:Middlewares/Third_Party/FatFs/Src/ff.c **** 						djo.fs->wflag = 1;
3828:Middlewares/Third_Party/FatFs/Src/ff.c **** 						if ((dir[DIR_Attr] & AM_DIR) && djo.sclust != djn.sclust) {	/* Update .. entry in the sub-dir
3829:Middlewares/Third_Party/FatFs/Src/ff.c **** 							dw = clust2sect(djo.fs, ld_clust(djo.fs, dir));
3830:Middlewares/Third_Party/FatFs/Src/ff.c **** 							if (!dw) {
3831:Middlewares/Third_Party/FatFs/Src/ff.c **** 								res = FR_INT_ERR;
3832:Middlewares/Third_Party/FatFs/Src/ff.c **** 							} else {
3833:Middlewares/Third_Party/FatFs/Src/ff.c **** 								res = move_window(djo.fs, dw);
3834:Middlewares/Third_Party/FatFs/Src/ff.c **** 								dir = djo.fs->win.d8 + SZ_DIRE * 1;	/* Ptr to .. entry */
3835:Middlewares/Third_Party/FatFs/Src/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
3836:Middlewares/Third_Party/FatFs/Src/ff.c **** 									st_clust(dir, djn.sclust);
3837:Middlewares/Third_Party/FatFs/Src/ff.c **** 									djo.fs->wflag = 1;
3838:Middlewares/Third_Party/FatFs/Src/ff.c **** 								}
3839:Middlewares/Third_Party/FatFs/Src/ff.c **** 							}
3840:Middlewares/Third_Party/FatFs/Src/ff.c **** 						}
3841:Middlewares/Third_Party/FatFs/Src/ff.c **** 						if (res == FR_OK) {
3842:Middlewares/Third_Party/FatFs/Src/ff.c **** 							res = dir_remove(&djo);		/* Remove old entry */
3843:Middlewares/Third_Party/FatFs/Src/ff.c **** 							if (res == FR_OK)
3844:Middlewares/Third_Party/FatFs/Src/ff.c **** 								res = sync_fs(djo.fs);
3845:Middlewares/Third_Party/FatFs/Src/ff.c **** 						}
3846:Middlewares/Third_Party/FatFs/Src/ff.c **** /* End of critical section */
3847:Middlewares/Third_Party/FatFs/Src/ff.c **** 					}
3848:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
3849:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3850:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
3851:Middlewares/Third_Party/FatFs/Src/ff.c **** 		FREE_BUF();
3852:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
3853:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3854:Middlewares/Third_Party/FatFs/Src/ff.c **** 	LEAVE_FF(djo.fs, res);
3855:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 6321              		.loc 1 3855 0
 6322 001a 2046     		mov	r0, r4
 6323 001c 0DF58D6D 		add	sp, sp, #1128
 6324              	.LCFI88:
 6325              		.cfi_remember_state
 6326              		.cfi_def_cfa_offset 16
 6327              		@ sp needed
 6328 0020 70BD     		pop	{r4, r5, r6, pc}
 6329              	.LVL874:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 192


 6330              	.L587:
 6331              	.LCFI89:
 6332              		.cfi_restore_state
3801:Middlewares/Third_Party/FatFs/Src/ff.c **** 		djn.fs = djo.fs;
 6333              		.loc 1 3801 0
 6334 0022 DDF84C34 		ldr	r3, [sp, #1100]
 6335 0026 8C93     		str	r3, [sp, #560]
3802:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
 6336              		.loc 1 3802 0
 6337 0028 03AB     		add	r3, sp, #12
 6338 002a CDF86434 		str	r3, [sp, #1124]
3803:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (djo.fn[NSFLAG] & NS_DOT))
 6339              		.loc 1 3803 0
 6340 002e 0199     		ldr	r1, [sp, #4]
 6341 0030 93A8     		add	r0, sp, #588
 6342              	.LVL875:
 6343 0032 FFF7FEFF 		bl	follow_path
 6344              	.LVL876:
3809:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!djo.dir) {						/* Is root dir? */
 6345              		.loc 1 3809 0
 6346 0036 0446     		mov	r4, r0
 6347 0038 0028     		cmp	r0, #0
 6348 003a EED1     		bne	.L579
3810:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_NO_FILE;
 6349              		.loc 1 3810 0
 6350 003c DDF86014 		ldr	r1, [sp, #1120]
 6351 0040 0029     		cmp	r1, #0
 6352 0042 6BD0     		beq	.L582
3813:Middlewares/Third_Party/FatFs/Src/ff.c **** 				mem_cpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
 6353              		.loc 1 3813 0
 6354 0044 1522     		movs	r2, #21
 6355 0046 0B31     		adds	r1, r1, #11
 6356 0048 06A8     		add	r0, sp, #24
 6357              	.LVL877:
 6358 004a FFF7FEFF 		bl	mem_cpy
 6359              	.LVL878:
3814:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (get_ldnumber(&path_new) >= 0)		/* Snip drive number off and ignore it */
 6360              		.loc 1 3814 0
 6361 004e 4FF40772 		mov	r2, #540
 6362 0052 93A9     		add	r1, sp, #588
 6363 0054 0CA8     		add	r0, sp, #48
 6364 0056 FFF7FEFF 		bl	mem_cpy
 6365              	.LVL879:
3815:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = follow_path(&djn, path_new);	/* and make sure if new object name is not conflicting */
 6366              		.loc 1 3815 0
 6367 005a 6846     		mov	r0, sp
 6368 005c FFF7FEFF 		bl	get_ldnumber
 6369              	.LVL880:
 6370 0060 0028     		cmp	r0, #0
 6371 0062 48DA     		bge	.L588
3818:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (res == FR_OK) res = FR_EXIST;		/* The new object name is already existing */
 6372              		.loc 1 3818 0
 6373 0064 0B24     		movs	r4, #11
 6374              	.L580:
 6375              	.LVL881:
3820:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
 6376              		.loc 1 3820 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 193


 6377 0066 042C     		cmp	r4, #4
 6378 0068 D7D1     		bne	.L579
3821:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (res == FR_OK) {
 6379              		.loc 1 3821 0
 6380 006a 0CA8     		add	r0, sp, #48
 6381 006c FFF7FEFF 		bl	dir_register
 6382              	.LVL882:
3822:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Start of critical section where any interruption can cause a cross-link */
 6383              		.loc 1 3822 0
 6384 0070 0446     		mov	r4, r0
 6385 0072 0028     		cmp	r0, #0
 6386 0074 D1D1     		bne	.L579
3824:Middlewares/Third_Party/FatFs/Src/ff.c **** 						mem_cpy(dir + 13, buf + 2, 19);
 6387              		.loc 1 3824 0
 6388 0076 919D     		ldr	r5, [sp, #580]
 6389              	.LVL883:
3825:Middlewares/Third_Party/FatFs/Src/ff.c **** 						dir[DIR_Attr] = buf[0] | AM_ARC;
 6390              		.loc 1 3825 0
 6391 0078 1322     		movs	r2, #19
 6392 007a 0DF11A01 		add	r1, sp, #26
 6393 007e 05F10D00 		add	r0, r5, #13
 6394              	.LVL884:
 6395 0082 FFF7FEFF 		bl	mem_cpy
 6396              	.LVL885:
3826:Middlewares/Third_Party/FatFs/Src/ff.c **** 						djo.fs->wflag = 1;
 6397              		.loc 1 3826 0
 6398 0086 9DF81830 		ldrb	r3, [sp, #24]	@ zero_extendqisi2
 6399 008a 43F02003 		orr	r3, r3, #32
 6400 008e EB72     		strb	r3, [r5, #11]
3827:Middlewares/Third_Party/FatFs/Src/ff.c **** 						if ((dir[DIR_Attr] & AM_DIR) && djo.sclust != djn.sclust) {	/* Update .. entry in the sub-dir
 6401              		.loc 1 3827 0
 6402 0090 DDF84C64 		ldr	r6, [sp, #1100]
 6403 0094 0123     		movs	r3, #1
 6404 0096 86F80432 		strb	r3, [r6, #516]
3828:Middlewares/Third_Party/FatFs/Src/ff.c **** 							dw = clust2sect(djo.fs, ld_clust(djo.fs, dir));
 6405              		.loc 1 3828 0
 6406 009a EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 6407 009c 13F0100F 		tst	r3, #16
 6408 00a0 1BD0     		beq	.L581
3828:Middlewares/Third_Party/FatFs/Src/ff.c **** 							dw = clust2sect(djo.fs, ld_clust(djo.fs, dir));
 6409              		.loc 1 3828 0 is_stmt 0 discriminator 1
 6410 00a2 8E9B     		ldr	r3, [sp, #568]
 6411 00a4 DDF85424 		ldr	r2, [sp, #1108]
 6412 00a8 9A42     		cmp	r2, r3
 6413 00aa 16D0     		beq	.L581
3829:Middlewares/Third_Party/FatFs/Src/ff.c **** 							if (!dw) {
 6414              		.loc 1 3829 0 is_stmt 1
 6415 00ac 2946     		mov	r1, r5
 6416 00ae 3046     		mov	r0, r6
 6417 00b0 FFF7FEFF 		bl	ld_clust
 6418              	.LVL886:
 6419 00b4 0146     		mov	r1, r0
 6420 00b6 3046     		mov	r0, r6
 6421 00b8 FFF7FEFF 		bl	clust2sect
 6422              	.LVL887:
3830:Middlewares/Third_Party/FatFs/Src/ff.c **** 								res = FR_INT_ERR;
 6423              		.loc 1 3830 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 194


 6424 00bc 0146     		mov	r1, r0
 6425 00be 78B3     		cbz	r0, .L585
3833:Middlewares/Third_Party/FatFs/Src/ff.c **** 								dir = djo.fs->win.d8 + SZ_DIRE * 1;	/* Ptr to .. entry */
 6426              		.loc 1 3833 0
 6427 00c0 3046     		mov	r0, r6
 6428              	.LVL888:
 6429 00c2 FFF7FEFF 		bl	move_window
 6430              	.LVL889:
3834:Middlewares/Third_Party/FatFs/Src/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
 6431              		.loc 1 3834 0
 6432 00c6 DDF84C34 		ldr	r3, [sp, #1100]
 6433 00ca 03F12002 		add	r2, r3, #32
 6434              	.LVL890:
3835:Middlewares/Third_Party/FatFs/Src/ff.c **** 									st_clust(dir, djn.sclust);
 6435              		.loc 1 3835 0
 6436 00ce 0446     		mov	r4, r0
 6437 00d0 18B9     		cbnz	r0, .L581
3835:Middlewares/Third_Party/FatFs/Src/ff.c **** 									st_clust(dir, djn.sclust);
 6438              		.loc 1 3835 0 is_stmt 0 discriminator 1
 6439 00d2 93F82130 		ldrb	r3, [r3, #33]	@ zero_extendqisi2
 6440 00d6 2E2B     		cmp	r3, #46
 6441 00d8 16D0     		beq	.L589
 6442              	.LVL891:
 6443              	.L581:
3841:Middlewares/Third_Party/FatFs/Src/ff.c **** 							res = dir_remove(&djo);		/* Remove old entry */
 6444              		.loc 1 3841 0 is_stmt 1
 6445 00da 002C     		cmp	r4, #0
 6446 00dc 9DD1     		bne	.L579
3842:Middlewares/Third_Party/FatFs/Src/ff.c **** 							if (res == FR_OK)
 6447              		.loc 1 3842 0
 6448 00de 93A8     		add	r0, sp, #588
 6449 00e0 FFF7FEFF 		bl	dir_remove
 6450              	.LVL892:
3843:Middlewares/Third_Party/FatFs/Src/ff.c **** 								res = sync_fs(djo.fs);
 6451              		.loc 1 3843 0
 6452 00e4 0446     		mov	r4, r0
 6453 00e6 0028     		cmp	r0, #0
 6454 00e8 97D1     		bne	.L579
3844:Middlewares/Third_Party/FatFs/Src/ff.c **** 						}
 6455              		.loc 1 3844 0
 6456 00ea DDF84C04 		ldr	r0, [sp, #1100]
 6457              	.LVL893:
 6458 00ee FFF7FEFF 		bl	sync_fs
 6459              	.LVL894:
 6460 00f2 0446     		mov	r4, r0
 6461              	.LVL895:
 6462 00f4 91E7     		b	.L579
 6463              	.LVL896:
 6464              	.L588:
3816:Middlewares/Third_Party/FatFs/Src/ff.c **** 				else
 6465              		.loc 1 3816 0
 6466 00f6 0099     		ldr	r1, [sp]
 6467 00f8 0CA8     		add	r0, sp, #48
 6468 00fa FFF7FEFF 		bl	follow_path
 6469              	.LVL897:
3819:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (res == FR_NO_FILE) { 				/* It is a valid path and no name collision */
 6470              		.loc 1 3819 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 195


 6471 00fe 0446     		mov	r4, r0
 6472 0100 0028     		cmp	r0, #0
 6473 0102 B0D1     		bne	.L580
 6474 0104 0824     		movs	r4, #8
 6475 0106 88E7     		b	.L579
 6476              	.LVL898:
 6477              	.L589:
3836:Middlewares/Third_Party/FatFs/Src/ff.c **** 									djo.fs->wflag = 1;
 6478              		.loc 1 3836 0
 6479 0108 8E99     		ldr	r1, [sp, #568]
 6480 010a 1046     		mov	r0, r2
 6481              	.LVL899:
 6482 010c FFF7FEFF 		bl	st_clust
 6483              	.LVL900:
3837:Middlewares/Third_Party/FatFs/Src/ff.c **** 								}
 6484              		.loc 1 3837 0
 6485 0110 DDF84C34 		ldr	r3, [sp, #1100]
 6486 0114 0122     		movs	r2, #1
 6487 0116 83F80422 		strb	r2, [r3, #516]
 6488 011a DEE7     		b	.L581
 6489              	.LVL901:
 6490              	.L582:
3811:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {
 6491              		.loc 1 3811 0
 6492 011c 0424     		movs	r4, #4
 6493 011e 7CE7     		b	.L579
 6494              	.LVL902:
 6495              	.L585:
3831:Middlewares/Third_Party/FatFs/Src/ff.c **** 							} else {
 6496              		.loc 1 3831 0
 6497 0120 0224     		movs	r4, #2
 6498 0122 7AE7     		b	.L579
 6499              		.cfi_endproc
 6500              	.LFE110:
 6502              		.section	.text.f_utime,"ax",%progbits
 6503              		.align	1
 6504              		.global	f_utime
 6505              		.syntax unified
 6506              		.thumb
 6507              		.thumb_func
 6508              		.fpu softvfp
 6510              	f_utime:
 6511              	.LFB111:
3856:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3857:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3858:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3859:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3860:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3861:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Change Timestamp                                                      */
3862:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3863:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3864:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_utime (
3865:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR* path,	/* Pointer to the file/directory name */
3866:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const FILINFO* fno	/* Pointer to the time stamp to be set */
3867:Middlewares/Third_Party/FatFs/Src/ff.c **** )
3868:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 6512              		.loc 1 3868 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 196


 6513              		.cfi_startproc
 6514              		@ args = 0, pretend = 0, frame = 560
 6515              		@ frame_needed = 0, uses_anonymous_args = 0
 6516              	.LVL903:
 6517 0000 10B5     		push	{r4, lr}
 6518              	.LCFI90:
 6519              		.cfi_def_cfa_offset 8
 6520              		.cfi_offset 4, -8
 6521              		.cfi_offset 14, -4
 6522 0002 ADF50C7D 		sub	sp, sp, #560
 6523              	.LCFI91:
 6524              		.cfi_def_cfa_offset 568
 6525 0006 0190     		str	r0, [sp, #4]
 6526 0008 0C46     		mov	r4, r1
3869:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
3870:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR dj;
3871:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE *dir;
3872:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DEFINE_NAMEBUF;
3873:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3874:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3875:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Get logical drive number */
3876:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = find_volume(&dj.fs, &path, 1);
 6527              		.loc 1 3876 0
 6528 000a 0122     		movs	r2, #1
 6529 000c 01A9     		add	r1, sp, #4
 6530              	.LVL904:
 6531 000e 85A8     		add	r0, sp, #532
 6532              	.LVL905:
 6533 0010 FFF7FEFF 		bl	find_volume
 6534              	.LVL906:
3877:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
 6535              		.loc 1 3877 0
 6536 0014 0346     		mov	r3, r0
 6537 0016 18B1     		cbz	r0, .L594
 6538              	.LVL907:
 6539              	.L591:
3878:Middlewares/Third_Party/FatFs/Src/ff.c **** 		INIT_BUF(dj);
3879:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
3880:Middlewares/Third_Party/FatFs/Src/ff.c **** 		FREE_BUF();
3881:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT))
3882:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = FR_INVALID_NAME;
3883:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {
3884:Middlewares/Third_Party/FatFs/Src/ff.c **** 			dir = dj.dir;
3885:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!dir) {					/* Root directory */
3886:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_INVALID_NAME;
3887:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {					/* File or sub-directory */
3888:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ST_WORD(dir + DIR_WrtTime, fno->ftime);
3889:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ST_WORD(dir + DIR_WrtDate, fno->fdate);
3890:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dj.fs->wflag = 1;
3891:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = sync_fs(dj.fs);
3892:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3893:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
3894:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
3895:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3896:Middlewares/Third_Party/FatFs/Src/ff.c **** 	LEAVE_FF(dj.fs, res);
3897:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 6540              		.loc 1 3897 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 197


 6541 0018 1846     		mov	r0, r3
 6542 001a 0DF50C7D 		add	sp, sp, #560
 6543              	.LCFI92:
 6544              		.cfi_remember_state
 6545              		.cfi_def_cfa_offset 8
 6546              		@ sp needed
 6547 001e 10BD     		pop	{r4, pc}
 6548              	.LVL908:
 6549              	.L594:
 6550              	.LCFI93:
 6551              		.cfi_restore_state
3878:Middlewares/Third_Party/FatFs/Src/ff.c **** 		INIT_BUF(dj);
 6552              		.loc 1 3878 0
 6553 0020 02AB     		add	r3, sp, #8
 6554 0022 8B93     		str	r3, [sp, #556]
3879:Middlewares/Third_Party/FatFs/Src/ff.c **** 		FREE_BUF();
 6555              		.loc 1 3879 0
 6556 0024 0199     		ldr	r1, [sp, #4]
 6557 0026 05A8     		add	r0, sp, #20
 6558              	.LVL909:
 6559 0028 FFF7FEFF 		bl	follow_path
 6560              	.LVL910:
3883:Middlewares/Third_Party/FatFs/Src/ff.c **** 			dir = dj.dir;
 6561              		.loc 1 3883 0
 6562 002c 0346     		mov	r3, r0
 6563 002e 0028     		cmp	r0, #0
 6564 0030 F2D1     		bne	.L591
3884:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!dir) {					/* Root directory */
 6565              		.loc 1 3884 0
 6566 0032 8A9B     		ldr	r3, [sp, #552]
 6567              	.LVL911:
3885:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_INVALID_NAME;
 6568              		.loc 1 3885 0
 6569 0034 8BB1     		cbz	r3, .L592
3888:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ST_WORD(dir + DIR_WrtDate, fno->fdate);
 6570              		.loc 1 3888 0
 6571 0036 A279     		ldrb	r2, [r4, #6]	@ zero_extendqisi2
 6572 0038 9A75     		strb	r2, [r3, #22]
 6573 003a E288     		ldrh	r2, [r4, #6]
 6574 003c 120A     		lsrs	r2, r2, #8
 6575 003e DA75     		strb	r2, [r3, #23]
3889:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dj.fs->wflag = 1;
 6576              		.loc 1 3889 0
 6577 0040 2279     		ldrb	r2, [r4, #4]	@ zero_extendqisi2
 6578 0042 1A76     		strb	r2, [r3, #24]
 6579 0044 A288     		ldrh	r2, [r4, #4]
 6580 0046 120A     		lsrs	r2, r2, #8
 6581 0048 5A76     		strb	r2, [r3, #25]
3890:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = sync_fs(dj.fs);
 6582              		.loc 1 3890 0
 6583 004a 8598     		ldr	r0, [sp, #532]
 6584              	.LVL912:
 6585 004c 0123     		movs	r3, #1
 6586              	.LVL913:
 6587 004e 80F80432 		strb	r3, [r0, #516]
3891:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 6588              		.loc 1 3891 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 198


 6589 0052 FFF7FEFF 		bl	sync_fs
 6590              	.LVL914:
 6591 0056 0346     		mov	r3, r0
 6592              	.LVL915:
 6593 0058 DEE7     		b	.L591
 6594              	.LVL916:
 6595              	.L592:
3886:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {					/* File or sub-directory */
 6596              		.loc 1 3886 0
 6597 005a 0623     		movs	r3, #6
 6598              	.LVL917:
 6599 005c DCE7     		b	.L591
 6600              		.cfi_endproc
 6601              	.LFE111:
 6603              		.section	.text.f_getlabel,"ax",%progbits
 6604              		.align	1
 6605              		.global	f_getlabel
 6606              		.syntax unified
 6607              		.thumb
 6608              		.thumb_func
 6609              		.fpu softvfp
 6611              	f_getlabel:
 6612              	.LFB112:
3898:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3899:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* !_FS_READONLY */
3900:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* _FS_MINIMIZE == 0 */
3901:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* _FS_MINIMIZE <= 1 */
3902:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* _FS_MINIMIZE <= 2 */
3903:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3904:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3905:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3906:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3907:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LABEL
3908:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3909:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Get volume label                                                      */
3910:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3911:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3912:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_getlabel (
3913:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR* path,	/* Path name of the logical drive number */
3914:Middlewares/Third_Party/FatFs/Src/ff.c **** 	TCHAR* label,		/* Pointer to a buffer to return the volume label */
3915:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD* vsn			/* Pointer to a variable to return the volume serial number */
3916:Middlewares/Third_Party/FatFs/Src/ff.c **** )
3917:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 6613              		.loc 1 3917 0
 6614              		.cfi_startproc
 6615              		@ args = 0, pretend = 0, frame = 552
 6616              		@ frame_needed = 0, uses_anonymous_args = 0
 6617              	.LVL918:
 6618 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 6619              	.LCFI94:
 6620              		.cfi_def_cfa_offset 20
 6621              		.cfi_offset 4, -20
 6622              		.cfi_offset 5, -16
 6623              		.cfi_offset 6, -12
 6624              		.cfi_offset 7, -8
 6625              		.cfi_offset 14, -4
 6626 0002 ADF50B7D 		sub	sp, sp, #556
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 199


 6627              	.LCFI95:
 6628              		.cfi_def_cfa_offset 576
 6629 0006 0190     		str	r0, [sp, #4]
 6630 0008 0D46     		mov	r5, r1
 6631 000a 1646     		mov	r6, r2
3918:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
3919:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR dj;
3920:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT i, j;
3921:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN && _LFN_UNICODE
3922:Middlewares/Third_Party/FatFs/Src/ff.c **** 	WCHAR w;
3923:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3924:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3925:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3926:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Get logical drive number */
3927:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = find_volume(&dj.fs, &path, 0);
 6632              		.loc 1 3927 0
 6633 000c 0022     		movs	r2, #0
 6634              	.LVL919:
 6635 000e 01A9     		add	r1, sp, #4
 6636              	.LVL920:
 6637 0010 83A8     		add	r0, sp, #524
 6638              	.LVL921:
 6639 0012 FFF7FEFF 		bl	find_volume
 6640              	.LVL922:
3928:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3929:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Get volume label */
3930:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK && label) {
 6641              		.loc 1 3930 0
 6642 0016 0446     		mov	r4, r0
 6643 0018 38B9     		cbnz	r0, .L596
 6644              		.loc 1 3930 0 is_stmt 0 discriminator 1
 6645 001a 35B1     		cbz	r5, .L596
3931:Middlewares/Third_Party/FatFs/Src/ff.c **** 		dj.sclust = 0;					/* Open root directory */
 6646              		.loc 1 3931 0 is_stmt 1
 6647 001c 0021     		movs	r1, #0
 6648 001e 8591     		str	r1, [sp, #532]
3932:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = dir_sdi(&dj, 0);
 6649              		.loc 1 3932 0
 6650 0020 03A8     		add	r0, sp, #12
 6651              	.LVL923:
 6652 0022 FFF7FEFF 		bl	dir_sdi
 6653              	.LVL924:
3933:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {
 6654              		.loc 1 3933 0
 6655 0026 0446     		mov	r4, r0
 6656 0028 F0B1     		cbz	r0, .L605
 6657              	.LVL925:
 6658              	.L596:
3934:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = dir_read(&dj, 1);		/* Get an entry with AM_VOL */
3935:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_OK) {			/* A volume label is exist */
3936:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN && _LFN_UNICODE
3937:Middlewares/Third_Party/FatFs/Src/ff.c **** 				i = j = 0;
3938:Middlewares/Third_Party/FatFs/Src/ff.c **** 				do {
3939:Middlewares/Third_Party/FatFs/Src/ff.c **** 					w = (i < 11) ? dj.dir[i++] : ' ';
3940:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (IsDBCS1(w) && i < 11 && IsDBCS2(dj.dir[i]))
3941:Middlewares/Third_Party/FatFs/Src/ff.c **** 						w = w << 8 | dj.dir[i++];
3942:Middlewares/Third_Party/FatFs/Src/ff.c **** 					label[j++] = ff_convert(w, 1);	/* OEM -> Unicode */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 200


3943:Middlewares/Third_Party/FatFs/Src/ff.c **** 				} while (j < 11);
3944:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
3945:Middlewares/Third_Party/FatFs/Src/ff.c **** 				mem_cpy(label, dj.dir, 11);
3946:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
3947:Middlewares/Third_Party/FatFs/Src/ff.c **** 				j = 11;
3948:Middlewares/Third_Party/FatFs/Src/ff.c **** 				do {
3949:Middlewares/Third_Party/FatFs/Src/ff.c **** 					label[j] = 0;
3950:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (!j) break;
3951:Middlewares/Third_Party/FatFs/Src/ff.c **** 				} while (label[--j] == ' ');
3952:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3953:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_NO_FILE) {	/* No label, return nul string */
3954:Middlewares/Third_Party/FatFs/Src/ff.c **** 				label[0] = 0;
3955:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_OK;
3956:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
3957:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
3958:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
3959:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3960:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Get volume serial number */
3961:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK && vsn) {
 6659              		.loc 1 3961 0
 6660 002a CCB9     		cbnz	r4, .L600
 6661              	.LVL926:
 6662              	.L599:
 6663              		.loc 1 3961 0 is_stmt 0 discriminator 1
 6664 002c C6B1     		cbz	r6, .L600
3962:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = move_window(dj.fs, dj.fs->volbase);
 6665              		.loc 1 3962 0 is_stmt 1
 6666 002e 8398     		ldr	r0, [sp, #524]
 6667 0030 D0F81C12 		ldr	r1, [r0, #540]
 6668 0034 FFF7FEFF 		bl	move_window
 6669              	.LVL927:
3963:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {
 6670              		.loc 1 3963 0
 6671 0038 0446     		mov	r4, r0
 6672 003a 88B9     		cbnz	r0, .L600
3964:Middlewares/Third_Party/FatFs/Src/ff.c **** 			i = dj.fs->fs_type == FS_FAT32 ? BS_VolID32 : BS_VolID;
 6673              		.loc 1 3964 0
 6674 003c 839A     		ldr	r2, [sp, #524]
 6675 003e 92F80032 		ldrb	r3, [r2, #512]	@ zero_extendqisi2
 6676 0042 032B     		cmp	r3, #3
 6677 0044 2CD0     		beq	.L606
 6678 0046 2720     		movs	r0, #39
 6679              	.LVL928:
 6680              	.L601:
3965:Middlewares/Third_Party/FatFs/Src/ff.c **** 			*vsn = LD_DWORD(&dj.fs->win.d8[i]);
 6681              		.loc 1 3965 0 discriminator 4
 6682 0048 1118     		adds	r1, r2, r0
 6683 004a CD78     		ldrb	r5, [r1, #3]	@ zero_extendqisi2
 6684              	.LVL929:
 6685 004c 8B78     		ldrb	r3, [r1, #2]	@ zero_extendqisi2
 6686 004e 1B04     		lsls	r3, r3, #16
 6687 0050 43EA0563 		orr	r3, r3, r5, lsl #24
 6688 0054 4978     		ldrb	r1, [r1, #1]	@ zero_extendqisi2
 6689 0056 43EA0123 		orr	r3, r3, r1, lsl #8
 6690 005a 125C     		ldrb	r2, [r2, r0]	@ zero_extendqisi2
 6691 005c 1343     		orrs	r3, r3, r2
 6692 005e 3360     		str	r3, [r6]
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 201


 6693              	.LVL930:
 6694              	.L600:
3966:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
3967:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
3968:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3969:Middlewares/Third_Party/FatFs/Src/ff.c **** 	LEAVE_FF(dj.fs, res);
3970:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 6695              		.loc 1 3970 0
 6696 0060 2046     		mov	r0, r4
 6697 0062 0DF50B7D 		add	sp, sp, #556
 6698              	.LCFI96:
 6699              		.cfi_remember_state
 6700              		.cfi_def_cfa_offset 20
 6701              		@ sp needed
 6702 0066 F0BD     		pop	{r4, r5, r6, r7, pc}
 6703              	.LVL931:
 6704              	.L605:
 6705              	.LCFI97:
 6706              		.cfi_restore_state
3934:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_OK) {			/* A volume label is exist */
 6707              		.loc 1 3934 0
 6708 0068 0121     		movs	r1, #1
 6709 006a 03A8     		add	r0, sp, #12
 6710              	.LVL932:
 6711 006c FFF7FEFF 		bl	dir_read
 6712              	.LVL933:
3935:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN && _LFN_UNICODE
 6713              		.loc 1 3935 0
 6714 0070 0746     		mov	r7, r0
 6715 0072 18B1     		cbz	r0, .L607
 6716              	.LVL934:
 6717              	.L597:
3953:Middlewares/Third_Party/FatFs/Src/ff.c **** 				label[0] = 0;
 6718              		.loc 1 3953 0
 6719 0074 042F     		cmp	r7, #4
 6720 0076 10D0     		beq	.L608
3934:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_OK) {			/* A volume label is exist */
 6721              		.loc 1 3934 0
 6722 0078 3C46     		mov	r4, r7
 6723 007a D6E7     		b	.L596
 6724              	.LVL935:
 6725              	.L607:
3945:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
 6726              		.loc 1 3945 0
 6727 007c 0B22     		movs	r2, #11
 6728 007e 8899     		ldr	r1, [sp, #544]
 6729 0080 2846     		mov	r0, r5
 6730              	.LVL936:
 6731 0082 FFF7FEFF 		bl	mem_cpy
 6732              	.LVL937:
3947:Middlewares/Third_Party/FatFs/Src/ff.c **** 				do {
 6733              		.loc 1 3947 0
 6734 0086 0B23     		movs	r3, #11
 6735              	.LVL938:
 6736              	.L598:
3949:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (!j) break;
 6737              		.loc 1 3949 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 202


 6738 0088 0022     		movs	r2, #0
 6739 008a EA54     		strb	r2, [r5, r3]
3950:Middlewares/Third_Party/FatFs/Src/ff.c **** 				} while (label[--j] == ' ');
 6740              		.loc 1 3950 0
 6741 008c 002B     		cmp	r3, #0
 6742 008e F1D0     		beq	.L597
3951:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 6743              		.loc 1 3951 0
 6744 0090 013B     		subs	r3, r3, #1
 6745              	.LVL939:
 6746 0092 EA5C     		ldrb	r2, [r5, r3]	@ zero_extendqisi2
 6747 0094 202A     		cmp	r2, #32
 6748 0096 F7D0     		beq	.L598
 6749 0098 ECE7     		b	.L597
 6750              	.LVL940:
 6751              	.L608:
3954:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_OK;
 6752              		.loc 1 3954 0
 6753 009a 0023     		movs	r3, #0
 6754 009c 2B70     		strb	r3, [r5]
 6755              	.LVL941:
 6756 009e C5E7     		b	.L599
 6757              	.LVL942:
 6758              	.L606:
3964:Middlewares/Third_Party/FatFs/Src/ff.c **** 			*vsn = LD_DWORD(&dj.fs->win.d8[i]);
 6759              		.loc 1 3964 0
 6760 00a0 4320     		movs	r0, #67
 6761              	.LVL943:
 6762 00a2 D1E7     		b	.L601
 6763              		.cfi_endproc
 6764              	.LFE112:
 6766              		.section	.text.f_setlabel,"ax",%progbits
 6767              		.align	1
 6768              		.global	f_setlabel
 6769              		.syntax unified
 6770              		.thumb
 6771              		.thumb_func
 6772              		.fpu softvfp
 6774              	f_setlabel:
 6775              	.LFB113:
3971:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3972:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3973:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3974:Middlewares/Third_Party/FatFs/Src/ff.c **** #if !_FS_READONLY
3975:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3976:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Set volume label                                                      */
3977:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
3978:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3979:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_setlabel (
3980:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR* label	/* Pointer to the volume label to set */
3981:Middlewares/Third_Party/FatFs/Src/ff.c **** )
3982:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 6776              		.loc 1 3982 0
 6777              		.cfi_startproc
 6778              		@ args = 0, pretend = 0, frame = 560
 6779              		@ frame_needed = 0, uses_anonymous_args = 0
 6780              	.LVL944:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 203


 6781 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 6782              	.LCFI98:
 6783              		.cfi_def_cfa_offset 24
 6784              		.cfi_offset 4, -24
 6785              		.cfi_offset 5, -20
 6786              		.cfi_offset 6, -16
 6787              		.cfi_offset 7, -12
 6788              		.cfi_offset 8, -8
 6789              		.cfi_offset 14, -4
 6790 0004 ADF50C7D 		sub	sp, sp, #560
 6791              	.LCFI99:
 6792              		.cfi_def_cfa_offset 584
 6793 0008 0190     		str	r0, [sp, #4]
3983:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
3984:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DIR dj;
3985:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE vn[11];
3986:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT i, j, sl;
3987:Middlewares/Third_Party/FatFs/Src/ff.c **** 	WCHAR w;
3988:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD tm;
3989:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3990:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3991:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Get logical drive number */
3992:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = find_volume(&dj.fs, &label, 1);
 6794              		.loc 1 3992 0
 6795 000a 0122     		movs	r2, #1
 6796 000c 01A9     		add	r1, sp, #4
 6797 000e 85A8     		add	r0, sp, #532
 6798              	.LVL945:
 6799 0010 FFF7FEFF 		bl	find_volume
 6800              	.LVL946:
3993:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res) LEAVE_FF(dj.fs, res);
 6801              		.loc 1 3993 0
 6802 0014 0446     		mov	r4, r0
 6803 0016 0028     		cmp	r0, #0
 6804 0018 51D1     		bne	.L610
3994:Middlewares/Third_Party/FatFs/Src/ff.c **** 
3995:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Create a volume label in directory form */
3996:Middlewares/Third_Party/FatFs/Src/ff.c **** 	vn[0] = 0;
 6805              		.loc 1 3996 0
 6806 001a 0025     		movs	r5, #0
 6807 001c 8DF80850 		strb	r5, [sp, #8]
 6808              	.LVL947:
3997:Middlewares/Third_Party/FatFs/Src/ff.c **** 	for (sl = 0; label[sl]; sl++) ;				/* Get name length */
 6809              		.loc 1 3997 0
 6810 0020 00E0     		b	.L611
 6811              	.LVL948:
 6812              	.L612:
 6813              		.loc 1 3997 0 is_stmt 0 discriminator 3
 6814 0022 0135     		adds	r5, r5, #1
 6815              	.LVL949:
 6816              	.L611:
 6817              		.loc 1 3997 0 discriminator 1
 6818 0024 019E     		ldr	r6, [sp, #4]
 6819 0026 735D     		ldrb	r3, [r6, r5]	@ zero_extendqisi2
 6820 0028 002B     		cmp	r3, #0
 6821 002a FAD1     		bne	.L612
 6822 002c 00E0     		b	.L614
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 204


 6823              	.L626:
3998:Middlewares/Third_Party/FatFs/Src/ff.c **** 	for ( ; sl && label[sl - 1] == ' '; sl--) ;	/* Remove trailing spaces */
 6824              		.loc 1 3998 0 is_stmt 1
 6825 002e 1D46     		mov	r5, r3
 6826              	.LVL950:
 6827              	.L614:
 6828              		.loc 1 3998 0 is_stmt 0 discriminator 1
 6829 0030 1DB1     		cbz	r5, .L613
 6830              		.loc 1 3998 0 discriminator 2
 6831 0032 6B1E     		subs	r3, r5, #1
 6832 0034 F25C     		ldrb	r2, [r6, r3]	@ zero_extendqisi2
 6833 0036 202A     		cmp	r2, #32
 6834 0038 F9D0     		beq	.L626
 6835              	.L613:
3999:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (sl) {	/* Create volume label in directory form */
 6836              		.loc 1 3999 0 is_stmt 1
 6837 003a 002D     		cmp	r5, #0
 6838 003c 38D0     		beq	.L615
4000:Middlewares/Third_Party/FatFs/Src/ff.c **** 		i = j = 0;
 6839              		.loc 1 4000 0
 6840 003e 0027     		movs	r7, #0
 6841 0040 3B46     		mov	r3, r7
 6842 0042 08E0     		b	.L620
 6843              	.LVL951:
 6844              	.L629:
4001:Middlewares/Third_Party/FatFs/Src/ff.c **** 		do {
4002:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN && _LFN_UNICODE
4003:Middlewares/Third_Party/FatFs/Src/ff.c **** 			w = ff_convert(ff_wtoupper(label[i++]), 0);
4004:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
4005:Middlewares/Third_Party/FatFs/Src/ff.c **** 			w = (BYTE)label[i++];
4006:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (IsDBCS1(w))
4007:Middlewares/Third_Party/FatFs/Src/ff.c **** 				w = (j < 10 && i < sl && IsDBCS2(label[i])) ? w << 8 | (BYTE)label[i++] : 0;
4008:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_LFN
4009:Middlewares/Third_Party/FatFs/Src/ff.c **** 			w = ff_convert(ff_wtoupper(ff_convert(w, 1)), 0);
4010:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
4011:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (IsLower(w)) w -= 0x20;			/* To upper ASCII characters */
4012:Middlewares/Third_Party/FatFs/Src/ff.c **** #ifdef _EXCVT
4013:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (w >= 0x80) w = ExCvt[w - 0x80];	/* To upper extended characters (SBCS cfg) */
4014:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
4015:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!_DF1S && w >= 0x80) w = 0;		/* Reject extended characters (ASCII cfg) */
4016:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
4017:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
4018:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
4019:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!w || chk_chr("\"*+,.:;<=>\?[]|\x7F", w) || j >= (UINT)((w >= 0x100) ? 10 : 11)) /* Reject i
 6845              		.loc 1 4019 0
 6846 0044 0B23     		movs	r3, #11
 6847 0046 20E0     		b	.L618
 6848              	.L631:
 6849 0048 3B46     		mov	r3, r7
 6850              	.LVL952:
 6851              	.L619:
4020:Middlewares/Third_Party/FatFs/Src/ff.c **** 				LEAVE_FF(dj.fs, FR_INVALID_NAME);
4021:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (w >= 0x100) vn[j++] = (BYTE)(w >> 8);
4022:Middlewares/Third_Party/FatFs/Src/ff.c **** 			vn[j++] = (BYTE)w;
 6852              		.loc 1 4022 0
 6853 004a 5F1C     		adds	r7, r3, #1
 6854              	.LVL953:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 205


 6855 004c 02AA     		add	r2, sp, #8
 6856 004e D454     		strb	r4, [r2, r3]
4005:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (IsDBCS1(w))
 6857              		.loc 1 4005 0
 6858 0050 4346     		mov	r3, r8
4023:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} while (i < sl);
 6859              		.loc 1 4023 0
 6860 0052 4545     		cmp	r5, r8
 6861 0054 26D9     		bls	.L621
 6862              	.LVL954:
 6863              	.L620:
4005:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (IsDBCS1(w))
 6864              		.loc 1 4005 0
 6865 0056 03F10108 		add	r8, r3, #1
 6866              	.LVL955:
 6867 005a F45C     		ldrb	r4, [r6, r3]	@ zero_extendqisi2
 6868              	.LVL956:
4011:Middlewares/Third_Party/FatFs/Src/ff.c **** #ifdef _EXCVT
 6869              		.loc 1 4011 0
 6870 005c A4F16103 		sub	r3, r4, #97
 6871 0060 9BB2     		uxth	r3, r3
 6872 0062 192B     		cmp	r3, #25
 6873 0064 01D8     		bhi	.L616
4011:Middlewares/Third_Party/FatFs/Src/ff.c **** #ifdef _EXCVT
 6874              		.loc 1 4011 0 is_stmt 0 discriminator 1
 6875 0066 203C     		subs	r4, r4, #32
 6876              	.LVL957:
 6877 0068 A4B2     		uxth	r4, r4
 6878              	.LVL958:
 6879              	.L616:
4013:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
 6880              		.loc 1 4013 0 is_stmt 1
 6881 006a 7F2C     		cmp	r4, #127
 6882 006c 02D9     		bls	.L617
4013:Middlewares/Third_Party/FatFs/Src/ff.c **** #else
 6883              		.loc 1 4013 0 is_stmt 0 discriminator 1
 6884 006e 803C     		subs	r4, r4, #128
 6885              	.LVL959:
 6886 0070 434B     		ldr	r3, .L638
 6887 0072 1C5D     		ldrb	r4, [r3, r4]	@ zero_extendqisi2
 6888              	.LVL960:
 6889              	.L617:
4019:Middlewares/Third_Party/FatFs/Src/ff.c **** 				LEAVE_FF(dj.fs, FR_INVALID_NAME);
 6890              		.loc 1 4019 0 is_stmt 1
 6891 0074 002C     		cmp	r4, #0
 6892 0076 7AD0     		beq	.L627
4019:Middlewares/Third_Party/FatFs/Src/ff.c **** 				LEAVE_FF(dj.fs, FR_INVALID_NAME);
 6893              		.loc 1 4019 0 is_stmt 0 discriminator 1
 6894 0078 2146     		mov	r1, r4
 6895 007a 4248     		ldr	r0, .L638+4
 6896 007c FFF7FEFF 		bl	chk_chr
 6897              	.LVL961:
 6898 0080 0028     		cmp	r0, #0
 6899 0082 76D1     		bne	.L628
4019:Middlewares/Third_Party/FatFs/Src/ff.c **** 				LEAVE_FF(dj.fs, FR_INVALID_NAME);
 6900              		.loc 1 4019 0 discriminator 2
 6901 0084 FF2C     		cmp	r4, #255
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 206


 6902 0086 DDD9     		bls	.L629
4019:Middlewares/Third_Party/FatFs/Src/ff.c **** 				LEAVE_FF(dj.fs, FR_INVALID_NAME);
 6903              		.loc 1 4019 0
 6904 0088 0A23     		movs	r3, #10
 6905              	.L618:
4019:Middlewares/Third_Party/FatFs/Src/ff.c **** 				LEAVE_FF(dj.fs, FR_INVALID_NAME);
 6906              		.loc 1 4019 0 discriminator 6
 6907 008a 9F42     		cmp	r7, r3
 6908 008c 73D2     		bcs	.L630
4021:Middlewares/Third_Party/FatFs/Src/ff.c **** 			vn[j++] = (BYTE)w;
 6909              		.loc 1 4021 0 is_stmt 1
 6910 008e FF2C     		cmp	r4, #255
 6911 0090 DAD9     		bls	.L631
4021:Middlewares/Third_Party/FatFs/Src/ff.c **** 			vn[j++] = (BYTE)w;
 6912              		.loc 1 4021 0 is_stmt 0 discriminator 1
 6913 0092 7B1C     		adds	r3, r7, #1
 6914              	.LVL962:
 6915 0094 220A     		lsrs	r2, r4, #8
 6916 0096 02A9     		add	r1, sp, #8
 6917 0098 CA55     		strb	r2, [r1, r7]
 6918 009a D6E7     		b	.L619
 6919              	.LVL963:
 6920              	.L622:
4024:Middlewares/Third_Party/FatFs/Src/ff.c **** 		while (j < 11) vn[j++] = ' ';	/* Fill remaining name field */
 6921              		.loc 1 4024 0 is_stmt 1 discriminator 2
 6922 009c 02AB     		add	r3, sp, #8
 6923 009e 2022     		movs	r2, #32
 6924 00a0 DA55     		strb	r2, [r3, r7]
 6925 00a2 0137     		adds	r7, r7, #1
 6926              	.LVL964:
 6927              	.L621:
 6928              		.loc 1 4024 0 is_stmt 0 discriminator 1
 6929 00a4 0A2F     		cmp	r7, #10
 6930 00a6 F9D9     		bls	.L622
4025:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (vn[0] == DDEM) LEAVE_FF(dj.fs, FR_INVALID_NAME);	/* Reject illegal name (heading DDEM) */
 6931              		.loc 1 4025 0 is_stmt 1
 6932 00a8 9DF80830 		ldrb	r3, [sp, #8]	@ zero_extendqisi2
 6933 00ac E52B     		cmp	r3, #229
 6934 00ae 64D0     		beq	.L632
 6935              	.LVL965:
 6936              	.L615:
4026:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
4027:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4028:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Set volume label */
4029:Middlewares/Third_Party/FatFs/Src/ff.c **** 	dj.sclust = 0;					/* Open root directory */
 6937              		.loc 1 4029 0
 6938 00b0 0021     		movs	r1, #0
 6939 00b2 8791     		str	r1, [sp, #540]
4030:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = dir_sdi(&dj, 0);
 6940              		.loc 1 4030 0
 6941 00b4 05A8     		add	r0, sp, #20
 6942 00b6 FFF7FEFF 		bl	dir_sdi
 6943              	.LVL966:
4031:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res == FR_OK) {
 6944              		.loc 1 4031 0
 6945 00ba 0446     		mov	r4, r0
 6946 00bc 20B1     		cbz	r0, .L635
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 207


 6947              	.LVL967:
 6948              	.L610:
4032:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = dir_read(&dj, 1);		/* Get an entry with AM_VOL */
4033:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {			/* A volume label is found */
4034:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (vn[0]) {
4035:Middlewares/Third_Party/FatFs/Src/ff.c **** 				mem_cpy(dj.dir, vn, 11);	/* Change the volume label name */
4036:Middlewares/Third_Party/FatFs/Src/ff.c **** 				tm = GET_FATTIME();
4037:Middlewares/Third_Party/FatFs/Src/ff.c **** 				ST_DWORD(dj.dir + DIR_WrtTime, tm);
4038:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {
4039:Middlewares/Third_Party/FatFs/Src/ff.c **** 				dj.dir[0] = DDEM;			/* Remove the volume label */
4040:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
4041:Middlewares/Third_Party/FatFs/Src/ff.c **** 			dj.fs->wflag = 1;
4042:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = sync_fs(dj.fs);
4043:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {					/* No volume label is found or error */
4044:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (res == FR_NO_FILE) {
4045:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_OK;
4046:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (vn[0]) {				/* Create volume label as new */
4047:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = dir_alloc(&dj, 1);	/* Allocate an entry for volume label */
4048:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (res == FR_OK) {
4049:Middlewares/Third_Party/FatFs/Src/ff.c **** 						mem_set(dj.dir, 0, SZ_DIRE);	/* Set volume label */
4050:Middlewares/Third_Party/FatFs/Src/ff.c **** 						mem_cpy(dj.dir, vn, 11);
4051:Middlewares/Third_Party/FatFs/Src/ff.c **** 						dj.dir[DIR_Attr] = AM_VOL;
4052:Middlewares/Third_Party/FatFs/Src/ff.c **** 						tm = GET_FATTIME();
4053:Middlewares/Third_Party/FatFs/Src/ff.c **** 						ST_DWORD(dj.dir + DIR_WrtTime, tm);
4054:Middlewares/Third_Party/FatFs/Src/ff.c **** 						dj.fs->wflag = 1;
4055:Middlewares/Third_Party/FatFs/Src/ff.c **** 						res = sync_fs(dj.fs);
4056:Middlewares/Third_Party/FatFs/Src/ff.c **** 					}
4057:Middlewares/Third_Party/FatFs/Src/ff.c **** 				}
4058:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
4059:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
4060:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
4061:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4062:Middlewares/Third_Party/FatFs/Src/ff.c **** 	LEAVE_FF(dj.fs, res);
4063:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 6949              		.loc 1 4063 0
 6950 00be 2046     		mov	r0, r4
 6951 00c0 0DF50C7D 		add	sp, sp, #560
 6952              	.LCFI100:
 6953              		.cfi_remember_state
 6954              		.cfi_def_cfa_offset 24
 6955              		@ sp needed
 6956 00c4 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 6957              	.LVL968:
 6958              	.L635:
 6959              	.LCFI101:
 6960              		.cfi_restore_state
4032:Middlewares/Third_Party/FatFs/Src/ff.c **** 		res = dir_read(&dj, 1);		/* Get an entry with AM_VOL */
 6961              		.loc 1 4032 0
 6962 00c8 0121     		movs	r1, #1
 6963 00ca 05A8     		add	r0, sp, #20
 6964              	.LVL969:
 6965 00cc FFF7FEFF 		bl	dir_read
 6966              	.LVL970:
4033:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (vn[0]) {
 6967              		.loc 1 4033 0
 6968 00d0 F0B9     		cbnz	r0, .L623
4034:Middlewares/Third_Party/FatFs/Src/ff.c **** 				mem_cpy(dj.dir, vn, 11);	/* Change the volume label name */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 208


 6969              		.loc 1 4034 0
 6970 00d2 9DF80830 		ldrb	r3, [sp, #8]	@ zero_extendqisi2
 6971 00d6 53B9     		cbnz	r3, .L636
4039:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
 6972              		.loc 1 4039 0
 6973 00d8 8A9B     		ldr	r3, [sp, #552]
 6974 00da E522     		movs	r2, #229
 6975 00dc 1A70     		strb	r2, [r3]
 6976              	.LVL971:
 6977              	.L625:
4041:Middlewares/Third_Party/FatFs/Src/ff.c **** 			res = sync_fs(dj.fs);
 6978              		.loc 1 4041 0
 6979 00de 8598     		ldr	r0, [sp, #532]
 6980 00e0 0123     		movs	r3, #1
 6981 00e2 80F80432 		strb	r3, [r0, #516]
4042:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {					/* No volume label is found or error */
 6982              		.loc 1 4042 0
 6983 00e6 FFF7FEFF 		bl	sync_fs
 6984              	.LVL972:
 6985 00ea 0446     		mov	r4, r0
 6986              	.LVL973:
 6987 00ec E7E7     		b	.L610
 6988              	.LVL974:
 6989              	.L636:
4035:Middlewares/Third_Party/FatFs/Src/ff.c **** 				tm = GET_FATTIME();
 6990              		.loc 1 4035 0
 6991 00ee 0B22     		movs	r2, #11
 6992 00f0 02A9     		add	r1, sp, #8
 6993 00f2 8A98     		ldr	r0, [sp, #552]
 6994              	.LVL975:
 6995 00f4 FFF7FEFF 		bl	mem_cpy
 6996              	.LVL976:
4037:Middlewares/Third_Party/FatFs/Src/ff.c **** 			} else {
 6997              		.loc 1 4037 0
 6998 00f8 8A9A     		ldr	r2, [sp, #552]
 6999 00fa 0023     		movs	r3, #0
 7000 00fc 9375     		strb	r3, [r2, #22]
 7001 00fe 8A9A     		ldr	r2, [sp, #552]
 7002 0100 D375     		strb	r3, [r2, #23]
 7003 0102 8A9B     		ldr	r3, [sp, #552]
 7004 0104 C422     		movs	r2, #196
 7005 0106 1A76     		strb	r2, [r3, #24]
 7006 0108 8A9B     		ldr	r3, [sp, #552]
 7007 010a 4622     		movs	r2, #70
 7008 010c 5A76     		strb	r2, [r3, #25]
 7009 010e E6E7     		b	.L625
 7010              	.LVL977:
 7011              	.L623:
4044:Middlewares/Third_Party/FatFs/Src/ff.c **** 				res = FR_OK;
 7012              		.loc 1 4044 0
 7013 0110 0428     		cmp	r0, #4
 7014 0112 01D0     		beq	.L637
4032:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (res == FR_OK) {			/* A volume label is found */
 7015              		.loc 1 4032 0
 7016 0114 0446     		mov	r4, r0
 7017 0116 D2E7     		b	.L610
 7018              	.L637:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 209


 7019              	.LVL978:
4046:Middlewares/Third_Party/FatFs/Src/ff.c **** 					res = dir_alloc(&dj, 1);	/* Allocate an entry for volume label */
 7020              		.loc 1 4046 0
 7021 0118 9DF80830 		ldrb	r3, [sp, #8]	@ zero_extendqisi2
 7022 011c 002B     		cmp	r3, #0
 7023 011e CED0     		beq	.L610
4047:Middlewares/Third_Party/FatFs/Src/ff.c **** 					if (res == FR_OK) {
 7024              		.loc 1 4047 0
 7025 0120 0121     		movs	r1, #1
 7026 0122 05A8     		add	r0, sp, #20
 7027 0124 FFF7FEFF 		bl	dir_alloc
 7028              	.LVL979:
4048:Middlewares/Third_Party/FatFs/Src/ff.c **** 						mem_set(dj.dir, 0, SZ_DIRE);	/* Set volume label */
 7029              		.loc 1 4048 0
 7030 0128 0446     		mov	r4, r0
 7031 012a 0028     		cmp	r0, #0
 7032 012c C7D1     		bne	.L610
4049:Middlewares/Third_Party/FatFs/Src/ff.c **** 						mem_cpy(dj.dir, vn, 11);
 7033              		.loc 1 4049 0
 7034 012e 2022     		movs	r2, #32
 7035 0130 0021     		movs	r1, #0
 7036 0132 8A98     		ldr	r0, [sp, #552]
 7037              	.LVL980:
 7038 0134 FFF7FEFF 		bl	mem_set
 7039              	.LVL981:
4050:Middlewares/Third_Party/FatFs/Src/ff.c **** 						dj.dir[DIR_Attr] = AM_VOL;
 7040              		.loc 1 4050 0
 7041 0138 0B22     		movs	r2, #11
 7042 013a 02A9     		add	r1, sp, #8
 7043 013c 8A98     		ldr	r0, [sp, #552]
 7044 013e FFF7FEFF 		bl	mem_cpy
 7045              	.LVL982:
4051:Middlewares/Third_Party/FatFs/Src/ff.c **** 						tm = GET_FATTIME();
 7046              		.loc 1 4051 0
 7047 0142 8A9B     		ldr	r3, [sp, #552]
 7048 0144 0822     		movs	r2, #8
 7049 0146 DA72     		strb	r2, [r3, #11]
 7050              	.LVL983:
4053:Middlewares/Third_Party/FatFs/Src/ff.c **** 						dj.fs->wflag = 1;
 7051              		.loc 1 4053 0
 7052 0148 8A9A     		ldr	r2, [sp, #552]
 7053 014a 0023     		movs	r3, #0
 7054 014c 9375     		strb	r3, [r2, #22]
 7055 014e 8A9A     		ldr	r2, [sp, #552]
 7056 0150 D375     		strb	r3, [r2, #23]
 7057 0152 8A9B     		ldr	r3, [sp, #552]
 7058 0154 C422     		movs	r2, #196
 7059 0156 1A76     		strb	r2, [r3, #24]
 7060 0158 8A9B     		ldr	r3, [sp, #552]
 7061 015a 4622     		movs	r2, #70
 7062 015c 5A76     		strb	r2, [r3, #25]
4054:Middlewares/Third_Party/FatFs/Src/ff.c **** 						res = sync_fs(dj.fs);
 7063              		.loc 1 4054 0
 7064 015e 8598     		ldr	r0, [sp, #532]
 7065 0160 0123     		movs	r3, #1
 7066 0162 80F80432 		strb	r3, [r0, #516]
4055:Middlewares/Third_Party/FatFs/Src/ff.c **** 					}
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 210


 7067              		.loc 1 4055 0
 7068 0166 FFF7FEFF 		bl	sync_fs
 7069              	.LVL984:
 7070 016a 0446     		mov	r4, r0
 7071              	.LVL985:
 7072 016c A7E7     		b	.L610
 7073              	.LVL986:
 7074              	.L627:
4020:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (w >= 0x100) vn[j++] = (BYTE)(w >> 8);
 7075              		.loc 1 4020 0
 7076 016e 0624     		movs	r4, #6
 7077              	.LVL987:
 7078 0170 A5E7     		b	.L610
 7079              	.LVL988:
 7080              	.L628:
 7081 0172 0624     		movs	r4, #6
 7082              	.LVL989:
 7083 0174 A3E7     		b	.L610
 7084              	.LVL990:
 7085              	.L630:
 7086 0176 0624     		movs	r4, #6
 7087              	.LVL991:
 7088 0178 A1E7     		b	.L610
 7089              	.LVL992:
 7090              	.L632:
4025:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 7091              		.loc 1 4025 0
 7092 017a 0624     		movs	r4, #6
 7093              	.LVL993:
 7094 017c 9FE7     		b	.L610
 7095              	.L639:
 7096 017e 00BF     		.align	2
 7097              	.L638:
 7098 0180 00000000 		.word	.LANCHOR0
 7099 0184 00000000 		.word	.LC1
 7100              		.cfi_endproc
 7101              	.LFE113:
 7103              		.section	.text.f_mkfs,"ax",%progbits
 7104              		.align	1
 7105              		.global	f_mkfs
 7106              		.syntax unified
 7107              		.thumb
 7108              		.thumb_func
 7109              		.fpu softvfp
 7111              	f_mkfs:
 7112              	.LFB114:
4064:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4065:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* !_FS_READONLY */
4066:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* _USE_LABEL */
4067:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4068:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4069:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4070:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
4071:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Forward data to the stream directly (available on only tiny cfg)      */
4072:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
4073:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_FORWARD && _FS_TINY
4074:Middlewares/Third_Party/FatFs/Src/ff.c **** 
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 211


4075:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_forward (
4076:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FIL* fp, 						/* Pointer to the file object */
4077:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT (*func)(const BYTE*,UINT),	/* Pointer to the streaming function */
4078:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT btf,						/* Number of bytes to forward */
4079:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT* bf						/* Pointer to number of bytes forwarded */
4080:Middlewares/Third_Party/FatFs/Src/ff.c **** )
4081:Middlewares/Third_Party/FatFs/Src/ff.c **** {
4082:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FRESULT res;
4083:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD remain, clst, sect;
4084:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT rcnt;
4085:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE csect;
4086:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4087:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4088:Middlewares/Third_Party/FatFs/Src/ff.c **** 	*bf = 0;	/* Clear transfer byte counter */
4089:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4090:Middlewares/Third_Party/FatFs/Src/ff.c **** 	res = validate(fp);								/* Check validity of the object */
4091:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
4092:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fp->err)									/* Check error */
4093:Middlewares/Third_Party/FatFs/Src/ff.c **** 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
4094:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!(fp->flag & FA_READ))						/* Check access mode */
4095:Middlewares/Third_Party/FatFs/Src/ff.c **** 		LEAVE_FF(fp->fs, FR_DENIED);
4096:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4097:Middlewares/Third_Party/FatFs/Src/ff.c **** 	remain = fp->fsize - fp->fptr;
4098:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (btf > remain) btf = (UINT)remain;			/* Truncate btf by remaining bytes */
4099:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4100:Middlewares/Third_Party/FatFs/Src/ff.c **** 	for ( ;  btf && (*func)(0, 0);					/* Repeat until all data transferred or stream becomes busy */
4101:Middlewares/Third_Party/FatFs/Src/ff.c **** 		fp->fptr += rcnt, *bf += rcnt, btf -= rcnt) {
4102:Middlewares/Third_Party/FatFs/Src/ff.c **** 		csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
4103:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {			/* On the sector boundary? */
4104:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (!csect) {							/* On the cluster boundary? */
4105:Middlewares/Third_Party/FatFs/Src/ff.c **** 				clst = (fp->fptr == 0) ?			/* On the top of the file? */
4106:Middlewares/Third_Party/FatFs/Src/ff.c **** 					fp->sclust : get_fat(fp->fs, fp->clust);
4107:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (clst <= 1) ABORT(fp->fs, FR_INT_ERR);
4108:Middlewares/Third_Party/FatFs/Src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
4109:Middlewares/Third_Party/FatFs/Src/ff.c **** 				fp->clust = clst;					/* Update current cluster */
4110:Middlewares/Third_Party/FatFs/Src/ff.c **** 			}
4111:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
4112:Middlewares/Third_Party/FatFs/Src/ff.c **** 		sect = clust2sect(fp->fs, fp->clust);		/* Get current data sector */
4113:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (!sect) ABORT(fp->fs, FR_INT_ERR);
4114:Middlewares/Third_Party/FatFs/Src/ff.c **** 		sect += csect;
4115:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (move_window(fp->fs, sect) != FR_OK)		/* Move sector window */
4116:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ABORT(fp->fs, FR_DISK_ERR);
4117:Middlewares/Third_Party/FatFs/Src/ff.c **** 		fp->dsect = sect;
4118:Middlewares/Third_Party/FatFs/Src/ff.c **** 		rcnt = SS(fp->fs) - (WORD)(fp->fptr % SS(fp->fs));	/* Forward data from sector window */
4119:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (rcnt > btf) rcnt = btf;
4120:Middlewares/Third_Party/FatFs/Src/ff.c **** 		rcnt = (*func)(&fp->fs->win.d8[(WORD)fp->fptr % SS(fp->fs)], rcnt);
4121:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (!rcnt) ABORT(fp->fs, FR_INT_ERR);
4122:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
4123:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4124:Middlewares/Third_Party/FatFs/Src/ff.c **** 	LEAVE_FF(fp->fs, FR_OK);
4125:Middlewares/Third_Party/FatFs/Src/ff.c **** }
4126:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif /* _USE_FORWARD */
4127:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4128:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4129:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4130:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_MKFS && !_FS_READONLY
4131:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 212


4132:Middlewares/Third_Party/FatFs/Src/ff.c **** /* Create file system on the logical drive                               */
4133:Middlewares/Third_Party/FatFs/Src/ff.c **** /*-----------------------------------------------------------------------*/
4134:Middlewares/Third_Party/FatFs/Src/ff.c **** #define N_ROOTDIR	512		/* Number of root directory entries for FAT12/16 */
4135:Middlewares/Third_Party/FatFs/Src/ff.c **** #define N_FATS		1		/* Number of FATs (1 or 2) */
4136:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4137:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4138:Middlewares/Third_Party/FatFs/Src/ff.c **** FRESULT f_mkfs (
4139:Middlewares/Third_Party/FatFs/Src/ff.c **** 	const TCHAR* path,	/* Logical drive number */
4140:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE sfd,			/* Partitioning rule 0:FDISK, 1:SFD */
4141:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT au				/* Size of allocation unit in unit of byte or sector */
4142:Middlewares/Third_Party/FatFs/Src/ff.c **** )
4143:Middlewares/Third_Party/FatFs/Src/ff.c **** {
 7113              		.loc 1 4143 0
 7114              		.cfi_startproc
 7115              		@ args = 0, pretend = 0, frame = 40
 7116              		@ frame_needed = 0, uses_anonymous_args = 0
 7117              	.LVL994:
 7118 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 7119              	.LCFI102:
 7120              		.cfi_def_cfa_offset 36
 7121              		.cfi_offset 4, -36
 7122              		.cfi_offset 5, -32
 7123              		.cfi_offset 6, -28
 7124              		.cfi_offset 7, -24
 7125              		.cfi_offset 8, -20
 7126              		.cfi_offset 9, -16
 7127              		.cfi_offset 10, -12
 7128              		.cfi_offset 11, -8
 7129              		.cfi_offset 14, -4
 7130 0004 8BB0     		sub	sp, sp, #44
 7131              	.LCFI103:
 7132              		.cfi_def_cfa_offset 80
 7133 0006 0790     		str	r0, [sp, #28]
4144:Middlewares/Third_Party/FatFs/Src/ff.c **** 	static const WORD vst[] = { 1024,   512,  256,  128,   64,    32,   16,    8,    4,    2,   0};
4145:Middlewares/Third_Party/FatFs/Src/ff.c **** 	static const WORD cst[] = {32768, 16384, 8192, 4096, 2048, 16384, 8192, 4096, 2048, 1024, 512};
4146:Middlewares/Third_Party/FatFs/Src/ff.c **** 	int vol;
4147:Middlewares/Third_Party/FatFs/Src/ff.c **** 	BYTE fmt, md, sys, *tbl, pdrv, part;
4148:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD n_clst, vs, n, wsect;
4149:Middlewares/Third_Party/FatFs/Src/ff.c **** 	UINT i;
4150:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD b_vol, b_fat, b_dir, b_data;	/* LBA */
4151:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD n_vol, n_rsv, n_fat, n_dir;	/* Size */
4152:Middlewares/Third_Party/FatFs/Src/ff.c **** 	FATFS *fs;
4153:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DSTATUS stat;
4154:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_TRIM
4155:Middlewares/Third_Party/FatFs/Src/ff.c **** 	DWORD eb[2];
4156:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
4157:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4158:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4159:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Check mounted drive and clear work area */
4160:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (sfd > 1) return FR_INVALID_PARAMETER;
 7134              		.loc 1 4160 0
 7135 0008 0129     		cmp	r1, #1
 7136 000a 03D9     		bls	.L708
 7137 000c 1320     		movs	r0, #19
 7138              	.LVL995:
 7139              	.L641:
4161:Middlewares/Third_Party/FatFs/Src/ff.c **** 	vol = get_ldnumber(&path);
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 213


4162:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
4163:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs = FatFs[vol];
4164:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;
4165:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->fs_type = 0;
4166:Middlewares/Third_Party/FatFs/Src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
4167:Middlewares/Third_Party/FatFs/Src/ff.c **** 	part = LD2PT(vol);	/* Partition (0:auto detect, 1-4:get from partition table)*/
4168:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4169:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Get disk statics */
4170:Middlewares/Third_Party/FatFs/Src/ff.c **** 	stat = disk_initialize(pdrv);
4171:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
4172:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
4173:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get disk sector size */
4174:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (disk_ioctl(pdrv, GET_SECTOR_SIZE, &SS(fs)) != RES_OK || SS(fs) > _MAX_SS || SS(fs) < _MIN_SS)
4175:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_DISK_ERR;
4176:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
4177:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (_MULTI_PARTITION && part) {
4178:Middlewares/Third_Party/FatFs/Src/ff.c **** 		/* Get partition information from partition table in the MBR */
4179:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (disk_read(pdrv, fs->win.d8, 0, 1) != RES_OK) return FR_DISK_ERR;
4180:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (LD_WORD(fs->win.d8 + BS_55AA) != 0xAA55) return FR_MKFS_ABORTED;
4181:Middlewares/Third_Party/FatFs/Src/ff.c **** 		tbl = &fs->win.d8[MBR_Table + (part - 1) * SZ_PTE];
4182:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (!tbl[4]) return FR_MKFS_ABORTED;	/* No partition? */
4183:Middlewares/Third_Party/FatFs/Src/ff.c **** 		b_vol = LD_DWORD(tbl + 8);	/* Volume start sector */
4184:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n_vol = LD_DWORD(tbl + 12);	/* Volume size */
4185:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {
4186:Middlewares/Third_Party/FatFs/Src/ff.c **** 		/* Create a partition in this function */
4187:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &n_vol) != RES_OK || n_vol < 128)
4188:Middlewares/Third_Party/FatFs/Src/ff.c **** 			return FR_DISK_ERR;
4189:Middlewares/Third_Party/FatFs/Src/ff.c **** 		b_vol = (sfd) ? 0 : 63;		/* Volume start sector */
4190:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n_vol -= b_vol;				/* Volume size */
4191:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
4192:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4193:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (au & (au - 1)) au = 0;
4194:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!au) {						/* AU auto selection */
4195:Middlewares/Third_Party/FatFs/Src/ff.c **** 		vs = n_vol / (2000 / (SS(fs) / 512));
4196:Middlewares/Third_Party/FatFs/Src/ff.c **** 		for (i = 0; vs < vst[i]; i++) ;
4197:Middlewares/Third_Party/FatFs/Src/ff.c **** 		au = cst[i];
4198:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
4199:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (au >= _MIN_SS) au /= SS(fs);	/* Number of sectors per cluster */
4200:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!au) au = 1;
4201:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (au > 128) au = 128;
4202:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4203:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Pre-compute number of clusters and FAT sub-type */
4204:Middlewares/Third_Party/FatFs/Src/ff.c **** 	n_clst = n_vol / au;
4205:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fmt = FS_FAT12;
4206:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (n_clst >= MIN_FAT16) fmt = FS_FAT16;
4207:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (n_clst >= MIN_FAT32) fmt = FS_FAT32;
4208:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4209:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Determine offset and size of FAT structure */
4210:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fmt == FS_FAT32) {
4211:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n_fat = ((n_clst * 4) + 8 + SS(fs) - 1) / SS(fs);
4212:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n_rsv = 32;
4213:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n_dir = 0;
4214:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {
4215:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n_fat = (fmt == FS_FAT12) ? (n_clst * 3 + 1) / 2 + 3 : (n_clst * 2) + 4;
4216:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
4217:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n_rsv = 1;
4218:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n_dir = (DWORD)N_ROOTDIR * SZ_DIRE / SS(fs);
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 214


4219:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
4220:Middlewares/Third_Party/FatFs/Src/ff.c **** 	b_fat = b_vol + n_rsv;				/* FAT area start sector */
4221:Middlewares/Third_Party/FatFs/Src/ff.c **** 	b_dir = b_fat + n_fat * N_FATS;		/* Directory area start sector */
4222:Middlewares/Third_Party/FatFs/Src/ff.c **** 	b_data = b_dir + n_dir;				/* Data area start sector */
4223:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (n_vol < b_data + au - b_vol) return FR_MKFS_ABORTED;	/* Too small volume */
4224:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4225:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Align data start sector to erase block boundary (for flash memory media) */
4226:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (disk_ioctl(pdrv, GET_BLOCK_SIZE, &n) != RES_OK || !n || n > 32768) n = 1;
4227:Middlewares/Third_Party/FatFs/Src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
4228:Middlewares/Third_Party/FatFs/Src/ff.c **** 	n = (n - b_data) / N_FATS;
4229:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fmt == FS_FAT32) {		/* FAT32: Move FAT offset */
4230:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n_rsv += n;
4231:Middlewares/Third_Party/FatFs/Src/ff.c **** 		b_fat += n;
4232:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {					/* FAT12/16: Expand FAT size */
4233:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n_fat += n;
4234:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
4235:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4236:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Determine number of clusters and final check of validity of the FAT sub-type */
4237:Middlewares/Third_Party/FatFs/Src/ff.c **** 	n_clst = (n_vol - n_rsv - n_fat * N_FATS - n_dir) / au;
4238:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
4239:Middlewares/Third_Party/FatFs/Src/ff.c **** 		|| (fmt == FS_FAT32 && n_clst < MIN_FAT32))
4240:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_MKFS_ABORTED;
4241:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4242:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Determine system ID in the partition table */
4243:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fmt == FS_FAT32) {
4244:Middlewares/Third_Party/FatFs/Src/ff.c **** 		sys = 0x0C;		/* FAT32X */
4245:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {
4246:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (fmt == FS_FAT12 && n_vol < 0x10000) {
4247:Middlewares/Third_Party/FatFs/Src/ff.c **** 			sys = 0x01;	/* FAT12(<65536) */
4248:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {
4249:Middlewares/Third_Party/FatFs/Src/ff.c **** 			sys = (n_vol < 0x10000) ? 0x04 : 0x06;	/* FAT16(<65536) : FAT12/16(>=65536) */
4250:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
4251:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
4252:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4253:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (_MULTI_PARTITION && part) {
4254:Middlewares/Third_Party/FatFs/Src/ff.c **** 		/* Update system ID in the partition table */
4255:Middlewares/Third_Party/FatFs/Src/ff.c **** 		tbl = &fs->win.d8[MBR_Table + (part - 1) * SZ_PTE];
4256:Middlewares/Third_Party/FatFs/Src/ff.c **** 		tbl[4] = sys;
4257:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (disk_write(pdrv, fs->win.d8, 0, 1) != RES_OK)	/* Write it to teh MBR */
4258:Middlewares/Third_Party/FatFs/Src/ff.c **** 			return FR_DISK_ERR;
4259:Middlewares/Third_Party/FatFs/Src/ff.c **** 		md = 0xF8;
4260:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {
4261:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (sfd) {	/* No partition table (SFD) */
4262:Middlewares/Third_Party/FatFs/Src/ff.c **** 			md = 0xF0;
4263:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {	/* Create partition table (FDISK) */
4264:Middlewares/Third_Party/FatFs/Src/ff.c **** 			mem_set(fs->win.d8, 0, SS(fs));
4265:Middlewares/Third_Party/FatFs/Src/ff.c **** 			tbl = fs->win.d8 + MBR_Table;	/* Create partition table for single partition in the drive */
4266:Middlewares/Third_Party/FatFs/Src/ff.c **** 			tbl[1] = 1;						/* Partition start head */
4267:Middlewares/Third_Party/FatFs/Src/ff.c **** 			tbl[2] = 1;						/* Partition start sector */
4268:Middlewares/Third_Party/FatFs/Src/ff.c **** 			tbl[3] = 0;						/* Partition start cylinder */
4269:Middlewares/Third_Party/FatFs/Src/ff.c **** 			tbl[4] = sys;					/* System type */
4270:Middlewares/Third_Party/FatFs/Src/ff.c **** 			tbl[5] = 254;					/* Partition end head */
4271:Middlewares/Third_Party/FatFs/Src/ff.c **** 			n = (b_vol + n_vol) / 63 / 255;
4272:Middlewares/Third_Party/FatFs/Src/ff.c **** 			tbl[6] = (BYTE)(n >> 2 | 63);	/* Partition end sector */
4273:Middlewares/Third_Party/FatFs/Src/ff.c **** 			tbl[7] = (BYTE)n;				/* End cylinder */
4274:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(tbl + 8, 63);			/* Partition start in LBA */
4275:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(tbl + 12, n_vol);		/* Partition size in LBA */
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 215


4276:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_WORD(fs->win.d8 + BS_55AA, 0xAA55);	/* MBR signature */
4277:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (disk_write(pdrv, fs->win.d8, 0, 1) != RES_OK)	/* Write it to the MBR */
4278:Middlewares/Third_Party/FatFs/Src/ff.c **** 				return FR_DISK_ERR;
4279:Middlewares/Third_Party/FatFs/Src/ff.c **** 			md = 0xF8;
4280:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
4281:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
4282:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4283:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Create BPB in the VBR */
4284:Middlewares/Third_Party/FatFs/Src/ff.c **** 	tbl = fs->win.d8;							/* Clear sector */
4285:Middlewares/Third_Party/FatFs/Src/ff.c **** 	mem_set(tbl, 0, SS(fs));
4286:Middlewares/Third_Party/FatFs/Src/ff.c **** 	mem_cpy(tbl, "\xEB\xFE\x90" "MSDOS5.0", 11);/* Boot jump code, OEM name */
4287:Middlewares/Third_Party/FatFs/Src/ff.c **** 	i = SS(fs);								/* Sector size */
4288:Middlewares/Third_Party/FatFs/Src/ff.c **** 	ST_WORD(tbl + BPB_BytsPerSec, i);
4289:Middlewares/Third_Party/FatFs/Src/ff.c **** 	tbl[BPB_SecPerClus] = (BYTE)au;			/* Sectors per cluster */
4290:Middlewares/Third_Party/FatFs/Src/ff.c **** 	ST_WORD(tbl + BPB_RsvdSecCnt, n_rsv);	/* Reserved sectors */
4291:Middlewares/Third_Party/FatFs/Src/ff.c **** 	tbl[BPB_NumFATs] = N_FATS;				/* Number of FATs */
4292:Middlewares/Third_Party/FatFs/Src/ff.c **** 	i = (fmt == FS_FAT32) ? 0 : N_ROOTDIR;	/* Number of root directory entries */
4293:Middlewares/Third_Party/FatFs/Src/ff.c **** 	ST_WORD(tbl + BPB_RootEntCnt, i);
4294:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (n_vol < 0x10000) {					/* Number of total sectors */
4295:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_WORD(tbl + BPB_TotSec16, n_vol);
4296:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {
4297:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_DWORD(tbl + BPB_TotSec32, n_vol);
4298:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
4299:Middlewares/Third_Party/FatFs/Src/ff.c **** 	tbl[BPB_Media] = md;					/* Media descriptor */
4300:Middlewares/Third_Party/FatFs/Src/ff.c **** 	ST_WORD(tbl + BPB_SecPerTrk, 63);		/* Number of sectors per track */
4301:Middlewares/Third_Party/FatFs/Src/ff.c **** 	ST_WORD(tbl + BPB_NumHeads, 255);		/* Number of heads */
4302:Middlewares/Third_Party/FatFs/Src/ff.c **** 	ST_DWORD(tbl + BPB_HiddSec, b_vol);		/* Hidden sectors */
4303:Middlewares/Third_Party/FatFs/Src/ff.c **** 	n = GET_FATTIME();						/* Use current time as VSN */
4304:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fmt == FS_FAT32) {
4305:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_DWORD(tbl + BS_VolID32, n);		/* VSN */
4306:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_DWORD(tbl + BPB_FATSz32, n_fat);	/* Number of sectors per FAT */
4307:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_DWORD(tbl + BPB_RootClus, 2);	/* Root directory start cluster (2) */
4308:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_WORD(tbl + BPB_FSInfo, 1);		/* FSINFO record offset (VBR + 1) */
4309:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_WORD(tbl + BPB_BkBootSec, 6);	/* Backup boot record offset (VBR + 6) */
4310:Middlewares/Third_Party/FatFs/Src/ff.c **** 		tbl[BS_DrvNum32] = 0x80;			/* Drive number */
4311:Middlewares/Third_Party/FatFs/Src/ff.c **** 		tbl[BS_BootSig32] = 0x29;			/* Extended boot signature */
4312:Middlewares/Third_Party/FatFs/Src/ff.c **** 		mem_cpy(tbl + BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
4313:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {
4314:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_DWORD(tbl + BS_VolID, n);		/* VSN */
4315:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_WORD(tbl + BPB_FATSz16, n_fat);	/* Number of sectors per FAT */
4316:Middlewares/Third_Party/FatFs/Src/ff.c **** 		tbl[BS_DrvNum] = 0x80;				/* Drive number */
4317:Middlewares/Third_Party/FatFs/Src/ff.c **** 		tbl[BS_BootSig] = 0x29;				/* Extended boot signature */
4318:Middlewares/Third_Party/FatFs/Src/ff.c **** 		mem_cpy(tbl + BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
4319:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
4320:Middlewares/Third_Party/FatFs/Src/ff.c **** 	ST_WORD(tbl + BS_55AA, 0xAA55);			/* Signature (Offset is fixed here regardless of sector size) */
4321:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (disk_write(pdrv, tbl, b_vol, 1) != RES_OK)	/* Write it to the VBR sector */
4322:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_DISK_ERR;
4323:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fmt == FS_FAT32)					/* Write backup VBR if needed (VBR + 6) */
4324:Middlewares/Third_Party/FatFs/Src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 6, 1);
4325:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4326:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Initialize FAT area */
4327:Middlewares/Third_Party/FatFs/Src/ff.c **** 	wsect = b_fat;
4328:Middlewares/Third_Party/FatFs/Src/ff.c **** 	for (i = 0; i < N_FATS; i++) {		/* Initialize each FAT copy */
4329:Middlewares/Third_Party/FatFs/Src/ff.c **** 		mem_set(tbl, 0, SS(fs));			/* 1st sector of the FAT  */
4330:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n = md;								/* Media descriptor byte */
4331:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (fmt != FS_FAT32) {
4332:Middlewares/Third_Party/FatFs/Src/ff.c **** 			n |= (fmt == FS_FAT12) ? 0x00FFFF00 : 0xFFFFFF00;
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 216


4333:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(tbl + 0, n);			/* Reserve cluster #0-1 (FAT12/16) */
4334:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {
4335:Middlewares/Third_Party/FatFs/Src/ff.c **** 			n |= 0xFFFFFF00;
4336:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(tbl + 0, n);			/* Reserve cluster #0-1 (FAT32) */
4337:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(tbl + 4, 0xFFFFFFFF);
4338:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(tbl + 8, 0x0FFFFFFF);	/* Reserve cluster #2 for root directory */
4339:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
4340:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
4341:Middlewares/Third_Party/FatFs/Src/ff.c **** 			return FR_DISK_ERR;
4342:Middlewares/Third_Party/FatFs/Src/ff.c **** 		mem_set(tbl, 0, SS(fs));			/* Fill following FAT entries with zero */
4343:Middlewares/Third_Party/FatFs/Src/ff.c **** 		for (n = 1; n < n_fat; n++) {		/* This loop may take a time on FAT32 volume due to many single se
4344:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
4345:Middlewares/Third_Party/FatFs/Src/ff.c **** 				return FR_DISK_ERR;
4346:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
4347:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
4348:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4349:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Initialize root directory */
4350:Middlewares/Third_Party/FatFs/Src/ff.c **** 	i = (fmt == FS_FAT32) ? au : (UINT)n_dir;
4351:Middlewares/Third_Party/FatFs/Src/ff.c **** 	do {
4352:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
4353:Middlewares/Third_Party/FatFs/Src/ff.c **** 			return FR_DISK_ERR;
4354:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} while (--i);
4355:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4356:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _USE_TRIM	/* Erase data area if needed */
4357:Middlewares/Third_Party/FatFs/Src/ff.c **** 	{
4358:Middlewares/Third_Party/FatFs/Src/ff.c **** 		eb[0] = wsect; eb[1] = wsect + (n_clst - ((fmt == FS_FAT32) ? 1 : 0)) * au - 1;
4359:Middlewares/Third_Party/FatFs/Src/ff.c **** 		disk_ioctl(pdrv, CTRL_TRIM, eb);
4360:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
4361:Middlewares/Third_Party/FatFs/Src/ff.c **** #endif
4362:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4363:Middlewares/Third_Party/FatFs/Src/ff.c **** 	/* Create FSINFO if needed */
4364:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fmt == FS_FAT32) {
4365:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_DWORD(tbl + FSI_LeadSig, 0x41615252);
4366:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_DWORD(tbl + FSI_StrucSig, 0x61417272);
4367:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_DWORD(tbl + FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
4368:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_DWORD(tbl + FSI_Nxt_Free, 2);			/* Last allocated cluster# */
4369:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_WORD(tbl + BS_55AA, 0xAA55);
4370:Middlewares/Third_Party/FatFs/Src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 1, 1);	/* Write original (VBR + 1) */
4371:Middlewares/Third_Party/FatFs/Src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 7, 1);	/* Write backup (VBR + 7) */
4372:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
4373:Middlewares/Third_Party/FatFs/Src/ff.c **** 
4374:Middlewares/Third_Party/FatFs/Src/ff.c **** 	return (disk_ioctl(pdrv, CTRL_SYNC, 0) == RES_OK) ? FR_OK : FR_DISK_ERR;
4375:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 7140              		.loc 1 4375 0
 7141 000e 0BB0     		add	sp, sp, #44
 7142              	.LCFI104:
 7143              		.cfi_remember_state
 7144              		.cfi_def_cfa_offset 36
 7145              		@ sp needed
 7146 0010 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 7147              	.LVL996:
 7148              	.L708:
 7149              	.LCFI105:
 7150              		.cfi_restore_state
 7151 0014 0C46     		mov	r4, r1
 7152 0016 1646     		mov	r6, r2
4161:Middlewares/Third_Party/FatFs/Src/ff.c **** 	vol = get_ldnumber(&path);
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 217


 7153              		.loc 1 4161 0
 7154 0018 07A8     		add	r0, sp, #28
 7155              	.LVL997:
 7156 001a FFF7FEFF 		bl	get_ldnumber
 7157              	.LVL998:
4162:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs = FatFs[vol];
 7158              		.loc 1 4162 0
 7159 001e 0028     		cmp	r0, #0
 7160 0020 C0F2CC82 		blt	.L681
4163:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;
 7161              		.loc 1 4163 0
 7162 0024 964B     		ldr	r3, .L723
 7163 0026 53F82070 		ldr	r7, [r3, r0, lsl #2]
 7164              	.LVL999:
4164:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->fs_type = 0;
 7165              		.loc 1 4164 0
 7166 002a 002F     		cmp	r7, #0
 7167 002c 00F0C882 		beq	.L682
4165:Middlewares/Third_Party/FatFs/Src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
 7168              		.loc 1 4165 0
 7169 0030 0023     		movs	r3, #0
 7170 0032 87F80032 		strb	r3, [r7, #512]
4166:Middlewares/Third_Party/FatFs/Src/ff.c **** 	part = LD2PT(vol);	/* Partition (0:auto detect, 1-4:get from partition table)*/
 7171              		.loc 1 4166 0
 7172 0036 C5B2     		uxtb	r5, r0
 7173              	.LVL1000:
4170:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
 7174              		.loc 1 4170 0
 7175 0038 2846     		mov	r0, r5
 7176              	.LVL1001:
 7177 003a FFF7FEFF 		bl	disk_initialize
 7178              	.LVL1002:
4171:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
 7179              		.loc 1 4171 0
 7180 003e 10F0010F 		tst	r0, #1
 7181 0042 40F0BF82 		bne	.L683
4172:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get disk sector size */
 7182              		.loc 1 4172 0
 7183 0046 10F0040F 		tst	r0, #4
 7184 004a 40F0BD82 		bne	.L684
4187:Middlewares/Third_Party/FatFs/Src/ff.c **** 			return FR_DISK_ERR;
 7185              		.loc 1 4187 0
 7186 004e 08AA     		add	r2, sp, #32
 7187 0050 0121     		movs	r1, #1
 7188 0052 2846     		mov	r0, r5
 7189              	.LVL1003:
 7190 0054 FFF7FEFF 		bl	disk_ioctl
 7191              	.LVL1004:
 7192 0058 0028     		cmp	r0, #0
 7193 005a 40F0B782 		bne	.L685
4187:Middlewares/Third_Party/FatFs/Src/ff.c **** 			return FR_DISK_ERR;
 7194              		.loc 1 4187 0 is_stmt 0 discriminator 1
 7195 005e 089A     		ldr	r2, [sp, #32]
 7196 0060 7F2A     		cmp	r2, #127
 7197 0062 40F2B582 		bls	.L686
4189:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n_vol -= b_vol;				/* Volume size */
 7198              		.loc 1 4189 0 is_stmt 1
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 218


 7199 0066 74B1     		cbz	r4, .L687
 7200 0068 0023     		movs	r3, #0
 7201 006a 0193     		str	r3, [sp, #4]
 7202              	.L642:
 7203              	.LVL1005:
4190:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 7204              		.loc 1 4190 0 discriminator 4
 7205 006c 019B     		ldr	r3, [sp, #4]
 7206 006e D21A     		subs	r2, r2, r3
 7207 0070 0892     		str	r2, [sp, #32]
4193:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!au) {						/* AU auto selection */
 7208              		.loc 1 4193 0 discriminator 4
 7209 0072 731E     		subs	r3, r6, #1
 7210 0074 1E42     		tst	r6, r3
 7211 0076 00D1     		bne	.L643
4194:Middlewares/Third_Party/FatFs/Src/ff.c **** 		vs = n_vol / (2000 / (SS(fs) / 512));
 7212              		.loc 1 4194 0
 7213 0078 8EB9     		cbnz	r6, .L644
 7214              	.L643:
4195:Middlewares/Third_Party/FatFs/Src/ff.c **** 		for (i = 0; vs < vst[i]; i++) ;
 7215              		.loc 1 4195 0
 7216 007a 8248     		ldr	r0, .L723+4
 7217 007c A0FB0230 		umull	r3, r0, r0, r2
 7218 0080 C009     		lsrs	r0, r0, #7
 7219              	.LVL1006:
4196:Middlewares/Third_Party/FatFs/Src/ff.c **** 		au = cst[i];
 7220              		.loc 1 4196 0
 7221 0082 0023     		movs	r3, #0
 7222 0084 03E0     		b	.L645
 7223              	.LVL1007:
 7224              	.L687:
4189:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n_vol -= b_vol;				/* Volume size */
 7225              		.loc 1 4189 0
 7226 0086 3F23     		movs	r3, #63
 7227 0088 0193     		str	r3, [sp, #4]
 7228 008a EFE7     		b	.L642
 7229              	.LVL1008:
 7230              	.L646:
4196:Middlewares/Third_Party/FatFs/Src/ff.c **** 		au = cst[i];
 7231              		.loc 1 4196 0 discriminator 3
 7232 008c 0133     		adds	r3, r3, #1
 7233              	.LVL1009:
 7234              	.L645:
4196:Middlewares/Third_Party/FatFs/Src/ff.c **** 		au = cst[i];
 7235              		.loc 1 4196 0 is_stmt 0 discriminator 1
 7236 008e 7E49     		ldr	r1, .L723+8
 7237 0090 31F81310 		ldrh	r1, [r1, r3, lsl #1]
 7238 0094 8842     		cmp	r0, r1
 7239 0096 F9D3     		bcc	.L646
4197:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 7240              		.loc 1 4197 0 is_stmt 1
 7241 0098 7C49     		ldr	r1, .L723+12
 7242 009a 31F81360 		ldrh	r6, [r1, r3, lsl #1]
 7243              	.LVL1010:
 7244              	.L644:
4199:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!au) au = 1;
 7245              		.loc 1 4199 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 219


 7246 009e B6F5007F 		cmp	r6, #512
 7247 00a2 00D3     		bcc	.L647
4199:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (!au) au = 1;
 7248              		.loc 1 4199 0 is_stmt 0 discriminator 1
 7249 00a4 760A     		lsrs	r6, r6, #9
 7250              	.LVL1011:
 7251              	.L647:
4200:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (au > 128) au = 128;
 7252              		.loc 1 4200 0 is_stmt 1
 7253 00a6 1EB1     		cbz	r6, .L688
4201:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 7254              		.loc 1 4201 0
 7255 00a8 802E     		cmp	r6, #128
 7256 00aa 02D9     		bls	.L648
 7257 00ac 8026     		movs	r6, #128
 7258              	.LVL1012:
 7259 00ae 00E0     		b	.L648
 7260              	.LVL1013:
 7261              	.L688:
4200:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (au > 128) au = 128;
 7262              		.loc 1 4200 0
 7263 00b0 0126     		movs	r6, #1
 7264              	.LVL1014:
 7265              	.L648:
4204:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fmt = FS_FAT12;
 7266              		.loc 1 4204 0
 7267 00b2 B2FBF6F3 		udiv	r3, r2, r6
 7268              	.LVL1015:
4206:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (n_clst >= MIN_FAT32) fmt = FS_FAT32;
 7269              		.loc 1 4206 0
 7270 00b6 40F6F571 		movw	r1, #4085
 7271 00ba 8B42     		cmp	r3, r1
 7272 00bc 18D8     		bhi	.L690
4205:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (n_clst >= MIN_FAT16) fmt = FS_FAT16;
 7273              		.loc 1 4205 0
 7274 00be 4FF00109 		mov	r9, #1
 7275              	.L649:
 7276              	.LVL1016:
4207:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 7277              		.loc 1 4207 0
 7278 00c2 4FF6F571 		movw	r1, #65525
 7279 00c6 8B42     		cmp	r3, r1
 7280 00c8 15D8     		bhi	.L691
4210:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n_fat = ((n_clst * 4) + 8 + SS(fs) - 1) / SS(fs);
 7281              		.loc 1 4210 0
 7282 00ca B9F1030F 		cmp	r9, #3
 7283 00ce 14D0     		beq	.L650
4215:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
 7284              		.loc 1 4215 0
 7285 00d0 B9F1010F 		cmp	r9, #1
 7286 00d4 61D0     		beq	.L709
4215:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
 7287              		.loc 1 4215 0 is_stmt 0 discriminator 2
 7288 00d6 03F10208 		add	r8, r3, #2
 7289 00da 4FEA4808 		lsl	r8, r8, #1
 7290              	.LVL1017:
 7291              	.L654:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 220


4216:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n_rsv = 1;
 7292              		.loc 1 4216 0 is_stmt 1 discriminator 4
 7293 00de 08F2FF18 		addw	r8, r8, #511
 7294              	.LVL1018:
 7295 00e2 4FEA5828 		lsr	r8, r8, #9
 7296              	.LVL1019:
4218:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 7297              		.loc 1 4218 0 discriminator 4
 7298 00e6 2023     		movs	r3, #32
 7299 00e8 0393     		str	r3, [sp, #12]
4217:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n_dir = (DWORD)N_ROOTDIR * SZ_DIRE / SS(fs);
 7300              		.loc 1 4217 0 discriminator 4
 7301 00ea 4FF0010B 		mov	fp, #1
 7302 00ee 10E0     		b	.L652
 7303              	.LVL1020:
 7304              	.L690:
4206:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (n_clst >= MIN_FAT32) fmt = FS_FAT32;
 7305              		.loc 1 4206 0
 7306 00f0 4FF00209 		mov	r9, #2
 7307 00f4 E5E7     		b	.L649
 7308              	.LVL1021:
 7309              	.L691:
4207:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 7310              		.loc 1 4207 0
 7311 00f6 4FF00309 		mov	r9, #3
 7312              	.LVL1022:
 7313              	.L650:
4211:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n_rsv = 32;
 7314              		.loc 1 4211 0
 7315 00fa 03F18208 		add	r8, r3, #130
 7316 00fe 4FEA8808 		lsl	r8, r8, #2
 7317 0102 08F1FF38 		add	r8, r8, #-1
 7318 0106 4FEA5828 		lsr	r8, r8, #9
 7319              	.LVL1023:
4213:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {
 7320              		.loc 1 4213 0
 7321 010a 0023     		movs	r3, #0
 7322              	.LVL1024:
 7323 010c 0393     		str	r3, [sp, #12]
4212:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n_dir = 0;
 7324              		.loc 1 4212 0
 7325 010e 4FF0200B 		mov	fp, #32
 7326              	.LVL1025:
 7327              	.L652:
4220:Middlewares/Third_Party/FatFs/Src/ff.c **** 	b_dir = b_fat + n_fat * N_FATS;		/* Directory area start sector */
 7328              		.loc 1 4220 0
 7329 0112 0199     		ldr	r1, [sp, #4]
 7330 0114 0BEB0103 		add	r3, fp, r1
 7331 0118 0493     		str	r3, [sp, #16]
 7332              	.LVL1026:
4221:Middlewares/Third_Party/FatFs/Src/ff.c **** 	b_data = b_dir + n_dir;				/* Data area start sector */
 7333              		.loc 1 4221 0
 7334 011a 08EB030A 		add	r10, r8, r3
 7335              	.LVL1027:
4222:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (n_vol < b_data + au - b_vol) return FR_MKFS_ABORTED;	/* Too small volume */
 7336              		.loc 1 4222 0
 7337 011e 039B     		ldr	r3, [sp, #12]
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 221


 7338              	.LVL1028:
 7339 0120 9A44     		add	r10, r10, r3
 7340              	.LVL1029:
4223:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 7341              		.loc 1 4223 0
 7342 0122 06EB0A03 		add	r3, r6, r10
 7343 0126 5B1A     		subs	r3, r3, r1
 7344 0128 9A42     		cmp	r2, r3
 7345 012a C0F05382 		bcc	.L692
4226:Middlewares/Third_Party/FatFs/Src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
 7346              		.loc 1 4226 0
 7347 012e 09AA     		add	r2, sp, #36
 7348              	.LVL1030:
 7349 0130 0321     		movs	r1, #3
 7350 0132 2846     		mov	r0, r5
 7351 0134 FFF7FEFF 		bl	disk_ioctl
 7352              	.LVL1031:
 7353 0138 20B9     		cbnz	r0, .L655
4226:Middlewares/Third_Party/FatFs/Src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
 7354              		.loc 1 4226 0 is_stmt 0 discriminator 2
 7355 013a 099B     		ldr	r3, [sp, #36]
 7356 013c 13B1     		cbz	r3, .L655
4226:Middlewares/Third_Party/FatFs/Src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
 7357              		.loc 1 4226 0 discriminator 4
 7358 013e B3F5004F 		cmp	r3, #32768
 7359 0142 01D9     		bls	.L656
 7360              	.L655:
4226:Middlewares/Third_Party/FatFs/Src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
 7361              		.loc 1 4226 0 discriminator 5
 7362 0144 0123     		movs	r3, #1
 7363 0146 0993     		str	r3, [sp, #36]
 7364              	.L656:
4227:Middlewares/Third_Party/FatFs/Src/ff.c **** 	n = (n - b_data) / N_FATS;
 7365              		.loc 1 4227 0 is_stmt 1
 7366 0148 099A     		ldr	r2, [sp, #36]
 7367 014a 02EB0A03 		add	r3, r2, r10
 7368 014e 013B     		subs	r3, r3, #1
 7369 0150 5242     		negs	r2, r2
 7370 0152 1340     		ands	r3, r3, r2
4228:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fmt == FS_FAT32) {		/* FAT32: Move FAT offset */
 7371              		.loc 1 4228 0
 7372 0154 A3EB0A03 		sub	r3, r3, r10
 7373 0158 0993     		str	r3, [sp, #36]
4229:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n_rsv += n;
 7374              		.loc 1 4229 0
 7375 015a B9F1030F 		cmp	r9, #3
 7376 015e 25D0     		beq	.L710
4233:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 7377              		.loc 1 4233 0
 7378 0160 9844     		add	r8, r8, r3
 7379              	.LVL1032:
 7380              	.L658:
4237:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
 7381              		.loc 1 4237 0
 7382 0162 089A     		ldr	r2, [sp, #32]
 7383 0164 A2EB0B03 		sub	r3, r2, fp
 7384 0168 A3EB0803 		sub	r3, r3, r8
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 222


 7385 016c 0399     		ldr	r1, [sp, #12]
 7386 016e 5B1A     		subs	r3, r3, r1
 7387 0170 B3FBF6F3 		udiv	r3, r3, r6
 7388 0174 0693     		str	r3, [sp, #24]
 7389              	.LVL1033:
4238:Middlewares/Third_Party/FatFs/Src/ff.c **** 		|| (fmt == FS_FAT32 && n_clst < MIN_FAT32))
 7390              		.loc 1 4238 0
 7391 0176 B9F1020F 		cmp	r9, #2
 7392 017a 1CD0     		beq	.L711
 7393              	.LVL1034:
 7394              	.L659:
4239:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_MKFS_ABORTED;
 7395              		.loc 1 4239 0
 7396 017c B9F1030F 		cmp	r9, #3
 7397 0180 20D0     		beq	.L712
 7398              	.L660:
4243:Middlewares/Third_Party/FatFs/Src/ff.c **** 		sys = 0x0C;		/* FAT32X */
 7399              		.loc 1 4243 0
 7400 0182 B9F1030F 		cmp	r9, #3
 7401 0186 29D0     		beq	.L695
4246:Middlewares/Third_Party/FatFs/Src/ff.c **** 			sys = 0x01;	/* FAT12(<65536) */
 7402              		.loc 1 4246 0
 7403 0188 B9F1010F 		cmp	r9, #1
 7404 018c 21D0     		beq	.L713
 7405              	.L662:
4249:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 7406              		.loc 1 4249 0
 7407 018e B2F5803F 		cmp	r2, #65536
 7408 0192 72D2     		bcs	.L697
 7409 0194 4FF0040A 		mov	r10, #4
 7410              	.LVL1035:
 7411 0198 22E0     		b	.L661
 7412              	.LVL1036:
 7413              	.L709:
4215:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
 7414              		.loc 1 4215 0 discriminator 1
 7415 019a 03EB4303 		add	r3, r3, r3, lsl #1
 7416              	.LVL1037:
 7417 019e 03F10108 		add	r8, r3, #1
 7418 01a2 4FEA5808 		lsr	r8, r8, #1
 7419 01a6 08F10308 		add	r8, r8, #3
 7420 01aa 98E7     		b	.L654
 7421              	.LVL1038:
 7422              	.L710:
4230:Middlewares/Third_Party/FatFs/Src/ff.c **** 		b_fat += n;
 7423              		.loc 1 4230 0
 7424 01ac 9B44     		add	fp, fp, r3
 7425              	.LVL1039:
4231:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {					/* FAT12/16: Expand FAT size */
 7426              		.loc 1 4231 0
 7427 01ae 049A     		ldr	r2, [sp, #16]
 7428 01b0 1A44     		add	r2, r2, r3
 7429 01b2 0492     		str	r2, [sp, #16]
 7430              	.LVL1040:
 7431 01b4 D5E7     		b	.L658
 7432              	.LVL1041:
 7433              	.L711:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 223


4238:Middlewares/Third_Party/FatFs/Src/ff.c **** 		|| (fmt == FS_FAT32 && n_clst < MIN_FAT32))
 7434              		.loc 1 4238 0 discriminator 1
 7435 01b6 40F6F573 		movw	r3, #4085
 7436              	.LVL1042:
 7437 01ba 0699     		ldr	r1, [sp, #24]
 7438 01bc 9942     		cmp	r1, r3
 7439 01be DDD8     		bhi	.L659
4240:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 7440              		.loc 1 4240 0
 7441 01c0 0E20     		movs	r0, #14
 7442 01c2 24E7     		b	.L641
 7443              	.L712:
4239:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_MKFS_ABORTED;
 7444              		.loc 1 4239 0 discriminator 1
 7445 01c4 4FF6F573 		movw	r3, #65525
 7446 01c8 0699     		ldr	r1, [sp, #24]
 7447 01ca 9942     		cmp	r1, r3
 7448 01cc D9D8     		bhi	.L660
4240:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 7449              		.loc 1 4240 0
 7450 01ce 0E20     		movs	r0, #14
 7451 01d0 1DE7     		b	.L641
 7452              	.L713:
4246:Middlewares/Third_Party/FatFs/Src/ff.c **** 			sys = 0x01;	/* FAT12(<65536) */
 7453              		.loc 1 4246 0 discriminator 1
 7454 01d2 B2F5803F 		cmp	r2, #65536
 7455 01d6 DAD2     		bcs	.L662
4247:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {
 7456              		.loc 1 4247 0
 7457 01d8 CA46     		mov	r10, r9
 7458              	.LVL1043:
 7459 01da 01E0     		b	.L661
 7460              	.LVL1044:
 7461              	.L695:
4244:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {
 7462              		.loc 1 4244 0
 7463 01dc 4FF00C0A 		mov	r10, #12
 7464              	.LVL1045:
 7465              	.L661:
4261:Middlewares/Third_Party/FatFs/Src/ff.c **** 			md = 0xF0;
 7466              		.loc 1 4261 0
 7467 01e0 002C     		cmp	r4, #0
 7468 01e2 57D1     		bne	.L698
4264:Middlewares/Third_Party/FatFs/Src/ff.c **** 			tbl = fs->win.d8 + MBR_Table;	/* Create partition table for single partition in the drive */
 7469              		.loc 1 4264 0
 7470 01e4 4FF40072 		mov	r2, #512
 7471 01e8 0021     		movs	r1, #0
 7472 01ea 3846     		mov	r0, r7
 7473 01ec FFF7FEFF 		bl	mem_set
 7474              	.LVL1046:
4266:Middlewares/Third_Party/FatFs/Src/ff.c **** 			tbl[2] = 1;						/* Partition start sector */
 7475              		.loc 1 4266 0
 7476 01f0 0123     		movs	r3, #1
 7477 01f2 87F8BF31 		strb	r3, [r7, #447]
4267:Middlewares/Third_Party/FatFs/Src/ff.c **** 			tbl[3] = 0;						/* Partition start cylinder */
 7478              		.loc 1 4267 0
 7479 01f6 87F8C031 		strb	r3, [r7, #448]
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 224


4268:Middlewares/Third_Party/FatFs/Src/ff.c **** 			tbl[4] = sys;					/* System type */
 7480              		.loc 1 4268 0
 7481 01fa 0022     		movs	r2, #0
 7482 01fc 87F8C121 		strb	r2, [r7, #449]
4269:Middlewares/Third_Party/FatFs/Src/ff.c **** 			tbl[5] = 254;					/* Partition end head */
 7483              		.loc 1 4269 0
 7484 0200 87F8C2A1 		strb	r10, [r7, #450]
4270:Middlewares/Third_Party/FatFs/Src/ff.c **** 			n = (b_vol + n_vol) / 63 / 255;
 7485              		.loc 1 4270 0
 7486 0204 FE21     		movs	r1, #254
 7487 0206 87F8C311 		strb	r1, [r7, #451]
4271:Middlewares/Third_Party/FatFs/Src/ff.c **** 			tbl[6] = (BYTE)(n >> 2 | 63);	/* Partition end sector */
 7488              		.loc 1 4271 0
 7489 020a 0898     		ldr	r0, [sp, #32]
 7490 020c 0199     		ldr	r1, [sp, #4]
 7491 020e 0C18     		adds	r4, r1, r0
 7492 0210 1F49     		ldr	r1, .L723+16
 7493 0212 A1FB04C1 		umull	ip, r1, r1, r4
 7494 0216 641A     		subs	r4, r4, r1
 7495 0218 01EB5401 		add	r1, r1, r4, lsr #1
 7496 021c 4C0B     		lsrs	r4, r1, #13
 7497 021e 0994     		str	r4, [sp, #36]
4272:Middlewares/Third_Party/FatFs/Src/ff.c **** 			tbl[7] = (BYTE)n;				/* End cylinder */
 7498              		.loc 1 4272 0
 7499 0220 C90B     		lsrs	r1, r1, #15
 7500 0222 41F03F01 		orr	r1, r1, #63
 7501 0226 87F8C411 		strb	r1, [r7, #452]
4273:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(tbl + 8, 63);			/* Partition start in LBA */
 7502              		.loc 1 4273 0
 7503 022a 87F8C541 		strb	r4, [r7, #453]
4274:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(tbl + 12, n_vol);		/* Partition size in LBA */
 7504              		.loc 1 4274 0
 7505 022e 3F21     		movs	r1, #63
 7506 0230 87F8C611 		strb	r1, [r7, #454]
 7507 0234 87F8C721 		strb	r2, [r7, #455]
 7508 0238 87F8C821 		strb	r2, [r7, #456]
 7509 023c 87F8C921 		strb	r2, [r7, #457]
4275:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_WORD(fs->win.d8 + BS_55AA, 0xAA55);	/* MBR signature */
 7510              		.loc 1 4275 0
 7511 0240 87F8CA01 		strb	r0, [r7, #458]
 7512 0244 C0F30721 		ubfx	r1, r0, #8, #8
 7513 0248 87F8CB11 		strb	r1, [r7, #459]
 7514 024c C0F30741 		ubfx	r1, r0, #16, #8
 7515 0250 87F8CC11 		strb	r1, [r7, #460]
 7516 0254 000E     		lsrs	r0, r0, #24
 7517 0256 87F8CD01 		strb	r0, [r7, #461]
4276:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (disk_write(pdrv, fs->win.d8, 0, 1) != RES_OK)	/* Write it to the MBR */
 7518              		.loc 1 4276 0
 7519 025a 5521     		movs	r1, #85
 7520 025c 87F8FE11 		strb	r1, [r7, #510]
 7521 0260 AA21     		movs	r1, #170
 7522 0262 87F8FF11 		strb	r1, [r7, #511]
4277:Middlewares/Third_Party/FatFs/Src/ff.c **** 				return FR_DISK_ERR;
 7523              		.loc 1 4277 0
 7524 0266 3946     		mov	r1, r7
 7525 0268 2846     		mov	r0, r5
 7526 026a FFF7FEFF 		bl	disk_write
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 225


 7527              	.LVL1047:
 7528 026e 0028     		cmp	r0, #0
 7529 0270 40F0B281 		bne	.L699
4279:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 7530              		.loc 1 4279 0
 7531 0274 F823     		movs	r3, #248
 7532 0276 0593     		str	r3, [sp, #20]
 7533 0278 0EE0     		b	.L663
 7534              	.LVL1048:
 7535              	.L697:
4249:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 7536              		.loc 1 4249 0
 7537 027a 4FF0060A 		mov	r10, #6
 7538              	.LVL1049:
 7539 027e AFE7     		b	.L661
 7540              	.L724:
 7541              		.align	2
 7542              	.L723:
 7543 0280 00000000 		.word	.LANCHOR1
 7544 0284 D34D6210 		.word	274877907
 7545 0288 00000000 		.word	.LANCHOR3
 7546 028c 00000000 		.word	.LANCHOR4
 7547 0290 5B561505 		.word	85284443
 7548              	.LVL1050:
 7549              	.L698:
4262:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {	/* Create partition table (FDISK) */
 7550              		.loc 1 4262 0
 7551 0294 F023     		movs	r3, #240
 7552 0296 0593     		str	r3, [sp, #20]
 7553              	.L663:
 7554              	.LVL1051:
4284:Middlewares/Third_Party/FatFs/Src/ff.c **** 	mem_set(tbl, 0, SS(fs));
 7555              		.loc 1 4284 0
 7556 0298 0297     		str	r7, [sp, #8]
 7557              	.LVL1052:
4285:Middlewares/Third_Party/FatFs/Src/ff.c **** 	mem_cpy(tbl, "\xEB\xFE\x90" "MSDOS5.0", 11);/* Boot jump code, OEM name */
 7558              		.loc 1 4285 0
 7559 029a 4FF40072 		mov	r2, #512
 7560 029e 0021     		movs	r1, #0
 7561 02a0 3846     		mov	r0, r7
 7562 02a2 FFF7FEFF 		bl	mem_set
 7563              	.LVL1053:
4286:Middlewares/Third_Party/FatFs/Src/ff.c **** 	i = SS(fs);								/* Sector size */
 7564              		.loc 1 4286 0
 7565 02a6 0B22     		movs	r2, #11
 7566 02a8 CF49     		ldr	r1, .L725
 7567 02aa 3846     		mov	r0, r7
 7568 02ac FFF7FEFF 		bl	mem_cpy
 7569              	.LVL1054:
4288:Middlewares/Third_Party/FatFs/Src/ff.c **** 	tbl[BPB_SecPerClus] = (BYTE)au;			/* Sectors per cluster */
 7570              		.loc 1 4288 0
 7571 02b0 0023     		movs	r3, #0
 7572 02b2 FB72     		strb	r3, [r7, #11]
 7573 02b4 0223     		movs	r3, #2
 7574 02b6 3B73     		strb	r3, [r7, #12]
4289:Middlewares/Third_Party/FatFs/Src/ff.c **** 	ST_WORD(tbl + BPB_RsvdSecCnt, n_rsv);	/* Reserved sectors */
 7575              		.loc 1 4289 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 226


 7576 02b8 7E73     		strb	r6, [r7, #13]
4290:Middlewares/Third_Party/FatFs/Src/ff.c **** 	tbl[BPB_NumFATs] = N_FATS;				/* Number of FATs */
 7577              		.loc 1 4290 0
 7578 02ba 87F80EB0 		strb	fp, [r7, #14]
 7579 02be CBF3072B 		ubfx	fp, fp, #8, #8
 7580              	.LVL1055:
 7581 02c2 87F80FB0 		strb	fp, [r7, #15]
4291:Middlewares/Third_Party/FatFs/Src/ff.c **** 	i = (fmt == FS_FAT32) ? 0 : N_ROOTDIR;	/* Number of root directory entries */
 7582              		.loc 1 4291 0
 7583 02c6 0123     		movs	r3, #1
 7584 02c8 3B74     		strb	r3, [r7, #16]
4292:Middlewares/Third_Party/FatFs/Src/ff.c **** 	ST_WORD(tbl + BPB_RootEntCnt, i);
 7585              		.loc 1 4292 0
 7586 02ca B9F1030F 		cmp	r9, #3
 7587 02ce 00F09080 		beq	.L714
 7588              	.LVL1056:
 7589 02d2 4FF40073 		mov	r3, #512
 7590              	.L664:
 7591              	.LVL1057:
4293:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (n_vol < 0x10000) {					/* Number of total sectors */
 7592              		.loc 1 4293 0 discriminator 4
 7593 02d6 DAB2     		uxtb	r2, r3
 7594 02d8 7A74     		strb	r2, [r7, #17]
 7595 02da 9BB2     		uxth	r3, r3
 7596              	.LVL1058:
 7597 02dc 1B0A     		lsrs	r3, r3, #8
 7598 02de BB74     		strb	r3, [r7, #18]
4294:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_WORD(tbl + BPB_TotSec16, n_vol);
 7599              		.loc 1 4294 0 discriminator 4
 7600 02e0 089B     		ldr	r3, [sp, #32]
 7601 02e2 B3F5803F 		cmp	r3, #65536
 7602 02e6 80F08680 		bcs	.L665
4295:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {
 7603              		.loc 1 4295 0
 7604 02ea FB74     		strb	r3, [r7, #19]
 7605 02ec C3F30723 		ubfx	r3, r3, #8, #8
 7606 02f0 3B75     		strb	r3, [r7, #20]
 7607              	.L666:
4299:Middlewares/Third_Party/FatFs/Src/ff.c **** 	ST_WORD(tbl + BPB_SecPerTrk, 63);		/* Number of sectors per track */
 7608              		.loc 1 4299 0
 7609 02f2 9DF81430 		ldrb	r3, [sp, #20]	@ zero_extendqisi2
 7610 02f6 7B75     		strb	r3, [r7, #21]
4300:Middlewares/Third_Party/FatFs/Src/ff.c **** 	ST_WORD(tbl + BPB_NumHeads, 255);		/* Number of heads */
 7611              		.loc 1 4300 0
 7612 02f8 3F23     		movs	r3, #63
 7613 02fa 3B76     		strb	r3, [r7, #24]
 7614 02fc 0023     		movs	r3, #0
 7615 02fe 7B76     		strb	r3, [r7, #25]
4301:Middlewares/Third_Party/FatFs/Src/ff.c **** 	ST_DWORD(tbl + BPB_HiddSec, b_vol);		/* Hidden sectors */
 7616              		.loc 1 4301 0
 7617 0300 FF22     		movs	r2, #255
 7618 0302 BA76     		strb	r2, [r7, #26]
 7619 0304 FB76     		strb	r3, [r7, #27]
4302:Middlewares/Third_Party/FatFs/Src/ff.c **** 	n = GET_FATTIME();						/* Use current time as VSN */
 7620              		.loc 1 4302 0
 7621 0306 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 7622 030a 3B77     		strb	r3, [r7, #28]
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 227


 7623 030c 0023     		movs	r3, #0
 7624 030e 7B77     		strb	r3, [r7, #29]
 7625 0310 BB77     		strb	r3, [r7, #30]
 7626 0312 FB77     		strb	r3, [r7, #31]
4303:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fmt == FS_FAT32) {
 7627              		.loc 1 4303 0
 7628 0314 B54B     		ldr	r3, .L725+4
 7629 0316 0993     		str	r3, [sp, #36]
4304:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_DWORD(tbl + BS_VolID32, n);		/* VSN */
 7630              		.loc 1 4304 0
 7631 0318 B9F1030F 		cmp	r9, #3
 7632 031c 79D0     		beq	.L715
4314:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_WORD(tbl + BPB_FATSz16, n_fat);	/* Number of sectors per FAT */
 7633              		.loc 1 4314 0
 7634 031e 0023     		movs	r3, #0
 7635 0320 87F82730 		strb	r3, [r7, #39]
 7636 0324 87F82830 		strb	r3, [r7, #40]
 7637 0328 C423     		movs	r3, #196
 7638 032a 87F82930 		strb	r3, [r7, #41]
 7639 032e 4623     		movs	r3, #70
 7640 0330 87F82A30 		strb	r3, [r7, #42]
4315:Middlewares/Third_Party/FatFs/Src/ff.c **** 		tbl[BS_DrvNum] = 0x80;				/* Drive number */
 7641              		.loc 1 4315 0
 7642 0334 87F81680 		strb	r8, [r7, #22]
 7643 0338 C8F30723 		ubfx	r3, r8, #8, #8
 7644 033c FB75     		strb	r3, [r7, #23]
4316:Middlewares/Third_Party/FatFs/Src/ff.c **** 		tbl[BS_BootSig] = 0x29;				/* Extended boot signature */
 7645              		.loc 1 4316 0
 7646 033e 8023     		movs	r3, #128
 7647 0340 87F82430 		strb	r3, [r7, #36]
4317:Middlewares/Third_Party/FatFs/Src/ff.c **** 		mem_cpy(tbl + BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
 7648              		.loc 1 4317 0
 7649 0344 2923     		movs	r3, #41
 7650 0346 87F82630 		strb	r3, [r7, #38]
4318:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 7651              		.loc 1 4318 0
 7652 034a 1322     		movs	r2, #19
 7653 034c A849     		ldr	r1, .L725+8
 7654 034e 07F12B00 		add	r0, r7, #43
 7655 0352 FFF7FEFF 		bl	mem_cpy
 7656              	.LVL1059:
 7657              	.L668:
4320:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (disk_write(pdrv, tbl, b_vol, 1) != RES_OK)	/* Write it to the VBR sector */
 7658              		.loc 1 4320 0
 7659 0356 5523     		movs	r3, #85
 7660 0358 87F8FE31 		strb	r3, [r7, #510]
 7661 035c AA23     		movs	r3, #170
 7662 035e 87F8FF31 		strb	r3, [r7, #511]
4321:Middlewares/Third_Party/FatFs/Src/ff.c **** 		return FR_DISK_ERR;
 7663              		.loc 1 4321 0
 7664 0362 0123     		movs	r3, #1
 7665 0364 019A     		ldr	r2, [sp, #4]
 7666 0366 3946     		mov	r1, r7
 7667 0368 2846     		mov	r0, r5
 7668 036a FFF7FEFF 		bl	disk_write
 7669              	.LVL1060:
 7670 036e 0028     		cmp	r0, #0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 228


 7671 0370 40F03481 		bne	.L701
4323:Middlewares/Third_Party/FatFs/Src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 6, 1);
 7672              		.loc 1 4323 0
 7673 0374 B9F1030F 		cmp	r9, #3
 7674 0378 00F08480 		beq	.L716
 7675              	.L669:
4344:Middlewares/Third_Party/FatFs/Src/ff.c **** 				return FR_DISK_ERR;
 7676              		.loc 1 4344 0 discriminator 1
 7677 037c 4FF0000B 		mov	fp, #0
 7678 0380 DDF810A0 		ldr	r10, [sp, #16]
 7679              	.LVL1061:
 7680              	.L675:
4328:Middlewares/Third_Party/FatFs/Src/ff.c **** 		mem_set(tbl, 0, SS(fs));			/* 1st sector of the FAT  */
 7681              		.loc 1 4328 0 discriminator 1
 7682 0384 BBF1000F 		cmp	fp, #0
 7683 0388 40F0B680 		bne	.L717
4329:Middlewares/Third_Party/FatFs/Src/ff.c **** 		n = md;								/* Media descriptor byte */
 7684              		.loc 1 4329 0
 7685 038c 4FF40072 		mov	r2, #512
 7686 0390 0021     		movs	r1, #0
 7687 0392 0298     		ldr	r0, [sp, #8]
 7688 0394 FFF7FEFF 		bl	mem_set
 7689              	.LVL1062:
4330:Middlewares/Third_Party/FatFs/Src/ff.c **** 		if (fmt != FS_FAT32) {
 7690              		.loc 1 4330 0
 7691 0398 059A     		ldr	r2, [sp, #20]
4331:Middlewares/Third_Party/FatFs/Src/ff.c **** 			n |= (fmt == FS_FAT12) ? 0x00FFFF00 : 0xFFFFFF00;
 7692              		.loc 1 4331 0
 7693 039a B9F1030F 		cmp	r9, #3
 7694 039e 7BD0     		beq	.L670
4332:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(tbl + 0, n);			/* Reserve cluster #0-1 (FAT12/16) */
 7695              		.loc 1 4332 0
 7696 03a0 B9F1010F 		cmp	r9, #1
 7697 03a4 76D0     		beq	.L718
 7698 03a6 6FF0FF03 		mvn	r3, #255
 7699              	.L671:
4332:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(tbl + 0, n);			/* Reserve cluster #0-1 (FAT12/16) */
 7700              		.loc 1 4332 0 is_stmt 0 discriminator 4
 7701 03aa 1343     		orrs	r3, r3, r2
 7702 03ac 0993     		str	r3, [sp, #36]
4333:Middlewares/Third_Party/FatFs/Src/ff.c **** 		} else {
 7703              		.loc 1 4333 0 is_stmt 1 discriminator 4
 7704 03ae 3B70     		strb	r3, [r7]
 7705 03b0 BDF82430 		ldrh	r3, [sp, #36]
 7706 03b4 1B0A     		lsrs	r3, r3, #8
 7707 03b6 7B70     		strb	r3, [r7, #1]
 7708 03b8 9DF82630 		ldrb	r3, [sp, #38]	@ zero_extendqisi2
 7709 03bc BB70     		strb	r3, [r7, #2]
 7710 03be 9DF82730 		ldrb	r3, [sp, #39]	@ zero_extendqisi2
 7711 03c2 FB70     		strb	r3, [r7, #3]
 7712              	.L672:
4340:Middlewares/Third_Party/FatFs/Src/ff.c **** 			return FR_DISK_ERR;
 7713              		.loc 1 4340 0
 7714 03c4 0AF10104 		add	r4, r10, #1
 7715              	.LVL1063:
 7716 03c8 0123     		movs	r3, #1
 7717 03ca 5246     		mov	r2, r10
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 229


 7718 03cc DDF808A0 		ldr	r10, [sp, #8]
 7719 03d0 5146     		mov	r1, r10
 7720 03d2 2846     		mov	r0, r5
 7721 03d4 FFF7FEFF 		bl	disk_write
 7722              	.LVL1064:
 7723 03d8 0028     		cmp	r0, #0
 7724 03da 40F00181 		bne	.L703
4342:Middlewares/Third_Party/FatFs/Src/ff.c **** 		for (n = 1; n < n_fat; n++) {		/* This loop may take a time on FAT32 volume due to many single se
 7725              		.loc 1 4342 0
 7726 03de 4FF40072 		mov	r2, #512
 7727 03e2 0021     		movs	r1, #0
 7728 03e4 5046     		mov	r0, r10
 7729 03e6 FFF7FEFF 		bl	mem_set
 7730              	.LVL1065:
4343:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
 7731              		.loc 1 4343 0
 7732 03ea 0123     		movs	r3, #1
 7733 03ec 0993     		str	r3, [sp, #36]
 7734 03ee 2246     		mov	r2, r4
 7735 03f0 70E0     		b	.L673
 7736              	.LVL1066:
 7737              	.L714:
4292:Middlewares/Third_Party/FatFs/Src/ff.c **** 	ST_WORD(tbl + BPB_RootEntCnt, i);
 7738              		.loc 1 4292 0
 7739 03f2 0023     		movs	r3, #0
 7740 03f4 6FE7     		b	.L664
 7741              	.LVL1067:
 7742              	.L665:
4297:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 7743              		.loc 1 4297 0
 7744 03f6 87F82030 		strb	r3, [r7, #32]
 7745 03fa C3F30722 		ubfx	r2, r3, #8, #8
 7746 03fe 87F82120 		strb	r2, [r7, #33]
 7747 0402 C3F30742 		ubfx	r2, r3, #16, #8
 7748 0406 87F82220 		strb	r2, [r7, #34]
 7749 040a 1B0E     		lsrs	r3, r3, #24
 7750 040c 87F82330 		strb	r3, [r7, #35]
 7751 0410 6FE7     		b	.L666
 7752              	.L715:
4305:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_DWORD(tbl + BPB_FATSz32, n_fat);	/* Number of sectors per FAT */
 7753              		.loc 1 4305 0
 7754 0412 0023     		movs	r3, #0
 7755 0414 87F84330 		strb	r3, [r7, #67]
 7756 0418 87F84430 		strb	r3, [r7, #68]
 7757 041c C422     		movs	r2, #196
 7758 041e 87F84520 		strb	r2, [r7, #69]
 7759 0422 4622     		movs	r2, #70
 7760 0424 87F84620 		strb	r2, [r7, #70]
4306:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_DWORD(tbl + BPB_RootClus, 2);	/* Root directory start cluster (2) */
 7761              		.loc 1 4306 0
 7762 0428 87F82480 		strb	r8, [r7, #36]
 7763 042c C8F30722 		ubfx	r2, r8, #8, #8
 7764 0430 87F82520 		strb	r2, [r7, #37]
 7765 0434 C8F30742 		ubfx	r2, r8, #16, #8
 7766 0438 87F82620 		strb	r2, [r7, #38]
 7767 043c 4FEA1862 		lsr	r2, r8, #24
 7768 0440 87F82720 		strb	r2, [r7, #39]
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 230


4307:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_WORD(tbl + BPB_FSInfo, 1);		/* FSINFO record offset (VBR + 1) */
 7769              		.loc 1 4307 0
 7770 0444 0222     		movs	r2, #2
 7771 0446 87F82C20 		strb	r2, [r7, #44]
 7772 044a 87F82D30 		strb	r3, [r7, #45]
 7773 044e 87F82E30 		strb	r3, [r7, #46]
 7774 0452 87F82F30 		strb	r3, [r7, #47]
4308:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_WORD(tbl + BPB_BkBootSec, 6);	/* Backup boot record offset (VBR + 6) */
 7775              		.loc 1 4308 0
 7776 0456 0122     		movs	r2, #1
 7777 0458 87F83020 		strb	r2, [r7, #48]
 7778 045c 87F83130 		strb	r3, [r7, #49]
4309:Middlewares/Third_Party/FatFs/Src/ff.c **** 		tbl[BS_DrvNum32] = 0x80;			/* Drive number */
 7779              		.loc 1 4309 0
 7780 0460 0622     		movs	r2, #6
 7781 0462 87F83220 		strb	r2, [r7, #50]
 7782 0466 87F83330 		strb	r3, [r7, #51]
4310:Middlewares/Third_Party/FatFs/Src/ff.c **** 		tbl[BS_BootSig32] = 0x29;			/* Extended boot signature */
 7783              		.loc 1 4310 0
 7784 046a 8023     		movs	r3, #128
 7785 046c 87F84030 		strb	r3, [r7, #64]
4311:Middlewares/Third_Party/FatFs/Src/ff.c **** 		mem_cpy(tbl + BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
 7786              		.loc 1 4311 0
 7787 0470 2923     		movs	r3, #41
 7788 0472 87F84230 		strb	r3, [r7, #66]
4312:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} else {
 7789              		.loc 1 4312 0
 7790 0476 1322     		movs	r2, #19
 7791 0478 5E49     		ldr	r1, .L725+12
 7792 047a 07F14700 		add	r0, r7, #71
 7793 047e FFF7FEFF 		bl	mem_cpy
 7794              	.LVL1068:
 7795 0482 68E7     		b	.L668
 7796              	.L716:
4324:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 7797              		.loc 1 4324 0
 7798 0484 0123     		movs	r3, #1
 7799 0486 019A     		ldr	r2, [sp, #4]
 7800 0488 0632     		adds	r2, r2, #6
 7801 048a 3946     		mov	r1, r7
 7802 048c 2846     		mov	r0, r5
 7803 048e FFF7FEFF 		bl	disk_write
 7804              	.LVL1069:
 7805 0492 73E7     		b	.L669
 7806              	.LVL1070:
 7807              	.L718:
4332:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(tbl + 0, n);			/* Reserve cluster #0-1 (FAT12/16) */
 7808              		.loc 1 4332 0
 7809 0494 584B     		ldr	r3, .L725+16
 7810 0496 88E7     		b	.L671
 7811              	.L670:
4335:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(tbl + 0, n);			/* Reserve cluster #0-1 (FAT32) */
 7812              		.loc 1 4335 0
 7813 0498 059B     		ldr	r3, [sp, #20]
 7814 049a 63F0FF03 		orn	r3, r3, #255
 7815 049e 0993     		str	r3, [sp, #36]
4336:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(tbl + 4, 0xFFFFFFFF);
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 231


 7816              		.loc 1 4336 0
 7817 04a0 3B70     		strb	r3, [r7]
 7818 04a2 BDF82430 		ldrh	r3, [sp, #36]
 7819 04a6 1B0A     		lsrs	r3, r3, #8
 7820 04a8 7B70     		strb	r3, [r7, #1]
 7821 04aa 9DF82630 		ldrb	r3, [sp, #38]	@ zero_extendqisi2
 7822 04ae BB70     		strb	r3, [r7, #2]
 7823 04b0 9DF82730 		ldrb	r3, [sp, #39]	@ zero_extendqisi2
 7824 04b4 FB70     		strb	r3, [r7, #3]
4337:Middlewares/Third_Party/FatFs/Src/ff.c **** 			ST_DWORD(tbl + 8, 0x0FFFFFFF);	/* Reserve cluster #2 for root directory */
 7825              		.loc 1 4337 0
 7826 04b6 FF23     		movs	r3, #255
 7827 04b8 3B71     		strb	r3, [r7, #4]
 7828 04ba 7B71     		strb	r3, [r7, #5]
 7829 04bc BB71     		strb	r3, [r7, #6]
 7830 04be FB71     		strb	r3, [r7, #7]
4338:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 7831              		.loc 1 4338 0
 7832 04c0 3B72     		strb	r3, [r7, #8]
 7833 04c2 7B72     		strb	r3, [r7, #9]
 7834 04c4 BB72     		strb	r3, [r7, #10]
 7835 04c6 0F23     		movs	r3, #15
 7836 04c8 FB72     		strb	r3, [r7, #11]
 7837 04ca 7BE7     		b	.L672
 7838              	.L720:
4343:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
 7839              		.loc 1 4343 0 discriminator 2
 7840 04cc 099B     		ldr	r3, [sp, #36]
 7841 04ce 0133     		adds	r3, r3, #1
 7842 04d0 0993     		str	r3, [sp, #36]
4344:Middlewares/Third_Party/FatFs/Src/ff.c **** 				return FR_DISK_ERR;
 7843              		.loc 1 4344 0 discriminator 2
 7844 04d2 5246     		mov	r2, r10
 7845              	.LVL1071:
 7846              	.L673:
4343:Middlewares/Third_Party/FatFs/Src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
 7847              		.loc 1 4343 0 discriminator 1
 7848 04d4 099B     		ldr	r3, [sp, #36]
 7849 04d6 9845     		cmp	r8, r3
 7850 04d8 0AD9     		bls	.L719
4344:Middlewares/Third_Party/FatFs/Src/ff.c **** 				return FR_DISK_ERR;
 7851              		.loc 1 4344 0
 7852 04da 02F1010A 		add	r10, r2, #1
 7853              	.LVL1072:
 7854 04de 0123     		movs	r3, #1
 7855 04e0 0299     		ldr	r1, [sp, #8]
 7856 04e2 2846     		mov	r0, r5
 7857 04e4 FFF7FEFF 		bl	disk_write
 7858              	.LVL1073:
 7859 04e8 0028     		cmp	r0, #0
 7860 04ea EFD0     		beq	.L720
4345:Middlewares/Third_Party/FatFs/Src/ff.c **** 		}
 7861              		.loc 1 4345 0
 7862 04ec 0120     		movs	r0, #1
 7863 04ee 8EE5     		b	.L641
 7864              	.LVL1074:
 7865              	.L719:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 232


4328:Middlewares/Third_Party/FatFs/Src/ff.c **** 		mem_set(tbl, 0, SS(fs));			/* 1st sector of the FAT  */
 7866              		.loc 1 4328 0 discriminator 2
 7867 04f0 0BF1010B 		add	fp, fp, #1
 7868              	.LVL1075:
 7869 04f4 9246     		mov	r10, r2
 7870 04f6 45E7     		b	.L675
 7871              	.LVL1076:
 7872              	.L717:
 7873 04f8 CDF810A0 		str	r10, [sp, #16]
 7874              	.LVL1077:
4350:Middlewares/Third_Party/FatFs/Src/ff.c **** 	do {
 7875              		.loc 1 4350 0
 7876 04fc B9F1030F 		cmp	r9, #3
 7877 0500 18D0     		beq	.L721
 7878 0502 039C     		ldr	r4, [sp, #12]
 7879 0504 049A     		ldr	r2, [sp, #16]
 7880              	.LVL1078:
 7881              	.L678:
4352:Middlewares/Third_Party/FatFs/Src/ff.c **** 			return FR_DISK_ERR;
 7882              		.loc 1 4352 0
 7883 0506 561C     		adds	r6, r2, #1
 7884              	.LVL1079:
 7885 0508 0123     		movs	r3, #1
 7886 050a 0299     		ldr	r1, [sp, #8]
 7887 050c 2846     		mov	r0, r5
 7888 050e FFF7FEFF 		bl	disk_write
 7889              	.LVL1080:
 7890 0512 0028     		cmp	r0, #0
 7891 0514 66D1     		bne	.L705
 7892              	.LVL1081:
 7893 0516 3246     		mov	r2, r6
4354:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 7894              		.loc 1 4354 0
 7895 0518 013C     		subs	r4, r4, #1
 7896              	.LVL1082:
 7897 051a F4D1     		bne	.L678
4364:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_DWORD(tbl + FSI_LeadSig, 0x41615252);
 7898              		.loc 1 4364 0
 7899 051c B9F1030F 		cmp	r9, #3
 7900 0520 0BD0     		beq	.L722
 7901              	.LVL1083:
 7902              	.L679:
4374:Middlewares/Third_Party/FatFs/Src/ff.c **** }
 7903              		.loc 1 4374 0
 7904 0522 0022     		movs	r2, #0
 7905 0524 1146     		mov	r1, r2
 7906 0526 2846     		mov	r0, r5
 7907 0528 FFF7FEFF 		bl	disk_ioctl
 7908              	.LVL1084:
 7909 052c 0030     		adds	r0, r0, #0
 7910 052e 18BF     		it	ne
 7911 0530 0120     		movne	r0, #1
 7912 0532 6CE5     		b	.L641
 7913              	.LVL1085:
 7914              	.L721:
4350:Middlewares/Third_Party/FatFs/Src/ff.c **** 	do {
 7915              		.loc 1 4350 0
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 233


 7916 0534 3446     		mov	r4, r6
 7917 0536 5246     		mov	r2, r10
 7918 0538 E5E7     		b	.L678
 7919              	.LVL1086:
 7920              	.L722:
4365:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_DWORD(tbl + FSI_StrucSig, 0x61417272);
 7921              		.loc 1 4365 0
 7922 053a 5223     		movs	r3, #82
 7923 053c 3B70     		strb	r3, [r7]
 7924 053e 7B70     		strb	r3, [r7, #1]
 7925 0540 6123     		movs	r3, #97
 7926 0542 BB70     		strb	r3, [r7, #2]
 7927 0544 4122     		movs	r2, #65
 7928              	.LVL1087:
 7929 0546 FA70     		strb	r2, [r7, #3]
4366:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_DWORD(tbl + FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
 7930              		.loc 1 4366 0
 7931 0548 7221     		movs	r1, #114
 7932 054a 87F8E411 		strb	r1, [r7, #484]
 7933 054e 87F8E511 		strb	r1, [r7, #485]
 7934 0552 87F8E621 		strb	r2, [r7, #486]
 7935 0556 87F8E731 		strb	r3, [r7, #487]
4367:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_DWORD(tbl + FSI_Nxt_Free, 2);			/* Last allocated cluster# */
 7936              		.loc 1 4367 0
 7937 055a 069A     		ldr	r2, [sp, #24]
 7938 055c 531E     		subs	r3, r2, #1
 7939 055e 87F8E831 		strb	r3, [r7, #488]
 7940 0562 531E     		subs	r3, r2, #1
 7941 0564 C3F30723 		ubfx	r3, r3, #8, #8
 7942 0568 87F8E931 		strb	r3, [r7, #489]
 7943 056c 531E     		subs	r3, r2, #1
 7944 056e C3F30742 		ubfx	r2, r3, #16, #8
 7945 0572 87F8EA21 		strb	r2, [r7, #490]
 7946 0576 1B0E     		lsrs	r3, r3, #24
 7947 0578 87F8EB31 		strb	r3, [r7, #491]
4368:Middlewares/Third_Party/FatFs/Src/ff.c **** 		ST_WORD(tbl + BS_55AA, 0xAA55);
 7948              		.loc 1 4368 0
 7949 057c 0223     		movs	r3, #2
 7950 057e 87F8EC31 		strb	r3, [r7, #492]
 7951 0582 0023     		movs	r3, #0
 7952 0584 87F8ED31 		strb	r3, [r7, #493]
 7953 0588 87F8EE31 		strb	r3, [r7, #494]
 7954 058c 87F8EF31 		strb	r3, [r7, #495]
4369:Middlewares/Third_Party/FatFs/Src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 1, 1);	/* Write original (VBR + 1) */
 7955              		.loc 1 4369 0
 7956 0590 5523     		movs	r3, #85
 7957 0592 87F8FE31 		strb	r3, [r7, #510]
 7958 0596 AA23     		movs	r3, #170
 7959 0598 87F8FF31 		strb	r3, [r7, #511]
4370:Middlewares/Third_Party/FatFs/Src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 7, 1);	/* Write backup (VBR + 7) */
 7960              		.loc 1 4370 0
 7961 059c 0123     		movs	r3, #1
 7962 059e 019C     		ldr	r4, [sp, #4]
 7963              	.LVL1088:
 7964 05a0 2246     		mov	r2, r4
 7965 05a2 1A44     		add	r2, r2, r3
 7966 05a4 3946     		mov	r1, r7
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 234


 7967 05a6 2846     		mov	r0, r5
 7968 05a8 FFF7FEFF 		bl	disk_write
 7969              	.LVL1089:
4371:Middlewares/Third_Party/FatFs/Src/ff.c **** 	}
 7970              		.loc 1 4371 0
 7971 05ac 0123     		movs	r3, #1
 7972 05ae 2246     		mov	r2, r4
 7973 05b0 0732     		adds	r2, r2, #7
 7974 05b2 3946     		mov	r1, r7
 7975 05b4 2846     		mov	r0, r5
 7976 05b6 FFF7FEFF 		bl	disk_write
 7977              	.LVL1090:
 7978 05ba B2E7     		b	.L679
 7979              	.LVL1091:
 7980              	.L681:
4162:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs = FatFs[vol];
 7981              		.loc 1 4162 0
 7982 05bc 0B20     		movs	r0, #11
 7983              	.LVL1092:
 7984 05be 26E5     		b	.L641
 7985              	.LVL1093:
 7986              	.L682:
4164:Middlewares/Third_Party/FatFs/Src/ff.c **** 	fs->fs_type = 0;
 7987              		.loc 1 4164 0
 7988 05c0 0C20     		movs	r0, #12
 7989              	.LVL1094:
 7990 05c2 24E5     		b	.L641
 7991              	.LVL1095:
 7992              	.L683:
4171:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
 7993              		.loc 1 4171 0
 7994 05c4 0320     		movs	r0, #3
 7995              	.LVL1096:
 7996 05c6 22E5     		b	.L641
 7997              	.LVL1097:
 7998              	.L684:
4172:Middlewares/Third_Party/FatFs/Src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get disk sector size */
 7999              		.loc 1 4172 0
 8000 05c8 0A20     		movs	r0, #10
 8001              	.LVL1098:
 8002 05ca 20E5     		b	.L641
 8003              	.L685:
4188:Middlewares/Third_Party/FatFs/Src/ff.c **** 		b_vol = (sfd) ? 0 : 63;		/* Volume start sector */
 8004              		.loc 1 4188 0
 8005 05cc 0120     		movs	r0, #1
 8006 05ce 1EE5     		b	.L641
 8007              	.L686:
 8008 05d0 0120     		movs	r0, #1
 8009 05d2 1CE5     		b	.L641
 8010              	.LVL1099:
 8011              	.L692:
4223:Middlewares/Third_Party/FatFs/Src/ff.c **** 
 8012              		.loc 1 4223 0
 8013 05d4 0E20     		movs	r0, #14
 8014 05d6 1AE5     		b	.L641
 8015              	.LVL1100:
 8016              	.L699:
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 235


4278:Middlewares/Third_Party/FatFs/Src/ff.c **** 			md = 0xF8;
 8017              		.loc 1 4278 0
 8018 05d8 0120     		movs	r0, #1
 8019 05da 18E5     		b	.L641
 8020              	.LVL1101:
 8021              	.L701:
4322:Middlewares/Third_Party/FatFs/Src/ff.c **** 	if (fmt == FS_FAT32)					/* Write backup VBR if needed (VBR + 6) */
 8022              		.loc 1 4322 0
 8023 05dc 0120     		movs	r0, #1
 8024 05de 16E5     		b	.L641
 8025              	.LVL1102:
 8026              	.L703:
4341:Middlewares/Third_Party/FatFs/Src/ff.c **** 		mem_set(tbl, 0, SS(fs));			/* Fill following FAT entries with zero */
 8027              		.loc 1 4341 0
 8028 05e0 0120     		movs	r0, #1
 8029 05e2 14E5     		b	.L641
 8030              	.LVL1103:
 8031              	.L705:
4353:Middlewares/Third_Party/FatFs/Src/ff.c **** 	} while (--i);
 8032              		.loc 1 4353 0
 8033 05e4 0120     		movs	r0, #1
 8034 05e6 12E5     		b	.L641
 8035              	.L726:
 8036              		.align	2
 8037              	.L725:
 8038 05e8 00000000 		.word	.LC2
 8039 05ec 0000C446 		.word	1187250176
 8040 05f0 20000000 		.word	.LC4
 8041 05f4 0C000000 		.word	.LC3
 8042 05f8 00FFFF00 		.word	16776960
 8043              		.cfi_endproc
 8044              	.LFE114:
 8046              		.section	.bss.FatFs,"aw",%nobits
 8047              		.align	2
 8048              		.set	.LANCHOR1,. + 0
 8051              	FatFs:
 8052 0000 00000000 		.space	4
 8053              		.section	.bss.Fsid,"aw",%nobits
 8054              		.align	1
 8055              		.set	.LANCHOR2,. + 0
 8058              	Fsid:
 8059 0000 0000     		.space	2
 8060              		.section	.rodata.ExCvt,"a",%progbits
 8061              		.align	2
 8062              		.set	.LANCHOR0,. + 0
 8065              	ExCvt:
 8066 0000 80       		.byte	-128
 8067 0001 9A       		.byte	-102
 8068 0002 90       		.byte	-112
 8069 0003 B6       		.byte	-74
 8070 0004 8E       		.byte	-114
 8071 0005 B7       		.byte	-73
 8072 0006 8F       		.byte	-113
 8073 0007 80       		.byte	-128
 8074 0008 D2       		.byte	-46
 8075 0009 D3       		.byte	-45
 8076 000a D4       		.byte	-44
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 236


 8077 000b D8       		.byte	-40
 8078 000c D7       		.byte	-41
 8079 000d DE       		.byte	-34
 8080 000e 8E       		.byte	-114
 8081 000f 8F       		.byte	-113
 8082 0010 90       		.byte	-112
 8083 0011 92       		.byte	-110
 8084 0012 92       		.byte	-110
 8085 0013 E2       		.byte	-30
 8086 0014 99       		.byte	-103
 8087 0015 E3       		.byte	-29
 8088 0016 EA       		.byte	-22
 8089 0017 EB       		.byte	-21
 8090 0018 59       		.byte	89
 8091 0019 99       		.byte	-103
 8092 001a 9A       		.byte	-102
 8093 001b 9D       		.byte	-99
 8094 001c 9C       		.byte	-100
 8095 001d 9D       		.byte	-99
 8096 001e 9E       		.byte	-98
 8097 001f 9F       		.byte	-97
 8098 0020 B5       		.byte	-75
 8099 0021 D6       		.byte	-42
 8100 0022 E0       		.byte	-32
 8101 0023 E9       		.byte	-23
 8102 0024 A5       		.byte	-91
 8103 0025 A5       		.byte	-91
 8104 0026 A6       		.byte	-90
 8105 0027 A7       		.byte	-89
 8106 0028 A8       		.byte	-88
 8107 0029 A9       		.byte	-87
 8108 002a AA       		.byte	-86
 8109 002b AB       		.byte	-85
 8110 002c AC       		.byte	-84
 8111 002d 21       		.byte	33
 8112 002e AE       		.byte	-82
 8113 002f AF       		.byte	-81
 8114 0030 B0       		.byte	-80
 8115 0031 B1       		.byte	-79
 8116 0032 B2       		.byte	-78
 8117 0033 B3       		.byte	-77
 8118 0034 B4       		.byte	-76
 8119 0035 B5       		.byte	-75
 8120 0036 B6       		.byte	-74
 8121 0037 B7       		.byte	-73
 8122 0038 B8       		.byte	-72
 8123 0039 B9       		.byte	-71
 8124 003a BA       		.byte	-70
 8125 003b BB       		.byte	-69
 8126 003c BC       		.byte	-68
 8127 003d BD       		.byte	-67
 8128 003e BE       		.byte	-66
 8129 003f BF       		.byte	-65
 8130 0040 C0       		.byte	-64
 8131 0041 C1       		.byte	-63
 8132 0042 C2       		.byte	-62
 8133 0043 C3       		.byte	-61
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 237


 8134 0044 C4       		.byte	-60
 8135 0045 C5       		.byte	-59
 8136 0046 C7       		.byte	-57
 8137 0047 C7       		.byte	-57
 8138 0048 C8       		.byte	-56
 8139 0049 C9       		.byte	-55
 8140 004a CA       		.byte	-54
 8141 004b CB       		.byte	-53
 8142 004c CC       		.byte	-52
 8143 004d CD       		.byte	-51
 8144 004e CE       		.byte	-50
 8145 004f CF       		.byte	-49
 8146 0050 D0       		.byte	-48
 8147 0051 D1       		.byte	-47
 8148 0052 D2       		.byte	-46
 8149 0053 D3       		.byte	-45
 8150 0054 D4       		.byte	-44
 8151 0055 D5       		.byte	-43
 8152 0056 D6       		.byte	-42
 8153 0057 D7       		.byte	-41
 8154 0058 D8       		.byte	-40
 8155 0059 D9       		.byte	-39
 8156 005a DA       		.byte	-38
 8157 005b DB       		.byte	-37
 8158 005c DC       		.byte	-36
 8159 005d DD       		.byte	-35
 8160 005e DE       		.byte	-34
 8161 005f DF       		.byte	-33
 8162 0060 E0       		.byte	-32
 8163 0061 E1       		.byte	-31
 8164 0062 E2       		.byte	-30
 8165 0063 E3       		.byte	-29
 8166 0064 E5       		.byte	-27
 8167 0065 E5       		.byte	-27
 8168 0066 E6       		.byte	-26
 8169 0067 E7       		.byte	-25
 8170 0068 E7       		.byte	-25
 8171 0069 E9       		.byte	-23
 8172 006a EA       		.byte	-22
 8173 006b EB       		.byte	-21
 8174 006c ED       		.byte	-19
 8175 006d ED       		.byte	-19
 8176 006e EE       		.byte	-18
 8177 006f EF       		.byte	-17
 8178 0070 F0       		.byte	-16
 8179 0071 F1       		.byte	-15
 8180 0072 F2       		.byte	-14
 8181 0073 F3       		.byte	-13
 8182 0074 F4       		.byte	-12
 8183 0075 F5       		.byte	-11
 8184 0076 F6       		.byte	-10
 8185 0077 F7       		.byte	-9
 8186 0078 F8       		.byte	-8
 8187 0079 F9       		.byte	-7
 8188 007a FA       		.byte	-6
 8189 007b FB       		.byte	-5
 8190 007c FC       		.byte	-4
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 238


 8191 007d FD       		.byte	-3
 8192 007e FE       		.byte	-2
 8193 007f FF       		.byte	-1
 8194              		.section	.rodata.create_name.str1.4,"aMS",%progbits,1
 8195              		.align	2
 8196              	.LC0:
 8197 0000 222A2B2C 		.ascii	"\"*+,:;<=>?[]|\177\000"
 8197      3A3B3C3D 
 8197      3E3F5B5D 
 8197      7C7F00
 8198              		.section	.rodata.cst.8377,"a",%progbits
 8199              		.align	2
 8200              		.set	.LANCHOR4,. + 0
 8203              	cst.8377:
 8204 0000 0080     		.short	-32768
 8205 0002 0040     		.short	16384
 8206 0004 0020     		.short	8192
 8207 0006 0010     		.short	4096
 8208 0008 0008     		.short	2048
 8209 000a 0040     		.short	16384
 8210 000c 0020     		.short	8192
 8211 000e 0010     		.short	4096
 8212 0010 0008     		.short	2048
 8213 0012 0004     		.short	1024
 8214 0014 0002     		.short	512
 8215              		.section	.rodata.f_mkfs.str1.4,"aMS",%progbits,1
 8216              		.align	2
 8217              	.LC2:
 8218 0000 EBFE904D 		.ascii	"\353\376\220MSDOS5.0\000"
 8218      53444F53 
 8218      352E3000 
 8219              	.LC3:
 8220 000c 4E4F204E 		.ascii	"NO NAME    FAT32   \000"
 8220      414D4520 
 8220      20202046 
 8220      41543332 
 8220      20202000 
 8221              	.LC4:
 8222 0020 4E4F204E 		.ascii	"NO NAME    FAT     \000"
 8222      414D4520 
 8222      20202046 
 8222      41542020 
 8222      20202000 
 8223              		.section	.rodata.f_setlabel.str1.4,"aMS",%progbits,1
 8224              		.align	2
 8225              	.LC1:
 8226 0000 222A2B2C 		.ascii	"\"*+,.:;<=>?[]|\177\000"
 8226      2E3A3B3C 
 8226      3D3E3F5B 
 8226      5D7C7F00 
 8227              		.section	.rodata.vst.8376,"a",%progbits
 8228              		.align	2
 8229              		.set	.LANCHOR3,. + 0
 8232              	vst.8376:
 8233 0000 0004     		.short	1024
 8234 0002 0002     		.short	512
 8235 0004 0001     		.short	256
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 239


 8236 0006 8000     		.short	128
 8237 0008 4000     		.short	64
 8238 000a 2000     		.short	32
 8239 000c 1000     		.short	16
 8240 000e 0800     		.short	8
 8241 0010 0400     		.short	4
 8242 0012 0200     		.short	2
 8243 0014 0000     		.short	0
 8244              		.text
 8245              	.Letext0:
 8246              		.file 2 "Middlewares/Third_Party/FatFs/Src/integer.h"
 8247              		.file 3 "c:\\program files (x86)\\embedded toolchain\\gnu tools arm embedded\\7 2017-q4-major\\arm
 8248              		.file 4 "c:\\program files (x86)\\embedded toolchain\\gnu tools arm embedded\\7 2017-q4-major\\arm
 8249              		.file 5 "Drivers/CMSIS/Include/core_cm3.h"
 8250              		.file 6 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 8251              		.file 7 "c:\\program files (x86)\\embedded toolchain\\gnu tools arm embedded\\7 2017-q4-major\\arm
 8252              		.file 8 "c:\\program files (x86)\\embedded toolchain\\gnu tools arm embedded\\7 2017-q4-major\\arm
 8253              		.file 9 "c:\\program files (x86)\\embedded toolchain\\gnu tools arm embedded\\7 2017-q4-major\\lib
 8254              		.file 10 "c:\\program files (x86)\\embedded toolchain\\gnu tools arm embedded\\7 2017-q4-major\\ar
 8255              		.file 11 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 8256              		.file 12 "Middlewares/Third_Party/FatFs/Src/ff.h"
 8257              		.file 13 "Middlewares/Third_Party/FatFs/Src/diskio.h"
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 240


DEFINED SYMBOLS
                            *ABS*:00000000 ff.c
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:16     .text.mem_cpy:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:22     .text.mem_cpy:00000000 mem_cpy
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:56     .text.mem_set:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:62     .text.mem_set:00000000 mem_set
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:92     .text.mem_cmp:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:98     .text.mem_cmp:00000000 mem_cmp
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:157    .text.chk_chr:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:163    .text.chk_chr:00000000 chk_chr
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:193    .text.ld_clust:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:199    .text.ld_clust:00000000 ld_clust
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:236    .text.st_clust:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:242    .text.st_clust:00000000 st_clust
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:266    .text.get_fileinfo:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:272    .text.get_fileinfo:00000000 get_fileinfo
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:381    .text.create_name:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:387    .text.create_name:00000000 create_name
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:626    .text.create_name:0000010c $d
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:632    .text.get_ldnumber:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:638    .text.get_ldnumber:00000000 get_ldnumber
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:742    .text.sync_window:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:748    .text.sync_window:00000000 sync_window
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:838    .text.move_window:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:844    .text.move_window:00000000 move_window
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:902    .text.check_fs:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:908    .text.check_fs:00000000 check_fs
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:985    .text.check_fs:00000088 $d
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:991    .text.validate:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:997    .text.validate:00000000 validate
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:1074   .text.find_volume:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:1080   .text.find_volume:00000000 find_volume
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:1615   .text.find_volume:0000035c $d
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:1621   .text.find_volume:00000370 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:1662   .text.sync_fs:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:1668   .text.sync_fs:00000000 sync_fs
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:1777   .text.clust2sect:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:1784   .text.clust2sect:00000000 clust2sect
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:1817   .text.get_fat:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:1824   .text.get_fat:00000000 get_fat
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:2010   .text.dir_sdi:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:2016   .text.dir_sdi:00000000 dir_sdi
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:2172   .text.dir_remove:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:2178   .text.dir_remove:00000000 dir_remove
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:2237   .text.put_fat:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:2244   .text.put_fat:00000000 put_fat
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:2457   .text.create_chain:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:2463   .text.create_chain:00000000 create_chain
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:2645   .text.dir_next:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:2651   .text.dir_next:00000000 dir_next
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:2879   .text.dir_find:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:2885   .text.dir_find:00000000 dir_find
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:2964   .text.follow_path:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:2970   .text.follow_path:00000000 follow_path
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:3093   .text.dir_alloc:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:3099   .text.dir_alloc:00000000 dir_alloc
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:3187   .text.dir_register:00000000 $t
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 241


C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:3193   .text.dir_register:00000000 dir_register
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:3254   .text.dir_read:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:3260   .text.dir_read:00000000 dir_read
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:3355   .text.remove_chain:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:3361   .text.remove_chain:00000000 remove_chain
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:3464   .text.f_mount:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:3471   .text.f_mount:00000000 f_mount
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:3566   .text.f_mount:00000058 $d
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:3571   .text.f_open:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:3578   .text.f_open:00000000 f_open
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:3857   .text.f_read:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:3864   .text.f_read:00000000 f_read
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:4153   .text.f_write:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:4160   .text.f_write:00000000 f_write
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:4499   .text.f_sync:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:4506   .text.f_sync:00000000 f_sync
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:4623   .text.f_close:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:4630   .text.f_close:00000000 f_close
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:4673   .text.f_lseek:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:4680   .text.f_lseek:00000000 f_lseek
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:4972   .text.f_opendir:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:4979   .text.f_opendir:00000000 f_opendir
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:5088   .text.f_closedir:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:5095   .text.f_closedir:00000000 f_closedir
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:5126   .text.f_readdir:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:5133   .text.f_readdir:00000000 f_readdir
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:5237   .text.f_stat:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:5244   .text.f_stat:00000000 f_stat
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:5322   .text.f_getfree:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:5329   .text.f_getfree:00000000 f_getfree
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:5544   .text.f_truncate:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:5551   .text.f_truncate:00000000 f_truncate
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:5712   .text.f_unlink:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:5719   .text.f_unlink:00000000 f_unlink
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:5884   .text.f_mkdir:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:5891   .text.f_mkdir:00000000 f_mkdir
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:6182   .text.f_chmod:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:6189   .text.f_chmod:00000000 f_chmod
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:6282   .text.f_rename:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:6289   .text.f_rename:00000000 f_rename
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:6503   .text.f_utime:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:6510   .text.f_utime:00000000 f_utime
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:6604   .text.f_getlabel:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:6611   .text.f_getlabel:00000000 f_getlabel
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:6767   .text.f_setlabel:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:6774   .text.f_setlabel:00000000 f_setlabel
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:7098   .text.f_setlabel:00000180 $d
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:7104   .text.f_mkfs:00000000 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:7111   .text.f_mkfs:00000000 f_mkfs
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:7543   .text.f_mkfs:00000280 $d
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:7551   .text.f_mkfs:00000294 $t
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:8038   .text.f_mkfs:000005e8 $d
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:8047   .bss.FatFs:00000000 $d
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:8051   .bss.FatFs:00000000 FatFs
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:8054   .bss.Fsid:00000000 $d
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:8058   .bss.Fsid:00000000 Fsid
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:8061   .rodata.ExCvt:00000000 $d
ARM GAS  C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s 			page 242


C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:8065   .rodata.ExCvt:00000000 ExCvt
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:8195   .rodata.create_name.str1.4:00000000 $d
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:8199   .rodata.cst.8377:00000000 $d
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:8203   .rodata.cst.8377:00000000 cst.8377
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:8216   .rodata.f_mkfs.str1.4:00000000 $d
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:8224   .rodata.f_setlabel.str1.4:00000000 $d
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:8228   .rodata.vst.8376:00000000 $d
C:\Users\Patrick\AppData\Local\Temp\ccpKSove.s:8232   .rodata.vst.8376:00000000 vst.8376

UNDEFINED SYMBOLS
disk_write
disk_read
disk_status
disk_initialize
disk_ioctl
